function Zg(n,r){for(var l=0;l<r.length;l++){const p=r[l];if(typeof p!="string"&&!Array.isArray(p)){for(const _ in p)if(_!=="default"&&!(_ in n)){const b=Object.getOwnPropertyDescriptor(p,_);b&&Object.defineProperty(n,_,b.get?b:{enumerable:!0,get:()=>p[_]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))p(_);new MutationObserver(_=>{for(const b of _)if(b.type==="childList")for(const v of b.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&p(v)}).observe(document,{childList:!0,subtree:!0});function l(_){const b={};return _.integrity&&(b.integrity=_.integrity),_.referrerPolicy&&(b.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?b.credentials="include":_.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function p(_){if(_.ep)return;_.ep=!0;const b=l(_);fetch(_.href,b)}})();var J2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sv={exports:{}},Up={},Ev={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=Symbol.for("react.element"),Y2=Symbol.for("react.portal"),Q2=Symbol.for("react.fragment"),eC=Symbol.for("react.strict_mode"),tC=Symbol.for("react.profiler"),nC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),rC=Symbol.for("react.forward_ref"),aC=Symbol.for("react.suspense"),oC=Symbol.for("react.memo"),sC=Symbol.for("react.lazy"),D0=Symbol.iterator;function lC(n){return n===null||typeof n!="object"?null:(n=D0&&n[D0]||n["@@iterator"],typeof n=="function"?n:null)}var Av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tv=Object.assign,Mv={};function wc(n,r,l){this.props=n,this.context=r,this.refs=Mv,this.updater=l||Av}wc.prototype.isReactComponent={};wc.prototype.setState=function(n,r){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,r,"setState")};wc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Iv(){}Iv.prototype=wc.prototype;function Xg(n,r,l){this.props=n,this.context=r,this.refs=Mv,this.updater=l||Av}var Kg=Xg.prototype=new Iv;Kg.constructor=Xg;Tv(Kg,wc.prototype);Kg.isPureReactComponent=!0;var k0=Array.isArray,Pv=Object.prototype.hasOwnProperty,Jg={current:null},zv={key:!0,ref:!0,__self:!0,__source:!0};function Dv(n,r,l){var p,_={},b=null,v=null;if(r!=null)for(p in r.ref!==void 0&&(v=r.ref),r.key!==void 0&&(b=""+r.key),r)Pv.call(r,p)&&!zv.hasOwnProperty(p)&&(_[p]=r[p]);var u=arguments.length-2;if(u===1)_.children=l;else if(1<u){for(var D=Array(u),V=0;V<u;V++)D[V]=arguments[V+2];_.children=D}if(n&&n.defaultProps)for(p in u=n.defaultProps,u)_[p]===void 0&&(_[p]=u[p]);return{$$typeof:Ad,type:n,key:b,ref:v,props:_,_owner:Jg.current}}function cC(n,r){return{$$typeof:Ad,type:n.type,key:r,ref:n.ref,props:n.props,_owner:n._owner}}function Yg(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ad}function uC(n){var r={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(l){return r[l]})}var R0=/\/+/g;function bm(n,r){return typeof n=="object"&&n!==null&&n.key!=null?uC(""+n.key):r.toString(36)}function ep(n,r,l,p,_){var b=typeof n;(b==="undefined"||b==="boolean")&&(n=null);var v=!1;if(n===null)v=!0;else switch(b){case"string":case"number":v=!0;break;case"object":switch(n.$$typeof){case Ad:case Y2:v=!0}}if(v)return v=n,_=_(v),n=p===""?"."+bm(v,0):p,k0(_)?(l="",n!=null&&(l=n.replace(R0,"$&/")+"/"),ep(_,r,l,"",function(V){return V})):_!=null&&(Yg(_)&&(_=cC(_,l+(!_.key||v&&v.key===_.key?"":(""+_.key).replace(R0,"$&/")+"/")+n)),r.push(_)),1;if(v=0,p=p===""?".":p+":",k0(n))for(var u=0;u<n.length;u++){b=n[u];var D=p+bm(b,u);v+=ep(b,r,l,D,_)}else if(D=lC(n),typeof D=="function")for(n=D.call(n),u=0;!(b=n.next()).done;)b=b.value,D=p+bm(b,u++),v+=ep(b,r,l,D,_);else if(b==="object")throw r=String(n),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return v}function Bh(n,r,l){if(n==null)return n;var p=[],_=0;return ep(n,p,"","",function(b){return r.call(l,b,_++)}),p}function dC(n){if(n._status===-1){var r=n._result;r=r(),r.then(function(l){(n._status===0||n._status===-1)&&(n._status=1,n._result=l)},function(l){(n._status===0||n._status===-1)&&(n._status=2,n._result=l)}),n._status===-1&&(n._status=0,n._result=r)}if(n._status===1)return n._result.default;throw n._result}var Xi={current:null},tp={transition:null},hC={ReactCurrentDispatcher:Xi,ReactCurrentBatchConfig:tp,ReactCurrentOwner:Jg};function kv(){throw Error("act(...) is not supported in production builds of React.")}qt.Children={map:Bh,forEach:function(n,r,l){Bh(n,function(){r.apply(this,arguments)},l)},count:function(n){var r=0;return Bh(n,function(){r++}),r},toArray:function(n){return Bh(n,function(r){return r})||[]},only:function(n){if(!Yg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qt.Component=wc;qt.Fragment=Q2;qt.Profiler=tC;qt.PureComponent=Xg;qt.StrictMode=eC;qt.Suspense=aC;qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hC;qt.act=kv;qt.cloneElement=function(n,r,l){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var p=Tv({},n.props),_=n.key,b=n.ref,v=n._owner;if(r!=null){if(r.ref!==void 0&&(b=r.ref,v=Jg.current),r.key!==void 0&&(_=""+r.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(D in r)Pv.call(r,D)&&!zv.hasOwnProperty(D)&&(p[D]=r[D]===void 0&&u!==void 0?u[D]:r[D])}var D=arguments.length-2;if(D===1)p.children=l;else if(1<D){u=Array(D);for(var V=0;V<D;V++)u[V]=arguments[V+2];p.children=u}return{$$typeof:Ad,type:n.type,key:_,ref:b,props:p,_owner:v}};qt.createContext=function(n){return n={$$typeof:iC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:nC,_context:n},n.Consumer=n};qt.createElement=Dv;qt.createFactory=function(n){var r=Dv.bind(null,n);return r.type=n,r};qt.createRef=function(){return{current:null}};qt.forwardRef=function(n){return{$$typeof:rC,render:n}};qt.isValidElement=Yg;qt.lazy=function(n){return{$$typeof:sC,_payload:{_status:-1,_result:n},_init:dC}};qt.memo=function(n,r){return{$$typeof:oC,type:n,compare:r===void 0?null:r}};qt.startTransition=function(n){var r=tp.transition;tp.transition={};try{n()}finally{tp.transition=r}};qt.unstable_act=kv;qt.useCallback=function(n,r){return Xi.current.useCallback(n,r)};qt.useContext=function(n){return Xi.current.useContext(n)};qt.useDebugValue=function(){};qt.useDeferredValue=function(n){return Xi.current.useDeferredValue(n)};qt.useEffect=function(n,r){return Xi.current.useEffect(n,r)};qt.useId=function(){return Xi.current.useId()};qt.useImperativeHandle=function(n,r,l){return Xi.current.useImperativeHandle(n,r,l)};qt.useInsertionEffect=function(n,r){return Xi.current.useInsertionEffect(n,r)};qt.useLayoutEffect=function(n,r){return Xi.current.useLayoutEffect(n,r)};qt.useMemo=function(n,r){return Xi.current.useMemo(n,r)};qt.useReducer=function(n,r,l){return Xi.current.useReducer(n,r,l)};qt.useRef=function(n){return Xi.current.useRef(n)};qt.useState=function(n){return Xi.current.useState(n)};qt.useSyncExternalStore=function(n,r,l){return Xi.current.useSyncExternalStore(n,r,l)};qt.useTransition=function(){return Xi.current.useTransition()};qt.version="18.3.1";Ev.exports=qt;var Me=Ev.exports;const to=Wg(Me),pC=Zg({__proto__:null,default:to},[Me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC=Me,mC=Symbol.for("react.element"),gC=Symbol.for("react.fragment"),yC=Object.prototype.hasOwnProperty,_C=fC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vC={key:!0,ref:!0,__self:!0,__source:!0};function Rv(n,r,l){var p,_={},b=null,v=null;l!==void 0&&(b=""+l),r.key!==void 0&&(b=""+r.key),r.ref!==void 0&&(v=r.ref);for(p in r)yC.call(r,p)&&!vC.hasOwnProperty(p)&&(_[p]=r[p]);if(n&&n.defaultProps)for(p in r=n.defaultProps,r)_[p]===void 0&&(_[p]=r[p]);return{$$typeof:mC,type:n,key:b,ref:v,props:_,_owner:_C.current}}Up.Fragment=gC;Up.jsx=Rv;Up.jsxs=Rv;Sv.exports=Up;var it=Sv.exports,Ym={},Lv={exports:{}},Dr={},Fv={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function r(rt,ut){var bt=rt.length;rt.push(ut);e:for(;0<bt;){var kt=bt-1>>>1,Nt=rt[kt];if(0<_(Nt,ut))rt[kt]=ut,rt[bt]=Nt,bt=kt;else break e}}function l(rt){return rt.length===0?null:rt[0]}function p(rt){if(rt.length===0)return null;var ut=rt[0],bt=rt.pop();if(bt!==ut){rt[0]=bt;e:for(var kt=0,Nt=rt.length,Tn=Nt>>>1;kt<Tn;){var yn=2*(kt+1)-1,Fn=rt[yn],hn=yn+1,an=rt[hn];if(0>_(Fn,bt))hn<Nt&&0>_(an,Fn)?(rt[kt]=an,rt[hn]=bt,kt=hn):(rt[kt]=Fn,rt[yn]=bt,kt=yn);else if(hn<Nt&&0>_(an,bt))rt[kt]=an,rt[hn]=bt,kt=hn;else break e}}return ut}function _(rt,ut){var bt=rt.sortIndex-ut.sortIndex;return bt!==0?bt:rt.id-ut.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;n.unstable_now=function(){return b.now()}}else{var v=Date,u=v.now();n.unstable_now=function(){return v.now()-u}}var D=[],V=[],W=1,j=null,N=3,Te=!1,Ce=!1,we=!1,qe=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(rt){for(var ut=l(V);ut!==null;){if(ut.callback===null)p(V);else if(ut.startTime<=rt)p(V),ut.sortIndex=ut.expirationTime,r(D,ut);else break;ut=l(V)}}function Ae(rt){if(we=!1,ce(rt),!Ce)if(l(D)!==null)Ce=!0,Hn(Re);else{var ut=l(V);ut!==null&&Un(Ae,ut.startTime-rt)}}function Re(rt,ut){Ce=!1,we&&(we=!1,ae(pe),pe=-1),Te=!0;var bt=N;try{for(ce(ut),j=l(D);j!==null&&(!(j.expirationTime>ut)||rt&&!ot());){var kt=j.callback;if(typeof kt=="function"){j.callback=null,N=j.priorityLevel;var Nt=kt(j.expirationTime<=ut);ut=n.unstable_now(),typeof Nt=="function"?j.callback=Nt:j===l(D)&&p(D),ce(ut)}else p(D);j=l(D)}if(j!==null)var Tn=!0;else{var yn=l(V);yn!==null&&Un(Ae,yn.startTime-ut),Tn=!1}return Tn}finally{j=null,N=bt,Te=!1}}var Xe=!1,Qe=null,pe=-1,pt=5,ct=-1;function ot(){return!(n.unstable_now()-ct<pt)}function Xt(){if(Qe!==null){var rt=n.unstable_now();ct=rt;var ut=!0;try{ut=Qe(!0,rt)}finally{ut?Ot():(Xe=!1,Qe=null)}}else Xe=!1}var Ot;if(typeof ie=="function")Ot=function(){ie(Xt)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Ln=Ft.port2;Ft.port1.onmessage=Xt,Ot=function(){Ln.postMessage(null)}}else Ot=function(){qe(Xt,0)};function Hn(rt){Qe=rt,Xe||(Xe=!0,Ot())}function Un(rt,ut){pe=qe(function(){rt(n.unstable_now())},ut)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(rt){rt.callback=null},n.unstable_continueExecution=function(){Ce||Te||(Ce=!0,Hn(Re))},n.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<rt?Math.floor(1e3/rt):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return l(D)},n.unstable_next=function(rt){switch(N){case 1:case 2:case 3:var ut=3;break;default:ut=N}var bt=N;N=ut;try{return rt()}finally{N=bt}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(rt,ut){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var bt=N;N=rt;try{return ut()}finally{N=bt}},n.unstable_scheduleCallback=function(rt,ut,bt){var kt=n.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?kt+bt:kt):bt=kt,rt){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=bt+Nt,rt={id:W++,callback:ut,priorityLevel:rt,startTime:bt,expirationTime:Nt,sortIndex:-1},bt>kt?(rt.sortIndex=bt,r(V,rt),l(D)===null&&rt===l(V)&&(we?(ae(pe),pe=-1):we=!0,Un(Ae,bt-kt))):(rt.sortIndex=Nt,r(D,rt),Ce||Te||(Ce=!0,Hn(Re))),rt},n.unstable_shouldYield=ot,n.unstable_wrapCallback=function(rt){var ut=N;return function(){var bt=N;N=ut;try{return rt.apply(this,arguments)}finally{N=bt}}}})(Bv);Fv.exports=Bv;var xC=Fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=Me,zr=xC;function $e(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ov=new Set,od={};function Js(n,r){fc(n,r),fc(n+"Capture",r)}function fc(n,r){for(od[n]=r,n=0;n<r.length;n++)Ov.add(r[n])}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qm=Object.prototype.hasOwnProperty,wC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L0={},F0={};function CC(n){return Qm.call(F0,n)?!0:Qm.call(L0,n)?!1:wC.test(n)?F0[n]=!0:(L0[n]=!0,!1)}function SC(n,r,l,p){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function EC(n,r,l,p){if(r===null||typeof r>"u"||SC(n,r,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Ki(n,r,l,p,_,b,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=l,this.propertyName=n,this.type=r,this.sanitizeURL=b,this.removeEmptyString=v}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xi[n]=new Ki(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];xi[r]=new Ki(r,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xi[n]=new Ki(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xi[n]=new Ki(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xi[n]=new Ki(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xi[n]=new Ki(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xi[n]=new Ki(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xi[n]=new Ki(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xi[n]=new Ki(n,5,!1,n.toLowerCase(),null,!1,!1)});var Qg=/[\-:]([a-z])/g;function ey(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(Qg,ey);xi[r]=new Ki(r,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(Qg,ey);xi[r]=new Ki(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(Qg,ey);xi[r]=new Ki(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xi[n]=new Ki(n,1,!1,n.toLowerCase(),null,!1,!1)});xi.xlinkHref=new Ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xi[n]=new Ki(n,1,!1,n.toLowerCase(),null,!0,!0)});function ty(n,r,l,p){var _=xi.hasOwnProperty(r)?xi[r]:null;(_!==null?_.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(EC(r,l,_,p)&&(l=null),p||_===null?CC(r)&&(l===null?n.removeAttribute(r):n.setAttribute(r,""+l)):_.mustUseProperty?n[_.propertyName]=l===null?_.type===3?!1:"":l:(r=_.attributeName,p=_.attributeNamespace,l===null?n.removeAttribute(r):(_=_.type,l=_===3||_===4&&l===!0?"":""+l,p?n.setAttributeNS(p,r,l):n.setAttribute(r,l))))}var lo=bC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oh=Symbol.for("react.element"),Xl=Symbol.for("react.portal"),Kl=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),eg=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),tg=Symbol.for("react.suspense"),ng=Symbol.for("react.suspense_list"),ry=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),Vv=Symbol.for("react.offscreen"),B0=Symbol.iterator;function ku(n){return n===null||typeof n!="object"?null:(n=B0&&n[B0]||n["@@iterator"],typeof n=="function"?n:null)}var Rn=Object.assign,wm;function Hu(n){if(wm===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);wm=r&&r[1]||""}return`
`+wm+n}var Cm=!1;function Sm(n,r){if(!n||Cm)return"";Cm=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(V){var p=V}Reflect.construct(n,[],r)}else{try{r.call()}catch(V){p=V}n.call(r.prototype)}else{try{throw Error()}catch(V){p=V}n()}}catch(V){if(V&&p&&typeof V.stack=="string"){for(var _=V.stack.split(`
`),b=p.stack.split(`
`),v=_.length-1,u=b.length-1;1<=v&&0<=u&&_[v]!==b[u];)u--;for(;1<=v&&0<=u;v--,u--)if(_[v]!==b[u]){if(v!==1||u!==1)do if(v--,u--,0>u||_[v]!==b[u]){var D=`
`+_[v].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=v&&0<=u);break}}}finally{Cm=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?Hu(n):""}function AC(n){switch(n.tag){case 5:return Hu(n.type);case 16:return Hu("Lazy");case 13:return Hu("Suspense");case 19:return Hu("SuspenseList");case 0:case 2:case 15:return n=Sm(n.type,!1),n;case 11:return n=Sm(n.type.render,!1),n;case 1:return n=Sm(n.type,!0),n;default:return""}}function ig(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kl:return"Fragment";case Xl:return"Portal";case eg:return"Profiler";case ny:return"StrictMode";case tg:return"Suspense";case ng:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case jv:return(n.displayName||"Context")+".Consumer";case Nv:return(n._context.displayName||"Context")+".Provider";case iy:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ry:return r=n.displayName||null,r!==null?r:ig(n.type)||"Memo";case Ro:r=n._payload,n=n._init;try{return ig(n(r))}catch{}}return null}function TC(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ig(r);case 8:return r===ny?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Wo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Uv(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function MC(n){var r=Uv(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),p=""+n[r];if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var _=l.get,b=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return _.call(this)},set:function(v){p=""+v,b.call(this,v)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(v){p=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Nh(n){n._valueTracker||(n._valueTracker=MC(n))}function $v(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),p="";return n&&(p=Uv(n)?n.checked?"true":"false":n.value),n=p,n!==l?(r.setValue(n),!0):!1}function pp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function rg(n,r){var l=r.checked;return Rn({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function O0(n,r){var l=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;l=Wo(r.value!=null?r.value:l),n._wrapperState={initialChecked:p,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function qv(n,r){r=r.checked,r!=null&&ty(n,"checked",r,!1)}function ag(n,r){qv(n,r);var l=Wo(r.value),p=r.type;if(l!=null)p==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?og(n,r.type,l):r.hasOwnProperty("defaultValue")&&og(n,r.type,Wo(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function N0(n,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,l||r===n.value||(n.value=r),n.defaultValue=r}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function og(n,r,l){(r!=="number"||pp(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Zu=Array.isArray;function lc(n,r,l,p){if(n=n.options,r){r={};for(var _=0;_<l.length;_++)r["$"+l[_]]=!0;for(l=0;l<n.length;l++)_=r.hasOwnProperty("$"+n[l].value),n[l].selected!==_&&(n[l].selected=_),_&&p&&(n[l].defaultSelected=!0)}else{for(l=""+Wo(l),r=null,_=0;_<n.length;_++){if(n[_].value===l){n[_].selected=!0,p&&(n[_].defaultSelected=!0);return}r!==null||n[_].disabled||(r=n[_])}r!==null&&(r.selected=!0)}}function sg(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error($e(91));return Rn({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function j0(n,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error($e(92));if(Zu(l)){if(1<l.length)throw Error($e(93));l=l[0]}r=l}r==null&&(r=""),l=r}n._wrapperState={initialValue:Wo(l)}}function Gv(n,r){var l=Wo(r.value),p=Wo(r.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),r.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),p!=null&&(n.defaultValue=""+p)}function V0(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Hv(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lg(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Hv(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var jh,Zv=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,p,_){MSApp.execUnsafeLocalFunction(function(){return n(r,l,p,_)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(jh=jh||document.createElement("div"),jh.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=jh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function sd(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var Ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IC=["Webkit","ms","Moz","O"];Object.keys(Ju).forEach(function(n){IC.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Ju[r]=Ju[n]})});function Wv(n,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||Ju.hasOwnProperty(n)&&Ju[n]?(""+r).trim():r+"px"}function Xv(n,r){n=n.style;for(var l in r)if(r.hasOwnProperty(l)){var p=l.indexOf("--")===0,_=Wv(l,r[l],p);l==="float"&&(l="cssFloat"),p?n.setProperty(l,_):n[l]=_}}var PC=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cg(n,r){if(r){if(PC[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error($e(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error($e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error($e(61))}if(r.style!=null&&typeof r.style!="object")throw Error($e(62))}}function ug(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dg=null;function ay(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hg=null,cc=null,uc=null;function U0(n){if(n=Id(n)){if(typeof hg!="function")throw Error($e(280));var r=n.stateNode;r&&(r=Zp(r),hg(n.stateNode,n.type,r))}}function Kv(n){cc?uc?uc.push(n):uc=[n]:cc=n}function Jv(){if(cc){var n=cc,r=uc;if(uc=cc=null,U0(n),r)for(n=0;n<r.length;n++)U0(r[n])}}function Yv(n,r){return n(r)}function Qv(){}var Em=!1;function ex(n,r,l){if(Em)return n(r,l);Em=!0;try{return Yv(n,r,l)}finally{Em=!1,(cc!==null||uc!==null)&&(Qv(),Jv())}}function ld(n,r){var l=n.stateNode;if(l===null)return null;var p=Zp(l);if(p===null)return null;l=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error($e(231,r,typeof l));return l}var pg=!1;if(ro)try{var Ru={};Object.defineProperty(Ru,"passive",{get:function(){pg=!0}}),window.addEventListener("test",Ru,Ru),window.removeEventListener("test",Ru,Ru)}catch{pg=!1}function zC(n,r,l,p,_,b,v,u,D){var V=Array.prototype.slice.call(arguments,3);try{r.apply(l,V)}catch(W){this.onError(W)}}var Yu=!1,fp=null,mp=!1,fg=null,DC={onError:function(n){Yu=!0,fp=n}};function kC(n,r,l,p,_,b,v,u,D){Yu=!1,fp=null,zC.apply(DC,arguments)}function RC(n,r,l,p,_,b,v,u,D){if(kC.apply(this,arguments),Yu){if(Yu){var V=fp;Yu=!1,fp=null}else throw Error($e(198));mp||(mp=!0,fg=V)}}function Ys(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,r.flags&4098&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function tx(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function $0(n){if(Ys(n)!==n)throw Error($e(188))}function LC(n){var r=n.alternate;if(!r){if(r=Ys(n),r===null)throw Error($e(188));return r!==n?null:n}for(var l=n,p=r;;){var _=l.return;if(_===null)break;var b=_.alternate;if(b===null){if(p=_.return,p!==null){l=p;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===l)return $0(_),n;if(b===p)return $0(_),r;b=b.sibling}throw Error($e(188))}if(l.return!==p.return)l=_,p=b;else{for(var v=!1,u=_.child;u;){if(u===l){v=!0,l=_,p=b;break}if(u===p){v=!0,p=_,l=b;break}u=u.sibling}if(!v){for(u=b.child;u;){if(u===l){v=!0,l=b,p=_;break}if(u===p){v=!0,p=b,l=_;break}u=u.sibling}if(!v)throw Error($e(189))}}if(l.alternate!==p)throw Error($e(190))}if(l.tag!==3)throw Error($e(188));return l.stateNode.current===l?n:r}function nx(n){return n=LC(n),n!==null?ix(n):null}function ix(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=ix(n);if(r!==null)return r;n=n.sibling}return null}var rx=zr.unstable_scheduleCallback,q0=zr.unstable_cancelCallback,FC=zr.unstable_shouldYield,BC=zr.unstable_requestPaint,Gn=zr.unstable_now,OC=zr.unstable_getCurrentPriorityLevel,oy=zr.unstable_ImmediatePriority,ax=zr.unstable_UserBlockingPriority,gp=zr.unstable_NormalPriority,NC=zr.unstable_LowPriority,ox=zr.unstable_IdlePriority,$p=null,za=null;function jC(n){if(za&&typeof za.onCommitFiberRoot=="function")try{za.onCommitFiberRoot($p,n,void 0,(n.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:$C,VC=Math.log,UC=Math.LN2;function $C(n){return n>>>=0,n===0?32:31-(VC(n)/UC|0)|0}var Vh=64,Uh=4194304;function Wu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yp(n,r){var l=n.pendingLanes;if(l===0)return 0;var p=0,_=n.suspendedLanes,b=n.pingedLanes,v=l&268435455;if(v!==0){var u=v&~_;u!==0?p=Wu(u):(b&=v,b!==0&&(p=Wu(b)))}else v=l&~_,v!==0?p=Wu(v):b!==0&&(p=Wu(b));if(p===0)return 0;if(r!==0&&r!==p&&!(r&_)&&(_=p&-p,b=r&-r,_>=b||_===16&&(b&4194240)!==0))return r;if(p&4&&(p|=l&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=p;0<r;)l=31-ca(r),_=1<<l,p|=n[l],r&=~_;return p}function qC(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GC(n,r){for(var l=n.suspendedLanes,p=n.pingedLanes,_=n.expirationTimes,b=n.pendingLanes;0<b;){var v=31-ca(b),u=1<<v,D=_[v];D===-1?(!(u&l)||u&p)&&(_[v]=qC(u,r)):D<=r&&(n.expiredLanes|=u),b&=~u}}function mg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sx(){var n=Vh;return Vh<<=1,!(Vh&4194240)&&(Vh=64),n}function Am(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function Td(n,r,l){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-ca(r),n[r]=l}function HC(n,r){var l=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<l;){var _=31-ca(l),b=1<<_;r[_]=0,p[_]=-1,n[_]=-1,l&=~b}}function sy(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var p=31-ca(l),_=1<<p;_&r|n[p]&r&&(n[p]|=r),l&=~_}}var rn=0;function lx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var cx,ly,ux,dx,hx,gg=!1,$h=[],jo=null,Vo=null,Uo=null,cd=new Map,ud=new Map,Fo=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(n,r){switch(n){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":cd.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(r.pointerId)}}function Lu(n,r,l,p,_,b){return n===null||n.nativeEvent!==b?(n={blockedOn:r,domEventName:l,eventSystemFlags:p,nativeEvent:b,targetContainers:[_]},r!==null&&(r=Id(r),r!==null&&ly(r)),n):(n.eventSystemFlags|=p,r=n.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),n)}function WC(n,r,l,p,_){switch(r){case"focusin":return jo=Lu(jo,n,r,l,p,_),!0;case"dragenter":return Vo=Lu(Vo,n,r,l,p,_),!0;case"mouseover":return Uo=Lu(Uo,n,r,l,p,_),!0;case"pointerover":var b=_.pointerId;return cd.set(b,Lu(cd.get(b)||null,n,r,l,p,_)),!0;case"gotpointercapture":return b=_.pointerId,ud.set(b,Lu(ud.get(b)||null,n,r,l,p,_)),!0}return!1}function px(n){var r=Bs(n.target);if(r!==null){var l=Ys(r);if(l!==null){if(r=l.tag,r===13){if(r=tx(l),r!==null){n.blockedOn=r,hx(n.priority,function(){ux(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function np(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=yg(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var p=new l.constructor(l.type,l);dg=p,l.target.dispatchEvent(p),dg=null}else return r=Id(l),r!==null&&ly(r),n.blockedOn=l,!1;r.shift()}return!0}function H0(n,r,l){np(n)&&l.delete(r)}function XC(){gg=!1,jo!==null&&np(jo)&&(jo=null),Vo!==null&&np(Vo)&&(Vo=null),Uo!==null&&np(Uo)&&(Uo=null),cd.forEach(H0),ud.forEach(H0)}function Fu(n,r){n.blockedOn===r&&(n.blockedOn=null,gg||(gg=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,XC)))}function dd(n){function r(_){return Fu(_,n)}if(0<$h.length){Fu($h[0],n);for(var l=1;l<$h.length;l++){var p=$h[l];p.blockedOn===n&&(p.blockedOn=null)}}for(jo!==null&&Fu(jo,n),Vo!==null&&Fu(Vo,n),Uo!==null&&Fu(Uo,n),cd.forEach(r),ud.forEach(r),l=0;l<Fo.length;l++)p=Fo[l],p.blockedOn===n&&(p.blockedOn=null);for(;0<Fo.length&&(l=Fo[0],l.blockedOn===null);)px(l),l.blockedOn===null&&Fo.shift()}var dc=lo.ReactCurrentBatchConfig,_p=!0;function KC(n,r,l,p){var _=rn,b=dc.transition;dc.transition=null;try{rn=1,cy(n,r,l,p)}finally{rn=_,dc.transition=b}}function JC(n,r,l,p){var _=rn,b=dc.transition;dc.transition=null;try{rn=4,cy(n,r,l,p)}finally{rn=_,dc.transition=b}}function cy(n,r,l,p){if(_p){var _=yg(n,r,l,p);if(_===null)Fm(n,r,p,vp,l),G0(n,p);else if(WC(_,n,r,l,p))p.stopPropagation();else if(G0(n,p),r&4&&-1<ZC.indexOf(n)){for(;_!==null;){var b=Id(_);if(b!==null&&cx(b),b=yg(n,r,l,p),b===null&&Fm(n,r,p,vp,l),b===_)break;_=b}_!==null&&p.stopPropagation()}else Fm(n,r,p,null,l)}}var vp=null;function yg(n,r,l,p){if(vp=null,n=ay(p),n=Bs(n),n!==null)if(r=Ys(n),r===null)n=null;else if(l=r.tag,l===13){if(n=tx(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return vp=n,null}function fx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OC()){case oy:return 1;case ax:return 4;case gp:case NC:return 16;case ox:return 536870912;default:return 16}default:return 16}}var Oo=null,uy=null,ip=null;function mx(){if(ip)return ip;var n,r=uy,l=r.length,p,_="value"in Oo?Oo.value:Oo.textContent,b=_.length;for(n=0;n<l&&r[n]===_[n];n++);var v=l-n;for(p=1;p<=v&&r[l-p]===_[b-p];p++);return ip=_.slice(n,1<p?1-p:void 0)}function rp(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function qh(){return!0}function Z0(){return!1}function kr(n){function r(l,p,_,b,v){this._reactName=l,this._targetInst=_,this.type=p,this.nativeEvent=b,this.target=v,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(l=n[u],this[u]=l?l(b):b[u]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?qh:Z0,this.isPropagationStopped=Z0,this}return Rn(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qh)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qh)},persist:function(){},isPersistent:qh}),r}var Cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dy=kr(Cc),Md=Rn({},Cc,{view:0,detail:0}),YC=kr(Md),Tm,Mm,Bu,qp=Rn({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bu&&(Bu&&n.type==="mousemove"?(Tm=n.screenX-Bu.screenX,Mm=n.screenY-Bu.screenY):Mm=Tm=0,Bu=n),Tm)},movementY:function(n){return"movementY"in n?n.movementY:Mm}}),W0=kr(qp),QC=Rn({},qp,{dataTransfer:0}),eS=kr(QC),tS=Rn({},Md,{relatedTarget:0}),Im=kr(tS),nS=Rn({},Cc,{animationName:0,elapsedTime:0,pseudoElement:0}),iS=kr(nS),rS=Rn({},Cc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),aS=kr(rS),oS=Rn({},Cc,{data:0}),X0=kr(oS),sS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uS(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=cS[n])?!!r[n]:!1}function hy(){return uS}var dS=Rn({},Md,{key:function(n){if(n.key){var r=sS[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=rp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hy,charCode:function(n){return n.type==="keypress"?rp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?rp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hS=kr(dS),pS=Rn({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=kr(pS),fS=Rn({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hy}),mS=kr(fS),gS=Rn({},Cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),yS=kr(gS),_S=Rn({},qp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vS=kr(_S),xS=[9,13,27,32],py=ro&&"CompositionEvent"in window,Qu=null;ro&&"documentMode"in document&&(Qu=document.documentMode);var bS=ro&&"TextEvent"in window&&!Qu,gx=ro&&(!py||Qu&&8<Qu&&11>=Qu),J0=" ",Y0=!1;function yx(n,r){switch(n){case"keyup":return xS.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _x(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jl=!1;function wS(n,r){switch(n){case"compositionend":return _x(r);case"keypress":return r.which!==32?null:(Y0=!0,J0);case"textInput":return n=r.data,n===J0&&Y0?null:n;default:return null}}function CS(n,r){if(Jl)return n==="compositionend"||!py&&yx(n,r)?(n=mx(),ip=uy=Oo=null,Jl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return gx&&r.locale!=="ko"?null:r.data;default:return null}}var SS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!SS[n.type]:r==="textarea"}function vx(n,r,l,p){Kv(p),r=xp(r,"onChange"),0<r.length&&(l=new dy("onChange","change",null,l,p),n.push({event:l,listeners:r}))}var ed=null,hd=null;function ES(n){Px(n,0)}function Gp(n){var r=ec(n);if($v(r))return n}function AS(n,r){if(n==="change")return r}var xx=!1;if(ro){var Pm;if(ro){var zm="oninput"in document;if(!zm){var e1=document.createElement("div");e1.setAttribute("oninput","return;"),zm=typeof e1.oninput=="function"}Pm=zm}else Pm=!1;xx=Pm&&(!document.documentMode||9<document.documentMode)}function t1(){ed&&(ed.detachEvent("onpropertychange",bx),hd=ed=null)}function bx(n){if(n.propertyName==="value"&&Gp(hd)){var r=[];vx(r,hd,n,ay(n)),ex(ES,r)}}function TS(n,r,l){n==="focusin"?(t1(),ed=r,hd=l,ed.attachEvent("onpropertychange",bx)):n==="focusout"&&t1()}function MS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gp(hd)}function IS(n,r){if(n==="click")return Gp(r)}function PS(n,r){if(n==="input"||n==="change")return Gp(r)}function zS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var da=typeof Object.is=="function"?Object.is:zS;function pd(n,r){if(da(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),p=Object.keys(r);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var _=l[p];if(!Qm.call(r,_)||!da(n[_],r[_]))return!1}return!0}function n1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function i1(n,r){var l=n1(n);n=0;for(var p;l;){if(l.nodeType===3){if(p=n+l.textContent.length,n<=r&&p>=r)return{node:l,offset:r-n};n=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=n1(l)}}function wx(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?wx(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Cx(){for(var n=window,r=pp();r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=pp(n.document)}return r}function fy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function DS(n){var r=Cx(),l=n.focusedElem,p=n.selectionRange;if(r!==l&&l&&l.ownerDocument&&wx(l.ownerDocument.documentElement,l)){if(p!==null&&fy(l)){if(r=p.start,n=p.end,n===void 0&&(n=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(n,l.value.length);else if(n=(r=l.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var _=l.textContent.length,b=Math.min(p.start,_);p=p.end===void 0?b:Math.min(p.end,_),!n.extend&&b>p&&(_=p,p=b,b=_),_=i1(l,b);var v=i1(l,p);_&&v&&(n.rangeCount!==1||n.anchorNode!==_.node||n.anchorOffset!==_.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(_.node,_.offset),n.removeAllRanges(),b>p?(n.addRange(r),n.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),n.addRange(r)))}}for(r=[],n=l;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)n=r[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kS=ro&&"documentMode"in document&&11>=document.documentMode,Yl=null,_g=null,td=null,vg=!1;function r1(n,r,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vg||Yl==null||Yl!==pp(p)||(p=Yl,"selectionStart"in p&&fy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),td&&pd(td,p)||(td=p,p=xp(_g,"onSelect"),0<p.length&&(r=new dy("onSelect","select",null,r,l),n.push({event:r,listeners:p}),r.target=Yl)))}function Gh(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var Ql={animationend:Gh("Animation","AnimationEnd"),animationiteration:Gh("Animation","AnimationIteration"),animationstart:Gh("Animation","AnimationStart"),transitionend:Gh("Transition","TransitionEnd")},Dm={},Sx={};ro&&(Sx=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function Hp(n){if(Dm[n])return Dm[n];if(!Ql[n])return n;var r=Ql[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in Sx)return Dm[n]=r[l];return n}var Ex=Hp("animationend"),Ax=Hp("animationiteration"),Tx=Hp("animationstart"),Mx=Hp("transitionend"),Ix=new Map,a1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(n,r){Ix.set(n,r),Js(r,[n])}for(var km=0;km<a1.length;km++){var Rm=a1[km],RS=Rm.toLowerCase(),LS=Rm[0].toUpperCase()+Rm.slice(1);Ko(RS,"on"+LS)}Ko(Ex,"onAnimationEnd");Ko(Ax,"onAnimationIteration");Ko(Tx,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(Mx,"onTransitionEnd");fc("onMouseEnter",["mouseout","mouseover"]);fc("onMouseLeave",["mouseout","mouseover"]);fc("onPointerEnter",["pointerout","pointerover"]);fc("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function o1(n,r,l){var p=n.type||"unknown-event";n.currentTarget=l,RC(p,r,void 0,n),n.currentTarget=null}function Px(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var p=n[l],_=p.event;p=p.listeners;e:{var b=void 0;if(r)for(var v=p.length-1;0<=v;v--){var u=p[v],D=u.instance,V=u.currentTarget;if(u=u.listener,D!==b&&_.isPropagationStopped())break e;o1(_,u,V),b=D}else for(v=0;v<p.length;v++){if(u=p[v],D=u.instance,V=u.currentTarget,u=u.listener,D!==b&&_.isPropagationStopped())break e;o1(_,u,V),b=D}}}if(mp)throw n=fg,mp=!1,fg=null,n}function wn(n,r){var l=r[Sg];l===void 0&&(l=r[Sg]=new Set);var p=n+"__bubble";l.has(p)||(zx(r,n,2,!1),l.add(p))}function Lm(n,r,l){var p=0;r&&(p|=4),zx(l,n,p,r)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function fd(n){if(!n[Hh]){n[Hh]=!0,Ov.forEach(function(l){l!=="selectionchange"&&(FS.has(l)||Lm(l,!1,n),Lm(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Hh]||(r[Hh]=!0,Lm("selectionchange",!1,r))}}function zx(n,r,l,p){switch(fx(r)){case 1:var _=KC;break;case 4:_=JC;break;default:_=cy}l=_.bind(null,r,l,n),_=void 0,!pg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),p?_!==void 0?n.addEventListener(r,l,{capture:!0,passive:_}):n.addEventListener(r,l,!0):_!==void 0?n.addEventListener(r,l,{passive:_}):n.addEventListener(r,l,!1)}function Fm(n,r,l,p,_){var b=p;if(!(r&1)&&!(r&2)&&p!==null)e:for(;;){if(p===null)return;var v=p.tag;if(v===3||v===4){var u=p.stateNode.containerInfo;if(u===_||u.nodeType===8&&u.parentNode===_)break;if(v===4)for(v=p.return;v!==null;){var D=v.tag;if((D===3||D===4)&&(D=v.stateNode.containerInfo,D===_||D.nodeType===8&&D.parentNode===_))return;v=v.return}for(;u!==null;){if(v=Bs(u),v===null)return;if(D=v.tag,D===5||D===6){p=b=v;continue e}u=u.parentNode}}p=p.return}ex(function(){var V=b,W=ay(l),j=[];e:{var N=Ix.get(n);if(N!==void 0){var Te=dy,Ce=n;switch(n){case"keypress":if(rp(l)===0)break e;case"keydown":case"keyup":Te=hS;break;case"focusin":Ce="focus",Te=Im;break;case"focusout":Ce="blur",Te=Im;break;case"beforeblur":case"afterblur":Te=Im;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=eS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=mS;break;case Ex:case Ax:case Tx:Te=iS;break;case Mx:Te=yS;break;case"scroll":Te=YC;break;case"wheel":Te=vS;break;case"copy":case"cut":case"paste":Te=aS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=K0}var we=(r&4)!==0,qe=!we&&n==="scroll",ae=we?N!==null?N+"Capture":null:N;we=[];for(var ie=V,ce;ie!==null;){ce=ie;var Ae=ce.stateNode;if(ce.tag===5&&Ae!==null&&(ce=Ae,ae!==null&&(Ae=ld(ie,ae),Ae!=null&&we.push(md(ie,Ae,ce)))),qe)break;ie=ie.return}0<we.length&&(N=new Te(N,Ce,null,l,W),j.push({event:N,listeners:we}))}}if(!(r&7)){e:{if(N=n==="mouseover"||n==="pointerover",Te=n==="mouseout"||n==="pointerout",N&&l!==dg&&(Ce=l.relatedTarget||l.fromElement)&&(Bs(Ce)||Ce[ao]))break e;if((Te||N)&&(N=W.window===W?W:(N=W.ownerDocument)?N.defaultView||N.parentWindow:window,Te?(Ce=l.relatedTarget||l.toElement,Te=V,Ce=Ce?Bs(Ce):null,Ce!==null&&(qe=Ys(Ce),Ce!==qe||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Te=null,Ce=V),Te!==Ce)){if(we=W0,Ae="onMouseLeave",ae="onMouseEnter",ie="mouse",(n==="pointerout"||n==="pointerover")&&(we=K0,Ae="onPointerLeave",ae="onPointerEnter",ie="pointer"),qe=Te==null?N:ec(Te),ce=Ce==null?N:ec(Ce),N=new we(Ae,ie+"leave",Te,l,W),N.target=qe,N.relatedTarget=ce,Ae=null,Bs(W)===V&&(we=new we(ae,ie+"enter",Ce,l,W),we.target=ce,we.relatedTarget=qe,Ae=we),qe=Ae,Te&&Ce)t:{for(we=Te,ae=Ce,ie=0,ce=we;ce;ce=Hl(ce))ie++;for(ce=0,Ae=ae;Ae;Ae=Hl(Ae))ce++;for(;0<ie-ce;)we=Hl(we),ie--;for(;0<ce-ie;)ae=Hl(ae),ce--;for(;ie--;){if(we===ae||ae!==null&&we===ae.alternate)break t;we=Hl(we),ae=Hl(ae)}we=null}else we=null;Te!==null&&s1(j,N,Te,we,!1),Ce!==null&&qe!==null&&s1(j,qe,Ce,we,!0)}}e:{if(N=V?ec(V):window,Te=N.nodeName&&N.nodeName.toLowerCase(),Te==="select"||Te==="input"&&N.type==="file")var Re=AS;else if(Q0(N))if(xx)Re=PS;else{Re=MS;var Xe=TS}else(Te=N.nodeName)&&Te.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(Re=IS);if(Re&&(Re=Re(n,V))){vx(j,Re,l,W);break e}Xe&&Xe(n,N,V),n==="focusout"&&(Xe=N._wrapperState)&&Xe.controlled&&N.type==="number"&&og(N,"number",N.value)}switch(Xe=V?ec(V):window,n){case"focusin":(Q0(Xe)||Xe.contentEditable==="true")&&(Yl=Xe,_g=V,td=null);break;case"focusout":td=_g=Yl=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,r1(j,l,W);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":r1(j,l,W)}var Qe;if(py)e:{switch(n){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Jl?yx(n,l)&&(pe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(pe="onCompositionStart");pe&&(gx&&l.locale!=="ko"&&(Jl||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Jl&&(Qe=mx()):(Oo=W,uy="value"in Oo?Oo.value:Oo.textContent,Jl=!0)),Xe=xp(V,pe),0<Xe.length&&(pe=new X0(pe,n,null,l,W),j.push({event:pe,listeners:Xe}),Qe?pe.data=Qe:(Qe=_x(l),Qe!==null&&(pe.data=Qe)))),(Qe=bS?wS(n,l):CS(n,l))&&(V=xp(V,"onBeforeInput"),0<V.length&&(W=new X0("onBeforeInput","beforeinput",null,l,W),j.push({event:W,listeners:V}),W.data=Qe))}Px(j,r)})}function md(n,r,l){return{instance:n,listener:r,currentTarget:l}}function xp(n,r){for(var l=r+"Capture",p=[];n!==null;){var _=n,b=_.stateNode;_.tag===5&&b!==null&&(_=b,b=ld(n,l),b!=null&&p.unshift(md(n,b,_)),b=ld(n,r),b!=null&&p.push(md(n,b,_))),n=n.return}return p}function Hl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function s1(n,r,l,p,_){for(var b=r._reactName,v=[];l!==null&&l!==p;){var u=l,D=u.alternate,V=u.stateNode;if(D!==null&&D===p)break;u.tag===5&&V!==null&&(u=V,_?(D=ld(l,b),D!=null&&v.unshift(md(l,D,u))):_||(D=ld(l,b),D!=null&&v.push(md(l,D,u)))),l=l.return}v.length!==0&&n.push({event:r,listeners:v})}var BS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function l1(n){return(typeof n=="string"?n:""+n).replace(BS,`
`).replace(OS,"")}function Zh(n,r,l){if(r=l1(r),l1(n)!==r&&l)throw Error($e(425))}function bp(){}var xg=null,bg=null;function wg(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Cg=typeof setTimeout=="function"?setTimeout:void 0,NS=typeof clearTimeout=="function"?clearTimeout:void 0,c1=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof c1<"u"?function(n){return c1.resolve(null).then(n).catch(VS)}:Cg;function VS(n){setTimeout(function(){throw n})}function Bm(n,r){var l=r,p=0;do{var _=l.nextSibling;if(n.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(p===0){n.removeChild(_),dd(r);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=_}while(l);dd(r)}function $o(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function u1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return n;r--}else l==="/$"&&r++}n=n.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),Pa="__reactFiber$"+Sc,gd="__reactProps$"+Sc,ao="__reactContainer$"+Sc,Sg="__reactEvents$"+Sc,US="__reactListeners$"+Sc,$S="__reactHandles$"+Sc;function Bs(n){var r=n[Pa];if(r)return r;for(var l=n.parentNode;l;){if(r=l[ao]||l[Pa]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=u1(n);n!==null;){if(l=n[Pa])return l;n=u1(n)}return r}n=l,l=n.parentNode}return null}function Id(n){return n=n[Pa]||n[ao],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ec(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($e(33))}function Zp(n){return n[gd]||null}var Eg=[],tc=-1;function Jo(n){return{current:n}}function Cn(n){0>tc||(n.current=Eg[tc],Eg[tc]=null,tc--)}function gn(n,r){tc++,Eg[tc]=n.current,n.current=r}var Xo={},Ri=Jo(Xo),ar=Jo(!1),qs=Xo;function mc(n,r){var l=n.type.contextTypes;if(!l)return Xo;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var _={},b;for(b in l)_[b]=r[b];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=_),_}function or(n){return n=n.childContextTypes,n!=null}function wp(){Cn(ar),Cn(Ri)}function d1(n,r,l){if(Ri.current!==Xo)throw Error($e(168));gn(Ri,r),gn(ar,l)}function Dx(n,r,l){var p=n.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var _ in p)if(!(_ in r))throw Error($e(108,TC(n)||"Unknown",_));return Rn({},l,p)}function Cp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xo,qs=Ri.current,gn(Ri,n),gn(ar,ar.current),!0}function h1(n,r,l){var p=n.stateNode;if(!p)throw Error($e(169));l?(n=Dx(n,r,qs),p.__reactInternalMemoizedMergedChildContext=n,Cn(ar),Cn(Ri),gn(Ri,n)):Cn(ar),gn(ar,l)}var Ja=null,Wp=!1,Om=!1;function kx(n){Ja===null?Ja=[n]:Ja.push(n)}function qS(n){Wp=!0,kx(n)}function Yo(){if(!Om&&Ja!==null){Om=!0;var n=0,r=rn;try{var l=Ja;for(rn=1;n<l.length;n++){var p=l[n];do p=p(!0);while(p!==null)}Ja=null,Wp=!1}catch(_){throw Ja!==null&&(Ja=Ja.slice(n+1)),rx(oy,Yo),_}finally{rn=r,Om=!1}}return null}var nc=[],ic=0,Sp=null,Ep=0,$r=[],qr=0,Gs=null,Qa=1,eo="";function Rs(n,r){nc[ic++]=Ep,nc[ic++]=Sp,Sp=n,Ep=r}function Rx(n,r,l){$r[qr++]=Qa,$r[qr++]=eo,$r[qr++]=Gs,Gs=n;var p=Qa;n=eo;var _=32-ca(p)-1;p&=~(1<<_),l+=1;var b=32-ca(r)+_;if(30<b){var v=_-_%5;b=(p&(1<<v)-1).toString(32),p>>=v,_-=v,Qa=1<<32-ca(r)+_|l<<_|p,eo=b+n}else Qa=1<<b|l<<_|p,eo=n}function my(n){n.return!==null&&(Rs(n,1),Rx(n,1,0))}function gy(n){for(;n===Sp;)Sp=nc[--ic],nc[ic]=null,Ep=nc[--ic],nc[ic]=null;for(;n===Gs;)Gs=$r[--qr],$r[qr]=null,eo=$r[--qr],$r[qr]=null,Qa=$r[--qr],$r[qr]=null}var Pr=null,Ir=null,An=!1,la=null;function Lx(n,r){var l=Gr(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=n,r=n.deletions,r===null?(n.deletions=[l],n.flags|=16):r.push(l)}function p1(n,r){switch(n.tag){case 5:var l=n.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Pr=n,Ir=$o(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Pr=n,Ir=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=Gs!==null?{id:Qa,overflow:eo}:null,n.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=Gr(18,null,null,0),l.stateNode=r,l.return=n,n.child=l,Pr=n,Ir=null,!0):!1;default:return!1}}function Ag(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tg(n){if(An){var r=Ir;if(r){var l=r;if(!p1(n,r)){if(Ag(n))throw Error($e(418));r=$o(l.nextSibling);var p=Pr;r&&p1(n,r)?Lx(p,l):(n.flags=n.flags&-4097|2,An=!1,Pr=n)}}else{if(Ag(n))throw Error($e(418));n.flags=n.flags&-4097|2,An=!1,Pr=n}}}function f1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Pr=n}function Wh(n){if(n!==Pr)return!1;if(!An)return f1(n),An=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!wg(n.type,n.memoizedProps)),r&&(r=Ir)){if(Ag(n))throw Fx(),Error($e(418));for(;r;)Lx(n,r),r=$o(r.nextSibling)}if(f1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($e(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(r===0){Ir=$o(n.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}n=n.nextSibling}Ir=null}}else Ir=Pr?$o(n.stateNode.nextSibling):null;return!0}function Fx(){for(var n=Ir;n;)n=$o(n.nextSibling)}function gc(){Ir=Pr=null,An=!1}function yy(n){la===null?la=[n]:la.push(n)}var GS=lo.ReactCurrentBatchConfig;function Ou(n,r,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error($e(309));var p=l.stateNode}if(!p)throw Error($e(147,n));var _=p,b=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===b?r.ref:(r=function(v){var u=_.refs;v===null?delete u[b]:u[b]=v},r._stringRef=b,r)}if(typeof n!="string")throw Error($e(284));if(!l._owner)throw Error($e(290,n))}return n}function Xh(n,r){throw n=Object.prototype.toString.call(r),Error($e(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function m1(n){var r=n._init;return r(n._payload)}function Bx(n){function r(ae,ie){if(n){var ce=ae.deletions;ce===null?(ae.deletions=[ie],ae.flags|=16):ce.push(ie)}}function l(ae,ie){if(!n)return null;for(;ie!==null;)r(ae,ie),ie=ie.sibling;return null}function p(ae,ie){for(ae=new Map;ie!==null;)ie.key!==null?ae.set(ie.key,ie):ae.set(ie.index,ie),ie=ie.sibling;return ae}function _(ae,ie){return ae=Zo(ae,ie),ae.index=0,ae.sibling=null,ae}function b(ae,ie,ce){return ae.index=ce,n?(ce=ae.alternate,ce!==null?(ce=ce.index,ce<ie?(ae.flags|=2,ie):ce):(ae.flags|=2,ie)):(ae.flags|=1048576,ie)}function v(ae){return n&&ae.alternate===null&&(ae.flags|=2),ae}function u(ae,ie,ce,Ae){return ie===null||ie.tag!==6?(ie=Gm(ce,ae.mode,Ae),ie.return=ae,ie):(ie=_(ie,ce),ie.return=ae,ie)}function D(ae,ie,ce,Ae){var Re=ce.type;return Re===Kl?W(ae,ie,ce.props.children,Ae,ce.key):ie!==null&&(ie.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ro&&m1(Re)===ie.type)?(Ae=_(ie,ce.props),Ae.ref=Ou(ae,ie,ce),Ae.return=ae,Ae):(Ae=dp(ce.type,ce.key,ce.props,null,ae.mode,Ae),Ae.ref=Ou(ae,ie,ce),Ae.return=ae,Ae)}function V(ae,ie,ce,Ae){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ce.containerInfo||ie.stateNode.implementation!==ce.implementation?(ie=Hm(ce,ae.mode,Ae),ie.return=ae,ie):(ie=_(ie,ce.children||[]),ie.return=ae,ie)}function W(ae,ie,ce,Ae,Re){return ie===null||ie.tag!==7?(ie=$s(ce,ae.mode,Ae,Re),ie.return=ae,ie):(ie=_(ie,ce),ie.return=ae,ie)}function j(ae,ie,ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Gm(""+ie,ae.mode,ce),ie.return=ae,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Oh:return ce=dp(ie.type,ie.key,ie.props,null,ae.mode,ce),ce.ref=Ou(ae,null,ie),ce.return=ae,ce;case Xl:return ie=Hm(ie,ae.mode,ce),ie.return=ae,ie;case Ro:var Ae=ie._init;return j(ae,Ae(ie._payload),ce)}if(Zu(ie)||ku(ie))return ie=$s(ie,ae.mode,ce,null),ie.return=ae,ie;Xh(ae,ie)}return null}function N(ae,ie,ce,Ae){var Re=ie!==null?ie.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Re!==null?null:u(ae,ie,""+ce,Ae);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Oh:return ce.key===Re?D(ae,ie,ce,Ae):null;case Xl:return ce.key===Re?V(ae,ie,ce,Ae):null;case Ro:return Re=ce._init,N(ae,ie,Re(ce._payload),Ae)}if(Zu(ce)||ku(ce))return Re!==null?null:W(ae,ie,ce,Ae,null);Xh(ae,ce)}return null}function Te(ae,ie,ce,Ae,Re){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return ae=ae.get(ce)||null,u(ie,ae,""+Ae,Re);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case Oh:return ae=ae.get(Ae.key===null?ce:Ae.key)||null,D(ie,ae,Ae,Re);case Xl:return ae=ae.get(Ae.key===null?ce:Ae.key)||null,V(ie,ae,Ae,Re);case Ro:var Xe=Ae._init;return Te(ae,ie,ce,Xe(Ae._payload),Re)}if(Zu(Ae)||ku(Ae))return ae=ae.get(ce)||null,W(ie,ae,Ae,Re,null);Xh(ie,Ae)}return null}function Ce(ae,ie,ce,Ae){for(var Re=null,Xe=null,Qe=ie,pe=ie=0,pt=null;Qe!==null&&pe<ce.length;pe++){Qe.index>pe?(pt=Qe,Qe=null):pt=Qe.sibling;var ct=N(ae,Qe,ce[pe],Ae);if(ct===null){Qe===null&&(Qe=pt);break}n&&Qe&&ct.alternate===null&&r(ae,Qe),ie=b(ct,ie,pe),Xe===null?Re=ct:Xe.sibling=ct,Xe=ct,Qe=pt}if(pe===ce.length)return l(ae,Qe),An&&Rs(ae,pe),Re;if(Qe===null){for(;pe<ce.length;pe++)Qe=j(ae,ce[pe],Ae),Qe!==null&&(ie=b(Qe,ie,pe),Xe===null?Re=Qe:Xe.sibling=Qe,Xe=Qe);return An&&Rs(ae,pe),Re}for(Qe=p(ae,Qe);pe<ce.length;pe++)pt=Te(Qe,ae,pe,ce[pe],Ae),pt!==null&&(n&&pt.alternate!==null&&Qe.delete(pt.key===null?pe:pt.key),ie=b(pt,ie,pe),Xe===null?Re=pt:Xe.sibling=pt,Xe=pt);return n&&Qe.forEach(function(ot){return r(ae,ot)}),An&&Rs(ae,pe),Re}function we(ae,ie,ce,Ae){var Re=ku(ce);if(typeof Re!="function")throw Error($e(150));if(ce=Re.call(ce),ce==null)throw Error($e(151));for(var Xe=Re=null,Qe=ie,pe=ie=0,pt=null,ct=ce.next();Qe!==null&&!ct.done;pe++,ct=ce.next()){Qe.index>pe?(pt=Qe,Qe=null):pt=Qe.sibling;var ot=N(ae,Qe,ct.value,Ae);if(ot===null){Qe===null&&(Qe=pt);break}n&&Qe&&ot.alternate===null&&r(ae,Qe),ie=b(ot,ie,pe),Xe===null?Re=ot:Xe.sibling=ot,Xe=ot,Qe=pt}if(ct.done)return l(ae,Qe),An&&Rs(ae,pe),Re;if(Qe===null){for(;!ct.done;pe++,ct=ce.next())ct=j(ae,ct.value,Ae),ct!==null&&(ie=b(ct,ie,pe),Xe===null?Re=ct:Xe.sibling=ct,Xe=ct);return An&&Rs(ae,pe),Re}for(Qe=p(ae,Qe);!ct.done;pe++,ct=ce.next())ct=Te(Qe,ae,pe,ct.value,Ae),ct!==null&&(n&&ct.alternate!==null&&Qe.delete(ct.key===null?pe:ct.key),ie=b(ct,ie,pe),Xe===null?Re=ct:Xe.sibling=ct,Xe=ct);return n&&Qe.forEach(function(Xt){return r(ae,Xt)}),An&&Rs(ae,pe),Re}function qe(ae,ie,ce,Ae){if(typeof ce=="object"&&ce!==null&&ce.type===Kl&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Oh:e:{for(var Re=ce.key,Xe=ie;Xe!==null;){if(Xe.key===Re){if(Re=ce.type,Re===Kl){if(Xe.tag===7){l(ae,Xe.sibling),ie=_(Xe,ce.props.children),ie.return=ae,ae=ie;break e}}else if(Xe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ro&&m1(Re)===Xe.type){l(ae,Xe.sibling),ie=_(Xe,ce.props),ie.ref=Ou(ae,Xe,ce),ie.return=ae,ae=ie;break e}l(ae,Xe);break}else r(ae,Xe);Xe=Xe.sibling}ce.type===Kl?(ie=$s(ce.props.children,ae.mode,Ae,ce.key),ie.return=ae,ae=ie):(Ae=dp(ce.type,ce.key,ce.props,null,ae.mode,Ae),Ae.ref=Ou(ae,ie,ce),Ae.return=ae,ae=Ae)}return v(ae);case Xl:e:{for(Xe=ce.key;ie!==null;){if(ie.key===Xe)if(ie.tag===4&&ie.stateNode.containerInfo===ce.containerInfo&&ie.stateNode.implementation===ce.implementation){l(ae,ie.sibling),ie=_(ie,ce.children||[]),ie.return=ae,ae=ie;break e}else{l(ae,ie);break}else r(ae,ie);ie=ie.sibling}ie=Hm(ce,ae.mode,Ae),ie.return=ae,ae=ie}return v(ae);case Ro:return Xe=ce._init,qe(ae,ie,Xe(ce._payload),Ae)}if(Zu(ce))return Ce(ae,ie,ce,Ae);if(ku(ce))return we(ae,ie,ce,Ae);Xh(ae,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ie!==null&&ie.tag===6?(l(ae,ie.sibling),ie=_(ie,ce),ie.return=ae,ae=ie):(l(ae,ie),ie=Gm(ce,ae.mode,Ae),ie.return=ae,ae=ie),v(ae)):l(ae,ie)}return qe}var yc=Bx(!0),Ox=Bx(!1),Ap=Jo(null),Tp=null,rc=null,_y=null;function vy(){_y=rc=Tp=null}function xy(n){var r=Ap.current;Cn(Ap),n._currentValue=r}function Mg(n,r,l){for(;n!==null;){var p=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),n===l)break;n=n.return}}function hc(n,r){Tp=n,_y=rc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&r&&(rr=!0),n.firstContext=null)}function Zr(n){var r=n._currentValue;if(_y!==n)if(n={context:n,memoizedValue:r,next:null},rc===null){if(Tp===null)throw Error($e(308));rc=n,Tp.dependencies={lanes:0,firstContext:n}}else rc=rc.next=n;return r}var Os=null;function by(n){Os===null?Os=[n]:Os.push(n)}function Nx(n,r,l,p){var _=r.interleaved;return _===null?(l.next=l,by(r)):(l.next=_.next,_.next=l),r.interleaved=l,oo(n,p)}function oo(n,r){n.lanes|=r;var l=n.alternate;for(l!==null&&(l.lanes|=r),l=n,n=n.return;n!==null;)n.childLanes|=r,l=n.alternate,l!==null&&(l.childLanes|=r),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Lo=!1;function wy(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jx(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function no(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function qo(n,r,l){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,Wt&2){var _=p.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),p.pending=r,oo(n,l)}return _=p.interleaved,_===null?(r.next=r,by(p)):(r.next=_.next,_.next=r),p.interleaved=r,oo(n,l)}function ap(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var p=r.lanes;p&=n.pendingLanes,l|=p,r.lanes=l,sy(n,l)}}function g1(n,r){var l=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var _=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};b===null?_=b=v:b=b.next=v,l=l.next}while(l!==null);b===null?_=b=r:b=b.next=r}else _=b=r;l={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:p.shared,effects:p.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}function Mp(n,r,l,p){var _=n.updateQueue;Lo=!1;var b=_.firstBaseUpdate,v=_.lastBaseUpdate,u=_.shared.pending;if(u!==null){_.shared.pending=null;var D=u,V=D.next;D.next=null,v===null?b=V:v.next=V,v=D;var W=n.alternate;W!==null&&(W=W.updateQueue,u=W.lastBaseUpdate,u!==v&&(u===null?W.firstBaseUpdate=V:u.next=V,W.lastBaseUpdate=D))}if(b!==null){var j=_.baseState;v=0,W=V=D=null,u=b;do{var N=u.lane,Te=u.eventTime;if((p&N)===N){W!==null&&(W=W.next={eventTime:Te,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var Ce=n,we=u;switch(N=r,Te=l,we.tag){case 1:if(Ce=we.payload,typeof Ce=="function"){j=Ce.call(Te,j,N);break e}j=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=we.payload,N=typeof Ce=="function"?Ce.call(Te,j,N):Ce,N==null)break e;j=Rn({},j,N);break e;case 2:Lo=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,N=_.effects,N===null?_.effects=[u]:N.push(u))}else Te={eventTime:Te,lane:N,tag:u.tag,payload:u.payload,callback:u.callback,next:null},W===null?(V=W=Te,D=j):W=W.next=Te,v|=N;if(u=u.next,u===null){if(u=_.shared.pending,u===null)break;N=u,u=N.next,N.next=null,_.lastBaseUpdate=N,_.shared.pending=null}}while(!0);if(W===null&&(D=j),_.baseState=D,_.firstBaseUpdate=V,_.lastBaseUpdate=W,r=_.shared.interleaved,r!==null){_=r;do v|=_.lane,_=_.next;while(_!==r)}else b===null&&(_.shared.lanes=0);Zs|=v,n.lanes=v,n.memoizedState=j}}function y1(n,r,l){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var p=n[r],_=p.callback;if(_!==null){if(p.callback=null,p=l,typeof _!="function")throw Error($e(191,_));_.call(p)}}}var Pd={},Da=Jo(Pd),yd=Jo(Pd),_d=Jo(Pd);function Ns(n){if(n===Pd)throw Error($e(174));return n}function Cy(n,r){switch(gn(_d,r),gn(yd,n),gn(Da,Pd),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:lg(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=lg(r,n)}Cn(Da),gn(Da,r)}function _c(){Cn(Da),Cn(yd),Cn(_d)}function Vx(n){Ns(_d.current);var r=Ns(Da.current),l=lg(r,n.type);r!==l&&(gn(yd,n),gn(Da,l))}function Sy(n){yd.current===n&&(Cn(Da),Cn(yd))}var Dn=Jo(0);function Ip(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Nm=[];function Ey(){for(var n=0;n<Nm.length;n++)Nm[n]._workInProgressVersionPrimary=null;Nm.length=0}var op=lo.ReactCurrentDispatcher,jm=lo.ReactCurrentBatchConfig,Hs=0,kn=null,ti=null,di=null,Pp=!1,nd=!1,vd=0,HS=0;function zi(){throw Error($e(321))}function Ay(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!da(n[l],r[l]))return!1;return!0}function Ty(n,r,l,p,_,b){if(Hs=b,kn=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,op.current=n===null||n.memoizedState===null?KS:JS,n=l(p,_),nd){b=0;do{if(nd=!1,vd=0,25<=b)throw Error($e(301));b+=1,di=ti=null,r.updateQueue=null,op.current=YS,n=l(p,_)}while(nd)}if(op.current=zp,r=ti!==null&&ti.next!==null,Hs=0,di=ti=kn=null,Pp=!1,r)throw Error($e(300));return n}function My(){var n=vd!==0;return vd=0,n}function Ia(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?kn.memoizedState=di=n:di=di.next=n,di}function Wr(){if(ti===null){var n=kn.alternate;n=n!==null?n.memoizedState:null}else n=ti.next;var r=di===null?kn.memoizedState:di.next;if(r!==null)di=r,ti=n;else{if(n===null)throw Error($e(310));ti=n,n={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},di===null?kn.memoizedState=di=n:di=di.next=n}return di}function xd(n,r){return typeof r=="function"?r(n):r}function Vm(n){var r=Wr(),l=r.queue;if(l===null)throw Error($e(311));l.lastRenderedReducer=n;var p=ti,_=p.baseQueue,b=l.pending;if(b!==null){if(_!==null){var v=_.next;_.next=b.next,b.next=v}p.baseQueue=_=b,l.pending=null}if(_!==null){b=_.next,p=p.baseState;var u=v=null,D=null,V=b;do{var W=V.lane;if((Hs&W)===W)D!==null&&(D=D.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),p=V.hasEagerState?V.eagerState:n(p,V.action);else{var j={lane:W,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};D===null?(u=D=j,v=p):D=D.next=j,kn.lanes|=W,Zs|=W}V=V.next}while(V!==null&&V!==b);D===null?v=p:D.next=u,da(p,r.memoizedState)||(rr=!0),r.memoizedState=p,r.baseState=v,r.baseQueue=D,l.lastRenderedState=p}if(n=l.interleaved,n!==null){_=n;do b=_.lane,kn.lanes|=b,Zs|=b,_=_.next;while(_!==n)}else _===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function Um(n){var r=Wr(),l=r.queue;if(l===null)throw Error($e(311));l.lastRenderedReducer=n;var p=l.dispatch,_=l.pending,b=r.memoizedState;if(_!==null){l.pending=null;var v=_=_.next;do b=n(b,v.action),v=v.next;while(v!==_);da(b,r.memoizedState)||(rr=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),l.lastRenderedState=b}return[b,p]}function Ux(){}function $x(n,r){var l=kn,p=Wr(),_=r(),b=!da(p.memoizedState,_);if(b&&(p.memoizedState=_,rr=!0),p=p.queue,Iy(Hx.bind(null,l,p,n),[n]),p.getSnapshot!==r||b||di!==null&&di.memoizedState.tag&1){if(l.flags|=2048,bd(9,Gx.bind(null,l,p,_,r),void 0,null),hi===null)throw Error($e(349));Hs&30||qx(l,r,_)}return _}function qx(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=kn.updateQueue,r===null?(r={lastEffect:null,stores:null},kn.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function Gx(n,r,l,p){r.value=l,r.getSnapshot=p,Zx(r)&&Wx(n)}function Hx(n,r,l){return l(function(){Zx(r)&&Wx(n)})}function Zx(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!da(n,l)}catch{return!0}}function Wx(n){var r=oo(n,1);r!==null&&ua(r,n,1,-1)}function _1(n){var r=Ia();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:n},r.queue=n,n=n.dispatch=XS.bind(null,kn,n),[r.memoizedState,n]}function bd(n,r,l,p){return n={tag:n,create:r,destroy:l,deps:p,next:null},r=kn.updateQueue,r===null?(r={lastEffect:null,stores:null},kn.updateQueue=r,r.lastEffect=n.next=n):(l=r.lastEffect,l===null?r.lastEffect=n.next=n:(p=l.next,l.next=n,n.next=p,r.lastEffect=n)),n}function Xx(){return Wr().memoizedState}function sp(n,r,l,p){var _=Ia();kn.flags|=n,_.memoizedState=bd(1|r,l,void 0,p===void 0?null:p)}function Xp(n,r,l,p){var _=Wr();p=p===void 0?null:p;var b=void 0;if(ti!==null){var v=ti.memoizedState;if(b=v.destroy,p!==null&&Ay(p,v.deps)){_.memoizedState=bd(r,l,b,p);return}}kn.flags|=n,_.memoizedState=bd(1|r,l,b,p)}function v1(n,r){return sp(8390656,8,n,r)}function Iy(n,r){return Xp(2048,8,n,r)}function Kx(n,r){return Xp(4,2,n,r)}function Jx(n,r){return Xp(4,4,n,r)}function Yx(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Qx(n,r,l){return l=l!=null?l.concat([n]):null,Xp(4,4,Yx.bind(null,r,n),l)}function Py(){}function eb(n,r){var l=Wr();r=r===void 0?null:r;var p=l.memoizedState;return p!==null&&r!==null&&Ay(r,p[1])?p[0]:(l.memoizedState=[n,r],n)}function tb(n,r){var l=Wr();r=r===void 0?null:r;var p=l.memoizedState;return p!==null&&r!==null&&Ay(r,p[1])?p[0]:(n=n(),l.memoizedState=[n,r],n)}function nb(n,r,l){return Hs&21?(da(l,r)||(l=sx(),kn.lanes|=l,Zs|=l,n.baseState=!0),r):(n.baseState&&(n.baseState=!1,rr=!0),n.memoizedState=l)}function ZS(n,r){var l=rn;rn=l!==0&&4>l?l:4,n(!0);var p=jm.transition;jm.transition={};try{n(!1),r()}finally{rn=l,jm.transition=p}}function ib(){return Wr().memoizedState}function WS(n,r,l){var p=Ho(n);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},rb(n))ab(r,l);else if(l=Nx(n,r,l,p),l!==null){var _=Wi();ua(l,n,p,_),ob(l,r,p)}}function XS(n,r,l){var p=Ho(n),_={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(rb(n))ab(r,_);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var v=r.lastRenderedState,u=b(v,l);if(_.hasEagerState=!0,_.eagerState=u,da(u,v)){var D=r.interleaved;D===null?(_.next=_,by(r)):(_.next=D.next,D.next=_),r.interleaved=_;return}}catch{}finally{}l=Nx(n,r,_,p),l!==null&&(_=Wi(),ua(l,n,p,_),ob(l,r,p))}}function rb(n){var r=n.alternate;return n===kn||r!==null&&r===kn}function ab(n,r){nd=Pp=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function ob(n,r,l){if(l&4194240){var p=r.lanes;p&=n.pendingLanes,l|=p,r.lanes=l,sy(n,l)}}var zp={readContext:Zr,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},KS={readContext:Zr,useCallback:function(n,r){return Ia().memoizedState=[n,r===void 0?null:r],n},useContext:Zr,useEffect:v1,useImperativeHandle:function(n,r,l){return l=l!=null?l.concat([n]):null,sp(4194308,4,Yx.bind(null,r,n),l)},useLayoutEffect:function(n,r){return sp(4194308,4,n,r)},useInsertionEffect:function(n,r){return sp(4,2,n,r)},useMemo:function(n,r){var l=Ia();return r=r===void 0?null:r,n=n(),l.memoizedState=[n,r],n},useReducer:function(n,r,l){var p=Ia();return r=l!==void 0?l(r):r,p.memoizedState=p.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},p.queue=n,n=n.dispatch=WS.bind(null,kn,n),[p.memoizedState,n]},useRef:function(n){var r=Ia();return n={current:n},r.memoizedState=n},useState:_1,useDebugValue:Py,useDeferredValue:function(n){return Ia().memoizedState=n},useTransition:function(){var n=_1(!1),r=n[0];return n=ZS.bind(null,n[1]),Ia().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,l){var p=kn,_=Ia();if(An){if(l===void 0)throw Error($e(407));l=l()}else{if(l=r(),hi===null)throw Error($e(349));Hs&30||qx(p,r,l)}_.memoizedState=l;var b={value:l,getSnapshot:r};return _.queue=b,v1(Hx.bind(null,p,b,n),[n]),p.flags|=2048,bd(9,Gx.bind(null,p,b,l,r),void 0,null),l},useId:function(){var n=Ia(),r=hi.identifierPrefix;if(An){var l=eo,p=Qa;l=(p&~(1<<32-ca(p)-1)).toString(32)+l,r=":"+r+"R"+l,l=vd++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=HS++,r=":"+r+"r"+l.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},JS={readContext:Zr,useCallback:eb,useContext:Zr,useEffect:Iy,useImperativeHandle:Qx,useInsertionEffect:Kx,useLayoutEffect:Jx,useMemo:tb,useReducer:Vm,useRef:Xx,useState:function(){return Vm(xd)},useDebugValue:Py,useDeferredValue:function(n){var r=Wr();return nb(r,ti.memoizedState,n)},useTransition:function(){var n=Vm(xd)[0],r=Wr().memoizedState;return[n,r]},useMutableSource:Ux,useSyncExternalStore:$x,useId:ib,unstable_isNewReconciler:!1},YS={readContext:Zr,useCallback:eb,useContext:Zr,useEffect:Iy,useImperativeHandle:Qx,useInsertionEffect:Kx,useLayoutEffect:Jx,useMemo:tb,useReducer:Um,useRef:Xx,useState:function(){return Um(xd)},useDebugValue:Py,useDeferredValue:function(n){var r=Wr();return ti===null?r.memoizedState=n:nb(r,ti.memoizedState,n)},useTransition:function(){var n=Um(xd)[0],r=Wr().memoizedState;return[n,r]},useMutableSource:Ux,useSyncExternalStore:$x,useId:ib,unstable_isNewReconciler:!1};function aa(n,r){if(n&&n.defaultProps){r=Rn({},r),n=n.defaultProps;for(var l in n)r[l]===void 0&&(r[l]=n[l]);return r}return r}function Ig(n,r,l,p){r=n.memoizedState,l=l(p,r),l=l==null?r:Rn({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Kp={isMounted:function(n){return(n=n._reactInternals)?Ys(n)===n:!1},enqueueSetState:function(n,r,l){n=n._reactInternals;var p=Wi(),_=Ho(n),b=no(p,_);b.payload=r,l!=null&&(b.callback=l),r=qo(n,b,_),r!==null&&(ua(r,n,_,p),ap(r,n,_))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var p=Wi(),_=Ho(n),b=no(p,_);b.tag=1,b.payload=r,l!=null&&(b.callback=l),r=qo(n,b,_),r!==null&&(ua(r,n,_,p),ap(r,n,_))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=Wi(),p=Ho(n),_=no(l,p);_.tag=2,r!=null&&(_.callback=r),r=qo(n,_,p),r!==null&&(ua(r,n,p,l),ap(r,n,p))}};function x1(n,r,l,p,_,b,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,b,v):r.prototype&&r.prototype.isPureReactComponent?!pd(l,p)||!pd(_,b):!0}function sb(n,r,l){var p=!1,_=Xo,b=r.contextType;return typeof b=="object"&&b!==null?b=Zr(b):(_=or(r)?qs:Ri.current,p=r.contextTypes,b=(p=p!=null)?mc(n,_):Xo),r=new r(l,b),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kp,n.stateNode=r,r._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=_,n.__reactInternalMemoizedMaskedChildContext=b),r}function b1(n,r,l,p){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,p),r.state!==n&&Kp.enqueueReplaceState(r,r.state,null)}function Pg(n,r,l,p){var _=n.stateNode;_.props=l,_.state=n.memoizedState,_.refs={},wy(n);var b=r.contextType;typeof b=="object"&&b!==null?_.context=Zr(b):(b=or(r)?qs:Ri.current,_.context=mc(n,b)),_.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Ig(n,r,b,l),_.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(r=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),r!==_.state&&Kp.enqueueReplaceState(_,_.state,null),Mp(n,l,_,p),_.state=n.memoizedState),typeof _.componentDidMount=="function"&&(n.flags|=4194308)}function vc(n,r){try{var l="",p=r;do l+=AC(p),p=p.return;while(p);var _=l}catch(b){_=`
Error generating stack: `+b.message+`
`+b.stack}return{value:n,source:r,stack:_,digest:null}}function $m(n,r,l){return{value:n,source:null,stack:l??null,digest:r??null}}function zg(n,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function lb(n,r,l){l=no(-1,l),l.tag=3,l.payload={element:null};var p=r.value;return l.callback=function(){kp||(kp=!0,Vg=p),zg(n,r)},l}function cb(n,r,l){l=no(-1,l),l.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var _=r.value;l.payload=function(){return p(_)},l.callback=function(){zg(n,r)}}var b=n.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(l.callback=function(){zg(n,r),typeof p!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),l}function w1(n,r,l){var p=n.pingCache;if(p===null){p=n.pingCache=new QS;var _=new Set;p.set(r,_)}else _=p.get(r),_===void 0&&(_=new Set,p.set(r,_));_.has(l)||(_.add(l),n=p3.bind(null,n,r,l),r.then(n,n))}function C1(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function S1(n,r,l,p,_){return n.mode&1?(n.flags|=65536,n.lanes=_,n):(n===r?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=no(-1,1),r.tag=2,qo(l,r,1))),l.lanes|=1),n)}var e3=lo.ReactCurrentOwner,rr=!1;function Zi(n,r,l,p){r.child=n===null?Ox(r,null,l,p):yc(r,n.child,l,p)}function E1(n,r,l,p,_){l=l.render;var b=r.ref;return hc(r,_),p=Ty(n,r,l,p,b,_),l=My(),n!==null&&!rr?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~_,so(n,r,_)):(An&&l&&my(r),r.flags|=1,Zi(n,r,p,_),r.child)}function A1(n,r,l,p,_){if(n===null){var b=l.type;return typeof b=="function"&&!Oy(b)&&b.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=b,ub(n,r,b,p,_)):(n=dp(l.type,null,p,r,r.mode,_),n.ref=r.ref,n.return=r,r.child=n)}if(b=n.child,!(n.lanes&_)){var v=b.memoizedProps;if(l=l.compare,l=l!==null?l:pd,l(v,p)&&n.ref===r.ref)return so(n,r,_)}return r.flags|=1,n=Zo(b,p),n.ref=r.ref,n.return=r,r.child=n}function ub(n,r,l,p,_){if(n!==null){var b=n.memoizedProps;if(pd(b,p)&&n.ref===r.ref)if(rr=!1,r.pendingProps=p=b,(n.lanes&_)!==0)n.flags&131072&&(rr=!0);else return r.lanes=n.lanes,so(n,r,_)}return Dg(n,r,l,p,_)}function db(n,r,l){var p=r.pendingProps,_=p.children,b=n!==null?n.memoizedState:null;if(p.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(oc,Tr),Tr|=l;else{if(!(l&1073741824))return n=b!==null?b.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,gn(oc,Tr),Tr|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:l,gn(oc,Tr),Tr|=p}else b!==null?(p=b.baseLanes|l,r.memoizedState=null):p=l,gn(oc,Tr),Tr|=p;return Zi(n,r,_,l),r.child}function hb(n,r){var l=r.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function Dg(n,r,l,p,_){var b=or(l)?qs:Ri.current;return b=mc(r,b),hc(r,_),l=Ty(n,r,l,p,b,_),p=My(),n!==null&&!rr?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~_,so(n,r,_)):(An&&p&&my(r),r.flags|=1,Zi(n,r,l,_),r.child)}function T1(n,r,l,p,_){if(or(l)){var b=!0;Cp(r)}else b=!1;if(hc(r,_),r.stateNode===null)lp(n,r),sb(r,l,p),Pg(r,l,p,_),p=!0;else if(n===null){var v=r.stateNode,u=r.memoizedProps;v.props=u;var D=v.context,V=l.contextType;typeof V=="object"&&V!==null?V=Zr(V):(V=or(l)?qs:Ri.current,V=mc(r,V));var W=l.getDerivedStateFromProps,j=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function";j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(u!==p||D!==V)&&b1(r,v,p,V),Lo=!1;var N=r.memoizedState;v.state=N,Mp(r,p,v,_),D=r.memoizedState,u!==p||N!==D||ar.current||Lo?(typeof W=="function"&&(Ig(r,l,W,p),D=r.memoizedState),(u=Lo||x1(r,l,u,p,N,D,V))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=D),v.props=p,v.state=D,v.context=V,p=u):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{v=r.stateNode,jx(n,r),u=r.memoizedProps,V=r.type===r.elementType?u:aa(r.type,u),v.props=V,j=r.pendingProps,N=v.context,D=l.contextType,typeof D=="object"&&D!==null?D=Zr(D):(D=or(l)?qs:Ri.current,D=mc(r,D));var Te=l.getDerivedStateFromProps;(W=typeof Te=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(u!==j||N!==D)&&b1(r,v,p,D),Lo=!1,N=r.memoizedState,v.state=N,Mp(r,p,v,_);var Ce=r.memoizedState;u!==j||N!==Ce||ar.current||Lo?(typeof Te=="function"&&(Ig(r,l,Te,p),Ce=r.memoizedState),(V=Lo||x1(r,l,V,p,N,Ce,D)||!1)?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(p,Ce,D),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(p,Ce,D)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=Ce),v.props=p,v.state=Ce,v.context=D,p=V):(typeof v.componentDidUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(r.flags|=1024),p=!1)}return kg(n,r,l,p,b,_)}function kg(n,r,l,p,_,b){hb(n,r);var v=(r.flags&128)!==0;if(!p&&!v)return _&&h1(r,l,!1),so(n,r,b);p=r.stateNode,e3.current=r;var u=v&&typeof l.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,n!==null&&v?(r.child=yc(r,n.child,null,b),r.child=yc(r,null,u,b)):Zi(n,r,u,b),r.memoizedState=p.state,_&&h1(r,l,!0),r.child}function pb(n){var r=n.stateNode;r.pendingContext?d1(n,r.pendingContext,r.pendingContext!==r.context):r.context&&d1(n,r.context,!1),Cy(n,r.containerInfo)}function M1(n,r,l,p,_){return gc(),yy(_),r.flags|=256,Zi(n,r,l,p),r.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function Lg(n){return{baseLanes:n,cachePool:null,transitions:null}}function fb(n,r,l){var p=r.pendingProps,_=Dn.current,b=!1,v=(r.flags&128)!==0,u;if((u=v)||(u=n!==null&&n.memoizedState===null?!1:(_&2)!==0),u?(b=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(_|=1),gn(Dn,_&1),n===null)return Tg(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(r.mode&1?n.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(v=p.children,n=p.fallback,b?(p=r.mode,b=r.child,v={mode:"hidden",children:v},!(p&1)&&b!==null?(b.childLanes=0,b.pendingProps=v):b=Qp(v,p,0,null),n=$s(n,p,l,null),b.return=r,n.return=r,b.sibling=n,r.child=b,r.child.memoizedState=Lg(l),r.memoizedState=Rg,n):zy(r,v));if(_=n.memoizedState,_!==null&&(u=_.dehydrated,u!==null))return t3(n,r,v,p,u,_,l);if(b){b=p.fallback,v=r.mode,_=n.child,u=_.sibling;var D={mode:"hidden",children:p.children};return!(v&1)&&r.child!==_?(p=r.child,p.childLanes=0,p.pendingProps=D,r.deletions=null):(p=Zo(_,D),p.subtreeFlags=_.subtreeFlags&14680064),u!==null?b=Zo(u,b):(b=$s(b,v,l,null),b.flags|=2),b.return=r,p.return=r,p.sibling=b,r.child=p,p=b,b=r.child,v=n.child.memoizedState,v=v===null?Lg(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},b.memoizedState=v,b.childLanes=n.childLanes&~l,r.memoizedState=Rg,p}return b=n.child,n=b.sibling,p=Zo(b,{mode:"visible",children:p.children}),!(r.mode&1)&&(p.lanes=l),p.return=r,p.sibling=null,n!==null&&(l=r.deletions,l===null?(r.deletions=[n],r.flags|=16):l.push(n)),r.child=p,r.memoizedState=null,p}function zy(n,r){return r=Qp({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Kh(n,r,l,p){return p!==null&&yy(p),yc(r,n.child,null,l),n=zy(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function t3(n,r,l,p,_,b,v){if(l)return r.flags&256?(r.flags&=-257,p=$m(Error($e(422))),Kh(n,r,v,p)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(b=p.fallback,_=r.mode,p=Qp({mode:"visible",children:p.children},_,0,null),b=$s(b,_,v,null),b.flags|=2,p.return=r,b.return=r,p.sibling=b,r.child=p,r.mode&1&&yc(r,n.child,null,v),r.child.memoizedState=Lg(v),r.memoizedState=Rg,b);if(!(r.mode&1))return Kh(n,r,v,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var u=p.dgst;return p=u,b=Error($e(419)),p=$m(b,p,void 0),Kh(n,r,v,p)}if(u=(v&n.childLanes)!==0,rr||u){if(p=hi,p!==null){switch(v&-v){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(p.suspendedLanes|v)?0:_,_!==0&&_!==b.retryLane&&(b.retryLane=_,oo(n,_),ua(p,n,_,-1))}return By(),p=$m(Error($e(421))),Kh(n,r,v,p)}return _.data==="$?"?(r.flags|=128,r.child=n.child,r=f3.bind(null,n),_._reactRetry=r,null):(n=b.treeContext,Ir=$o(_.nextSibling),Pr=r,An=!0,la=null,n!==null&&($r[qr++]=Qa,$r[qr++]=eo,$r[qr++]=Gs,Qa=n.id,eo=n.overflow,Gs=r),r=zy(r,p.children),r.flags|=4096,r)}function I1(n,r,l){n.lanes|=r;var p=n.alternate;p!==null&&(p.lanes|=r),Mg(n.return,r,l)}function qm(n,r,l,p,_){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:_}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=l,b.tailMode=_)}function mb(n,r,l){var p=r.pendingProps,_=p.revealOrder,b=p.tail;if(Zi(n,r,p.children,l),p=Dn.current,p&2)p=p&1|2,r.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&I1(n,l,r);else if(n.tag===19)I1(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(gn(Dn,p),!(r.mode&1))r.memoizedState=null;else switch(_){case"forwards":for(l=r.child,_=null;l!==null;)n=l.alternate,n!==null&&Ip(n)===null&&(_=l),l=l.sibling;l=_,l===null?(_=r.child,r.child=null):(_=l.sibling,l.sibling=null),qm(r,!1,_,l,b);break;case"backwards":for(l=null,_=r.child,r.child=null;_!==null;){if(n=_.alternate,n!==null&&Ip(n)===null){r.child=_;break}n=_.sibling,_.sibling=l,l=_,_=n}qm(r,!0,l,null,b);break;case"together":qm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function lp(n,r){!(r.mode&1)&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function so(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Zs|=r.lanes,!(l&r.childLanes))return null;if(n!==null&&r.child!==n.child)throw Error($e(153));if(r.child!==null){for(n=r.child,l=Zo(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=Zo(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function n3(n,r,l){switch(r.tag){case 3:pb(r),gc();break;case 5:Vx(r);break;case 1:or(r.type)&&Cp(r);break;case 4:Cy(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,_=r.memoizedProps.value;gn(Ap,p._currentValue),p._currentValue=_;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(gn(Dn,Dn.current&1),r.flags|=128,null):l&r.child.childLanes?fb(n,r,l):(gn(Dn,Dn.current&1),n=so(n,r,l),n!==null?n.sibling:null);gn(Dn,Dn.current&1);break;case 19:if(p=(l&r.childLanes)!==0,n.flags&128){if(p)return mb(n,r,l);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),gn(Dn,Dn.current),p)break;return null;case 22:case 23:return r.lanes=0,db(n,r,l)}return so(n,r,l)}var gb,Fg,yb,_b;gb=function(n,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};Fg=function(){};yb=function(n,r,l,p){var _=n.memoizedProps;if(_!==p){n=r.stateNode,Ns(Da.current);var b=null;switch(l){case"input":_=rg(n,_),p=rg(n,p),b=[];break;case"select":_=Rn({},_,{value:void 0}),p=Rn({},p,{value:void 0}),b=[];break;case"textarea":_=sg(n,_),p=sg(n,p),b=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=bp)}cg(l,p);var v;l=null;for(V in _)if(!p.hasOwnProperty(V)&&_.hasOwnProperty(V)&&_[V]!=null)if(V==="style"){var u=_[V];for(v in u)u.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(od.hasOwnProperty(V)?b||(b=[]):(b=b||[]).push(V,null));for(V in p){var D=p[V];if(u=_!=null?_[V]:void 0,p.hasOwnProperty(V)&&D!==u&&(D!=null||u!=null))if(V==="style")if(u){for(v in u)!u.hasOwnProperty(v)||D&&D.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in D)D.hasOwnProperty(v)&&u[v]!==D[v]&&(l||(l={}),l[v]=D[v])}else l||(b||(b=[]),b.push(V,l)),l=D;else V==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,u=u?u.__html:void 0,D!=null&&u!==D&&(b=b||[]).push(V,D)):V==="children"?typeof D!="string"&&typeof D!="number"||(b=b||[]).push(V,""+D):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(od.hasOwnProperty(V)?(D!=null&&V==="onScroll"&&wn("scroll",n),b||u===D||(b=[])):(b=b||[]).push(V,D))}l&&(b=b||[]).push("style",l);var V=b;(r.updateQueue=V)&&(r.flags|=4)}};_b=function(n,r,l,p){l!==p&&(r.flags|=4)};function Nu(n,r){if(!An)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Di(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,p=0;if(r)for(var _=n.child;_!==null;)l|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)l|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=p,n.childLanes=l,r}function i3(n,r,l){var p=r.pendingProps;switch(gy(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(r),null;case 1:return or(r.type)&&wp(),Di(r),null;case 3:return p=r.stateNode,_c(),Cn(ar),Cn(Ri),Ey(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Wh(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,la!==null&&(qg(la),la=null))),Fg(n,r),Di(r),null;case 5:Sy(r);var _=Ns(_d.current);if(l=r.type,n!==null&&r.stateNode!=null)yb(n,r,l,p,_),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error($e(166));return Di(r),null}if(n=Ns(Da.current),Wh(r)){p=r.stateNode,l=r.type;var b=r.memoizedProps;switch(p[Pa]=r,p[gd]=b,n=(r.mode&1)!==0,l){case"dialog":wn("cancel",p),wn("close",p);break;case"iframe":case"object":case"embed":wn("load",p);break;case"video":case"audio":for(_=0;_<Xu.length;_++)wn(Xu[_],p);break;case"source":wn("error",p);break;case"img":case"image":case"link":wn("error",p),wn("load",p);break;case"details":wn("toggle",p);break;case"input":O0(p,b),wn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},wn("invalid",p);break;case"textarea":j0(p,b),wn("invalid",p)}cg(l,b),_=null;for(var v in b)if(b.hasOwnProperty(v)){var u=b[v];v==="children"?typeof u=="string"?p.textContent!==u&&(b.suppressHydrationWarning!==!0&&Zh(p.textContent,u,n),_=["children",u]):typeof u=="number"&&p.textContent!==""+u&&(b.suppressHydrationWarning!==!0&&Zh(p.textContent,u,n),_=["children",""+u]):od.hasOwnProperty(v)&&u!=null&&v==="onScroll"&&wn("scroll",p)}switch(l){case"input":Nh(p),N0(p,b,!0);break;case"textarea":Nh(p),V0(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=bp)}p=_,r.updateQueue=p,p!==null&&(r.flags|=4)}else{v=_.nodeType===9?_:_.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Hv(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=v.createElement(l,{is:p.is}):(n=v.createElement(l),l==="select"&&(v=n,p.multiple?v.multiple=!0:p.size&&(v.size=p.size))):n=v.createElementNS(n,l),n[Pa]=r,n[gd]=p,gb(n,r,!1,!1),r.stateNode=n;e:{switch(v=ug(l,p),l){case"dialog":wn("cancel",n),wn("close",n),_=p;break;case"iframe":case"object":case"embed":wn("load",n),_=p;break;case"video":case"audio":for(_=0;_<Xu.length;_++)wn(Xu[_],n);_=p;break;case"source":wn("error",n),_=p;break;case"img":case"image":case"link":wn("error",n),wn("load",n),_=p;break;case"details":wn("toggle",n),_=p;break;case"input":O0(n,p),_=rg(n,p),wn("invalid",n);break;case"option":_=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},_=Rn({},p,{value:void 0}),wn("invalid",n);break;case"textarea":j0(n,p),_=sg(n,p),wn("invalid",n);break;default:_=p}cg(l,_),u=_;for(b in u)if(u.hasOwnProperty(b)){var D=u[b];b==="style"?Xv(n,D):b==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Zv(n,D)):b==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&sd(n,D):typeof D=="number"&&sd(n,""+D):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(od.hasOwnProperty(b)?D!=null&&b==="onScroll"&&wn("scroll",n):D!=null&&ty(n,b,D,v))}switch(l){case"input":Nh(n),N0(n,p,!1);break;case"textarea":Nh(n),V0(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Wo(p.value));break;case"select":n.multiple=!!p.multiple,b=p.value,b!=null?lc(n,!!p.multiple,b,!1):p.defaultValue!=null&&lc(n,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(n.onclick=bp)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Di(r),null;case 6:if(n&&r.stateNode!=null)_b(n,r,n.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error($e(166));if(l=Ns(_d.current),Ns(Da.current),Wh(r)){if(p=r.stateNode,l=r.memoizedProps,p[Pa]=r,(b=p.nodeValue!==l)&&(n=Pr,n!==null))switch(n.tag){case 3:Zh(p.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Zh(p.nodeValue,l,(n.mode&1)!==0)}b&&(r.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[Pa]=r,r.stateNode=p}return Di(r),null;case 13:if(Cn(Dn),p=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(An&&Ir!==null&&r.mode&1&&!(r.flags&128))Fx(),gc(),r.flags|=98560,b=!1;else if(b=Wh(r),p!==null&&p.dehydrated!==null){if(n===null){if(!b)throw Error($e(318));if(b=r.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error($e(317));b[Pa]=r}else gc(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Di(r),b=!1}else la!==null&&(qg(la),la=null),b=!0;if(!b)return r.flags&65536?r:null}return r.flags&128?(r.lanes=l,r):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(r.child.flags|=8192,r.mode&1&&(n===null||Dn.current&1?ni===0&&(ni=3):By())),r.updateQueue!==null&&(r.flags|=4),Di(r),null);case 4:return _c(),Fg(n,r),n===null&&fd(r.stateNode.containerInfo),Di(r),null;case 10:return xy(r.type._context),Di(r),null;case 17:return or(r.type)&&wp(),Di(r),null;case 19:if(Cn(Dn),b=r.memoizedState,b===null)return Di(r),null;if(p=(r.flags&128)!==0,v=b.rendering,v===null)if(p)Nu(b,!1);else{if(ni!==0||n!==null&&n.flags&128)for(n=r.child;n!==null;){if(v=Ip(n),v!==null){for(r.flags|=128,Nu(b,!1),p=v.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=l,l=r.child;l!==null;)b=l,n=p,b.flags&=14680066,v=b.alternate,v===null?(b.childLanes=0,b.lanes=n,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=v.childLanes,b.lanes=v.lanes,b.child=v.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=v.memoizedProps,b.memoizedState=v.memoizedState,b.updateQueue=v.updateQueue,b.type=v.type,n=v.dependencies,b.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return gn(Dn,Dn.current&1|2),r.child}n=n.sibling}b.tail!==null&&Gn()>xc&&(r.flags|=128,p=!0,Nu(b,!1),r.lanes=4194304)}else{if(!p)if(n=Ip(v),n!==null){if(r.flags|=128,p=!0,l=n.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),Nu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!v.alternate&&!An)return Di(r),null}else 2*Gn()-b.renderingStartTime>xc&&l!==1073741824&&(r.flags|=128,p=!0,Nu(b,!1),r.lanes=4194304);b.isBackwards?(v.sibling=r.child,r.child=v):(l=b.last,l!==null?l.sibling=v:r.child=v,b.last=v)}return b.tail!==null?(r=b.tail,b.rendering=r,b.tail=r.sibling,b.renderingStartTime=Gn(),r.sibling=null,l=Dn.current,gn(Dn,p?l&1|2:l&1),r):(Di(r),null);case 22:case 23:return Fy(),p=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(r.flags|=8192),p&&r.mode&1?Tr&1073741824&&(Di(r),r.subtreeFlags&6&&(r.flags|=8192)):Di(r),null;case 24:return null;case 25:return null}throw Error($e(156,r.tag))}function r3(n,r){switch(gy(r),r.tag){case 1:return or(r.type)&&wp(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return _c(),Cn(ar),Cn(Ri),Ey(),n=r.flags,n&65536&&!(n&128)?(r.flags=n&-65537|128,r):null;case 5:return Sy(r),null;case 13:if(Cn(Dn),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error($e(340));gc()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Cn(Dn),null;case 4:return _c(),null;case 10:return xy(r.type._context),null;case 22:case 23:return Fy(),null;case 24:return null;default:return null}}var Jh=!1,ki=!1,a3=typeof WeakSet=="function"?WeakSet:Set,mt=null;function ac(n,r){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){Vn(n,r,p)}else l.current=null}function Bg(n,r,l){try{l()}catch(p){Vn(n,r,p)}}var P1=!1;function o3(n,r){if(xg=_p,n=Cx(),fy(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var _=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var v=0,u=-1,D=-1,V=0,W=0,j=n,N=null;t:for(;;){for(var Te;j!==l||_!==0&&j.nodeType!==3||(u=v+_),j!==b||p!==0&&j.nodeType!==3||(D=v+p),j.nodeType===3&&(v+=j.nodeValue.length),(Te=j.firstChild)!==null;)N=j,j=Te;for(;;){if(j===n)break t;if(N===l&&++V===_&&(u=v),N===b&&++W===p&&(D=v),(Te=j.nextSibling)!==null)break;j=N,N=j.parentNode}j=Te}l=u===-1||D===-1?null:{start:u,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(bg={focusedElem:n,selectionRange:l},_p=!1,mt=r;mt!==null;)if(r=mt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,mt=n;else for(;mt!==null;){r=mt;try{var Ce=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var we=Ce.memoizedProps,qe=Ce.memoizedState,ae=r.stateNode,ie=ae.getSnapshotBeforeUpdate(r.elementType===r.type?we:aa(r.type,we),qe);ae.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ce=r.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(Ae){Vn(r,r.return,Ae)}if(n=r.sibling,n!==null){n.return=r.return,mt=n;break}mt=r.return}return Ce=P1,P1=!1,Ce}function id(n,r,l){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&n)===n){var b=_.destroy;_.destroy=void 0,b!==void 0&&Bg(r,l,b)}_=_.next}while(_!==p)}}function Jp(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&n)===n){var p=l.create;l.destroy=p()}l=l.next}while(l!==r)}}function Og(n){var r=n.ref;if(r!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof r=="function"?r(n):r.current=n}}function vb(n){var r=n.alternate;r!==null&&(n.alternate=null,vb(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Pa],delete r[gd],delete r[Sg],delete r[US],delete r[$S])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xb(n){return n.tag===5||n.tag===3||n.tag===4}function z1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ng(n,r,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(n,r):l.insertBefore(n,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(n,l)):(r=l,r.appendChild(n)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=bp));else if(p!==4&&(n=n.child,n!==null))for(Ng(n,r,l),n=n.sibling;n!==null;)Ng(n,r,l),n=n.sibling}function jg(n,r,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(jg(n,r,l),n=n.sibling;n!==null;)jg(n,r,l),n=n.sibling}var _i=null,oa=!1;function Do(n,r,l){for(l=l.child;l!==null;)bb(n,r,l),l=l.sibling}function bb(n,r,l){if(za&&typeof za.onCommitFiberUnmount=="function")try{za.onCommitFiberUnmount($p,l)}catch{}switch(l.tag){case 5:ki||ac(l,r);case 6:var p=_i,_=oa;_i=null,Do(n,r,l),_i=p,oa=_,_i!==null&&(oa?(n=_i,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):_i.removeChild(l.stateNode));break;case 18:_i!==null&&(oa?(n=_i,l=l.stateNode,n.nodeType===8?Bm(n.parentNode,l):n.nodeType===1&&Bm(n,l),dd(n)):Bm(_i,l.stateNode));break;case 4:p=_i,_=oa,_i=l.stateNode.containerInfo,oa=!0,Do(n,r,l),_i=p,oa=_;break;case 0:case 11:case 14:case 15:if(!ki&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var b=_,v=b.destroy;b=b.tag,v!==void 0&&(b&2||b&4)&&Bg(l,r,v),_=_.next}while(_!==p)}Do(n,r,l);break;case 1:if(!ki&&(ac(l,r),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(u){Vn(l,r,u)}Do(n,r,l);break;case 21:Do(n,r,l);break;case 22:l.mode&1?(ki=(p=ki)||l.memoizedState!==null,Do(n,r,l),ki=p):Do(n,r,l);break;default:Do(n,r,l)}}function D1(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new a3),r.forEach(function(p){var _=m3.bind(null,n,p);l.has(p)||(l.add(p),p.then(_,_))})}}function ra(n,r){var l=r.deletions;if(l!==null)for(var p=0;p<l.length;p++){var _=l[p];try{var b=n,v=r,u=v;e:for(;u!==null;){switch(u.tag){case 5:_i=u.stateNode,oa=!1;break e;case 3:_i=u.stateNode.containerInfo,oa=!0;break e;case 4:_i=u.stateNode.containerInfo,oa=!0;break e}u=u.return}if(_i===null)throw Error($e(160));bb(b,v,_),_i=null,oa=!1;var D=_.alternate;D!==null&&(D.return=null),_.return=null}catch(V){Vn(_,r,V)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)wb(r,n),r=r.sibling}function wb(n,r){var l=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ra(r,n),Ma(n),p&4){try{id(3,n,n.return),Jp(3,n)}catch(we){Vn(n,n.return,we)}try{id(5,n,n.return)}catch(we){Vn(n,n.return,we)}}break;case 1:ra(r,n),Ma(n),p&512&&l!==null&&ac(l,l.return);break;case 5:if(ra(r,n),Ma(n),p&512&&l!==null&&ac(l,l.return),n.flags&32){var _=n.stateNode;try{sd(_,"")}catch(we){Vn(n,n.return,we)}}if(p&4&&(_=n.stateNode,_!=null)){var b=n.memoizedProps,v=l!==null?l.memoizedProps:b,u=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{u==="input"&&b.type==="radio"&&b.name!=null&&qv(_,b),ug(u,v);var V=ug(u,b);for(v=0;v<D.length;v+=2){var W=D[v],j=D[v+1];W==="style"?Xv(_,j):W==="dangerouslySetInnerHTML"?Zv(_,j):W==="children"?sd(_,j):ty(_,W,j,V)}switch(u){case"input":ag(_,b);break;case"textarea":Gv(_,b);break;case"select":var N=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!b.multiple;var Te=b.value;Te!=null?lc(_,!!b.multiple,Te,!1):N!==!!b.multiple&&(b.defaultValue!=null?lc(_,!!b.multiple,b.defaultValue,!0):lc(_,!!b.multiple,b.multiple?[]:"",!1))}_[gd]=b}catch(we){Vn(n,n.return,we)}}break;case 6:if(ra(r,n),Ma(n),p&4){if(n.stateNode===null)throw Error($e(162));_=n.stateNode,b=n.memoizedProps;try{_.nodeValue=b}catch(we){Vn(n,n.return,we)}}break;case 3:if(ra(r,n),Ma(n),p&4&&l!==null&&l.memoizedState.isDehydrated)try{dd(r.containerInfo)}catch(we){Vn(n,n.return,we)}break;case 4:ra(r,n),Ma(n);break;case 13:ra(r,n),Ma(n),_=n.child,_.flags&8192&&(b=_.memoizedState!==null,_.stateNode.isHidden=b,!b||_.alternate!==null&&_.alternate.memoizedState!==null||(Ry=Gn())),p&4&&D1(n);break;case 22:if(W=l!==null&&l.memoizedState!==null,n.mode&1?(ki=(V=ki)||W,ra(r,n),ki=V):ra(r,n),Ma(n),p&8192){if(V=n.memoizedState!==null,(n.stateNode.isHidden=V)&&!W&&n.mode&1)for(mt=n,W=n.child;W!==null;){for(j=mt=W;mt!==null;){switch(N=mt,Te=N.child,N.tag){case 0:case 11:case 14:case 15:id(4,N,N.return);break;case 1:ac(N,N.return);var Ce=N.stateNode;if(typeof Ce.componentWillUnmount=="function"){p=N,l=N.return;try{r=p,Ce.props=r.memoizedProps,Ce.state=r.memoizedState,Ce.componentWillUnmount()}catch(we){Vn(p,l,we)}}break;case 5:ac(N,N.return);break;case 22:if(N.memoizedState!==null){R1(j);continue}}Te!==null?(Te.return=N,mt=Te):R1(j)}W=W.sibling}e:for(W=null,j=n;;){if(j.tag===5){if(W===null){W=j;try{_=j.stateNode,V?(b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(u=j.stateNode,D=j.memoizedProps.style,v=D!=null&&D.hasOwnProperty("display")?D.display:null,u.style.display=Wv("display",v))}catch(we){Vn(n,n.return,we)}}}else if(j.tag===6){if(W===null)try{j.stateNode.nodeValue=V?"":j.memoizedProps}catch(we){Vn(n,n.return,we)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===n)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===n)break e;for(;j.sibling===null;){if(j.return===null||j.return===n)break e;W===j&&(W=null),j=j.return}W===j&&(W=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:ra(r,n),Ma(n),p&4&&D1(n);break;case 21:break;default:ra(r,n),Ma(n)}}function Ma(n){var r=n.flags;if(r&2){try{e:{for(var l=n.return;l!==null;){if(xb(l)){var p=l;break e}l=l.return}throw Error($e(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(sd(_,""),p.flags&=-33);var b=z1(n);jg(n,b,_);break;case 3:case 4:var v=p.stateNode.containerInfo,u=z1(n);Ng(n,u,v);break;default:throw Error($e(161))}}catch(D){Vn(n,n.return,D)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function s3(n,r,l){mt=n,Cb(n)}function Cb(n,r,l){for(var p=(n.mode&1)!==0;mt!==null;){var _=mt,b=_.child;if(_.tag===22&&p){var v=_.memoizedState!==null||Jh;if(!v){var u=_.alternate,D=u!==null&&u.memoizedState!==null||ki;u=Jh;var V=ki;if(Jh=v,(ki=D)&&!V)for(mt=_;mt!==null;)v=mt,D=v.child,v.tag===22&&v.memoizedState!==null?L1(_):D!==null?(D.return=v,mt=D):L1(_);for(;b!==null;)mt=b,Cb(b),b=b.sibling;mt=_,Jh=u,ki=V}k1(n)}else _.subtreeFlags&8772&&b!==null?(b.return=_,mt=b):k1(n)}}function k1(n){for(;mt!==null;){var r=mt;if(r.flags&8772){var l=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:ki||Jp(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!ki)if(l===null)p.componentDidMount();else{var _=r.elementType===r.type?l.memoizedProps:aa(r.type,l.memoizedProps);p.componentDidUpdate(_,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=r.updateQueue;b!==null&&y1(r,b,p);break;case 3:var v=r.updateQueue;if(v!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}y1(r,v,l)}break;case 5:var u=r.stateNode;if(l===null&&r.flags&4){l=u;var D=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var V=r.alternate;if(V!==null){var W=V.memoizedState;if(W!==null){var j=W.dehydrated;j!==null&&dd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}ki||r.flags&512&&Og(r)}catch(N){Vn(r,r.return,N)}}if(r===n){mt=null;break}if(l=r.sibling,l!==null){l.return=r.return,mt=l;break}mt=r.return}}function R1(n){for(;mt!==null;){var r=mt;if(r===n){mt=null;break}var l=r.sibling;if(l!==null){l.return=r.return,mt=l;break}mt=r.return}}function L1(n){for(;mt!==null;){var r=mt;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{Jp(4,r)}catch(D){Vn(r,l,D)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var _=r.return;try{p.componentDidMount()}catch(D){Vn(r,_,D)}}var b=r.return;try{Og(r)}catch(D){Vn(r,b,D)}break;case 5:var v=r.return;try{Og(r)}catch(D){Vn(r,v,D)}}}catch(D){Vn(r,r.return,D)}if(r===n){mt=null;break}var u=r.sibling;if(u!==null){u.return=r.return,mt=u;break}mt=r.return}}var l3=Math.ceil,Dp=lo.ReactCurrentDispatcher,Dy=lo.ReactCurrentOwner,Hr=lo.ReactCurrentBatchConfig,Wt=0,hi=null,Jn=null,vi=0,Tr=0,oc=Jo(0),ni=0,wd=null,Zs=0,Yp=0,ky=0,rd=null,ir=null,Ry=0,xc=1/0,Ka=null,kp=!1,Vg=null,Go=null,Yh=!1,No=null,Rp=0,ad=0,Ug=null,cp=-1,up=0;function Wi(){return Wt&6?Gn():cp!==-1?cp:cp=Gn()}function Ho(n){return n.mode&1?Wt&2&&vi!==0?vi&-vi:GS.transition!==null?(up===0&&(up=sx()),up):(n=rn,n!==0||(n=window.event,n=n===void 0?16:fx(n.type)),n):1}function ua(n,r,l,p){if(50<ad)throw ad=0,Ug=null,Error($e(185));Td(n,l,p),(!(Wt&2)||n!==hi)&&(n===hi&&(!(Wt&2)&&(Yp|=l),ni===4&&Bo(n,vi)),sr(n,p),l===1&&Wt===0&&!(r.mode&1)&&(xc=Gn()+500,Wp&&Yo()))}function sr(n,r){var l=n.callbackNode;GC(n,r);var p=yp(n,n===hi?vi:0);if(p===0)l!==null&&q0(l),n.callbackNode=null,n.callbackPriority=0;else if(r=p&-p,n.callbackPriority!==r){if(l!=null&&q0(l),r===1)n.tag===0?qS(F1.bind(null,n)):kx(F1.bind(null,n)),jS(function(){!(Wt&6)&&Yo()}),l=null;else{switch(lx(p)){case 1:l=oy;break;case 4:l=ax;break;case 16:l=gp;break;case 536870912:l=ox;break;default:l=gp}l=zb(l,Sb.bind(null,n))}n.callbackPriority=r,n.callbackNode=l}}function Sb(n,r){if(cp=-1,up=0,Wt&6)throw Error($e(327));var l=n.callbackNode;if(pc()&&n.callbackNode!==l)return null;var p=yp(n,n===hi?vi:0);if(p===0)return null;if(p&30||p&n.expiredLanes||r)r=Lp(n,p);else{r=p;var _=Wt;Wt|=2;var b=Ab();(hi!==n||vi!==r)&&(Ka=null,xc=Gn()+500,Us(n,r));do try{d3();break}catch(u){Eb(n,u)}while(!0);vy(),Dp.current=b,Wt=_,Jn!==null?r=0:(hi=null,vi=0,r=ni)}if(r!==0){if(r===2&&(_=mg(n),_!==0&&(p=_,r=$g(n,_))),r===1)throw l=wd,Us(n,0),Bo(n,p),sr(n,Gn()),l;if(r===6)Bo(n,p);else{if(_=n.current.alternate,!(p&30)&&!c3(_)&&(r=Lp(n,p),r===2&&(b=mg(n),b!==0&&(p=b,r=$g(n,b))),r===1))throw l=wd,Us(n,0),Bo(n,p),sr(n,Gn()),l;switch(n.finishedWork=_,n.finishedLanes=p,r){case 0:case 1:throw Error($e(345));case 2:Ls(n,ir,Ka);break;case 3:if(Bo(n,p),(p&130023424)===p&&(r=Ry+500-Gn(),10<r)){if(yp(n,0)!==0)break;if(_=n.suspendedLanes,(_&p)!==p){Wi(),n.pingedLanes|=n.suspendedLanes&_;break}n.timeoutHandle=Cg(Ls.bind(null,n,ir,Ka),r);break}Ls(n,ir,Ka);break;case 4:if(Bo(n,p),(p&4194240)===p)break;for(r=n.eventTimes,_=-1;0<p;){var v=31-ca(p);b=1<<v,v=r[v],v>_&&(_=v),p&=~b}if(p=_,p=Gn()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*l3(p/1960))-p,10<p){n.timeoutHandle=Cg(Ls.bind(null,n,ir,Ka),p);break}Ls(n,ir,Ka);break;case 5:Ls(n,ir,Ka);break;default:throw Error($e(329))}}}return sr(n,Gn()),n.callbackNode===l?Sb.bind(null,n):null}function $g(n,r){var l=rd;return n.current.memoizedState.isDehydrated&&(Us(n,r).flags|=256),n=Lp(n,r),n!==2&&(r=ir,ir=l,r!==null&&qg(r)),n}function qg(n){ir===null?ir=n:ir.push.apply(ir,n)}function c3(n){for(var r=n;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var _=l[p],b=_.getSnapshot;_=_.value;try{if(!da(b(),_))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Bo(n,r){for(r&=~ky,r&=~Yp,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var l=31-ca(r),p=1<<l;n[l]=-1,r&=~p}}function F1(n){if(Wt&6)throw Error($e(327));pc();var r=yp(n,0);if(!(r&1))return sr(n,Gn()),null;var l=Lp(n,r);if(n.tag!==0&&l===2){var p=mg(n);p!==0&&(r=p,l=$g(n,p))}if(l===1)throw l=wd,Us(n,0),Bo(n,r),sr(n,Gn()),l;if(l===6)throw Error($e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Ls(n,ir,Ka),sr(n,Gn()),null}function Ly(n,r){var l=Wt;Wt|=1;try{return n(r)}finally{Wt=l,Wt===0&&(xc=Gn()+500,Wp&&Yo())}}function Ws(n){No!==null&&No.tag===0&&!(Wt&6)&&pc();var r=Wt;Wt|=1;var l=Hr.transition,p=rn;try{if(Hr.transition=null,rn=1,n)return n()}finally{rn=p,Hr.transition=l,Wt=r,!(Wt&6)&&Yo()}}function Fy(){Tr=oc.current,Cn(oc)}function Us(n,r){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,NS(l)),Jn!==null)for(l=Jn.return;l!==null;){var p=l;switch(gy(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&wp();break;case 3:_c(),Cn(ar),Cn(Ri),Ey();break;case 5:Sy(p);break;case 4:_c();break;case 13:Cn(Dn);break;case 19:Cn(Dn);break;case 10:xy(p.type._context);break;case 22:case 23:Fy()}l=l.return}if(hi=n,Jn=n=Zo(n.current,null),vi=Tr=r,ni=0,wd=null,ky=Yp=Zs=0,ir=rd=null,Os!==null){for(r=0;r<Os.length;r++)if(l=Os[r],p=l.interleaved,p!==null){l.interleaved=null;var _=p.next,b=l.pending;if(b!==null){var v=b.next;b.next=_,p.next=v}l.pending=p}Os=null}return n}function Eb(n,r){do{var l=Jn;try{if(vy(),op.current=zp,Pp){for(var p=kn.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}Pp=!1}if(Hs=0,di=ti=kn=null,nd=!1,vd=0,Dy.current=null,l===null||l.return===null){ni=1,wd=r,Jn=null;break}e:{var b=n,v=l.return,u=l,D=r;if(r=vi,u.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var V=D,W=u,j=W.tag;if(!(W.mode&1)&&(j===0||j===11||j===15)){var N=W.alternate;N?(W.updateQueue=N.updateQueue,W.memoizedState=N.memoizedState,W.lanes=N.lanes):(W.updateQueue=null,W.memoizedState=null)}var Te=C1(v);if(Te!==null){Te.flags&=-257,S1(Te,v,u,b,r),Te.mode&1&&w1(b,V,r),r=Te,D=V;var Ce=r.updateQueue;if(Ce===null){var we=new Set;we.add(D),r.updateQueue=we}else Ce.add(D);break e}else{if(!(r&1)){w1(b,V,r),By();break e}D=Error($e(426))}}else if(An&&u.mode&1){var qe=C1(v);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),S1(qe,v,u,b,r),yy(vc(D,u));break e}}b=D=vc(D,u),ni!==4&&(ni=2),rd===null?rd=[b]:rd.push(b),b=v;do{switch(b.tag){case 3:b.flags|=65536,r&=-r,b.lanes|=r;var ae=lb(b,D,r);g1(b,ae);break e;case 1:u=D;var ie=b.type,ce=b.stateNode;if(!(b.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Go===null||!Go.has(ce)))){b.flags|=65536,r&=-r,b.lanes|=r;var Ae=cb(b,u,r);g1(b,Ae);break e}}b=b.return}while(b!==null)}Mb(l)}catch(Re){r=Re,Jn===l&&l!==null&&(Jn=l=l.return);continue}break}while(!0)}function Ab(){var n=Dp.current;return Dp.current=zp,n===null?zp:n}function By(){(ni===0||ni===3||ni===2)&&(ni=4),hi===null||!(Zs&268435455)&&!(Yp&268435455)||Bo(hi,vi)}function Lp(n,r){var l=Wt;Wt|=2;var p=Ab();(hi!==n||vi!==r)&&(Ka=null,Us(n,r));do try{u3();break}catch(_){Eb(n,_)}while(!0);if(vy(),Wt=l,Dp.current=p,Jn!==null)throw Error($e(261));return hi=null,vi=0,ni}function u3(){for(;Jn!==null;)Tb(Jn)}function d3(){for(;Jn!==null&&!FC();)Tb(Jn)}function Tb(n){var r=Pb(n.alternate,n,Tr);n.memoizedProps=n.pendingProps,r===null?Mb(n):Jn=r,Dy.current=null}function Mb(n){var r=n;do{var l=r.alternate;if(n=r.return,r.flags&32768){if(l=r3(l,r),l!==null){l.flags&=32767,Jn=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ni=6,Jn=null;return}}else if(l=i3(l,r,Tr),l!==null){Jn=l;return}if(r=r.sibling,r!==null){Jn=r;return}Jn=r=n}while(r!==null);ni===0&&(ni=5)}function Ls(n,r,l){var p=rn,_=Hr.transition;try{Hr.transition=null,rn=1,h3(n,r,l,p)}finally{Hr.transition=_,rn=p}return null}function h3(n,r,l,p){do pc();while(No!==null);if(Wt&6)throw Error($e(327));l=n.finishedWork;var _=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error($e(177));n.callbackNode=null,n.callbackPriority=0;var b=l.lanes|l.childLanes;if(HC(n,b),n===hi&&(Jn=hi=null,vi=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Yh||(Yh=!0,zb(gp,function(){return pc(),null})),b=(l.flags&15990)!==0,l.subtreeFlags&15990||b){b=Hr.transition,Hr.transition=null;var v=rn;rn=1;var u=Wt;Wt|=4,Dy.current=null,o3(n,l),wb(l,n),DS(bg),_p=!!xg,bg=xg=null,n.current=l,s3(l),BC(),Wt=u,rn=v,Hr.transition=b}else n.current=l;if(Yh&&(Yh=!1,No=n,Rp=_),b=n.pendingLanes,b===0&&(Go=null),jC(l.stateNode),sr(n,Gn()),r!==null)for(p=n.onRecoverableError,l=0;l<r.length;l++)_=r[l],p(_.value,{componentStack:_.stack,digest:_.digest});if(kp)throw kp=!1,n=Vg,Vg=null,n;return Rp&1&&n.tag!==0&&pc(),b=n.pendingLanes,b&1?n===Ug?ad++:(ad=0,Ug=n):ad=0,Yo(),null}function pc(){if(No!==null){var n=lx(Rp),r=Hr.transition,l=rn;try{if(Hr.transition=null,rn=16>n?16:n,No===null)var p=!1;else{if(n=No,No=null,Rp=0,Wt&6)throw Error($e(331));var _=Wt;for(Wt|=4,mt=n.current;mt!==null;){var b=mt,v=b.child;if(mt.flags&16){var u=b.deletions;if(u!==null){for(var D=0;D<u.length;D++){var V=u[D];for(mt=V;mt!==null;){var W=mt;switch(W.tag){case 0:case 11:case 15:id(8,W,b)}var j=W.child;if(j!==null)j.return=W,mt=j;else for(;mt!==null;){W=mt;var N=W.sibling,Te=W.return;if(vb(W),W===V){mt=null;break}if(N!==null){N.return=Te,mt=N;break}mt=Te}}}var Ce=b.alternate;if(Ce!==null){var we=Ce.child;if(we!==null){Ce.child=null;do{var qe=we.sibling;we.sibling=null,we=qe}while(we!==null)}}mt=b}}if(b.subtreeFlags&2064&&v!==null)v.return=b,mt=v;else e:for(;mt!==null;){if(b=mt,b.flags&2048)switch(b.tag){case 0:case 11:case 15:id(9,b,b.return)}var ae=b.sibling;if(ae!==null){ae.return=b.return,mt=ae;break e}mt=b.return}}var ie=n.current;for(mt=ie;mt!==null;){v=mt;var ce=v.child;if(v.subtreeFlags&2064&&ce!==null)ce.return=v,mt=ce;else e:for(v=ie;mt!==null;){if(u=mt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Jp(9,u)}}catch(Re){Vn(u,u.return,Re)}if(u===v){mt=null;break e}var Ae=u.sibling;if(Ae!==null){Ae.return=u.return,mt=Ae;break e}mt=u.return}}if(Wt=_,Yo(),za&&typeof za.onPostCommitFiberRoot=="function")try{za.onPostCommitFiberRoot($p,n)}catch{}p=!0}return p}finally{rn=l,Hr.transition=r}}return!1}function B1(n,r,l){r=vc(l,r),r=lb(n,r,1),n=qo(n,r,1),r=Wi(),n!==null&&(Td(n,1,r),sr(n,r))}function Vn(n,r,l){if(n.tag===3)B1(n,n,l);else for(;r!==null;){if(r.tag===3){B1(r,n,l);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Go===null||!Go.has(p))){n=vc(l,n),n=cb(r,n,1),r=qo(r,n,1),n=Wi(),r!==null&&(Td(r,1,n),sr(r,n));break}}r=r.return}}function p3(n,r,l){var p=n.pingCache;p!==null&&p.delete(r),r=Wi(),n.pingedLanes|=n.suspendedLanes&l,hi===n&&(vi&l)===l&&(ni===4||ni===3&&(vi&130023424)===vi&&500>Gn()-Ry?Us(n,0):ky|=l),sr(n,r)}function Ib(n,r){r===0&&(n.mode&1?(r=Uh,Uh<<=1,!(Uh&130023424)&&(Uh=4194304)):r=1);var l=Wi();n=oo(n,r),n!==null&&(Td(n,r,l),sr(n,l))}function f3(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Ib(n,l)}function m3(n,r){var l=0;switch(n.tag){case 13:var p=n.stateNode,_=n.memoizedState;_!==null&&(l=_.retryLane);break;case 19:p=n.stateNode;break;default:throw Error($e(314))}p!==null&&p.delete(r),Ib(n,l)}var Pb;Pb=function(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps||ar.current)rr=!0;else{if(!(n.lanes&l)&&!(r.flags&128))return rr=!1,n3(n,r,l);rr=!!(n.flags&131072)}else rr=!1,An&&r.flags&1048576&&Rx(r,Ep,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;lp(n,r),n=r.pendingProps;var _=mc(r,Ri.current);hc(r,l),_=Ty(null,r,p,n,_,l);var b=My();return r.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,or(p)?(b=!0,Cp(r)):b=!1,r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,wy(r),_.updater=Kp,r.stateNode=_,_._reactInternals=r,Pg(r,p,n,l),r=kg(null,r,p,!0,b,l)):(r.tag=0,An&&b&&my(r),Zi(null,r,_,l),r=r.child),r;case 16:p=r.elementType;e:{switch(lp(n,r),n=r.pendingProps,_=p._init,p=_(p._payload),r.type=p,_=r.tag=y3(p),n=aa(p,n),_){case 0:r=Dg(null,r,p,n,l);break e;case 1:r=T1(null,r,p,n,l);break e;case 11:r=E1(null,r,p,n,l);break e;case 14:r=A1(null,r,p,aa(p.type,n),l);break e}throw Error($e(306,p,""))}return r;case 0:return p=r.type,_=r.pendingProps,_=r.elementType===p?_:aa(p,_),Dg(n,r,p,_,l);case 1:return p=r.type,_=r.pendingProps,_=r.elementType===p?_:aa(p,_),T1(n,r,p,_,l);case 3:e:{if(pb(r),n===null)throw Error($e(387));p=r.pendingProps,b=r.memoizedState,_=b.element,jx(n,r),Mp(r,p,null,l);var v=r.memoizedState;if(p=v.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){_=vc(Error($e(423)),r),r=M1(n,r,p,l,_);break e}else if(p!==_){_=vc(Error($e(424)),r),r=M1(n,r,p,l,_);break e}else for(Ir=$o(r.stateNode.containerInfo.firstChild),Pr=r,An=!0,la=null,l=Ox(r,null,p,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gc(),p===_){r=so(n,r,l);break e}Zi(n,r,p,l)}r=r.child}return r;case 5:return Vx(r),n===null&&Tg(r),p=r.type,_=r.pendingProps,b=n!==null?n.memoizedProps:null,v=_.children,wg(p,_)?v=null:b!==null&&wg(p,b)&&(r.flags|=32),hb(n,r),Zi(n,r,v,l),r.child;case 6:return n===null&&Tg(r),null;case 13:return fb(n,r,l);case 4:return Cy(r,r.stateNode.containerInfo),p=r.pendingProps,n===null?r.child=yc(r,null,p,l):Zi(n,r,p,l),r.child;case 11:return p=r.type,_=r.pendingProps,_=r.elementType===p?_:aa(p,_),E1(n,r,p,_,l);case 7:return Zi(n,r,r.pendingProps,l),r.child;case 8:return Zi(n,r,r.pendingProps.children,l),r.child;case 12:return Zi(n,r,r.pendingProps.children,l),r.child;case 10:e:{if(p=r.type._context,_=r.pendingProps,b=r.memoizedProps,v=_.value,gn(Ap,p._currentValue),p._currentValue=v,b!==null)if(da(b.value,v)){if(b.children===_.children&&!ar.current){r=so(n,r,l);break e}}else for(b=r.child,b!==null&&(b.return=r);b!==null;){var u=b.dependencies;if(u!==null){v=b.child;for(var D=u.firstContext;D!==null;){if(D.context===p){if(b.tag===1){D=no(-1,l&-l),D.tag=2;var V=b.updateQueue;if(V!==null){V=V.shared;var W=V.pending;W===null?D.next=D:(D.next=W.next,W.next=D),V.pending=D}}b.lanes|=l,D=b.alternate,D!==null&&(D.lanes|=l),Mg(b.return,l,r),u.lanes|=l;break}D=D.next}}else if(b.tag===10)v=b.type===r.type?null:b.child;else if(b.tag===18){if(v=b.return,v===null)throw Error($e(341));v.lanes|=l,u=v.alternate,u!==null&&(u.lanes|=l),Mg(v,l,r),v=b.sibling}else v=b.child;if(v!==null)v.return=b;else for(v=b;v!==null;){if(v===r){v=null;break}if(b=v.sibling,b!==null){b.return=v.return,v=b;break}v=v.return}b=v}Zi(n,r,_.children,l),r=r.child}return r;case 9:return _=r.type,p=r.pendingProps.children,hc(r,l),_=Zr(_),p=p(_),r.flags|=1,Zi(n,r,p,l),r.child;case 14:return p=r.type,_=aa(p,r.pendingProps),_=aa(p.type,_),A1(n,r,p,_,l);case 15:return ub(n,r,r.type,r.pendingProps,l);case 17:return p=r.type,_=r.pendingProps,_=r.elementType===p?_:aa(p,_),lp(n,r),r.tag=1,or(p)?(n=!0,Cp(r)):n=!1,hc(r,l),sb(r,p,_),Pg(r,p,_,l),kg(null,r,p,!0,n,l);case 19:return mb(n,r,l);case 22:return db(n,r,l)}throw Error($e(156,r.tag))};function zb(n,r){return rx(n,r)}function g3(n,r,l,p){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(n,r,l,p){return new g3(n,r,l,p)}function Oy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function y3(n){if(typeof n=="function")return Oy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===iy)return 11;if(n===ry)return 14}return 2}function Zo(n,r){var l=n.alternate;return l===null?(l=Gr(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function dp(n,r,l,p,_,b){var v=2;if(p=n,typeof n=="function")Oy(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case Kl:return $s(l.children,_,b,r);case ny:v=8,_|=8;break;case eg:return n=Gr(12,l,r,_|2),n.elementType=eg,n.lanes=b,n;case tg:return n=Gr(13,l,r,_),n.elementType=tg,n.lanes=b,n;case ng:return n=Gr(19,l,r,_),n.elementType=ng,n.lanes=b,n;case Vv:return Qp(l,_,b,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Nv:v=10;break e;case jv:v=9;break e;case iy:v=11;break e;case ry:v=14;break e;case Ro:v=16,p=null;break e}throw Error($e(130,n==null?n:typeof n,""))}return r=Gr(v,l,r,_),r.elementType=n,r.type=p,r.lanes=b,r}function $s(n,r,l,p){return n=Gr(7,n,p,r),n.lanes=l,n}function Qp(n,r,l,p){return n=Gr(22,n,p,r),n.elementType=Vv,n.lanes=l,n.stateNode={isHidden:!1},n}function Gm(n,r,l){return n=Gr(6,n,null,r),n.lanes=l,n}function Hm(n,r,l){return r=Gr(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function _3(n,r,l,p,_){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Am(0),this.expirationTimes=Am(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Am(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Ny(n,r,l,p,_,b,v,u,D){return n=new _3(n,r,l,u,D),r===1?(r=1,b===!0&&(r|=8)):r=0,b=Gr(3,null,null,r),n.current=b,b.stateNode=n,b.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},wy(b),n}function v3(n,r,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xl,key:p==null?null:""+p,children:n,containerInfo:r,implementation:l}}function Db(n){if(!n)return Xo;n=n._reactInternals;e:{if(Ys(n)!==n||n.tag!==1)throw Error($e(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(or(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error($e(171))}if(n.tag===1){var l=n.type;if(or(l))return Dx(n,l,r)}return r}function kb(n,r,l,p,_,b,v,u,D){return n=Ny(l,p,!0,n,_,b,v,u,D),n.context=Db(null),l=n.current,p=Wi(),_=Ho(l),b=no(p,_),b.callback=r??null,qo(l,b,_),n.current.lanes=_,Td(n,_,p),sr(n,p),n}function ef(n,r,l,p){var _=r.current,b=Wi(),v=Ho(_);return l=Db(l),r.context===null?r.context=l:r.pendingContext=l,r=no(b,v),r.payload={element:n},p=p===void 0?null:p,p!==null&&(r.callback=p),n=qo(_,r,v),n!==null&&(ua(n,_,v,b),ap(n,_,v)),v}function Fp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function O1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function jy(n,r){O1(n,r),(n=n.alternate)&&O1(n,r)}function x3(){return null}var Rb=typeof reportError=="function"?reportError:function(n){console.error(n)};function Vy(n){this._internalRoot=n}tf.prototype.render=Vy.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error($e(409));ef(n,r,null,null)};tf.prototype.unmount=Vy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ws(function(){ef(null,n,null,null)}),r[ao]=null}};function tf(n){this._internalRoot=n}tf.prototype.unstable_scheduleHydration=function(n){if(n){var r=dx();n={blockedOn:null,target:n,priority:r};for(var l=0;l<Fo.length&&r!==0&&r<Fo[l].priority;l++);Fo.splice(l,0,n),l===0&&px(n)}};function Uy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function N1(){}function b3(n,r,l,p,_){if(_){if(typeof p=="function"){var b=p;p=function(){var V=Fp(v);b.call(V)}}var v=kb(r,p,n,0,null,!1,!1,"",N1);return n._reactRootContainer=v,n[ao]=v.current,fd(n.nodeType===8?n.parentNode:n),Ws(),v}for(;_=n.lastChild;)n.removeChild(_);if(typeof p=="function"){var u=p;p=function(){var V=Fp(D);u.call(V)}}var D=Ny(n,0,!1,null,null,!1,!1,"",N1);return n._reactRootContainer=D,n[ao]=D.current,fd(n.nodeType===8?n.parentNode:n),Ws(function(){ef(r,D,l,p)}),D}function rf(n,r,l,p,_){var b=l._reactRootContainer;if(b){var v=b;if(typeof _=="function"){var u=_;_=function(){var D=Fp(v);u.call(D)}}ef(r,v,n,_)}else v=b3(l,r,n,_,p);return Fp(v)}cx=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var l=Wu(r.pendingLanes);l!==0&&(sy(r,l|1),sr(r,Gn()),!(Wt&6)&&(xc=Gn()+500,Yo()))}break;case 13:Ws(function(){var p=oo(n,1);if(p!==null){var _=Wi();ua(p,n,1,_)}}),jy(n,1)}};ly=function(n){if(n.tag===13){var r=oo(n,134217728);if(r!==null){var l=Wi();ua(r,n,134217728,l)}jy(n,134217728)}};ux=function(n){if(n.tag===13){var r=Ho(n),l=oo(n,r);if(l!==null){var p=Wi();ua(l,n,r,p)}jy(n,r)}};dx=function(){return rn};hx=function(n,r){var l=rn;try{return rn=n,r()}finally{rn=l}};hg=function(n,r,l){switch(r){case"input":if(ag(n,l),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var p=l[r];if(p!==n&&p.form===n.form){var _=Zp(p);if(!_)throw Error($e(90));$v(p),ag(p,_)}}}break;case"textarea":Gv(n,l);break;case"select":r=l.value,r!=null&&lc(n,!!l.multiple,r,!1)}};Yv=Ly;Qv=Ws;var w3={usingClientEntryPoint:!1,Events:[Id,ec,Zp,Kv,Jv,Ly]},ju={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C3={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nx(n),n===null?null:n.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||x3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{$p=Qh.inject(C3),za=Qh}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w3;Dr.createPortal=function(n,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uy(r))throw Error($e(200));return v3(n,r,null,l)};Dr.createRoot=function(n,r){if(!Uy(n))throw Error($e(299));var l=!1,p="",_=Rb;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Ny(n,1,!1,null,null,l,!1,p,_),n[ao]=r.current,fd(n.nodeType===8?n.parentNode:n),new Vy(r)};Dr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error($e(188)):(n=Object.keys(n).join(","),Error($e(268,n)));return n=nx(r),n=n===null?null:n.stateNode,n};Dr.flushSync=function(n){return Ws(n)};Dr.hydrate=function(n,r,l){if(!nf(r))throw Error($e(200));return rf(null,n,r,!0,l)};Dr.hydrateRoot=function(n,r,l){if(!Uy(n))throw Error($e(405));var p=l!=null&&l.hydratedSources||null,_=!1,b="",v=Rb;if(l!=null&&(l.unstable_strictMode===!0&&(_=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),r=kb(r,null,n,1,l??null,_,!1,b,v),n[ao]=r.current,fd(n),p)for(n=0;n<p.length;n++)l=p[n],_=l._getVersion,_=_(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,_]:r.mutableSourceEagerHydrationData.push(l,_);return new tf(r)};Dr.render=function(n,r,l){if(!nf(r))throw Error($e(200));return rf(null,n,r,!1,l)};Dr.unmountComponentAtNode=function(n){if(!nf(n))throw Error($e(40));return n._reactRootContainer?(Ws(function(){rf(null,null,n,!1,function(){n._reactRootContainer=null,n[ao]=null})}),!0):!1};Dr.unstable_batchedUpdates=Ly;Dr.unstable_renderSubtreeIntoContainer=function(n,r,l,p){if(!nf(l))throw Error($e(200));if(n==null||n._reactInternals===void 0)throw Error($e(38));return rf(n,r,l,!1,p)};Dr.version="18.3.1-next-f1338f8080-20240426";function Lb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lb)}catch(n){console.error(n)}}Lb(),Lv.exports=Dr;var zd=Lv.exports;const S3=Wg(zd),E3=Zg({__proto__:null,default:S3},[zd]);var j1=zd;Ym.createRoot=j1.createRoot,Ym.hydrateRoot=j1.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zn(){return zn=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},zn.apply(this,arguments)}var Kn;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Kn||(Kn={}));const V1="popstate";function A3(n){n===void 0&&(n={});function r(_,b){let{pathname:v="/",search:u="",hash:D=""}=co(_.location.hash.substr(1));return!v.startsWith("/")&&!v.startsWith(".")&&(v="/"+v),Cd("",{pathname:v,search:u,hash:D},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function l(_,b){let v=_.document.querySelector("base"),u="";if(v&&v.getAttribute("href")){let D=_.location.href,V=D.indexOf("#");u=V===-1?D:D.slice(0,V)}return u+"#"+(typeof b=="string"?b:Ks(b))}function p(_,b){Xs(_.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(b)+")")}return M3(r,l,p,n)}function Ut(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Xs(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function T3(){return Math.random().toString(36).substr(2,8)}function U1(n,r){return{usr:n.state,key:n.key,idx:r}}function Cd(n,r,l,p){return l===void 0&&(l=null),zn({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof r=="string"?co(r):r,{state:l,key:r&&r.key||p||T3()})}function Ks(n){let{pathname:r="/",search:l="",hash:p=""}=n;return l&&l!=="?"&&(r+=l.charAt(0)==="?"?l:"?"+l),p&&p!=="#"&&(r+=p.charAt(0)==="#"?p:"#"+p),r}function co(n){let r={};if(n){let l=n.indexOf("#");l>=0&&(r.hash=n.substr(l),n=n.substr(0,l));let p=n.indexOf("?");p>=0&&(r.search=n.substr(p),n=n.substr(0,p)),n&&(r.pathname=n)}return r}function M3(n,r,l,p){p===void 0&&(p={});let{window:_=document.defaultView,v5Compat:b=!1}=p,v=_.history,u=Kn.Pop,D=null,V=W();V==null&&(V=0,v.replaceState(zn({},v.state,{idx:V}),""));function W(){return(v.state||{idx:null}).idx}function j(){u=Kn.Pop;let qe=W(),ae=qe==null?null:qe-V;V=qe,D&&D({action:u,location:we.location,delta:ae})}function N(qe,ae){u=Kn.Push;let ie=Cd(we.location,qe,ae);l&&l(ie,qe),V=W()+1;let ce=U1(ie,V),Ae=we.createHref(ie);try{v.pushState(ce,"",Ae)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;_.location.assign(Ae)}b&&D&&D({action:u,location:we.location,delta:1})}function Te(qe,ae){u=Kn.Replace;let ie=Cd(we.location,qe,ae);l&&l(ie,qe),V=W();let ce=U1(ie,V),Ae=we.createHref(ie);v.replaceState(ce,"",Ae),b&&D&&D({action:u,location:we.location,delta:0})}function Ce(qe){let ae=_.location.origin!=="null"?_.location.origin:_.location.href,ie=typeof qe=="string"?qe:Ks(qe);return ie=ie.replace(/ $/,"%20"),Ut(ae,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,ae)}let we={get action(){return u},get location(){return n(_,v)},listen(qe){if(D)throw new Error("A history only accepts one active listener");return _.addEventListener(V1,j),D=qe,()=>{_.removeEventListener(V1,j),D=null}},createHref(qe){return r(_,qe)},createURL:Ce,encodeLocation(qe){let ae=Ce(qe);return{pathname:ae.pathname,search:ae.search,hash:ae.hash}},push:N,replace:Te,go(qe){return v.go(qe)}};return we}var cn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(cn||(cn={}));const I3=new Set(["lazy","caseSensitive","path","id","index","children"]);function P3(n){return n.index===!0}function Sd(n,r,l,p){return l===void 0&&(l=[]),p===void 0&&(p={}),n.map((_,b)=>{let v=[...l,String(b)],u=typeof _.id=="string"?_.id:v.join("-");if(Ut(_.index!==!0||!_.children,"Cannot specify children on an index route"),Ut(!p[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),P3(_)){let D=zn({},_,r(_),{id:u});return p[u]=D,D}else{let D=zn({},_,r(_),{id:u,children:void 0});return p[u]=D,_.children&&(D.children=Sd(_.children,r,v,p)),D}})}function Fs(n,r,l){return l===void 0&&(l="/"),hp(n,r,l,!1)}function hp(n,r,l,p){let _=typeof r=="string"?co(r):r,b=Ec(_.pathname||"/",l);if(b==null)return null;let v=Fb(n);D3(v);let u=null;for(let D=0;u==null&&D<v.length;++D){let V=$3(b);u=V3(v[D],V,p)}return u}function z3(n,r){let{route:l,pathname:p,params:_}=n;return{id:l.id,pathname:p,params:_,data:r[l.id],handle:l.handle}}function Fb(n,r,l,p){r===void 0&&(r=[]),l===void 0&&(l=[]),p===void 0&&(p="");let _=(b,v,u)=>{let D={relativePath:u===void 0?b.path||"":u,caseSensitive:b.caseSensitive===!0,childrenIndex:v,route:b};D.relativePath.startsWith("/")&&(Ut(D.relativePath.startsWith(p),'Absolute route path "'+D.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),D.relativePath=D.relativePath.slice(p.length));let V=io([p,D.relativePath]),W=l.concat(D);b.children&&b.children.length>0&&(Ut(b.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+V+'".')),Fb(b.children,r,W,V)),!(b.path==null&&!b.index)&&r.push({path:V,score:N3(V,b.index),routesMeta:W})};return n.forEach((b,v)=>{var u;if(b.path===""||!((u=b.path)!=null&&u.includes("?")))_(b,v);else for(let D of Bb(b.path))_(b,v,D)}),r}function Bb(n){let r=n.split("/");if(r.length===0)return[];let[l,...p]=r,_=l.endsWith("?"),b=l.replace(/\?$/,"");if(p.length===0)return _?[b,""]:[b];let v=Bb(p.join("/")),u=[];return u.push(...v.map(D=>D===""?b:[b,D].join("/"))),_&&u.push(...v),u.map(D=>n.startsWith("/")&&D===""?"/":D)}function D3(n){n.sort((r,l)=>r.score!==l.score?l.score-r.score:j3(r.routesMeta.map(p=>p.childrenIndex),l.routesMeta.map(p=>p.childrenIndex)))}const k3=/^:[\w-]+$/,R3=3,L3=2,F3=1,B3=10,O3=-2,$1=n=>n==="*";function N3(n,r){let l=n.split("/"),p=l.length;return l.some($1)&&(p+=O3),r&&(p+=L3),l.filter(_=>!$1(_)).reduce((_,b)=>_+(k3.test(b)?R3:b===""?F3:B3),p)}function j3(n,r){return n.length===r.length&&n.slice(0,-1).every((p,_)=>p===r[_])?n[n.length-1]-r[r.length-1]:0}function V3(n,r,l){l===void 0&&(l=!1);let{routesMeta:p}=n,_={},b="/",v=[];for(let u=0;u<p.length;++u){let D=p[u],V=u===p.length-1,W=b==="/"?r:r.slice(b.length)||"/",j=q1({path:D.relativePath,caseSensitive:D.caseSensitive,end:V},W),N=D.route;if(!j&&V&&l&&!p[p.length-1].route.index&&(j=q1({path:D.relativePath,caseSensitive:D.caseSensitive,end:!1},W)),!j)return null;Object.assign(_,j.params),v.push({params:_,pathname:io([b,j.pathname]),pathnameBase:H3(io([b,j.pathnameBase])),route:N}),j.pathnameBase!=="/"&&(b=io([b,j.pathnameBase]))}return v}function q1(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[l,p]=U3(n.path,n.caseSensitive,n.end),_=r.match(l);if(!_)return null;let b=_[0],v=b.replace(/(.)\/+$/,"$1"),u=_.slice(1);return{params:p.reduce((V,W,j)=>{let{paramName:N,isOptional:Te}=W;if(N==="*"){let we=u[j]||"";v=b.slice(0,b.length-we.length).replace(/(.)\/+$/,"$1")}const Ce=u[j];return Te&&!Ce?V[N]=void 0:V[N]=(Ce||"").replace(/%2F/g,"/"),V},{}),pathname:b,pathnameBase:v,pattern:n}}function U3(n,r,l){r===void 0&&(r=!1),l===void 0&&(l=!0),Xs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let p=[],_="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,u,D)=>(p.push({paramName:u,isOptional:D!=null}),D?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(p.push({paramName:"*"}),_+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?_+="\\/*$":n!==""&&n!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,r?void 0:"i"),p]}function $3(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Xs(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),n}}function Ec(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let l=r.endsWith("/")?r.length-1:r.length,p=n.charAt(l);return p&&p!=="/"?null:n.slice(l)||"/"}function q3(n,r){r===void 0&&(r="/");let{pathname:l,search:p="",hash:_=""}=typeof n=="string"?co(n):n;return{pathname:l?l.startsWith("/")?l:G3(l,r):r,search:Z3(p),hash:W3(_)}}function G3(n,r){let l=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(_=>{_===".."?l.length>1&&l.pop():_!=="."&&l.push(_)}),l.length>1?l.join("/"):"/"}function Zm(n,r,l,p){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ob(n){return n.filter((r,l)=>l===0||r.route.path&&r.route.path.length>0)}function $y(n,r){let l=Ob(n);return r?l.map((p,_)=>_===l.length-1?p.pathname:p.pathnameBase):l.map(p=>p.pathnameBase)}function qy(n,r,l,p){p===void 0&&(p=!1);let _;typeof n=="string"?_=co(n):(_=zn({},n),Ut(!_.pathname||!_.pathname.includes("?"),Zm("?","pathname","search",_)),Ut(!_.pathname||!_.pathname.includes("#"),Zm("#","pathname","hash",_)),Ut(!_.search||!_.search.includes("#"),Zm("#","search","hash",_)));let b=n===""||_.pathname==="",v=b?"/":_.pathname,u;if(v==null)u=l;else{let j=r.length-1;if(!p&&v.startsWith("..")){let N=v.split("/");for(;N[0]==="..";)N.shift(),j-=1;_.pathname=N.join("/")}u=j>=0?r[j]:"/"}let D=q3(_,u),V=v&&v!=="/"&&v.endsWith("/"),W=(b||v===".")&&l.endsWith("/");return!D.pathname.endsWith("/")&&(V||W)&&(D.pathname+="/"),D}const io=n=>n.join("/").replace(/\/\/+/g,"/"),H3=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Z3=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,W3=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Bp{constructor(r,l,p,_){_===void 0&&(_=!1),this.status=r,this.statusText=l||"",this.internal=_,p instanceof Error?(this.data=p.toString(),this.error=p):this.data=p}}function af(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Nb=["post","put","patch","delete"],X3=new Set(Nb),K3=["get",...Nb],J3=new Set(K3),Y3=new Set([301,302,303,307,308]),Q3=new Set([307,308]),Wm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},eE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Gy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tE=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),jb="remix-router-transitions";function nE(n){const r=n.window?n.window:typeof window<"u"?window:void 0,l=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u",p=!l;Ut(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let _;if(n.mapRouteProperties)_=n.mapRouteProperties;else if(n.detectErrorBoundary){let H=n.detectErrorBoundary;_=ee=>({hasErrorBoundary:H(ee)})}else _=tE;let b={},v=Sd(n.routes,_,void 0,b),u,D=n.basename||"/",V=n.unstable_dataStrategy||sE,W=n.unstable_patchRoutesOnNavigation,j=zn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),N=null,Te=new Set,Ce=1e3,we=new Set,qe=null,ae=null,ie=null,ce=n.hydrationData!=null,Ae=Fs(v,n.history.location,D),Re=null;if(Ae==null&&!W){let H=Hi(404,{pathname:n.history.location.pathname}),{matches:ee,route:ue}=ev(v);Ae=ee,Re={[ue.id]:H}}Ae&&!n.hydrationData&&me(Ae,v,n.history.location.pathname).active&&(Ae=null);let Xe;if(Ae)if(Ae.some(H=>H.route.lazy))Xe=!1;else if(!Ae.some(H=>H.route.loader))Xe=!0;else if(j.v7_partialHydration){let H=n.hydrationData?n.hydrationData.loaderData:null,ee=n.hydrationData?n.hydrationData.errors:null,ue=xe=>xe.route.loader?typeof xe.route.loader=="function"&&xe.route.loader.hydrate===!0?!1:H&&H[xe.route.id]!==void 0||ee&&ee[xe.route.id]!==void 0:!0;if(ee){let xe=Ae.findIndex(Le=>ee[Le.route.id]!==void 0);Xe=Ae.slice(0,xe+1).every(ue)}else Xe=Ae.every(ue)}else Xe=n.hydrationData!=null;else if(Xe=!1,Ae=[],j.v7_partialHydration){let H=me(null,v,n.history.location.pathname);H.active&&H.matches&&(Ae=H.matches)}let Qe,pe={historyAction:n.history.action,location:n.history.location,matches:Ae,initialized:Xe,navigation:Wm,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Re,fetchers:new Map,blockers:new Map},pt=Kn.Pop,ct=!1,ot,Xt=!1,Ot=new Map,Ft=null,Ln=!1,Hn=!1,Un=[],rt=new Set,ut=new Map,bt=0,kt=-1,Nt=new Map,Tn=new Set,yn=new Map,Fn=new Map,hn=new Set,an=new Map,$n=new Map,Xr=new Map,lr=!1;function ka(){if(N=n.history.listen(H=>{let{action:ee,location:ue,delta:xe}=H;if(lr){lr=!1;return}Xs($n.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Le=Oi({currentLocation:pe.location,nextLocation:ue,historyAction:ee});if(Le&&xe!=null){lr=!0,n.history.go(xe*-1),Bi(Le,{state:"blocked",location:ue,proceed(){Bi(Le,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),n.history.go(xe)},reset(){let De=new Map(pe.blockers);De.set(Le,Vu),pn({blockers:De})}});return}return Fi(ee,ue)}),l){xE(r,Ot);let H=()=>bE(r,Ot);r.addEventListener("pagehide",H),Ft=()=>r.removeEventListener("pagehide",H)}return pe.initialized||Fi(Kn.Pop,pe.location,{initialHydration:!0}),Qe}function cr(){N&&N(),Ft&&Ft(),Te.clear(),ot&&ot.abort(),pe.fetchers.forEach((H,ee)=>Ue(ee)),pe.blockers.forEach((H,ee)=>Yi(ee))}function Rr(H){return Te.add(H),()=>Te.delete(H)}function pn(H,ee){ee===void 0&&(ee={}),pe=zn({},pe,H);let ue=[],xe=[];j.v7_fetcherPersist&&pe.fetchers.forEach((Le,De)=>{Le.state==="idle"&&(hn.has(De)?xe.push(De):ue.push(De))}),[...Te].forEach(Le=>Le(pe,{deletedFetchers:xe,unstable_viewTransitionOpts:ee.viewTransitionOpts,unstable_flushSync:ee.flushSync===!0})),j.v7_fetcherPersist&&(ue.forEach(Le=>pe.fetchers.delete(Le)),xe.forEach(Le=>Ue(Le)))}function Li(H,ee,ue){var xe,Le;let{flushSync:De}=ue===void 0?{}:ue,nt=pe.actionData!=null&&pe.navigation.formMethod!=null&&sa(pe.navigation.formMethod)&&pe.navigation.state==="loading"&&((xe=H.state)==null?void 0:xe._isRedirect)!==!0,Fe;ee.actionData?Object.keys(ee.actionData).length>0?Fe=ee.actionData:Fe=null:nt?Fe=pe.actionData:Fe=null;let gt=ee.loaderData?Y1(pe.loaderData,ee.loaderData,ee.matches||[],ee.errors):pe.loaderData,Ve=pe.blockers;Ve.size>0&&(Ve=new Map(Ve),Ve.forEach((Tt,Dt)=>Ve.set(Dt,Vu)));let st=ct===!0||pe.navigation.formMethod!=null&&sa(pe.navigation.formMethod)&&((Le=H.state)==null?void 0:Le._isRedirect)!==!0;u&&(v=u,u=void 0),Ln||pt===Kn.Pop||(pt===Kn.Push?n.history.push(H,H.state):pt===Kn.Replace&&n.history.replace(H,H.state));let xt;if(pt===Kn.Pop){let Tt=Ot.get(pe.location.pathname);Tt&&Tt.has(H.pathname)?xt={currentLocation:pe.location,nextLocation:H}:Ot.has(H.pathname)&&(xt={currentLocation:H,nextLocation:pe.location})}else if(Xt){let Tt=Ot.get(pe.location.pathname);Tt?Tt.add(H.pathname):(Tt=new Set([H.pathname]),Ot.set(pe.location.pathname,Tt)),xt={currentLocation:pe.location,nextLocation:H}}pn(zn({},ee,{actionData:Fe,loaderData:gt,historyAction:pt,location:H,initialized:!0,navigation:Wm,revalidation:"idle",restoreScrollPosition:de(H,ee.matches||pe.matches),preventScrollReset:st,blockers:Ve}),{viewTransitionOpts:xt,flushSync:De===!0}),pt=Kn.Pop,ct=!1,Xt=!1,Ln=!1,Hn=!1,Un=[]}async function be(H,ee){if(typeof H=="number"){n.history.go(H);return}let ue=Gg(pe.location,pe.matches,D,j.v7_prependBasename,H,j.v7_relativeSplatPath,ee==null?void 0:ee.fromRouteId,ee==null?void 0:ee.relative),{path:xe,submission:Le,error:De}=G1(j.v7_normalizeFormMethod,!1,ue,ee),nt=pe.location,Fe=Cd(pe.location,xe,ee&&ee.state);Fe=zn({},Fe,n.history.encodeLocation(Fe));let gt=ee&&ee.replace!=null?ee.replace:void 0,Ve=Kn.Push;gt===!0?Ve=Kn.Replace:gt===!1||Le!=null&&sa(Le.formMethod)&&Le.formAction===pe.location.pathname+pe.location.search&&(Ve=Kn.Replace);let st=ee&&"preventScrollReset"in ee?ee.preventScrollReset===!0:void 0,xt=(ee&&ee.unstable_flushSync)===!0,Tt=Oi({currentLocation:nt,nextLocation:Fe,historyAction:Ve});if(Tt){Bi(Tt,{state:"blocked",location:Fe,proceed(){Bi(Tt,{state:"proceeding",proceed:void 0,reset:void 0,location:Fe}),be(H,ee)},reset(){let Dt=new Map(pe.blockers);Dt.set(Tt,Vu),pn({blockers:Dt})}});return}return await Fi(Ve,Fe,{submission:Le,pendingError:De,preventScrollReset:st,replace:ee&&ee.replace,enableViewTransition:ee&&ee.unstable_viewTransition,flushSync:xt})}function Kr(){if(wi(),pn({revalidation:"loading"}),pe.navigation.state!=="submitting"){if(pe.navigation.state==="idle"){Fi(pe.historyAction,pe.location,{startUninterruptedRevalidation:!0});return}Fi(pt||pe.historyAction,pe.navigation.location,{overrideNavigation:pe.navigation})}}async function Fi(H,ee,ue){ot&&ot.abort(),ot=null,pt=H,Ln=(ue&&ue.startUninterruptedRevalidation)===!0,se(pe.location,pe.matches),ct=(ue&&ue.preventScrollReset)===!0,Xt=(ue&&ue.enableViewTransition)===!0;let xe=u||v,Le=ue&&ue.overrideNavigation,De=Fs(xe,ee,D),nt=(ue&&ue.flushSync)===!0,Fe=me(De,xe,ee.pathname);if(Fe.active&&Fe.matches&&(De=Fe.matches),!De){let{error:Mt,notFoundMatches:_n,route:Et}=Q(ee.pathname);Li(ee,{matches:_n,loaderData:{},errors:{[Et.id]:Mt}},{flushSync:nt});return}if(pe.initialized&&!Hn&&pE(pe.location,ee)&&!(ue&&ue.submission&&sa(ue.submission.formMethod))){Li(ee,{matches:De},{flushSync:nt});return}ot=new AbortController;let gt=Zl(n.history,ee,ot.signal,ue&&ue.submission),Ve;if(ue&&ue.pendingError)Ve=[sc(De).route.id,{type:cn.error,error:ue.pendingError}];else if(ue&&ue.submission&&sa(ue.submission.formMethod)){let Mt=await $t(gt,ee,ue.submission,De,Fe.active,{replace:ue.replace,flushSync:nt});if(Mt.shortCircuited)return;if(Mt.pendingActionResult){let[_n,Et]=Mt.pendingActionResult;if(Mr(Et)&&af(Et.error)&&Et.error.status===404){ot=null,Li(ee,{matches:Mt.matches,loaderData:{},errors:{[_n]:Et.error}});return}}De=Mt.matches||De,Ve=Mt.pendingActionResult,Le=Xm(ee,ue.submission),nt=!1,Fe.active=!1,gt=Zl(n.history,gt.url,gt.signal)}let{shortCircuited:st,matches:xt,loaderData:Tt,errors:Dt}=await un(gt,ee,De,Fe.active,Le,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,nt,Ve);st||(ot=null,Li(ee,zn({matches:xt||De},Q1(Ve),{loaderData:Tt,errors:Dt})))}async function $t(H,ee,ue,xe,Le,De){De===void 0&&(De={}),wi();let nt=_E(ee,ue);if(pn({navigation:nt},{flushSync:De.flushSync===!0}),Le){let Ve=await re(xe,ee.pathname,H.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){let{boundaryId:st,error:xt}=R(ee.pathname,Ve);return{matches:Ve.partialMatches,pendingActionResult:[st,{type:cn.error,error:xt}]}}else if(Ve.matches)xe=Ve.matches;else{let{notFoundMatches:st,error:xt,route:Tt}=Q(ee.pathname);return{matches:st,pendingActionResult:[Tt.id,{type:cn.error,error:xt}]}}}let Fe,gt=Ku(xe,ee);if(!gt.route.action&&!gt.route.lazy)Fe={type:cn.error,error:Hi(405,{method:H.method,pathname:ee.pathname,routeId:gt.route.id})};else if(Fe=(await hr("action",H,[gt],xe))[0],H.signal.aborted)return{shortCircuited:!0};if(Vs(Fe)){let Ve;return De&&De.replace!=null?Ve=De.replace:Ve=X1(Fe.response.headers.get("Location"),new URL(H.url),D)===pe.location.pathname+pe.location.search,await dr(H,Fe,{submission:ue,replace:Ve}),{shortCircuited:!0}}if(js(Fe))throw Hi(400,{type:"defer-action"});if(Mr(Fe)){let Ve=sc(xe,gt.route.id);return(De&&De.replace)!==!0&&(pt=Kn.Push),{matches:xe,pendingActionResult:[Ve.route.id,Fe]}}return{matches:xe,pendingActionResult:[gt.route.id,Fe]}}async function un(H,ee,ue,xe,Le,De,nt,Fe,gt,Ve,st){let xt=Le||Xm(ee,De),Tt=De||nt||rv(xt),Dt=!Ln&&(!j.v7_partialHydration||!gt);if(xe){if(Dt){let Zt=pa(st);pn(zn({navigation:xt},Zt!==void 0?{actionData:Zt}:{}),{flushSync:Ve})}let _t=await re(ue,ee.pathname,H.signal);if(_t.type==="aborted")return{shortCircuited:!0};if(_t.type==="error"){let{boundaryId:Zt,error:In}=R(ee.pathname,_t);return{matches:_t.partialMatches,loaderData:{},errors:{[Zt]:In}}}else if(_t.matches)ue=_t.matches;else{let{error:Zt,notFoundMatches:In,route:It}=Q(ee.pathname);return{matches:In,loaderData:{},errors:{[It.id]:Zt}}}}let Mt=u||v,[_n,Et]=H1(n.history,pe,ue,Tt,ee,j.v7_partialHydration&&gt===!0,j.v7_skipActionErrorRevalidation,Hn,Un,rt,hn,yn,Tn,Mt,D,st);if(L(_t=>!(ue&&ue.some(Zt=>Zt.route.id===_t))||_n&&_n.some(Zt=>Zt.route.id===_t)),kt=++bt,_n.length===0&&Et.length===0){let _t=Ci();return Li(ee,zn({matches:ue,loaderData:{},errors:st&&Mr(st[1])?{[st[0]]:st[1].error}:null},Q1(st),_t?{fetchers:new Map(pe.fetchers)}:{}),{flushSync:Ve}),{shortCircuited:!0}}if(Dt){let _t={};if(!xe){_t.navigation=xt;let Zt=pa(st);Zt!==void 0&&(_t.actionData=Zt)}Et.length>0&&(_t.fetchers=Lr(Et)),pn(_t,{flushSync:Ve})}Et.forEach(_t=>{ut.has(_t.key)&&yt(_t.key),_t.controller&&ut.set(_t.key,_t.controller)});let Jr=()=>Et.forEach(_t=>yt(_t.key));ot&&ot.signal.addEventListener("abort",Jr);let{loaderResults:Qi,fetcherResults:On}=await Ne(pe.matches,ue,_n,Et,H);if(H.signal.aborted)return{shortCircuited:!0};ot&&ot.signal.removeEventListener("abort",Jr),Et.forEach(_t=>ut.delete(_t.key));let Nn=tv([...Qi,...On]);if(Nn){if(Nn.idx>=_n.length){let _t=Et[Nn.idx-_n.length].key;Tn.add(_t)}return await dr(H,Nn.result,{replace:Fe}),{shortCircuited:!0}}let{loaderData:ma,errors:mn}=J1(pe,ue,_n,Qi,st,Et,On,an);an.forEach((_t,Zt)=>{_t.subscribe(In=>{(In||_t.done)&&an.delete(Zt)})}),j.v7_partialHydration&&gt&&pe.errors&&Object.entries(pe.errors).filter(_t=>{let[Zt]=_t;return!_n.some(In=>In.route.id===Zt)}).forEach(_t=>{let[Zt,In]=_t;mn=Object.assign(mn||{},{[Zt]:In})});let Mn=Ci(),Yr=St(kt),Fr=Mn||Yr||Et.length>0;return zn({matches:ue,loaderData:ma,errors:mn},Fr?{fetchers:new Map(pe.fetchers)}:{})}function pa(H){if(H&&!Mr(H[1]))return{[H[0]]:H[1].data};if(pe.actionData)return Object.keys(pe.actionData).length===0?null:pe.actionData}function Lr(H){return H.forEach(ee=>{let ue=pe.fetchers.get(ee.key),xe=Uu(void 0,ue?ue.data:void 0);pe.fetchers.set(ee.key,xe)}),new Map(pe.fetchers)}function ur(H,ee,ue,xe){if(p)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ut.has(H)&&yt(H);let Le=(xe&&xe.unstable_flushSync)===!0,De=u||v,nt=Gg(pe.location,pe.matches,D,j.v7_prependBasename,ue,j.v7_relativeSplatPath,ee,xe==null?void 0:xe.relative),Fe=Fs(De,nt,D),gt=me(Fe,De,nt);if(gt.active&&gt.matches&&(Fe=gt.matches),!Fe){Bn(H,ee,Hi(404,{pathname:nt}),{flushSync:Le});return}let{path:Ve,submission:st,error:xt}=G1(j.v7_normalizeFormMethod,!0,nt,xe);if(xt){Bn(H,ee,xt,{flushSync:Le});return}let Tt=Ku(Fe,Ve);if(ct=(xe&&xe.preventScrollReset)===!0,st&&sa(st.formMethod)){fa(H,ee,Ve,Tt,Fe,gt.active,Le,st);return}yn.set(H,{routeId:ee,path:Ve}),bi(H,ee,Ve,Tt,Fe,gt.active,Le,st)}async function fa(H,ee,ue,xe,Le,De,nt,Fe){wi(),yn.delete(H);function gt(It){if(!It.route.action&&!It.route.lazy){let Si=Hi(405,{method:Fe.formMethod,pathname:ue,routeId:ee});return Bn(H,ee,Si,{flushSync:nt}),!0}return!1}if(!De&&gt(xe))return;let Ve=pe.fetchers.get(H);fn(H,vE(Fe,Ve),{flushSync:nt});let st=new AbortController,xt=Zl(n.history,ue,st.signal,Fe);if(De){let It=await re(Le,ue,xt.signal);if(It.type==="aborted")return;if(It.type==="error"){let{error:Si}=R(ue,It);Bn(H,ee,Si,{flushSync:nt});return}else if(It.matches){if(Le=It.matches,xe=Ku(Le,ue),gt(xe))return}else{Bn(H,ee,Hi(404,{pathname:ue}),{flushSync:nt});return}}ut.set(H,st);let Tt=bt,Mt=(await hr("action",xt,[xe],Le))[0];if(xt.signal.aborted){ut.get(H)===st&&ut.delete(H);return}if(j.v7_fetcherPersist&&hn.has(H)){if(Vs(Mt)||Mr(Mt)){fn(H,ko(void 0));return}}else{if(Vs(Mt))if(ut.delete(H),kt>Tt){fn(H,ko(void 0));return}else return Tn.add(H),fn(H,Uu(Fe)),dr(xt,Mt,{fetcherSubmission:Fe});if(Mr(Mt)){Bn(H,ee,Mt.error);return}}if(js(Mt))throw Hi(400,{type:"defer-action"});let _n=pe.navigation.location||pe.location,Et=Zl(n.history,_n,st.signal),Jr=u||v,Qi=pe.navigation.state!=="idle"?Fs(Jr,pe.navigation.location,D):pe.matches;Ut(Qi,"Didn't find any matches after fetcher action");let On=++bt;Nt.set(H,On);let Nn=Uu(Fe,Mt.data);pe.fetchers.set(H,Nn);let[ma,mn]=H1(n.history,pe,Qi,Fe,_n,!1,j.v7_skipActionErrorRevalidation,Hn,Un,rt,hn,yn,Tn,Jr,D,[xe.route.id,Mt]);mn.filter(It=>It.key!==H).forEach(It=>{let Si=It.key,pi=pe.fetchers.get(Si),Ra=Uu(void 0,pi?pi.data:void 0);pe.fetchers.set(Si,Ra),ut.has(Si)&&yt(Si),It.controller&&ut.set(Si,It.controller)}),pn({fetchers:new Map(pe.fetchers)});let Mn=()=>mn.forEach(It=>yt(It.key));st.signal.addEventListener("abort",Mn);let{loaderResults:Yr,fetcherResults:Fr}=await Ne(pe.matches,Qi,ma,mn,Et);if(st.signal.aborted)return;st.signal.removeEventListener("abort",Mn),Nt.delete(H),ut.delete(H),mn.forEach(It=>ut.delete(It.key));let _t=tv([...Yr,...Fr]);if(_t){if(_t.idx>=ma.length){let It=mn[_t.idx-ma.length].key;Tn.add(It)}return dr(Et,_t.result)}let{loaderData:Zt,errors:In}=J1(pe,pe.matches,ma,Yr,void 0,mn,Fr,an);if(pe.fetchers.has(H)){let It=ko(Mt.data);pe.fetchers.set(H,It)}St(On),pe.navigation.state==="loading"&&On>kt?(Ut(pt,"Expected pending action"),ot&&ot.abort(),Li(pe.navigation.location,{matches:Qi,loaderData:Zt,errors:In,fetchers:new Map(pe.fetchers)})):(pn({errors:In,loaderData:Y1(pe.loaderData,Zt,Qi,In),fetchers:new Map(pe.fetchers)}),Hn=!1)}async function bi(H,ee,ue,xe,Le,De,nt,Fe){let gt=pe.fetchers.get(H);fn(H,Uu(Fe,gt?gt.data:void 0),{flushSync:nt});let Ve=new AbortController,st=Zl(n.history,ue,Ve.signal);if(De){let Mt=await re(Le,ue,st.signal);if(Mt.type==="aborted")return;if(Mt.type==="error"){let{error:_n}=R(ue,Mt);Bn(H,ee,_n,{flushSync:nt});return}else if(Mt.matches)Le=Mt.matches,xe=Ku(Le,ue);else{Bn(H,ee,Hi(404,{pathname:ue}),{flushSync:nt});return}}ut.set(H,Ve);let xt=bt,Dt=(await hr("loader",st,[xe],Le))[0];if(js(Dt)&&(Dt=await Gb(Dt,st.signal,!0)||Dt),ut.get(H)===Ve&&ut.delete(H),!st.signal.aborted){if(hn.has(H)){fn(H,ko(void 0));return}if(Vs(Dt))if(kt>xt){fn(H,ko(void 0));return}else{Tn.add(H),await dr(st,Dt);return}if(Mr(Dt)){Bn(H,ee,Dt.error);return}Ut(!js(Dt),"Unhandled fetcher deferred data"),fn(H,ko(Dt.data))}}async function dr(H,ee,ue){let{submission:xe,fetcherSubmission:Le,replace:De}=ue===void 0?{}:ue;ee.response.headers.has("X-Remix-Revalidate")&&(Hn=!0);let nt=ee.response.headers.get("Location");Ut(nt,"Expected a Location header on the redirect Response"),nt=X1(nt,new URL(H.url),D);let Fe=Cd(pe.location,nt,{_isRedirect:!0});if(l){let Dt=!1;if(ee.response.headers.has("X-Remix-Reload-Document"))Dt=!0;else if(Gy.test(nt)){const Mt=n.history.createURL(nt);Dt=Mt.origin!==r.location.origin||Ec(Mt.pathname,D)==null}if(Dt){De?r.location.replace(nt):r.location.assign(nt);return}}ot=null;let gt=De===!0||ee.response.headers.has("X-Remix-Replace")?Kn.Replace:Kn.Push,{formMethod:Ve,formAction:st,formEncType:xt}=pe.navigation;!xe&&!Le&&Ve&&st&&xt&&(xe=rv(pe.navigation));let Tt=xe||Le;if(Q3.has(ee.response.status)&&Tt&&sa(Tt.formMethod))await Fi(gt,Fe,{submission:zn({},Tt,{formAction:nt}),preventScrollReset:ct});else{let Dt=Xm(Fe,xe);await Fi(gt,Fe,{overrideNavigation:Dt,fetcherSubmission:Le,preventScrollReset:ct})}}async function hr(H,ee,ue,xe){try{let Le=await lE(V,H,ee,ue,xe,b,_);return await Promise.all(Le.map((De,nt)=>{if(mE(De)){let Fe=De.result;return{type:cn.redirect,response:dE(Fe,ee,ue[nt].route.id,xe,D,j.v7_relativeSplatPath)}}return uE(De)}))}catch(Le){return ue.map(()=>({type:cn.error,error:Le}))}}async function Ne(H,ee,ue,xe,Le){let[De,...nt]=await Promise.all([ue.length?hr("loader",Le,ue,ee):[],...xe.map(Fe=>{if(Fe.matches&&Fe.match&&Fe.controller){let gt=Zl(n.history,Fe.path,Fe.controller.signal);return hr("loader",gt,[Fe.match],Fe.matches).then(Ve=>Ve[0])}else return Promise.resolve({type:cn.error,error:Hi(404,{pathname:Fe.path})})})]);return await Promise.all([iv(H,ue,De,De.map(()=>Le.signal),!1,pe.loaderData),iv(H,xe.map(Fe=>Fe.match),nt,xe.map(Fe=>Fe.controller?Fe.controller.signal:null),!0)]),{loaderResults:De,fetcherResults:nt}}function wi(){Hn=!0,Un.push(...L()),yn.forEach((H,ee)=>{ut.has(ee)&&(rt.add(ee),yt(ee))})}function fn(H,ee,ue){ue===void 0&&(ue={}),pe.fetchers.set(H,ee),pn({fetchers:new Map(pe.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Bn(H,ee,ue,xe){xe===void 0&&(xe={});let Le=sc(pe.matches,ee);Ue(H),pn({errors:{[Le.route.id]:ue},fetchers:new Map(pe.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function pr(H){return j.v7_fetcherPersist&&(Fn.set(H,(Fn.get(H)||0)+1),hn.has(H)&&hn.delete(H)),pe.fetchers.get(H)||eE}function Ue(H){let ee=pe.fetchers.get(H);ut.has(H)&&!(ee&&ee.state==="loading"&&Nt.has(H))&&yt(H),yn.delete(H),Nt.delete(H),Tn.delete(H),hn.delete(H),rt.delete(H),pe.fetchers.delete(H)}function Pt(H){if(j.v7_fetcherPersist){let ee=(Fn.get(H)||0)-1;ee<=0?(Fn.delete(H),hn.add(H)):Fn.set(H,ee)}else Ue(H);pn({fetchers:new Map(pe.fetchers)})}function yt(H){let ee=ut.get(H);Ut(ee,"Expected fetch controller: "+H),ee.abort(),ut.delete(H)}function Yn(H){for(let ee of H){let ue=pr(ee),xe=ko(ue.data);pe.fetchers.set(ee,xe)}}function Ci(){let H=[],ee=!1;for(let ue of Tn){let xe=pe.fetchers.get(ue);Ut(xe,"Expected fetcher: "+ue),xe.state==="loading"&&(Tn.delete(ue),H.push(ue),ee=!0)}return Yn(H),ee}function St(H){let ee=[];for(let[ue,xe]of Nt)if(xe<H){let Le=pe.fetchers.get(ue);Ut(Le,"Expected fetcher: "+ue),Le.state==="loading"&&(yt(ue),Nt.delete(ue),ee.push(ue))}return Yn(ee),ee.length>0}function Ji(H,ee){let ue=pe.blockers.get(H)||Vu;return $n.get(H)!==ee&&$n.set(H,ee),ue}function Yi(H){pe.blockers.delete(H),$n.delete(H)}function Bi(H,ee){let ue=pe.blockers.get(H)||Vu;Ut(ue.state==="unblocked"&&ee.state==="blocked"||ue.state==="blocked"&&ee.state==="blocked"||ue.state==="blocked"&&ee.state==="proceeding"||ue.state==="blocked"&&ee.state==="unblocked"||ue.state==="proceeding"&&ee.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+ee.state);let xe=new Map(pe.blockers);xe.set(H,ee),pn({blockers:xe})}function Oi(H){let{currentLocation:ee,nextLocation:ue,historyAction:xe}=H;if($n.size===0)return;$n.size>1&&Xs(!1,"A router only supports one blocker at a time");let Le=Array.from($n.entries()),[De,nt]=Le[Le.length-1],Fe=pe.blockers.get(De);if(!(Fe&&Fe.state==="proceeding")&&nt({currentLocation:ee,nextLocation:ue,historyAction:xe}))return De}function Q(H){let ee=Hi(404,{pathname:H}),ue=u||v,{matches:xe,route:Le}=ev(ue);return L(),{notFoundMatches:xe,route:Le,error:ee}}function R(H,ee){return{boundaryId:sc(ee.partialMatches).route.id,error:Hi(400,{type:"route-discovery",pathname:H,message:ee.error!=null&&"message"in ee.error?ee.error:String(ee.error)})}}function L(H){let ee=[];return an.forEach((ue,xe)=>{(!H||H(xe))&&(ue.cancel(),ee.push(xe),an.delete(xe))}),ee}function $(H,ee,ue){if(qe=H,ie=ee,ae=ue||null,!ce&&pe.navigation===Wm){ce=!0;let xe=de(pe.location,pe.matches);xe!=null&&pn({restoreScrollPosition:xe})}return()=>{qe=null,ie=null,ae=null}}function X(H,ee){return ae&&ae(H,ee.map(xe=>z3(xe,pe.loaderData)))||H.key}function se(H,ee){if(qe&&ie){let ue=X(H,ee);qe[ue]=ie()}}function de(H,ee){if(qe){let ue=X(H,ee),xe=qe[ue];if(typeof xe=="number")return xe}return null}function me(H,ee,ue){if(W){if(we.has(ue))return{active:!1,matches:H};if(H){if(Object.keys(H[0].params).length>0)return{active:!0,matches:hp(ee,ue,D,!0)}}else return{active:!0,matches:hp(ee,ue,D,!0)||[]}}return{active:!1,matches:null}}async function re(H,ee,ue){let xe=H;for(;;){let Le=u==null,De=u||v;try{await oE(W,ee,xe,De,b,_,Xr,ue)}catch(gt){return{type:"error",error:gt,partialMatches:xe}}finally{Le&&(v=[...v])}if(ue.aborted)return{type:"aborted"};let nt=Fs(De,ee,D);if(nt)return Se(ee,we),{type:"success",matches:nt};let Fe=hp(De,ee,D,!0);if(!Fe||xe.length===Fe.length&&xe.every((gt,Ve)=>gt.route.id===Fe[Ve].route.id))return Se(ee,we),{type:"success",matches:null};xe=Fe}}function Se(H,ee){if(ee.size>=Ce){let ue=ee.values().next().value;ee.delete(ue)}ee.add(H)}function ze(H){b={},u=Sd(H,_,void 0,b)}function ve(H,ee){let ue=u==null;Ub(H,ee,u||v,b,_),ue&&(v=[...v],pn({}))}return Qe={get basename(){return D},get future(){return j},get state(){return pe},get routes(){return v},get window(){return r},initialize:ka,subscribe:Rr,enableScrollRestoration:$,navigate:be,fetch:ur,revalidate:Kr,createHref:H=>n.history.createHref(H),encodeLocation:H=>n.history.encodeLocation(H),getFetcher:pr,deleteFetcher:Pt,dispose:cr,getBlocker:Ji,deleteBlocker:Yi,patchRoutes:ve,_internalFetchControllers:ut,_internalActiveDeferreds:an,_internalSetRoutes:ze},Qe}function iE(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Gg(n,r,l,p,_,b,v,u){let D,V;if(v){D=[];for(let j of r)if(D.push(j),j.route.id===v){V=j;break}}else D=r,V=r[r.length-1];let W=qy(_||".",$y(D,b),Ec(n.pathname,l)||n.pathname,u==="path");return _==null&&(W.search=n.search,W.hash=n.hash),(_==null||_===""||_===".")&&V&&V.route.index&&!Hy(W.search)&&(W.search=W.search?W.search.replace(/^\?/,"?index&"):"?index"),p&&l!=="/"&&(W.pathname=W.pathname==="/"?l:io([l,W.pathname])),Ks(W)}function G1(n,r,l,p){if(!p||!iE(p))return{path:l};if(p.formMethod&&!yE(p.formMethod))return{path:l,error:Hi(405,{method:p.formMethod})};let _=()=>({path:l,error:Hi(400,{type:"invalid-body"})}),b=p.formMethod||"get",v=n?b.toUpperCase():b.toLowerCase(),u=$b(l);if(p.body!==void 0){if(p.formEncType==="text/plain"){if(!sa(v))return _();let N=typeof p.body=="string"?p.body:p.body instanceof FormData||p.body instanceof URLSearchParams?Array.from(p.body.entries()).reduce((Te,Ce)=>{let[we,qe]=Ce;return""+Te+we+"="+qe+`
`},""):String(p.body);return{path:l,submission:{formMethod:v,formAction:u,formEncType:p.formEncType,formData:void 0,json:void 0,text:N}}}else if(p.formEncType==="application/json"){if(!sa(v))return _();try{let N=typeof p.body=="string"?JSON.parse(p.body):p.body;return{path:l,submission:{formMethod:v,formAction:u,formEncType:p.formEncType,formData:void 0,json:N,text:void 0}}}catch{return _()}}}Ut(typeof FormData=="function","FormData is not available in this environment");let D,V;if(p.formData)D=Hg(p.formData),V=p.formData;else if(p.body instanceof FormData)D=Hg(p.body),V=p.body;else if(p.body instanceof URLSearchParams)D=p.body,V=K1(D);else if(p.body==null)D=new URLSearchParams,V=new FormData;else try{D=new URLSearchParams(p.body),V=K1(D)}catch{return _()}let W={formMethod:v,formAction:u,formEncType:p&&p.formEncType||"application/x-www-form-urlencoded",formData:V,json:void 0,text:void 0};if(sa(W.formMethod))return{path:l,submission:W};let j=co(l);return r&&j.search&&Hy(j.search)&&D.append("index",""),j.search="?"+D,{path:Ks(j),submission:W}}function rE(n,r){let l=n;if(r){let p=n.findIndex(_=>_.route.id===r);p>=0&&(l=n.slice(0,p))}return l}function H1(n,r,l,p,_,b,v,u,D,V,W,j,N,Te,Ce,we){let qe=we?Mr(we[1])?we[1].error:we[1].data:void 0,ae=n.createURL(r.location),ie=n.createURL(_),ce=we&&Mr(we[1])?we[0]:void 0,Ae=ce?rE(l,ce):l,Re=we?we[1].statusCode:void 0,Xe=v&&Re&&Re>=400,Qe=Ae.filter((pt,ct)=>{let{route:ot}=pt;if(ot.lazy)return!0;if(ot.loader==null)return!1;if(b)return typeof ot.loader!="function"||ot.loader.hydrate?!0:r.loaderData[ot.id]===void 0&&(!r.errors||r.errors[ot.id]===void 0);if(aE(r.loaderData,r.matches[ct],pt)||D.some(Ft=>Ft===pt.route.id))return!0;let Xt=r.matches[ct],Ot=pt;return Z1(pt,zn({currentUrl:ae,currentParams:Xt.params,nextUrl:ie,nextParams:Ot.params},p,{actionResult:qe,actionStatus:Re,defaultShouldRevalidate:Xe?!1:u||ae.pathname+ae.search===ie.pathname+ie.search||ae.search!==ie.search||Vb(Xt,Ot)}))}),pe=[];return j.forEach((pt,ct)=>{if(b||!l.some(Ln=>Ln.route.id===pt.routeId)||W.has(ct))return;let ot=Fs(Te,pt.path,Ce);if(!ot){pe.push({key:ct,routeId:pt.routeId,path:pt.path,matches:null,match:null,controller:null});return}let Xt=r.fetchers.get(ct),Ot=Ku(ot,pt.path),Ft=!1;N.has(ct)?Ft=!1:V.has(ct)?(V.delete(ct),Ft=!0):Xt&&Xt.state!=="idle"&&Xt.data===void 0?Ft=u:Ft=Z1(Ot,zn({currentUrl:ae,currentParams:r.matches[r.matches.length-1].params,nextUrl:ie,nextParams:l[l.length-1].params},p,{actionResult:qe,actionStatus:Re,defaultShouldRevalidate:Xe?!1:u})),Ft&&pe.push({key:ct,routeId:pt.routeId,path:pt.path,matches:ot,match:Ot,controller:new AbortController})}),[Qe,pe]}function aE(n,r,l){let p=!r||l.route.id!==r.route.id,_=n[l.route.id]===void 0;return p||_}function Vb(n,r){let l=n.route.path;return n.pathname!==r.pathname||l!=null&&l.endsWith("*")&&n.params["*"]!==r.params["*"]}function Z1(n,r){if(n.route.shouldRevalidate){let l=n.route.shouldRevalidate(r);if(typeof l=="boolean")return l}return r.defaultShouldRevalidate}async function oE(n,r,l,p,_,b,v,u){let D=[r,...l.map(V=>V.route.id)].join("-");try{let V=v.get(D);V||(V=n({path:r,matches:l,patch:(W,j)=>{u.aborted||Ub(W,j,p,_,b)}}),v.set(D,V)),V&&fE(V)&&await V}finally{v.delete(D)}}function Ub(n,r,l,p,_){if(n){var b;let v=p[n];Ut(v,"No route found to patch children into: routeId = "+n);let u=Sd(r,_,[n,"patch",String(((b=v.children)==null?void 0:b.length)||"0")],p);v.children?v.children.push(...u):v.children=u}else{let v=Sd(r,_,["patch",String(l.length||"0")],p);l.push(...v)}}async function W1(n,r,l){if(!n.lazy)return;let p=await n.lazy();if(!n.lazy)return;let _=l[n.id];Ut(_,"No route found in manifest");let b={};for(let v in p){let D=_[v]!==void 0&&v!=="hasErrorBoundary";Xs(!D,'Route "'+_.id+'" has a static property "'+v+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+v+'" will be ignored.')),!D&&!I3.has(v)&&(b[v]=p[v])}Object.assign(_,b),Object.assign(_,zn({},r(_),{lazy:void 0}))}function sE(n){return Promise.all(n.matches.map(r=>r.resolve()))}async function lE(n,r,l,p,_,b,v,u){let D=p.reduce((j,N)=>j.add(N.route.id),new Set),V=new Set,W=await n({matches:_.map(j=>{let N=D.has(j.route.id);return zn({},j,{shouldLoad:N,resolve:Ce=>(V.add(j.route.id),N?cE(r,l,j,b,v,Ce,u):Promise.resolve({type:cn.data,result:void 0}))})}),request:l,params:_[0].params,context:u});return _.forEach(j=>Ut(V.has(j.route.id),'`match.resolve()` was not called for route id "'+j.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),W.filter((j,N)=>D.has(_[N].route.id))}async function cE(n,r,l,p,_,b,v){let u,D,V=W=>{let j,N=new Promise((we,qe)=>j=qe);D=()=>j(),r.signal.addEventListener("abort",D);let Te=we=>typeof W!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+l.route.id+"]"))):W({request:r,params:l.params,context:v},...we!==void 0?[we]:[]),Ce;return b?Ce=b(we=>Te(we)):Ce=(async()=>{try{return{type:"data",result:await Te()}}catch(we){return{type:"error",result:we}}})(),Promise.race([Ce,N])};try{let W=l.route[n];if(l.route.lazy)if(W){let j,[N]=await Promise.all([V(W).catch(Te=>{j=Te}),W1(l.route,_,p)]);if(j!==void 0)throw j;u=N}else if(await W1(l.route,_,p),W=l.route[n],W)u=await V(W);else if(n==="action"){let j=new URL(r.url),N=j.pathname+j.search;throw Hi(405,{method:r.method,pathname:N,routeId:l.route.id})}else return{type:cn.data,result:void 0};else if(W)u=await V(W);else{let j=new URL(r.url),N=j.pathname+j.search;throw Hi(404,{pathname:N})}Ut(u.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+l.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(W){return{type:cn.error,result:W}}finally{D&&r.signal.removeEventListener("abort",D)}return u}async function uE(n){let{result:r,type:l}=n;if(qb(r)){let V;try{let W=r.headers.get("Content-Type");W&&/\bapplication\/json\b/.test(W)?r.body==null?V=null:V=await r.json():V=await r.text()}catch(W){return{type:cn.error,error:W}}return l===cn.error?{type:cn.error,error:new Bp(r.status,r.statusText,V),statusCode:r.status,headers:r.headers}:{type:cn.data,data:V,statusCode:r.status,headers:r.headers}}if(l===cn.error){if(nv(r)){var p;if(r.data instanceof Error){var _;return{type:cn.error,error:r.data,statusCode:(_=r.init)==null?void 0:_.status}}r=new Bp(((p=r.init)==null?void 0:p.status)||500,void 0,r.data)}return{type:cn.error,error:r,statusCode:af(r)?r.status:void 0}}if(gE(r)){var b,v;return{type:cn.deferred,deferredData:r,statusCode:(b=r.init)==null?void 0:b.status,headers:((v=r.init)==null?void 0:v.headers)&&new Headers(r.init.headers)}}if(nv(r)){var u,D;return{type:cn.data,data:r.data,statusCode:(u=r.init)==null?void 0:u.status,headers:(D=r.init)!=null&&D.headers?new Headers(r.init.headers):void 0}}return{type:cn.data,data:r}}function dE(n,r,l,p,_,b){let v=n.headers.get("Location");if(Ut(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!Gy.test(v)){let u=p.slice(0,p.findIndex(D=>D.route.id===l)+1);v=Gg(new URL(r.url),u,_,!0,v,b),n.headers.set("Location",v)}return n}function X1(n,r,l){if(Gy.test(n)){let p=n,_=p.startsWith("//")?new URL(r.protocol+p):new URL(p),b=Ec(_.pathname,l)!=null;if(_.origin===r.origin&&b)return _.pathname+_.search+_.hash}return n}function Zl(n,r,l,p){let _=n.createURL($b(r)).toString(),b={signal:l};if(p&&sa(p.formMethod)){let{formMethod:v,formEncType:u}=p;b.method=v.toUpperCase(),u==="application/json"?(b.headers=new Headers({"Content-Type":u}),b.body=JSON.stringify(p.json)):u==="text/plain"?b.body=p.text:u==="application/x-www-form-urlencoded"&&p.formData?b.body=Hg(p.formData):b.body=p.formData}return new Request(_,b)}function Hg(n){let r=new URLSearchParams;for(let[l,p]of n.entries())r.append(l,typeof p=="string"?p:p.name);return r}function K1(n){let r=new FormData;for(let[l,p]of n.entries())r.append(l,p);return r}function hE(n,r,l,p,_,b){let v={},u=null,D,V=!1,W={},j=p&&Mr(p[1])?p[1].error:void 0;return l.forEach((N,Te)=>{let Ce=r[Te].route.id;if(Ut(!Vs(N),"Cannot handle redirect results in processLoaderData"),Mr(N)){let we=N.error;j!==void 0&&(we=j,j=void 0),u=u||{};{let qe=sc(n,Ce);u[qe.route.id]==null&&(u[qe.route.id]=we)}v[Ce]=void 0,V||(V=!0,D=af(N.error)?N.error.status:500),N.headers&&(W[Ce]=N.headers)}else js(N)?(_.set(Ce,N.deferredData),v[Ce]=N.deferredData.data,N.statusCode!=null&&N.statusCode!==200&&!V&&(D=N.statusCode),N.headers&&(W[Ce]=N.headers)):(v[Ce]=N.data,N.statusCode&&N.statusCode!==200&&!V&&(D=N.statusCode),N.headers&&(W[Ce]=N.headers))}),j!==void 0&&p&&(u={[p[0]]:j},v[p[0]]=void 0),{loaderData:v,errors:u,statusCode:D||200,loaderHeaders:W}}function J1(n,r,l,p,_,b,v,u){let{loaderData:D,errors:V}=hE(r,l,p,_,u);for(let W=0;W<b.length;W++){let{key:j,match:N,controller:Te}=b[W];Ut(v!==void 0&&v[W]!==void 0,"Did not find corresponding fetcher result");let Ce=v[W];if(!(Te&&Te.signal.aborted))if(Mr(Ce)){let we=sc(n.matches,N==null?void 0:N.route.id);V&&V[we.route.id]||(V=zn({},V,{[we.route.id]:Ce.error})),n.fetchers.delete(j)}else if(Vs(Ce))Ut(!1,"Unhandled fetcher revalidation redirect");else if(js(Ce))Ut(!1,"Unhandled fetcher deferred data");else{let we=ko(Ce.data);n.fetchers.set(j,we)}}return{loaderData:D,errors:V}}function Y1(n,r,l,p){let _=zn({},r);for(let b of l){let v=b.route.id;if(r.hasOwnProperty(v)?r[v]!==void 0&&(_[v]=r[v]):n[v]!==void 0&&b.route.loader&&(_[v]=n[v]),p&&p.hasOwnProperty(v))break}return _}function Q1(n){return n?Mr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function sc(n,r){return(r?n.slice(0,n.findIndex(p=>p.route.id===r)+1):[...n]).reverse().find(p=>p.route.hasErrorBoundary===!0)||n[0]}function ev(n){let r=n.length===1?n[0]:n.find(l=>l.index||!l.path||l.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function Hi(n,r){let{pathname:l,routeId:p,method:_,type:b,message:v}=r===void 0?{}:r,u="Unknown Server Error",D="Unknown @remix-run/router error";return n===400?(u="Bad Request",b==="route-discovery"?D='Unable to match URL "'+l+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+v):_&&l&&p?D="You made a "+_+' request to "'+l+'" but '+('did not provide a `loader` for route "'+p+'", ')+"so there is no way to handle the request.":b==="defer-action"?D="defer() is not supported in actions":b==="invalid-body"&&(D="Unable to encode submission body")):n===403?(u="Forbidden",D='Route "'+p+'" does not match URL "'+l+'"'):n===404?(u="Not Found",D='No route matches URL "'+l+'"'):n===405&&(u="Method Not Allowed",_&&l&&p?D="You made a "+_.toUpperCase()+' request to "'+l+'" but '+('did not provide an `action` for route "'+p+'", ')+"so there is no way to handle the request.":_&&(D='Invalid request method "'+_.toUpperCase()+'"')),new Bp(n||500,u,new Error(D),!0)}function tv(n){for(let r=n.length-1;r>=0;r--){let l=n[r];if(Vs(l))return{result:l,idx:r}}}function $b(n){let r=typeof n=="string"?co(n):n;return Ks(zn({},r,{hash:""}))}function pE(n,r){return n.pathname!==r.pathname||n.search!==r.search?!1:n.hash===""?r.hash!=="":n.hash===r.hash?!0:r.hash!==""}function fE(n){return typeof n=="object"&&n!=null&&"then"in n}function mE(n){return qb(n.result)&&Y3.has(n.result.status)}function js(n){return n.type===cn.deferred}function Mr(n){return n.type===cn.error}function Vs(n){return(n&&n.type)===cn.redirect}function nv(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function gE(n){let r=n;return r&&typeof r=="object"&&typeof r.data=="object"&&typeof r.subscribe=="function"&&typeof r.cancel=="function"&&typeof r.resolveData=="function"}function qb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function yE(n){return J3.has(n.toLowerCase())}function sa(n){return X3.has(n.toLowerCase())}async function iv(n,r,l,p,_,b){for(let v=0;v<l.length;v++){let u=l[v],D=r[v];if(!D)continue;let V=n.find(j=>j.route.id===D.route.id),W=V!=null&&!Vb(V,D)&&(b&&b[D.route.id])!==void 0;if(js(u)&&(_||W)){let j=p[v];Ut(j,"Expected an AbortSignal for revalidating fetcher deferred result"),await Gb(u,j,_).then(N=>{N&&(l[v]=N||l[v])})}}}async function Gb(n,r,l){if(l===void 0&&(l=!1),!await n.deferredData.resolveData(r)){if(l)try{return{type:cn.data,data:n.deferredData.unwrappedData}}catch(_){return{type:cn.error,error:_}}return{type:cn.data,data:n.deferredData.data}}}function Hy(n){return new URLSearchParams(n).getAll("index").some(r=>r==="")}function Ku(n,r){let l=typeof r=="string"?co(r).search:r.search;if(n[n.length-1].route.index&&Hy(l||""))return n[n.length-1];let p=Ob(n);return p[p.length-1]}function rv(n){let{formMethod:r,formAction:l,formEncType:p,text:_,formData:b,json:v}=n;if(!(!r||!l||!p)){if(_!=null)return{formMethod:r,formAction:l,formEncType:p,formData:void 0,json:void 0,text:_};if(b!=null)return{formMethod:r,formAction:l,formEncType:p,formData:b,json:void 0,text:void 0};if(v!==void 0)return{formMethod:r,formAction:l,formEncType:p,formData:void 0,json:v,text:void 0}}}function Xm(n,r){return r?{state:"loading",location:n,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _E(n,r){return{state:"submitting",location:n,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function Uu(n,r){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function vE(n,r){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:r?r.data:void 0}}function ko(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function xE(n,r){try{let l=n.sessionStorage.getItem(jb);if(l){let p=JSON.parse(l);for(let[_,b]of Object.entries(p||{}))b&&Array.isArray(b)&&r.set(_,new Set(b||[]))}}catch{}}function bE(n,r){if(r.size>0){let l={};for(let[p,_]of r)l[p]=[..._];try{n.sessionStorage.setItem(jb,JSON.stringify(l))}catch(p){Xs(!1,"Failed to save applied view transitions in sessionStorage ("+p+").")}}}/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Op(){return Op=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},Op.apply(this,arguments)}const of=Me.createContext(null),Hb=Me.createContext(null),Qs=Me.createContext(null),Zy=Me.createContext(null),Qo=Me.createContext({outlet:null,matches:[],isDataRoute:!1}),Zb=Me.createContext(null);function wE(n,r){let{relative:l}=r===void 0?{}:r;Dd()||Ut(!1);let{basename:p,navigator:_}=Me.useContext(Qs),{hash:b,pathname:v,search:u}=Xb(n,{relative:l}),D=v;return p!=="/"&&(D=v==="/"?p:io([p,v])),_.createHref({pathname:D,search:u,hash:b})}function Dd(){return Me.useContext(Zy)!=null}function sf(){return Dd()||Ut(!1),Me.useContext(Zy).location}function Wb(n){Me.useContext(Qs).static||Me.useLayoutEffect(n)}function CE(){let{isDataRoute:n}=Me.useContext(Qo);return n?BE():SE()}function SE(){Dd()||Ut(!1);let n=Me.useContext(of),{basename:r,future:l,navigator:p}=Me.useContext(Qs),{matches:_}=Me.useContext(Qo),{pathname:b}=sf(),v=JSON.stringify($y(_,l.v7_relativeSplatPath)),u=Me.useRef(!1);return Wb(()=>{u.current=!0}),Me.useCallback(function(V,W){if(W===void 0&&(W={}),!u.current)return;if(typeof V=="number"){p.go(V);return}let j=qy(V,JSON.parse(v),b,W.relative==="path");n==null&&r!=="/"&&(j.pathname=j.pathname==="/"?r:io([r,j.pathname])),(W.replace?p.replace:p.push)(j,W.state,W)},[r,p,v,b,n])}const EE=Me.createContext(null);function AE(n){let r=Me.useContext(Qo).outlet;return r&&Me.createElement(EE.Provider,{value:n},r)}function Xb(n,r){let{relative:l}=r===void 0?{}:r,{future:p}=Me.useContext(Qs),{matches:_}=Me.useContext(Qo),{pathname:b}=sf(),v=JSON.stringify($y(_,p.v7_relativeSplatPath));return Me.useMemo(()=>qy(n,JSON.parse(v),b,l==="path"),[n,v,b,l])}function TE(n,r,l,p){Dd()||Ut(!1);let{navigator:_}=Me.useContext(Qs),{matches:b}=Me.useContext(Qo),v=b[b.length-1],u=v?v.params:{};v&&v.pathname;let D=v?v.pathnameBase:"/";v&&v.route;let V=sf(),W;W=V;let j=W.pathname||"/",N=j;if(D!=="/"){let we=D.replace(/^\//,"").split("/");N="/"+j.replace(/^\//,"").split("/").slice(we.length).join("/")}let Te=Fs(n,{pathname:N});return DE(Te&&Te.map(we=>Object.assign({},we,{params:Object.assign({},u,we.params),pathname:io([D,_.encodeLocation?_.encodeLocation(we.pathname).pathname:we.pathname]),pathnameBase:we.pathnameBase==="/"?D:io([D,_.encodeLocation?_.encodeLocation(we.pathnameBase).pathname:we.pathnameBase])})),b,l,p)}function ME(){let n=FE(),r=af(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),l=n instanceof Error?n.stack:null,_={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Me.createElement(Me.Fragment,null,Me.createElement("h2",null,"Unexpected Application Error!"),Me.createElement("h3",{style:{fontStyle:"italic"}},r),l?Me.createElement("pre",{style:_},l):null,null)}const IE=Me.createElement(ME,null);class PE extends Me.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,l){return l.location!==r.location||l.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:l.error,location:l.location,revalidation:r.revalidation||l.revalidation}}componentDidCatch(r,l){console.error("React Router caught the following error during render",r,l)}render(){return this.state.error!==void 0?Me.createElement(Qo.Provider,{value:this.props.routeContext},Me.createElement(Zb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zE(n){let{routeContext:r,match:l,children:p}=n,_=Me.useContext(of);return _&&_.static&&_.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(_.staticContext._deepestRenderedBoundaryId=l.route.id),Me.createElement(Qo.Provider,{value:r},p)}function DE(n,r,l,p){var _;if(r===void 0&&(r=[]),l===void 0&&(l=null),p===void 0&&(p=null),n==null){var b;if(!l)return null;if(l.errors)n=l.matches;else if((b=p)!=null&&b.v7_partialHydration&&r.length===0&&!l.initialized&&l.matches.length>0)n=l.matches;else return null}let v=n,u=(_=l)==null?void 0:_.errors;if(u!=null){let W=v.findIndex(j=>j.route.id&&(u==null?void 0:u[j.route.id])!==void 0);W>=0||Ut(!1),v=v.slice(0,Math.min(v.length,W+1))}let D=!1,V=-1;if(l&&p&&p.v7_partialHydration)for(let W=0;W<v.length;W++){let j=v[W];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(V=W),j.route.id){let{loaderData:N,errors:Te}=l,Ce=j.route.loader&&N[j.route.id]===void 0&&(!Te||Te[j.route.id]===void 0);if(j.route.lazy||Ce){D=!0,V>=0?v=v.slice(0,V+1):v=[v[0]];break}}}return v.reduceRight((W,j,N)=>{let Te,Ce=!1,we=null,qe=null;l&&(Te=u&&j.route.id?u[j.route.id]:void 0,we=j.route.errorElement||IE,D&&(V<0&&N===0?(OE("route-fallback"),Ce=!0,qe=null):V===N&&(Ce=!0,qe=j.route.hydrateFallbackElement||null)));let ae=r.concat(v.slice(0,N+1)),ie=()=>{let ce;return Te?ce=we:Ce?ce=qe:j.route.Component?ce=Me.createElement(j.route.Component,null):j.route.element?ce=j.route.element:ce=W,Me.createElement(zE,{match:j,routeContext:{outlet:W,matches:ae,isDataRoute:l!=null},children:ce})};return l&&(j.route.ErrorBoundary||j.route.errorElement||N===0)?Me.createElement(PE,{location:l.location,revalidation:l.revalidation,component:we,error:Te,children:ie(),routeContext:{outlet:null,matches:ae,isDataRoute:!0}}):ie()},null)}var Kb=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Kb||{}),Np=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Np||{});function kE(n){let r=Me.useContext(of);return r||Ut(!1),r}function RE(n){let r=Me.useContext(Hb);return r||Ut(!1),r}function LE(n){let r=Me.useContext(Qo);return r||Ut(!1),r}function Jb(n){let r=LE(),l=r.matches[r.matches.length-1];return l.route.id||Ut(!1),l.route.id}function FE(){var n;let r=Me.useContext(Zb),l=RE(Np.UseRouteError),p=Jb(Np.UseRouteError);return r!==void 0?r:(n=l.errors)==null?void 0:n[p]}function BE(){let{router:n}=kE(Kb.UseNavigateStable),r=Jb(Np.UseNavigateStable),l=Me.useRef(!1);return Wb(()=>{l.current=!0}),Me.useCallback(function(_,b){b===void 0&&(b={}),l.current&&(typeof _=="number"?n.navigate(_):n.navigate(_,Op({fromRouteId:r},b)))},[n,r])}const av={};function OE(n,r,l){av[n]||(av[n]=!0)}function NE(n){return AE(n.context)}function jE(n){let{basename:r="/",children:l=null,location:p,navigationType:_=Kn.Pop,navigator:b,static:v=!1,future:u}=n;Dd()&&Ut(!1);let D=r.replace(/^\/*/,"/"),V=Me.useMemo(()=>({basename:D,navigator:b,static:v,future:Op({v7_relativeSplatPath:!1},u)}),[D,u,b,v]);typeof p=="string"&&(p=co(p));let{pathname:W="/",search:j="",hash:N="",state:Te=null,key:Ce="default"}=p,we=Me.useMemo(()=>{let qe=Ec(W,D);return qe==null?null:{location:{pathname:qe,search:j,hash:N,state:Te,key:Ce},navigationType:_}},[D,W,j,N,Te,Ce,_]);return we==null?null:Me.createElement(Qs.Provider,{value:V},Me.createElement(Zy.Provider,{children:l,value:we}))}new Promise(()=>{});function VE(n){let r={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(r,{element:Me.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(r,{hydrateFallbackElement:Me.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(r,{errorElement:Me.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),r}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},Ed.apply(this,arguments)}function UE(n,r){if(n==null)return{};var l={},p=Object.keys(n),_,b;for(b=0;b<p.length;b++)_=p[b],!(r.indexOf(_)>=0)&&(l[_]=n[_]);return l}function $E(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function qE(n,r){return n.button===0&&(!r||r==="_self")&&!$E(n)}const GE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],HE="6";try{window.__reactRouterVersion=HE}catch{}function ZE(n,r){return nE({basename:void 0,future:Ed({},void 0,{v7_prependBasename:!0}),history:A3({window:void 0}),hydrationData:WE(),routes:n,mapRouteProperties:VE,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function WE(){var n;let r=(n=window)==null?void 0:n.__staticRouterHydrationData;return r&&r.errors&&(r=Ed({},r,{errors:XE(r.errors)})),r}function XE(n){if(!n)return null;let r=Object.entries(n),l={};for(let[p,_]of r)if(_&&_.__type==="RouteErrorResponse")l[p]=new Bp(_.status,_.statusText,_.data,_.internal===!0);else if(_&&_.__type==="Error"){if(_.__subType){let b=window[_.__subType];if(typeof b=="function")try{let v=new b(_.message);v.stack="",l[p]=v}catch{}}if(l[p]==null){let b=new Error(_.message);b.stack="",l[p]=b}}else l[p]=_;return l}const KE=Me.createContext({isTransitioning:!1}),JE=Me.createContext(new Map),YE="startTransition",ov=pC[YE],QE="flushSync",sv=E3[QE];function eA(n){ov?ov(n):n()}function $u(n){sv?sv(n):n()}class tA{constructor(){this.status="pending",this.promise=new Promise((r,l)=>{this.resolve=p=>{this.status==="pending"&&(this.status="resolved",r(p))},this.reject=p=>{this.status==="pending"&&(this.status="rejected",l(p))}})}}function nA(n){let{fallbackElement:r,router:l,future:p}=n,[_,b]=Me.useState(l.state),[v,u]=Me.useState(),[D,V]=Me.useState({isTransitioning:!1}),[W,j]=Me.useState(),[N,Te]=Me.useState(),[Ce,we]=Me.useState(),qe=Me.useRef(new Map),{v7_startTransition:ae}=p||{},ie=Me.useCallback(pe=>{ae?eA(pe):pe()},[ae]),ce=Me.useCallback((pe,pt)=>{let{deletedFetchers:ct,unstable_flushSync:ot,unstable_viewTransitionOpts:Xt}=pt;ct.forEach(Ft=>qe.current.delete(Ft)),pe.fetchers.forEach((Ft,Ln)=>{Ft.data!==void 0&&qe.current.set(Ln,Ft.data)});let Ot=l.window==null||l.window.document==null||typeof l.window.document.startViewTransition!="function";if(!Xt||Ot){ot?$u(()=>b(pe)):ie(()=>b(pe));return}if(ot){$u(()=>{N&&(W&&W.resolve(),N.skipTransition()),V({isTransitioning:!0,flushSync:!0,currentLocation:Xt.currentLocation,nextLocation:Xt.nextLocation})});let Ft=l.window.document.startViewTransition(()=>{$u(()=>b(pe))});Ft.finished.finally(()=>{$u(()=>{j(void 0),Te(void 0),u(void 0),V({isTransitioning:!1})})}),$u(()=>Te(Ft));return}N?(W&&W.resolve(),N.skipTransition(),we({state:pe,currentLocation:Xt.currentLocation,nextLocation:Xt.nextLocation})):(u(pe),V({isTransitioning:!0,flushSync:!1,currentLocation:Xt.currentLocation,nextLocation:Xt.nextLocation}))},[l.window,N,W,qe,ie]);Me.useLayoutEffect(()=>l.subscribe(ce),[l,ce]),Me.useEffect(()=>{D.isTransitioning&&!D.flushSync&&j(new tA)},[D]),Me.useEffect(()=>{if(W&&v&&l.window){let pe=v,pt=W.promise,ct=l.window.document.startViewTransition(async()=>{ie(()=>b(pe)),await pt});ct.finished.finally(()=>{j(void 0),Te(void 0),u(void 0),V({isTransitioning:!1})}),Te(ct)}},[ie,v,W,l.window]),Me.useEffect(()=>{W&&v&&_.location.key===v.location.key&&W.resolve()},[W,N,_.location,v]),Me.useEffect(()=>{!D.isTransitioning&&Ce&&(u(Ce.state),V({isTransitioning:!0,flushSync:!1,currentLocation:Ce.currentLocation,nextLocation:Ce.nextLocation}),we(void 0))},[D.isTransitioning,Ce]),Me.useEffect(()=>{},[]);let Ae=Me.useMemo(()=>({createHref:l.createHref,encodeLocation:l.encodeLocation,go:pe=>l.navigate(pe),push:(pe,pt,ct)=>l.navigate(pe,{state:pt,preventScrollReset:ct==null?void 0:ct.preventScrollReset}),replace:(pe,pt,ct)=>l.navigate(pe,{replace:!0,state:pt,preventScrollReset:ct==null?void 0:ct.preventScrollReset})}),[l]),Re=l.basename||"/",Xe=Me.useMemo(()=>({router:l,navigator:Ae,static:!1,basename:Re}),[l,Ae,Re]),Qe=Me.useMemo(()=>({v7_relativeSplatPath:l.future.v7_relativeSplatPath}),[l.future.v7_relativeSplatPath]);return Me.createElement(Me.Fragment,null,Me.createElement(of.Provider,{value:Xe},Me.createElement(Hb.Provider,{value:_},Me.createElement(JE.Provider,{value:qe.current},Me.createElement(KE.Provider,{value:D},Me.createElement(jE,{basename:Re,location:_.location,navigationType:_.historyAction,navigator:Ae,future:Qe},_.initialized||l.future.v7_partialHydration?Me.createElement(iA,{routes:l.routes,future:l.future,state:_}):r))))),null)}const iA=Me.memo(rA);function rA(n){let{routes:r,future:l,state:p}=n;return TE(r,void 0,p,l)}const aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lv=Me.forwardRef(function(r,l){let{onClick:p,relative:_,reloadDocument:b,replace:v,state:u,target:D,to:V,preventScrollReset:W,unstable_viewTransition:j}=r,N=UE(r,GE),{basename:Te}=Me.useContext(Qs),Ce,we=!1;if(typeof V=="string"&&oA.test(V)&&(Ce=V,aA))try{let ce=new URL(window.location.href),Ae=V.startsWith("//")?new URL(ce.protocol+V):new URL(V),Re=Ec(Ae.pathname,Te);Ae.origin===ce.origin&&Re!=null?V=Re+Ae.search+Ae.hash:we=!0}catch{}let qe=wE(V,{relative:_}),ae=sA(V,{replace:v,state:u,target:D,preventScrollReset:W,relative:_,unstable_viewTransition:j});function ie(ce){p&&p(ce),ce.defaultPrevented||ae(ce)}return Me.createElement("a",Ed({},N,{href:Ce||qe,onClick:we||b?p:ie,ref:l,target:D}))});var cv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(cv||(cv={}));var uv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(uv||(uv={}));function sA(n,r){let{target:l,replace:p,state:_,preventScrollReset:b,relative:v,unstable_viewTransition:u}=r===void 0?{}:r,D=CE(),V=sf(),W=Xb(n,{relative:v});return Me.useCallback(j=>{if(qE(j,l)){j.preventDefault();let N=p!==void 0?p:Ks(V)===Ks(W);D(n,{replace:N,state:_,preventScrollReset:b,relative:v,unstable_viewTransition:u})}},[V,D,W,p,_,l,n,b,v,u])}function lA(){return it.jsx(it.Fragment,{children:it.jsx(NE,{})})}const cA="_navbar_1gpi9_1",uA="_logo_1gpi9_17",dA="_us_1gpi9_24",Km={navbar:cA,logo:uA,us:dA};var Yb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dv=to.createContext&&to.createContext(Yb),hA=["attr","size","title"];function pA(n,r){if(n==null)return{};var l=fA(n,r),p,_;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(n);for(_=0;_<b.length;_++)p=b[_],!(r.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(n,p)&&(l[p]=n[p])}return l}function fA(n,r){if(n==null)return{};var l={};for(var p in n)if(Object.prototype.hasOwnProperty.call(n,p)){if(r.indexOf(p)>=0)continue;l[p]=n[p]}return l}function jp(){return jp=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},jp.apply(this,arguments)}function hv(n,r){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(n);r&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable})),l.push.apply(l,p)}return l}function Vp(n){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?hv(Object(l),!0).forEach(function(p){mA(n,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):hv(Object(l)).forEach(function(p){Object.defineProperty(n,p,Object.getOwnPropertyDescriptor(l,p))})}return n}function mA(n,r,l){return r=gA(r),r in n?Object.defineProperty(n,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[r]=l,n}function gA(n){var r=yA(n,"string");return typeof r=="symbol"?r:r+""}function yA(n,r){if(typeof n!="object"||!n)return n;var l=n[Symbol.toPrimitive];if(l!==void 0){var p=l.call(n,r||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Qb(n){return n&&n.map((r,l)=>to.createElement(r.tag,Vp({key:l},r.attr),Qb(r.child)))}function ha(n){return r=>to.createElement(_A,jp({attr:Vp({},n.attr)},r),Qb(n.child))}function _A(n){var r=l=>{var{attr:p,size:_,title:b}=n,v=pA(n,hA),u=_||l.size||"1em",D;return l.className&&(D=l.className),n.className&&(D=(D?D+" ":"")+n.className),to.createElement("svg",jp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,p,v,{className:D,style:Vp(Vp({color:n.color||l.color},l.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),b&&to.createElement("title",null,b),n.children)};return dv!==void 0?to.createElement(dv.Consumer,null,l=>r(l)):r(Yb)}function vA(n){return ha({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 17h-14c-1.103 0-2 .897-2 2s.897 2 2 2h14c1.103 0 2-.897 2-2s-.897-2-2-2zM19 10h-14c-1.103 0-2 .897-2 2s.897 2 2 2h14c1.103 0 2-.897 2-2s-.897-2-2-2zM19 3h-14c-1.103 0-2 .897-2 2s.897 2 2 2h14c1.103 0 2-.897 2-2s-.897-2-2-2z"},child:[]}]})(n)}function xA(){return it.jsxs("section",{className:Km.navbar,children:[it.jsx(lv,{to:"/",children:it.jsx("h1",{className:Km.logo,children:"Mapa de los Comedores"})}),it.jsx(lv,{to:"/us",children:it.jsx("h1",{className:Km.us,children:it.jsx(vA,{})})})]})}const bA="modulepreload",wA=function(n){return"/MapaDeLosComedores/"+n},pv={},CA=function(r,l,p){let _=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),v=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));_=Promise.all(l.map(u=>{if(u=wA(u),u in pv)return;pv[u]=!0;const D=u.endsWith(".css"),V=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${V}`))return;const W=document.createElement("link");if(W.rel=D?"stylesheet":bA,D||(W.as="script"),W.crossOrigin="",W.href=u,v&&W.setAttribute("nonce",v),document.head.appendChild(W),D)return new Promise((j,N)=>{W.addEventListener("load",j),W.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}return _.then(()=>r()).catch(b=>{const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=b,window.dispatchEvent(v),!v.defaultPrevented)throw b})},SA=Me.createContext(null);function EA(n,r){const l=Array.isArray(n)?n[0]:n?n.x:0,p=Array.isArray(n)?n[1]:n?n.y:0,_=Array.isArray(r)?r[0]:r?r.x:0,b=Array.isArray(r)?r[1]:r?r.y:0;return l===_&&p===b}function Ya(n,r){if(n===r)return!0;if(!n||!r)return!1;if(Array.isArray(n)){if(!Array.isArray(r)||n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(!Ya(n[l],r[l]))return!1;return!0}else if(Array.isArray(r))return!1;if(typeof n=="object"&&typeof r=="object"){const l=Object.keys(n),p=Object.keys(r);if(l.length!==p.length)return!1;for(const _ of l)if(!r.hasOwnProperty(_)||!Ya(n[_],r[_]))return!1;return!0}return!1}function AA(n){const r=n.clone();return r.pixelsToGLUnits=n.pixelsToGLUnits,r}function fv(n,r){if(!n.getProjection)return;const l=n.getProjection(),p=r.getProjection();Ya(l,p)||r.setProjection(l)}function mv(n){return{longitude:n.center.lng,latitude:n.center.lat,zoom:n.zoom,pitch:n.pitch,bearing:n.bearing,padding:n.padding}}function gv(n,r){const l=r.viewState||r;let p=!1;if("longitude"in l&&"latitude"in l){const _=n.center;n.center=new _.constructor(l.longitude,l.latitude),p=p||_!==n.center}if("zoom"in l){const _=n.zoom;n.zoom=l.zoom,p=p||_!==n.zoom}if("bearing"in l){const _=n.bearing;n.bearing=l.bearing,p=p||_!==n.bearing}if("pitch"in l){const _=n.pitch;n.pitch=l.pitch,p=p||_!==n.pitch}return l.padding&&!n.isPaddingEqual(l.padding)&&(p=!0,n.padding=l.padding),p}const TA=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yv(n){if(!n)return null;if(typeof n=="string"||("toJS"in n&&(n=n.toJS()),!n.layers))return n;const r={};for(const p of n.layers)r[p.id]=p;const l=n.layers.map(p=>{let _=null;"interactive"in p&&(_=Object.assign({},p),delete _.interactive);const b=r[p.ref];if(b){_=_||Object.assign({},p),delete _.ref;for(const v of TA)v in b&&(_[v]=b[v])}return _||p});return{...n,layers:l}}var _v={};const vv={version:8,sources:{},layers:[]},xv={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Jm={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},bv={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},MA=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],IA=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class bc{constructor(r,l,p){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=_=>{const b=this.props[bv[_.type]];b?b(_):_.type==="error"&&console.error(_.error)},this._onPointerEvent=_=>{(_.type==="mousemove"||_.type==="mouseout")&&this._updateHover(_);const b=this.props[xv[_.type]];b&&(this.props.interactiveLayerIds&&_.type!=="mouseover"&&_.type!=="mouseout"&&(_.features=this._hoveredFeatures||this._queryRenderedFeatures(_.point)),b(_),delete _.features)},this._onCameraEvent=_=>{if(!this._internalUpdate){const b=this.props[Jm[_.type]];b&&b(_)}_.type in this._deferredEvents&&(this._deferredEvents[_.type]=!1)},this._MapClass=r,this.props=l,this._initialize(p)}get map(){return this._map}get transform(){return this._renderTransform}setProps(r){const l=this.props;this.props=r;const p=this._updateSettings(r,l);p&&this._createShadowTransform(this._map);const _=this._updateSize(r),b=this._updateViewState(r,!0);this._updateStyle(r,l),this._updateStyleComponents(r,l),this._updateHandlers(r,l),(p||_||b&&!this._map.isMoving())&&this.redraw()}static reuse(r,l){const p=bc.savedMaps.pop();if(!p)return null;const _=p.map,b=_.getContainer();for(l.className=b.className;b.childNodes.length>0;)l.appendChild(b.childNodes[0]);_._container=l;const v=_._resizeObserver;v&&(v.disconnect(),v.observe(l)),p.setProps({...r,styleDiffing:!1}),_.resize();const{initialViewState:u}=r;return u&&(u.bounds?_.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):p._updateViewState(u,!1)),_.isStyleLoaded()?_.fire("load"):_.once("styledata",()=>_.fire("load")),_._update(),p}_initialize(r){const{props:l}=this,{mapStyle:p=vv}=l,_={...l,...l.initialViewState,accessToken:l.mapboxAccessToken||PA()||null,container:r,style:yv(p)},b=_.initialViewState||_.viewState||_;if(Object.assign(_,{center:[b.longitude||0,b.latitude||0],zoom:b.zoom||0,pitch:b.pitch||0,bearing:b.bearing||0}),l.gl){const W=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=W,l.gl)}const v=new this._MapClass(_);b.padding&&v.setPadding(b.padding),l.cursor&&(v.getCanvas().style.cursor=l.cursor),this._createShadowTransform(v);const u=v._render;v._render=W=>{this._inRender=!0,u.call(v,W),this._inRender=!1};const D=v._renderTaskQueue.run;v._renderTaskQueue.run=W=>{D.call(v._renderTaskQueue,W),this._onBeforeRepaint()},v.on("render",()=>this._onAfterRepaint());const V=v.fire;v.fire=this._fireEvent.bind(this,V),v.on("resize",()=>{this._renderTransform.resize(v.transform.width,v.transform.height)}),v.on("styledata",()=>{this._updateStyleComponents(this.props,{}),fv(v.transform,this._renderTransform)}),v.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const W in xv)v.on(W,this._onPointerEvent);for(const W in Jm)v.on(W,this._onCameraEvent);for(const W in bv)v.on(W,this._onEvent);this._map=v}recycle(){const l=this.map.getContainer().querySelector("[mapboxgl-children]");l==null||l.remove(),bc.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const r=this._map;!this._inRender&&r.style&&(r._frame&&(r._frame.cancel(),r._frame=null),r._render())}_createShadowTransform(r){const l=AA(r.transform);r.painter.transform=l,this._renderTransform=l}_updateSize(r){const{viewState:l}=r;if(l){const p=this._map;if(l.width!==p.transform.width||l.height!==p.transform.height)return p.resize(),!0}return!1}_updateViewState(r,l){if(this._internalUpdate)return!1;const p=this._map,_=this._renderTransform,{zoom:b,pitch:v,bearing:u}=_,D=p.isMoving();D&&(_.cameraElevationReference="sea");const V=gv(_,{...mv(p.transform),...r});if(D&&(_.cameraElevationReference="ground"),V&&l){const W=this._deferredEvents;W.move=!0,W.zoom||(W.zoom=b!==_.zoom),W.rotate||(W.rotate=u!==_.bearing),W.pitch||(W.pitch=v!==_.pitch)}return D||gv(p.transform,r),V}_updateSettings(r,l){const p=this._map;let _=!1;for(const b of MA)if(b in r&&!Ya(r[b],l[b])){_=!0;const v=p[`set${b[0].toUpperCase()}${b.slice(1)}`];v==null||v.call(p,r[b])}return _}_updateStyle(r,l){if(r.cursor!==l.cursor&&(this._map.getCanvas().style.cursor=r.cursor||""),r.mapStyle!==l.mapStyle){const{mapStyle:p=vv,styleDiffing:_=!0}=r,b={diff:_};return"localIdeographFontFamily"in r&&(b.localIdeographFontFamily=r.localIdeographFontFamily),this._map.setStyle(yv(p),b),!0}return!1}_updateStyleComponents(r,l){const p=this._map;let _=!1;return p.isStyleLoaded()&&("light"in r&&p.setLight&&!Ya(r.light,l.light)&&(_=!0,p.setLight(r.light)),"fog"in r&&p.setFog&&!Ya(r.fog,l.fog)&&(_=!0,p.setFog(r.fog)),"terrain"in r&&p.setTerrain&&!Ya(r.terrain,l.terrain)&&(!r.terrain||p.getSource(r.terrain.source))&&(_=!0,p.setTerrain(r.terrain))),_}_updateHandlers(r,l){var p,_;const b=this._map;let v=!1;for(const u of IA){const D=(p=r[u])!==null&&p!==void 0?p:!0,V=(_=l[u])!==null&&_!==void 0?_:!0;Ya(D,V)||(v=!0,D?b[u].enable(D):b[u].disable())}return v}_queryRenderedFeatures(r){const l=this._map,p=l.transform,{interactiveLayerIds:_=[]}=this.props;try{return l.transform=this._renderTransform,l.queryRenderedFeatures(r,{layers:_.filter(l.getLayer.bind(l))})}catch{return[]}finally{l.transform=p}}_updateHover(r){var l;const{props:p}=this;if(p.interactiveLayerIds&&(p.onMouseMove||p.onMouseEnter||p.onMouseLeave)){const b=r.type,v=((l=this._hoveredFeatures)===null||l===void 0?void 0:l.length)>0,u=this._queryRenderedFeatures(r.point),D=u.length>0;!D&&v&&(r.type="mouseleave",this._onPointerEvent(r)),this._hoveredFeatures=u,D&&!v&&(r.type="mouseenter",this._onPointerEvent(r)),r.type=b}else this._hoveredFeatures=null}_fireEvent(r,l,p){const _=this._map,b=_.transform,v=typeof l=="string"?l:l.type;return v==="move"&&this._updateViewState(this.props,!1),v in Jm&&(typeof l=="object"&&(l.viewState=mv(b)),this._map.isMoving())?(_.transform=this._renderTransform,r.call(_,l,p),_.transform=b,_):(r.call(_,l,p),_)}_onBeforeRepaint(){const r=this._map;this._internalUpdate=!0;for(const p in this._deferredEvents)this._deferredEvents[p]&&r.fire(p);this._internalUpdate=!1;const l=this._map.transform;r.transform=this._renderTransform,this._onAfterRepaint=()=>{fv(this._renderTransform,l),r.transform=l}}}bc.savedMaps=[];function PA(){let n=null;if(typeof location<"u"){const r=/access_token=([^&\/]*)/.exec(location.search);n=r&&r[1]}try{n=n||_v.MapboxAccessToken}catch{}try{n=n||_v.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return n}const zA=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function DA(n){if(!n)return null;const r=n.map,l={getMap:()=>r,getCenter:()=>n.transform.center,getZoom:()=>n.transform.zoom,getBearing:()=>n.transform.bearing,getPitch:()=>n.transform.pitch,getPadding:()=>n.transform.padding,getBounds:()=>n.transform.getBounds(),project:p=>{const _=r.transform;r.transform=n.transform;const b=r.project(p);return r.transform=_,b},unproject:p=>{const _=r.transform;r.transform=n.transform;const b=r.unproject(p);return r.transform=_,b},queryTerrainElevation:(p,_)=>{const b=r.transform;r.transform=n.transform;const v=r.queryTerrainElevation(p,_);return r.transform=b,v},queryRenderedFeatures:(p,_)=>{const b=r.transform;r.transform=n.transform;const v=r.queryRenderedFeatures(p,_);return r.transform=b,v}};for(const p of kA(r))!(p in l)&&!zA.includes(p)&&(l[p]=r[p].bind(r));return l}function kA(n){const r=new Set;let l=n;for(;l;){for(const p of Object.getOwnPropertyNames(l))p[0]!=="_"&&typeof n[p]=="function"&&p!=="fire"&&p!=="setEventedParent"&&r.add(p);l=Object.getPrototypeOf(l)}return Array.from(r)}const RA=typeof document<"u"?Me.useLayoutEffect:Me.useEffect,LA=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function FA(n,r){for(const p of LA)p in r&&(n[p]=r[p]);const{RTLTextPlugin:l="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=r;l&&n.getRTLTextPluginStatus&&n.getRTLTextPluginStatus()==="unavailable"&&n.setRTLTextPlugin(l,p=>{p&&console.error(p)},!0)}const lf=Me.createContext(null);function BA(n,r,l){const p=Me.useContext(SA),[_,b]=Me.useState(null),v=Me.useRef(),{current:u}=Me.useRef({mapLib:null,map:null});Me.useEffect(()=>{const W=n.mapLib;let j=!0,N;return Promise.resolve(W||l).then(Te=>{if(!j)return;if(!Te)throw new Error("Invalid mapLib");const Ce="Map"in Te?Te:Te.default;if(!Ce.Map)throw new Error("Invalid mapLib");if(FA(Ce,n),!Ce.supported||Ce.supported(n))n.reuseMaps&&(N=bc.reuse(n,v.current)),N||(N=new bc(Ce.Map,n,v.current)),u.map=DA(N),u.mapLib=Ce,b(N),p==null||p.onMapMount(u.map,n.id);else throw new Error("Map is not supported by this browser")}).catch(Te=>{const{onError:Ce}=n;Ce?Ce({type:"error",target:null,originalEvent:null,error:Te}):console.error(Te)}),()=>{j=!1,N&&(p==null||p.onMapUnmount(n.id),n.reuseMaps?N.recycle():N.destroy())}},[]),RA(()=>{_&&_.setProps(n)}),Me.useImperativeHandle(r,()=>u.map,[_]);const D=Me.useMemo(()=>({position:"relative",width:"100%",height:"100%",...n.style}),[n.style]),V={height:"100%"};return Me.createElement("div",{id:n.id,ref:v,style:D},_&&Me.createElement(lf.Provider,{value:u},Me.createElement("div",{"mapboxgl-children":"",style:V},n.children)))}const OA=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function el(n,r){if(!n||!r)return;const l=n.style;for(const p in r){const _=r[p];Number.isFinite(_)&&!OA.test(p)?l[p]=`${_}px`:l[p]=_}}function NA(n,r){const{map:l,mapLib:p}=Me.useContext(lf),_=Me.useRef({props:n});_.current.props=n;const b=Me.useMemo(()=>{let we=!1;Me.Children.forEach(n.children,ie=>{ie&&(we=!0)});const qe={...n,element:we?document.createElement("div"):null},ae=new p.Marker(qe);return ae.setLngLat([n.longitude,n.latitude]),ae.getElement().addEventListener("click",ie=>{var ce,Ae;(Ae=(ce=_.current.props).onClick)===null||Ae===void 0||Ae.call(ce,{type:"click",target:ae,originalEvent:ie})}),ae.on("dragstart",ie=>{var ce,Ae;const Re=ie;Re.lngLat=b.getLngLat(),(Ae=(ce=_.current.props).onDragStart)===null||Ae===void 0||Ae.call(ce,Re)}),ae.on("drag",ie=>{var ce,Ae;const Re=ie;Re.lngLat=b.getLngLat(),(Ae=(ce=_.current.props).onDrag)===null||Ae===void 0||Ae.call(ce,Re)}),ae.on("dragend",ie=>{var ce,Ae;const Re=ie;Re.lngLat=b.getLngLat(),(Ae=(ce=_.current.props).onDragEnd)===null||Ae===void 0||Ae.call(ce,Re)}),ae},[]);Me.useEffect(()=>(b.addTo(l.getMap()),()=>{b.remove()}),[]);const{longitude:v,latitude:u,offset:D,style:V,draggable:W=!1,popup:j=null,rotation:N=0,rotationAlignment:Te="auto",pitchAlignment:Ce="auto"}=n;return Me.useEffect(()=>{el(b.getElement(),V)},[V]),Me.useImperativeHandle(r,()=>b,[]),(b.getLngLat().lng!==v||b.getLngLat().lat!==u)&&b.setLngLat([v,u]),D&&!EA(b.getOffset(),D)&&b.setOffset(D),b.isDraggable()!==W&&b.setDraggable(W),b.getRotation()!==N&&b.setRotation(N),b.getRotationAlignment()!==Te&&b.setRotationAlignment(Te),b.getPitchAlignment()!==Ce&&b.setPitchAlignment(Ce),b.getPopup()!==j&&b.setPopup(j),zd.createPortal(n.children,b.getElement())}const jA=Me.memo(Me.forwardRef(NA));function wv(n){return new Set(n?n.trim().split(/\s+/):[])}function VA(n,r){const{map:l,mapLib:p}=Me.useContext(lf),_=Me.useMemo(()=>document.createElement("div"),[]),b=Me.useRef({props:n});b.current.props=n;const v=Me.useMemo(()=>{const u={...n},D=new p.Popup(u);return D.setLngLat([n.longitude,n.latitude]),D.once("open",V=>{var W,j;(j=(W=b.current.props).onOpen)===null||j===void 0||j.call(W,V)}),D},[]);if(Me.useEffect(()=>{const u=D=>{var V,W;(W=(V=b.current.props).onClose)===null||W===void 0||W.call(V,D)};return v.on("close",u),v.setDOMContent(_).addTo(l.getMap()),()=>{v.off("close",u),v.isOpen()&&v.remove()}},[]),Me.useEffect(()=>{el(v.getElement(),n.style)},[n.style]),Me.useImperativeHandle(r,()=>v,[]),v.isOpen()&&((v.getLngLat().lng!==n.longitude||v.getLngLat().lat!==n.latitude)&&v.setLngLat([n.longitude,n.latitude]),n.offset&&!Ya(v.options.offset,n.offset)&&v.setOffset(n.offset),(v.options.anchor!==n.anchor||v.options.maxWidth!==n.maxWidth)&&(v.options.anchor=n.anchor,v.setMaxWidth(n.maxWidth)),v.options.className!==n.className)){const u=wv(v.options.className),D=wv(n.className);for(const V of u)D.has(V)||v.removeClassName(V);for(const V of D)u.has(V)||v.addClassName(V);v.options.className=n.className}return zd.createPortal(n.children,_)}Me.memo(Me.forwardRef(VA));function kd(n,r,l,p){const _=Me.useContext(lf),b=Me.useMemo(()=>n(_),[]);return Me.useEffect(()=>{const v=r,u=typeof r=="function"&&typeof l=="function"?r:null,D=typeof r=="function"?r:null,{map:V}=_;return V.hasControl(b)||(V.addControl(b,v==null?void 0:v.position),u&&u(_)),()=>{D&&D(_),V.hasControl(b)&&V.removeControl(b)}},[]),b}function UA(n){const r=kd(({mapLib:l})=>new l.AttributionControl(n),{position:n.position});return Me.useEffect(()=>{el(r._container,n.style)},[n.style]),null}Me.memo(UA);function $A(n){const r=kd(({mapLib:l})=>new l.FullscreenControl({container:n.containerId&&document.getElementById(n.containerId)}),{position:n.position});return Me.useEffect(()=>{el(r._controlContainer,n.style)},[n.style]),null}Me.memo($A);function qA(n,r){const l=Me.useRef({props:n}),p=kd(({mapLib:_})=>{const b=new _.GeolocateControl(n),v=b._setupUI;return b._setupUI=u=>{b._container.hasChildNodes()||v(u)},b.on("geolocate",u=>{var D,V;(V=(D=l.current.props).onGeolocate)===null||V===void 0||V.call(D,u)}),b.on("error",u=>{var D,V;(V=(D=l.current.props).onError)===null||V===void 0||V.call(D,u)}),b.on("outofmaxbounds",u=>{var D,V;(V=(D=l.current.props).onOutOfMaxBounds)===null||V===void 0||V.call(D,u)}),b.on("trackuserlocationstart",u=>{var D,V;(V=(D=l.current.props).onTrackUserLocationStart)===null||V===void 0||V.call(D,u)}),b.on("trackuserlocationend",u=>{var D,V;(V=(D=l.current.props).onTrackUserLocationEnd)===null||V===void 0||V.call(D,u)}),b},{position:n.position});return l.current.props=n,Me.useImperativeHandle(r,()=>p,[]),Me.useEffect(()=>{el(p._container,n.style)},[n.style]),null}Me.memo(Me.forwardRef(qA));function GA(n){const r=kd(({mapLib:l})=>new l.NavigationControl(n),{position:n.position});return Me.useEffect(()=>{el(r._container,n.style)},[n.style]),null}const HA=Me.memo(GA);function ZA(n){const r=kd(({mapLib:b})=>new b.ScaleControl(n),{position:n.position}),l=Me.useRef(n),p=l.current;l.current=n;const{style:_}=n;return n.maxWidth!==void 0&&n.maxWidth!==p.maxWidth&&(r.options.maxWidth=n.maxWidth),n.unit!==void 0&&n.unit!==p.unit&&r.setUnit(n.unit),Me.useEffect(()=>{el(r._container,_)},[_]),null}Me.memo(ZA);const WA=CA(()=>Promise.resolve().then(()=>YA),void 0),XA=Me.forwardRef(function(r,l){return BA(r,l,WA)}),KA=jA,JA=HA;var ew={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.6.0/LICENSE.txt
 */(function(n,r){(function(l,p){n.exports=p()})(J2,function(){var l={},p={};function _(v,u,D){if(p[v]=D,v==="index"){var V="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",W={};return p.shared(W),p.index(l,W),typeof window<"u"&&l.setWorkerUrl(window.URL.createObjectURL(new Blob([V],{type:"text/javascript"}))),l}}_("shared",["exports"],function(v){function u(i,t,a,s){return new(a||(a=Promise))(function(h,f){function y(A){try{C(s.next(A))}catch(M){f(M)}}function x(A){try{C(s.throw(A))}catch(M){f(M)}}function C(A){var M;A.done?h(A.value):(M=A.value,M instanceof a?M:new a(function(I){I(M)})).then(y,x)}C((s=s.apply(i,t||[])).next())})}function D(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var V=W;function W(i,t){this.x=i,this.y=t}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,a=i.y-this.y;return t*t+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),a=Math.sin(i),s=a*this.x+t*this.y;return this.x=t*this.x-a*this.y,this.y=s,this},_rotateAround:function(i,t){var a=Math.cos(i),s=Math.sin(i),h=t.y+s*(this.x-t.x)+a*(this.y-t.y);return this.x=t.x+a*(this.x-t.x)-s*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(i){return i instanceof W?i:Array.isArray(i)?new W(i[0],i[1]):i};var j=D(V),N=Te;function Te(i,t,a,s){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(s-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=a,this.p2y=s}Te.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,s=0;s<8;s++){var h=this.sampleCurveX(a)-i;if(Math.abs(h)<t)return a;var f=this.sampleCurveDerivativeX(a);if(Math.abs(f)<1e-6)break;a-=h/f}var y=0,x=1;for(a=i,s=0;s<20&&(h=this.sampleCurveX(a),!(Math.abs(h-i)<t));s++)i>h?y=a:x=a,a=.5*(x-y)+y;return a},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};var Ce=D(N);let we,qe;function ae(){return we==null&&(we=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),we}function ie(){if(qe==null&&(qe=!1,ae())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let s=0;s<5*5;s++){const h=4*s;t.fillStyle=`rgb(${h},${h+1},${h+2})`,t.fillRect(s%5,Math.floor(s/5),1,1)}const a=t.getImageData(0,0,5,5).data;for(let s=0;s<5*5*4;s++)if(s%4!=3&&a[s]!==s){qe=!0;break}}}return qe||!1}function ce(i,t,a,s){const h=new Ce(i,t,a,s);return f=>h.solve(f)}const Ae=ce(.25,.1,.25,1);function Re(i,t,a){return Math.min(a,Math.max(t,i))}function Xe(i,t,a){const s=a-t,h=((i-t)%s+s)%s+t;return h===t?a:h}function Qe(i,...t){for(const a of t)for(const s in a)i[s]=a[s];return i}let pe=1;function pt(i,t,a){const s={};for(const h in i)s[h]=t.call(this,i[h],h,i);return s}function ct(i,t,a){const s={};for(const h in i)t.call(this,i[h],h,i)&&(s[h]=i[h]);return s}function ot(i){return Array.isArray(i)?i.map(ot):typeof i=="object"&&i?pt(i,ot):i}const Xt={};function Ot(i){Xt[i]||(typeof console<"u"&&console.warn(i),Xt[i]=!0)}function Ft(i,t,a){return(a.y-i.y)*(t.x-i.x)>(t.y-i.y)*(a.x-i.x)}function Ln(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let Hn=null;function Un(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ut(i,t,a,s,h){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const f=new VideoFrame(i,{timestamp:0});try{const y=f==null?void 0:f.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);const x=y.startsWith("BGR"),C=new Uint8ClampedArray(s*h*4);if(yield f.copyTo(C,function(A,M,I,k,F){const O=4*Math.max(-M,0),U=(Math.max(0,I)-I)*k*4+O,J=4*k,ne=Math.max(0,M),ye=Math.max(0,I);return{rect:{x:ne,y:ye,width:Math.min(A.width,M+k)-ne,height:Math.min(A.height,I+F)-ye},layout:[{offset:U,stride:J}]}}(i,t,a,s,h)),x)for(let A=0;A<C.length;A+=4){const M=C[A];C[A]=C[A+2],C[A+2]=M}return C}finally{f.close()}})}let bt,kt;const Nt="AbortError";function Tn(){return new Error(Nt)}const yn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Fn(i){return yn.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const hn="global-dispatcher";class an extends Error{constructor(t,a,s,h){super(`AJAXError: ${a} (${t}): ${s}`),this.status=t,this.statusText=a,this.url=s,this.body=h}}const $n=()=>Ln(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xr=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const s=Fn(i.url);if(s)return s(i,t);if(Ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:hn},t)}if(!(/^file:/.test(a=i.url)||/^file:/.test($n())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(s,h){return u(this,void 0,void 0,function*(){const f=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:$n(),signal:h.signal});s.type!=="json"||f.headers.has("Accept")||f.headers.set("Accept","application/json");const y=yield fetch(f);if(!y.ok){const A=yield y.blob();throw new an(y.status,y.statusText,s.url,A)}let x;x=s.type==="arrayBuffer"||s.type==="image"?y.arrayBuffer():s.type==="json"?y.json():y.text();const C=yield x;if(h.signal.aborted)throw Tn();return{data:C,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(i,t);if(Ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:hn},t)}var a;return function(s,h){return new Promise((f,y)=>{var x;const C=new XMLHttpRequest;C.open(s.method||"GET",s.url,!0),s.type!=="arrayBuffer"&&s.type!=="image"||(C.responseType="arraybuffer");for(const A in s.headers)C.setRequestHeader(A,s.headers[A]);s.type==="json"&&(C.responseType="text",!((x=s.headers)===null||x===void 0)&&x.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=s.credentials==="include",C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if(!h.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let A=C.response;if(s.type==="json")try{A=JSON.parse(C.response)}catch(M){return void y(M)}f({data:A,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const A=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});y(new an(C.status,C.statusText,s.url,A))}},h.signal.addEventListener("abort",()=>{C.abort(),y(Tn())}),C.send(s.body)})}(i,t)};function lr(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const t=new URL(i),a=window.location;return t.protocol===a.protocol&&t.host===a.host}function ka(i,t,a){a[i]&&a[i].indexOf(t)!==-1||(a[i]=a[i]||[],a[i].push(t))}function cr(i,t,a){if(a&&a[i]){const s=a[i].indexOf(t);s!==-1&&a[i].splice(s,1)}}class Rr{constructor(t,a={}){Qe(this,a),this.type=t}}class pn extends Rr{constructor(t,a={}){super("error",Qe({error:t},a))}}class Li{on(t,a){return this._listeners=this._listeners||{},ka(t,a,this._listeners),this}off(t,a){return cr(t,a,this._listeners),cr(t,a,this._oneTimeListeners),this}once(t,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},ka(t,a,this._oneTimeListeners),this):new Promise(s=>this.once(t,s))}fire(t,a){typeof t=="string"&&(t=new Rr(t,a||{}));const s=t.type;if(this.listens(s)){t.target=this;const h=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];for(const x of h)x.call(this,t);const f=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];for(const x of f)cr(s,x,this._oneTimeListeners),x.call(this,t);const y=this._eventedParent;y&&(Qe(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(t))}else t instanceof pn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,a){return this._eventedParent=t,this._eventedParentData=a,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Kr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fi(i,t){const a={};for(const s in i)s!=="ref"&&(a[s]=i[s]);return Kr.forEach(s=>{s in t&&(a[s]=t[s])}),a}function $t(i,t){if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;for(let a=0;a<i.length;a++)if(!$t(i[a],t[a]))return!1;return!0}if(typeof i=="object"&&i!==null&&t!==null){if(typeof t!="object"||Object.keys(i).length!==Object.keys(t).length)return!1;for(const a in i)if(!$t(i[a],t[a]))return!1;return!0}return i===t}function un(i,t){i.push(t)}function pa(i,t,a){un(a,{command:"addSource",args:[i,t[i]]})}function Lr(i,t,a){un(t,{command:"removeSource",args:[i]}),a[i]=!0}function ur(i,t,a,s){Lr(i,a,s),pa(i,t,a)}function fa(i,t,a){let s;for(s in i[a])if(Object.prototype.hasOwnProperty.call(i[a],s)&&s!=="data"&&!$t(i[a][s],t[a][s]))return!1;for(s in t[a])if(Object.prototype.hasOwnProperty.call(t[a],s)&&s!=="data"&&!$t(i[a][s],t[a][s]))return!1;return!0}function bi(i,t,a,s,h,f){i=i||{},t=t||{};for(const y in i)Object.prototype.hasOwnProperty.call(i,y)&&($t(i[y],t[y])||a.push({command:f,args:[s,y,t[y],h]}));for(const y in t)Object.prototype.hasOwnProperty.call(t,y)&&!Object.prototype.hasOwnProperty.call(i,y)&&($t(i[y],t[y])||a.push({command:f,args:[s,y,t[y],h]}))}function dr(i){return i.id}function hr(i,t){return i[t.id]=t,i}class Ne{constructor(t,a,s,h){this.message=(t?`${t}: `:"")+s,h&&(this.identifier=h),a!=null&&a.__line__&&(this.line=a.__line__)}}function wi(i,...t){for(const a of t)for(const s in a)i[s]=a[s];return i}class fn extends Error{constructor(t,a){super(a),this.message=a,this.key=t}}class Bn{constructor(t,a=[]){this.parent=t,this.bindings={};for(const[s,h]of a)this.bindings[s]=h}concat(t){return new Bn(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const pr={kind:"null"},Ue={kind:"number"},Pt={kind:"string"},yt={kind:"boolean"},Yn={kind:"color"},Ci={kind:"object"},St={kind:"value"},Ji={kind:"collator"},Yi={kind:"formatted"},Bi={kind:"padding"},Oi={kind:"resolvedImage"},Q={kind:"variableAnchorOffsetCollection"};function R(i,t){return{kind:"array",itemType:i,N:t}}function L(i){if(i.kind==="array"){const t=L(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const $=[pr,Ue,Pt,yt,Yn,Yi,Ci,R(St),Bi,Oi,Q];function X(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!X(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const a of $)if(!X(a,t))return null}}return`Expected ${L(i)} but found ${L(t)} instead.`}function se(i,t){return t.some(a=>a.kind===i.kind)}function de(i,t){return t.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}function me(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const re=.96422,Se=.82521,ze=4/29,ve=6/29,H=3*ve*ve,ee=ve*ve*ve,ue=Math.PI/180,xe=180/Math.PI;function Le(i){return(i%=360)<0&&(i+=360),i}function De([i,t,a,s]){let h,f;const y=Fe((.2225045*(i=nt(i))+.7168786*(t=nt(t))+.0606169*(a=nt(a)))/1);i===t&&t===a?h=f=y:(h=Fe((.4360747*i+.3850649*t+.1430804*a)/re),f=Fe((.0139322*i+.0971045*t+.7141733*a)/Se));const x=116*y-16;return[x<0?0:x,500*(h-y),200*(y-f),s]}function nt(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Fe(i){return i>ee?Math.pow(i,1/3):i/H+ze}function gt([i,t,a,s]){let h=(i+16)/116,f=isNaN(t)?h:h+t/500,y=isNaN(a)?h:h-a/200;return h=1*st(h),f=re*st(f),y=Se*st(y),[Ve(3.1338561*f-1.6168667*h-.4906146*y),Ve(-.9787684*f+1.9161415*h+.033454*y),Ve(.0719453*f-.2289914*h+1.4052427*y),s]}function Ve(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function st(i){return i>ve?i*i*i:H*(i-ze)}function xt(i){return parseInt(i.padEnd(2,i),16)/255}function Tt(i,t){return Dt(t?i/100:i,0,1)}function Dt(i,t,a){return Math.min(Math.max(t,i),a)}function Mt(i){return!i.some(Number.isNaN)}const _n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Et{constructor(t,a,s,h=1,f=!0){this.r=t,this.g=a,this.b=s,this.a=h,f||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[t,a,s,h]))}static parse(t){if(t instanceof Et)return t;if(typeof t!="string")return;const a=function(s){if((s=s.toLowerCase().trim())==="transparent")return[0,0,0,0];const h=_n[s];if(h){const[y,x,C]=h;return[y/255,x/255,C/255,1]}if(s.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(s)){const y=s.length<6?1:2;let x=1;return[xt(s.slice(x,x+=y)),xt(s.slice(x,x+=y)),xt(s.slice(x,x+=y)),xt(s.slice(x,x+y)||"ff")]}if(s.startsWith("rgb")){const y=s.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,C,A,M,I,k,F,O,U,J,ne,ye]=y,le=[M||" ",F||" ",J].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const fe=[A,k,U].join(""),Ee=fe==="%%%"?100:fe===""?255:0;if(Ee){const ke=[Dt(+C/Ee,0,1),Dt(+I/Ee,0,1),Dt(+O/Ee,0,1),ne?Tt(+ne,ye):1];if(Mt(ke))return ke}}return}}const f=s.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(f){const[y,x,C,A,M,I,k,F,O]=f,U=[C||" ",M||" ",k].join("");if(U==="  "||U==="  /"||U===",,"||U===",,,"){const J=[+x,Dt(+A,0,100),Dt(+I,0,100),F?Tt(+F,O):1];if(Mt(J))return function([ne,ye,le,fe]){function Ee(ke){const Ke=(ke+ne/30)%12,vt=ye*Math.min(le,1-le);return le-vt*Math.max(-1,Math.min(Ke-3,9-Ke,1))}return ne=Le(ne),ye/=100,le/=100,[Ee(0),Ee(8),Ee(4),fe]}(J)}}}(t);return a?new Et(...a,!1):void 0}get rgb(){const{r:t,g:a,b:s,a:h}=this,f=h||1/0;return this.overwriteGetter("rgb",[t/f,a/f,s/f,h])}get hcl(){return this.overwriteGetter("hcl",function(t){const[a,s,h,f]=De(t),y=Math.sqrt(s*s+h*h);return[Math.round(1e4*y)?Le(Math.atan2(h,s)*xe):NaN,y,a,f]}(this.rgb))}get lab(){return this.overwriteGetter("lab",De(this.rgb))}overwriteGetter(t,a){return Object.defineProperty(this,t,{value:a}),a}toString(){const[t,a,s,h]=this.rgb;return`rgba(${[t,a,s].map(f=>Math.round(255*f)).join(",")},${h})`}}Et.black=new Et(0,0,0,1),Et.white=new Et(1,1,1,1),Et.transparent=new Et(0,0,0,0),Et.red=new Et(1,0,0,1);class Jr{constructor(t,a,s){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,a){return this.collator.compare(t,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Qi{constructor(t,a,s,h,f){this.text=t,this.image=a,this.scale=s,this.fontStack=h,this.textColor=f}}class On{constructor(t){this.sections=t}static fromString(t){return new On([new Qi(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof On?t:On.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Nn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Nn)return t;if(typeof t=="number")return new Nn([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const a of t)if(typeof a!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Nn(t)}}toString(){return JSON.stringify(this.values)}}const ma=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class mn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof mn)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let a=0;a<t.length;a+=2){const s=t[a],h=t[a+1];if(typeof s!="string"||!ma.has(s)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new mn(t)}}toString(){return JSON.stringify(this.values)}}class Mn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Mn({name:t,available:!1}):null}}function Yr(i,t,a,s){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof a=="number"&&a>=0&&a<=255?s===void 0||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[i,t,a,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[i,t,a,s]:[i,t,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fr(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Et||i instanceof Jr||i instanceof On||i instanceof Nn||i instanceof mn||i instanceof Mn)return!0;if(Array.isArray(i)){for(const t of i)if(!Fr(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Fr(i[t]))return!1;return!0}return!1}function _t(i){if(i===null)return pr;if(typeof i=="string")return Pt;if(typeof i=="boolean")return yt;if(typeof i=="number")return Ue;if(i instanceof Et)return Yn;if(i instanceof Jr)return Ji;if(i instanceof On)return Yi;if(i instanceof Nn)return Bi;if(i instanceof mn)return Q;if(i instanceof Mn)return Oi;if(Array.isArray(i)){const t=i.length;let a;for(const s of i){const h=_t(s);if(a){if(a===h)continue;a=St;break}a=h}return R(a||St,t)}return Ci}function Zt(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof Et||i instanceof On||i instanceof Nn||i instanceof mn||i instanceof Mn?i.toString():JSON.stringify(i)}class In{constructor(t,a){this.type=t,this.value=a}static parse(t,a){if(t.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fr(t[1]))return a.error("invalid value");const s=t[1];let h=_t(s);const f=a.expectedType;return h.kind!=="array"||h.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(h=f),new In(h,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class It{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Si={string:Pt,number:Ue,boolean:yt,object:Ci};class pi{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let s,h=1;const f=t[0];if(f==="array"){let x,C;if(t.length>2){const A=t[1];if(typeof A!="string"||!(A in Si)||A==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);x=Si[A],h++}else x=St;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);C=t[2],h++}s=R(x,C)}else{if(!Si[f])throw new Error(`Types doesn't contain name = ${f}`);s=Si[f]}const y=[];for(;h<t.length;h++){const x=a.parse(t[h],h,St);if(!x)return null;y.push(x)}return new pi(s,y)}evaluate(t){for(let a=0;a<this.args.length;a++){const s=this.args[a].evaluate(t);if(!X(this.type,_t(s)))return s;if(a===this.args.length-1)throw new It(`Expected value to be of type ${L(this.type)}, but found ${L(_t(s))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ra={"to-boolean":yt,"to-color":Yn,"to-number":Ue,"to-string":Pt};class ga{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const s=t[0];if(!Ra[s])throw new Error(`Can't parse ${s} as it is not part of the known types`);if((s==="to-boolean"||s==="to-string")&&t.length!==2)return a.error("Expected one argument.");const h=Ra[s],f=[];for(let y=1;y<t.length;y++){const x=a.parse(t[y],y,St);if(!x)return null;f.push(x)}return new ga(h,f)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let a,s;for(const h of this.args){if(a=h.evaluate(t),s=null,a instanceof Et)return a;if(typeof a=="string"){const f=t.parseColor(a);if(f)return f}else if(Array.isArray(a)&&(s=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Yr(a[0],a[1],a[2],a[3]),!s))return new Et(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new It(s||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const s of this.args){a=s.evaluate(t);const h=Nn.parse(a);if(h)return h}throw new It(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const s of this.args){a=s.evaluate(t);const h=mn.parse(a);if(h)return h}throw new It(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const s of this.args){if(a=s.evaluate(t),a===null)return 0;const h=Number(a);if(!isNaN(h))return h}throw new It(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return On.fromString(Zt(this.args[0].evaluate(t)));case"resolvedImage":return Mn.fromString(Zt(this.args[0].evaluate(t)));default:return Zt(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ac=["Unknown","Point","LineString","Polygon"];class es{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ac[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let a=this._parseColorCache[t];return a||(a=this._parseColorCache[t]=Et.parse(t)),a}}class ya{constructor(t,a,s=[],h,f=new Bn,y=[]){this.registry=t,this.path=s,this.key=s.map(x=>`[${x}]`).join(""),this.scope=f,this.errors=y,this.expectedType=h,this._isConstant=a}parse(t,a,s,h,f={}){return a?this.concat(a,s,h)._parse(t,f):this._parse(t,f)}_parse(t,a){function s(h,f,y){return y==="assert"?new pi(f,[h]):y==="coerce"?new ga(f,[h]):h}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=t[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[h];if(f){let y=f.parse(t,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,C=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||C.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(x.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(x.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(x,C))return null}else y=s(y,x,a.typeAnnotation||"coerce");else y=s(y,x,a.typeAnnotation||"coerce");else y=s(y,x,a.typeAnnotation||"coerce");else y=s(y,x,a.typeAnnotation||"assert")}if(!(y instanceof In)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){const x=new es;try{y=new In(y.type,y.evaluate(x))}catch(C){return this.error(C.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,a,s){const h=typeof t=="number"?this.path.concat(t):this.path,f=s?this.scope.concat(s):this.scope;return new ya(this.registry,this._isConstant,h,a||null,f,this.errors)}error(t,...a){const s=`${this.key}${a.map(h=>`[${h}]`).join("")}`;this.errors.push(new fn(s,t))}checkSubtype(t,a){const s=X(t,a);return s&&this.error(s),s}}class Ht{constructor(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const a of this.bindings)t(a[1]);t(this.result)}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const s=[];for(let f=1;f<t.length-1;f+=2){const y=t[f];if(typeof y!="string")return a.error(`Expected string, but found ${typeof y} instead.`,f);if(/[^a-zA-Z0-9_]/.test(y))return a.error("Variable names must contain only alphanumeric characters or '_'.",f);const x=a.parse(t[f+1],f+1);if(!x)return null;s.push([y,x])}const h=a.parse(t[t.length-1],t.length-1,a.expectedType,s);return h?new Ht(s,h):null}outputDefined(){return this.result.outputDefined()}}class tl{constructor(t,a){this.type=a.type,this.name=t,this.boundExpression=a}static parse(t,a){if(t.length!==2||typeof t[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const s=t[1];return a.scope.has(s)?new tl(s,a.scope.get(s)):a.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Tc{constructor(t,a,s){this.type=t,this.index=a,this.input=s}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=a.parse(t[1],1,Ue),h=a.parse(t[2],2,R(a.expectedType||St));return s&&h?new Tc(h.type.itemType,s,h):null}evaluate(t){const a=this.index.evaluate(t),s=this.input.evaluate(t);if(a<0)throw new It(`Array index out of bounds: ${a} < 0.`);if(a>=s.length)throw new It(`Array index out of bounds: ${a} > ${s.length-1}.`);if(a!==Math.floor(a))throw new It(`Array index must be an integer, but found ${a} instead.`);return s[a]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class ts{constructor(t,a){this.type=yt,this.needle=t,this.haystack=a}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=a.parse(t[1],1,St),h=a.parse(t[2],2,St);return s&&h?se(s.type,[yt,Pt,Ue,pr,St])?new ts(s,h):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${L(s.type)} instead`):null}evaluate(t){const a=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!s)return!1;if(!de(a,["boolean","string","number","null"]))throw new It(`Expected first argument to be of type boolean, string, number or null, but found ${L(_t(a))} instead.`);if(!de(s,["string","array"]))throw new It(`Expected second argument to be of type array or string, but found ${L(_t(s))} instead.`);return s.indexOf(a)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class nl{constructor(t,a,s){this.type=Ue,this.needle=t,this.haystack=a,this.fromIndex=s}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=a.parse(t[1],1,St),h=a.parse(t[2],2,St);if(!s||!h)return null;if(!se(s.type,[yt,Pt,Ue,pr,St]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${L(s.type)} instead`);if(t.length===4){const f=a.parse(t[3],3,Ue);return f?new nl(s,h,f):null}return new nl(s,h)}evaluate(t){const a=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!de(a,["boolean","string","number","null"]))throw new It(`Expected first argument to be of type boolean, string, number or null, but found ${L(_t(a))} instead.`);let h;if(this.fromIndex&&(h=this.fromIndex.evaluate(t)),de(s,["string"])){const f=s.indexOf(a,h);return f===-1?-1:[...s.slice(0,f)].length}if(de(s,["array"]))return s.indexOf(a,h);throw new It(`Expected second argument to be of type array or string, but found ${L(_t(s))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class il{constructor(t,a,s,h,f,y){this.inputType=t,this.type=a,this.input=s,this.cases=h,this.outputs=f,this.otherwise=y}static parse(t,a){if(t.length<5)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return a.error("Expected an even number of arguments.");let s,h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const f={},y=[];for(let A=2;A<t.length-1;A+=2){let M=t[A];const I=t[A+1];Array.isArray(M)||(M=[M]);const k=a.concat(A);if(M.length===0)return k.error("Expected at least one branch label.");for(const O of M){if(typeof O!="number"&&typeof O!="string")return k.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return k.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof O=="number"&&Math.floor(O)!==O)return k.error("Numeric branch labels must be integer values.");if(s){if(k.checkSubtype(s,_t(O)))return null}else s=_t(O);if(f[String(O)]!==void 0)return k.error("Branch labels must be unique.");f[String(O)]=y.length}const F=a.parse(I,A,h);if(!F)return null;h=h||F.type,y.push(F)}const x=a.parse(t[1],1,St);if(!x)return null;const C=a.parse(t[t.length-1],t.length-1,h);return C?x.type.kind!=="value"&&a.concat(1).checkSubtype(s,x.type)?null:new il(s,h,x,f,y,C):null}evaluate(t){const a=this.input.evaluate(t);return(_t(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class rl{constructor(t,a,s){this.type=t,this.branches=a,this.otherwise=s}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return a.error("Expected an odd number of arguments.");let s;a.expectedType&&a.expectedType.kind!=="value"&&(s=a.expectedType);const h=[];for(let y=1;y<t.length-1;y+=2){const x=a.parse(t[y],y,yt);if(!x)return null;const C=a.parse(t[y+1],y+1,s);if(!C)return null;h.push([x,C]),s=s||C.type}const f=a.parse(t[t.length-1],t.length-1,s);if(!f)return null;if(!s)throw new Error("Can't infer output type");return new rl(s,h,f)}evaluate(t){for(const[a,s]of this.branches)if(a.evaluate(t))return s.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[a,s]of this.branches)t(a),t(s);t(this.otherwise)}outputDefined(){return this.branches.every(([t,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class al{constructor(t,a,s,h){this.type=t,this.input=a,this.beginIndex=s,this.endIndex=h}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=a.parse(t[1],1,St),h=a.parse(t[2],2,Ue);if(!s||!h)return null;if(!se(s.type,[R(St),Pt,St]))return a.error(`Expected first argument to be of type array or string, but found ${L(s.type)} instead`);if(t.length===4){const f=a.parse(t[3],3,Ue);return f?new al(s.type,s,h,f):null}return new al(s.type,s,h)}evaluate(t){const a=this.input.evaluate(t),s=this.beginIndex.evaluate(t);let h;if(this.endIndex&&(h=this.endIndex.evaluate(t)),de(a,["string"]))return[...a].slice(s,h).join("");if(de(a,["array"]))return a.slice(s,h);throw new It(`Expected first argument to be of type array or string, but found ${L(_t(a))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ns(i,t){const a=i.length-1;let s,h,f=0,y=a,x=0;for(;f<=y;)if(x=Math.floor((f+y)/2),s=i[x],h=i[x+1],s<=t){if(x===a||t<h)return x;f=x+1}else{if(!(s>t))throw new It("Input is not a number.");y=x-1}return 0}class uo{constructor(t,a,s){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(const[h,f]of s)this.labels.push(h),this.outputs.push(f)}static parse(t,a){if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");const s=a.parse(t[1],1,Ue);if(!s)return null;const h=[];let f=null;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);for(let y=1;y<t.length;y+=2){const x=y===1?-1/0:t[y],C=t[y+1],A=y,M=y+1;if(typeof x!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(h.length&&h[h.length-1][0]>=x)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const I=a.parse(C,M,f);if(!I)return null;f=f||I.type,h.push([x,I])}return new uo(f,s,h)}evaluate(t){const a=this.labels,s=this.outputs;if(a.length===1)return s[0].evaluate(t);const h=this.input.evaluate(t);if(h<=a[0])return s[0].evaluate(t);const f=a.length;return h>=a[f-1]?s[f-1].evaluate(t):s[ns(a,h)].evaluate(t)}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function cf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var uf=Rd;function Rd(i,t,a,s){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(s-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=a,this.p2y=s}Rd.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,s=0;s<8;s++){var h=this.sampleCurveX(a)-i;if(Math.abs(h)<t)return a;var f=this.sampleCurveDerivativeX(a);if(Math.abs(f)<1e-6)break;a-=h/f}var y=0,x=1;for(a=i,s=0;s<20&&(h=this.sampleCurveX(a),!(Math.abs(h-i)<t));s++)i>h?y=a:x=a,a=.5*(x-y)+y;return a},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};var df=cf(uf);function _a(i,t,a){return i+a*(t-i)}function is(i,t,a){return i.map((s,h)=>_a(s,t[h],a))}const Ni={number:_a,color:function(i,t,a,s="rgb"){switch(s){case"rgb":{const[h,f,y,x]=is(i.rgb,t.rgb,a);return new Et(h,f,y,x,!1)}case"hcl":{const[h,f,y,x]=i.hcl,[C,A,M,I]=t.hcl;let k,F;if(isNaN(h)||isNaN(C))isNaN(h)?isNaN(C)?k=NaN:(k=C,y!==1&&y!==0||(F=A)):(k=h,M!==1&&M!==0||(F=f));else{let ye=C-h;C>h&&ye>180?ye-=360:C<h&&h-C>180&&(ye+=360),k=h+a*ye}const[O,U,J,ne]=function([ye,le,fe,Ee]){return ye=isNaN(ye)?0:ye*ue,gt([fe,Math.cos(ye)*le,Math.sin(ye)*le,Ee])}([k,F??_a(f,A,a),_a(y,M,a),_a(x,I,a)]);return new Et(O,U,J,ne,!1)}case"lab":{const[h,f,y,x]=gt(is(i.lab,t.lab,a));return new Et(h,f,y,x,!1)}}},array:is,padding:function(i,t,a){return new Nn(is(i.values,t.values,a))},variableAnchorOffsetCollection:function(i,t,a){const s=i.values,h=t.values;if(s.length!==h.length)throw new It(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${t.toString()}`);const f=[];for(let y=0;y<s.length;y+=2){if(s[y]!==h[y])throw new It(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${s[y]}, to[${y}]: ${h[y]}`);f.push(s[y]);const[x,C]=s[y+1],[A,M]=h[y+1];f.push([_a(x,A,a),_a(C,M,a)])}return new mn(f)}};class ji{constructor(t,a,s,h,f){this.type=t,this.operator=a,this.interpolation=s,this.input=h,this.labels=[],this.outputs=[];for(const[y,x]of f)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(t,a,s,h){let f=0;if(t.name==="exponential")f=rs(a,t.base,s,h);else if(t.name==="linear")f=rs(a,1,s,h);else if(t.name==="cubic-bezier"){const y=t.controlPoints;f=new df(y[0],y[1],y[2],y[3]).solve(rs(a,1,s,h))}return f}static parse(t,a){let[s,h,f,...y]=t;if(!Array.isArray(h)||h.length===0)return a.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const A=h[1];if(typeof A!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:A}}else{if(h[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const A=h.slice(1);if(A.length!==4||A.some(M=>typeof M!="number"||M<0||M>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:A}}}if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(f=a.parse(f,2,Ue),!f)return null;const x=[];let C=null;s==="interpolate-hcl"||s==="interpolate-lab"?C=Yn:a.expectedType&&a.expectedType.kind!=="value"&&(C=a.expectedType);for(let A=0;A<y.length;A+=2){const M=y[A],I=y[A+1],k=A+3,F=A+4;if(typeof M!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(x.length&&x[x.length-1][0]>=M)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',k);const O=a.parse(I,F,C);if(!O)return null;C=C||O.type,x.push([M,O])}return me(C,Ue)||me(C,Yn)||me(C,Bi)||me(C,Q)||me(C,R(Ue))?new ji(C,s,h,f,x):a.error(`Type ${L(C)} is not interpolatable.`)}evaluate(t){const a=this.labels,s=this.outputs;if(a.length===1)return s[0].evaluate(t);const h=this.input.evaluate(t);if(h<=a[0])return s[0].evaluate(t);const f=a.length;if(h>=a[f-1])return s[f-1].evaluate(t);const y=ns(a,h),x=ji.interpolationFactor(this.interpolation,h,a[y],a[y+1]),C=s[y].evaluate(t),A=s[y+1].evaluate(t);switch(this.operator){case"interpolate":return Ni[this.type.kind](C,A,x);case"interpolate-hcl":return Ni.color(C,A,x,"hcl");case"interpolate-lab":return Ni.color(C,A,x,"lab")}}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function rs(i,t,a,s){const h=s-a,f=i-a;return h===0?0:t===1?f/h:(Math.pow(t,f)-1)/(Math.pow(t,h)-1)}class ol{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expectected at least one argument.");let s=null;const h=a.expectedType;h&&h.kind!=="value"&&(s=h);const f=[];for(const x of t.slice(1)){const C=a.parse(x,1+f.length,s,void 0,{typeAnnotation:"omit"});if(!C)return null;s=s||C.type,f.push(C)}if(!s)throw new Error("No output type");const y=h&&f.some(x=>X(h,x.type));return new ol(y?St:s,f)}evaluate(t){let a,s=null,h=0;for(const f of this.args)if(h++,s=f.evaluate(t),s&&s instanceof Mn&&!s.available&&(a||(a=s.name),s=null,h===this.args.length&&(s=a)),s!==null)break;return s}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Ld(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Fd(i,t,a,s){return s.compare(t,a)===0}function La(i,t,a){const s=i!=="=="&&i!=="!=";return class tw{constructor(f,y,x){this.type=yt,this.lhs=f,this.rhs=y,this.collator=x,this.hasUntypedArgument=f.type.kind==="value"||y.type.kind==="value"}static parse(f,y){if(f.length!==3&&f.length!==4)return y.error("Expected two or three arguments.");const x=f[0];let C=y.parse(f[1],1,St);if(!C)return null;if(!Ld(x,C.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${L(C.type)}'.`);let A=y.parse(f[2],2,St);if(!A)return null;if(!Ld(x,A.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${L(A.type)}'.`);if(C.type.kind!==A.type.kind&&C.type.kind!=="value"&&A.type.kind!=="value")return y.error(`Cannot compare types '${L(C.type)}' and '${L(A.type)}'.`);s&&(C.type.kind==="value"&&A.type.kind!=="value"?C=new pi(A.type,[C]):C.type.kind!=="value"&&A.type.kind==="value"&&(A=new pi(C.type,[A])));let M=null;if(f.length===4){if(C.type.kind!=="string"&&A.type.kind!=="string"&&C.type.kind!=="value"&&A.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(M=y.parse(f[3],3,Ji),!M)return null}return new tw(C,A,M)}evaluate(f){const y=this.lhs.evaluate(f),x=this.rhs.evaluate(f);if(s&&this.hasUntypedArgument){const C=_t(y),A=_t(x);if(C.kind!==A.kind||C.kind!=="string"&&C.kind!=="number")throw new It(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${C.kind}, ${A.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const C=_t(y),A=_t(x);if(C.kind!=="string"||A.kind!=="string")return t(f,y,x)}return this.collator?a(f,y,x,this.collator.evaluate(f)):t(f,y,x)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}}}const Bd=La("==",function(i,t,a){return t===a},Fd),hf=La("!=",function(i,t,a){return t!==a},function(i,t,a,s){return!Fd(0,t,a,s)}),pf=La("<",function(i,t,a){return t<a},function(i,t,a,s){return s.compare(t,a)<0}),Od=La(">",function(i,t,a){return t>a},function(i,t,a,s){return s.compare(t,a)>0}),Nd=La("<=",function(i,t,a){return t<=a},function(i,t,a,s){return s.compare(t,a)<=0}),ff=La(">=",function(i,t,a){return t>=a},function(i,t,a,s){return s.compare(t,a)>=0});class sl{constructor(t,a,s){this.type=Ji,this.locale=s,this.caseSensitive=t,this.diacriticSensitive=a}static parse(t,a){if(t.length!==2)return a.error("Expected one argument.");const s=t[1];if(typeof s!="object"||Array.isArray(s))return a.error("Collator options argument must be an object.");const h=a.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,yt);if(!h)return null;const f=a.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,yt);if(!f)return null;let y=null;return s.locale&&(y=a.parse(s.locale,1,Pt),!y)?null:new sl(h,f,y)}evaluate(t){return new Jr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Mc{constructor(t,a,s,h,f){this.type=Pt,this.number=t,this.locale=a,this.currency=s,this.minFractionDigits=h,this.maxFractionDigits=f}static parse(t,a){if(t.length!==3)return a.error("Expected two arguments.");const s=a.parse(t[1],1,Ue);if(!s)return null;const h=t[2];if(typeof h!="object"||Array.isArray(h))return a.error("NumberFormat options argument must be an object.");let f=null;if(h.locale&&(f=a.parse(h.locale,1,Pt),!f))return null;let y=null;if(h.currency&&(y=a.parse(h.currency,1,Pt),!y))return null;let x=null;if(h["min-fraction-digits"]&&(x=a.parse(h["min-fraction-digits"],1,Ue),!x))return null;let C=null;return h["max-fraction-digits"]&&(C=a.parse(h["max-fraction-digits"],1,Ue),!C)?null:new Mc(s,f,y,x,C)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ll{constructor(t){this.type=Yi,this.sections=t}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const s=t[1];if(!Array.isArray(s)&&typeof s=="object")return a.error("First argument must be an image or text section.");const h=[];let f=!1;for(let y=1;y<=t.length-1;++y){const x=t[y];if(f&&typeof x=="object"&&!Array.isArray(x)){f=!1;let C=null;if(x["font-scale"]&&(C=a.parse(x["font-scale"],1,Ue),!C))return null;let A=null;if(x["text-font"]&&(A=a.parse(x["text-font"],1,R(Pt)),!A))return null;let M=null;if(x["text-color"]&&(M=a.parse(x["text-color"],1,Yn),!M))return null;const I=h[h.length-1];I.scale=C,I.font=A,I.textColor=M}else{const C=a.parse(t[y],1,St);if(!C)return null;const A=C.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,h.push({content:C,scale:null,font:null,textColor:null})}}return new ll(h)}evaluate(t){return new On(this.sections.map(a=>{const s=a.content.evaluate(t);return _t(s)===Oi?new Qi("",s,null,null,null):new Qi(Zt(s),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null)}))}eachChild(t){for(const a of this.sections)t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}outputDefined(){return!1}}class Ic{constructor(t){this.type=Oi,this.input=t}static parse(t,a){if(t.length!==2)return a.error("Expected two arguments.");const s=a.parse(t[1],1,Pt);return s?new Ic(s):a.error("No image name provided.")}evaluate(t){const a=this.input.evaluate(t),s=Mn.fromString(a);return s&&t.availableImages&&(s.available=t.availableImages.indexOf(a)>-1),s}eachChild(t){t(this.input)}outputDefined(){return!1}}class Pc{constructor(t){this.type=Ue,this.input=t}static parse(t,a){if(t.length!==2)return a.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=a.parse(t[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${L(s.type)} instead.`):new Pc(s):null}evaluate(t){const a=this.input.evaluate(t);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new It(`Expected value to be of type string or array, but found ${L(_t(a))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Br=8192;function zc(i,t){const a=(180+i[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(a*h*Br),Math.round(s*h*Br)]}function ho(i,t){const a=Math.pow(2,t.z);return[(h=(i[0]/Br+t.x)/a,360*h-180),(s=(i[1]/Br+t.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90)];var s,h}function Vt(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function as(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function mf(i,t,a){const s=i[0]-t[0],h=i[1]-t[1],f=i[0]-a[0],y=i[1]-a[1];return s*y-f*h==0&&s*f<=0&&h*y<=0}function cl(i,t,a,s){return(h=[s[0]-a[0],s[1]-a[1]])[0]*(f=[t[0]-i[0],t[1]-i[1]])[1]-h[1]*f[0]!=0&&!(!Vd(i,t,a,s)||!Vd(a,s,i,t));var h,f}function gf(i,t,a){for(const s of a)for(let h=0;h<s.length-1;++h)if(cl(i,t,s[h],s[h+1]))return!0;return!1}function po(i,t,a=!1){let s=!1;for(const x of t)for(let C=0;C<x.length-1;C++){if(mf(i,x[C],x[C+1]))return a;(f=x[C])[1]>(h=i)[1]!=(y=x[C+1])[1]>h[1]&&h[0]<(y[0]-f[0])*(h[1]-f[1])/(y[1]-f[1])+f[0]&&(s=!s)}var h,f,y;return s}function yf(i,t){for(const a of t)if(po(i,a))return!0;return!1}function jd(i,t){for(const a of i)if(!po(a,t))return!1;for(let a=0;a<i.length-1;++a)if(gf(i[a],i[a+1],t))return!1;return!0}function _f(i,t){for(const a of t)if(jd(i,a))return!0;return!1}function Vd(i,t,a,s){const h=s[0]-a[0],f=s[1]-a[1],y=(i[0]-a[0])*f-h*(i[1]-a[1]),x=(t[0]-a[0])*f-h*(t[1]-a[1]);return y>0&&x<0||y<0&&x>0}function Dc(i,t,a){const s=[];for(let h=0;h<i.length;h++){const f=[];for(let y=0;y<i[h].length;y++){const x=zc(i[h][y],a);Vt(t,x),f.push(x)}s.push(f)}return s}function Ud(i,t,a){const s=[];for(let h=0;h<i.length;h++){const f=Dc(i[h],t,a);s.push(f)}return s}function $d(i,t,a,s){if(i[0]<a[0]||i[0]>a[2]){const h=.5*s;let f=i[0]-a[0]>h?-s:a[0]-i[0]>h?s:0;f===0&&(f=i[0]-a[2]>h?-s:a[2]-i[0]>h?s:0),i[0]+=f}Vt(t,i)}function qd(i,t,a,s){const h=Math.pow(2,s.z)*Br,f=[s.x*Br,s.y*Br],y=[];for(const x of i)for(const C of x){const A=[C.x+f[0],C.y+f[1]];$d(A,t,a,h),y.push(A)}return y}function Gd(i,t,a,s){const h=Math.pow(2,s.z)*Br,f=[s.x*Br,s.y*Br],y=[];for(const C of i){const A=[];for(const M of C){const I=[M.x+f[0],M.y+f[1]];Vt(t,I),A.push(I)}y.push(A)}if(t[2]-t[0]<=h/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const C of y)for(const A of C)$d(A,t,a,h)}var x;return y}class Fa{constructor(t,a){this.type=yt,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fr(t[1])){const s=t[1];if(s.type==="FeatureCollection"){const h=[];for(const f of s.features){const{type:y,coordinates:x}=f.geometry;y==="Polygon"&&h.push(x),y==="MultiPolygon"&&h.push(...x)}if(h.length)return new Fa(s,{type:"MultiPolygon",coordinates:h})}else if(s.type==="Feature"){const h=s.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Fa(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Fa(s,s)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,s){const h=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(s.type==="Polygon"){const x=Dc(s.coordinates,f,y),C=qd(a.geometry(),h,f,y);if(!as(h,f))return!1;for(const A of C)if(!po(A,x))return!1}if(s.type==="MultiPolygon"){const x=Ud(s.coordinates,f,y),C=qd(a.geometry(),h,f,y);if(!as(h,f))return!1;for(const A of C)if(!yf(A,x))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,s){const h=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(s.type==="Polygon"){const x=Dc(s.coordinates,f,y),C=Gd(a.geometry(),h,f,y);if(!as(h,f))return!1;for(const A of C)if(!jd(A,x))return!1}if(s.type==="MultiPolygon"){const x=Ud(s.coordinates,f,y),C=Gd(a.geometry(),h,f,y);if(!as(h,f))return!1;for(const A of C)if(!_f(A,x))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Hd=class{constructor(i=[],t=(a,s)=>a<s?-1:a>s?1:0){if(this.data=i,this.length=this.data.length,this.compare=t,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:t,compare:a}=this,s=t[i];for(;i>0;){const h=i-1>>1,f=t[h];if(a(s,f)>=0)break;t[i]=f,i=h}t[i]=s}_down(i){const{data:t,compare:a}=this,s=this.length>>1,h=t[i];for(;i<s;){let f=1+(i<<1);const y=f+1;if(y<this.length&&a(t[y],t[f])<0&&(f=y),a(t[f],h)>=0)break;t[i]=t[f],i=f}t[i]=h}};function vf(i,t,a,s,h){Zd(i,t,a,s||i.length-1,h||xf)}function Zd(i,t,a,s,h){for(;s>a;){if(s-a>600){var f=s-a+1,y=t-a+1,x=Math.log(f),C=.5*Math.exp(2*x/3),A=.5*Math.sqrt(x*C*(f-C)/f)*(y-f/2<0?-1:1);Zd(i,t,Math.max(a,Math.floor(t-y*C/f+A)),Math.min(s,Math.floor(t+(f-y)*C/f+A)),h)}var M=i[t],I=a,k=s;for(os(i,a,t),h(i[s],M)>0&&os(i,a,s);I<k;){for(os(i,I,k),I++,k--;h(i[I],M)<0;)I++;for(;h(i[k],M)>0;)k--}h(i[a],M)===0?os(i,a,k):os(i,++k,s),k<=t&&(a=k+1),t<=k&&(s=k-1)}}function os(i,t,a){var s=i[t];i[t]=i[a],i[a]=s}function xf(i,t){return i<t?-1:i>t?1:0}function ul(i,t){if(i.length<=1)return[i];const a=[];let s,h;for(const f of i){const y=wf(f);y!==0&&(f.area=Math.abs(y),h===void 0&&(h=y<0),h===y<0?(s&&a.push(s),s=[f]):s.push(f))}if(s&&a.push(s),t>1)for(let f=0;f<a.length;f++)a[f].length<=t||(vf(a[f],t,1,a[f].length-1,bf),a[f]=a[f].slice(0,t));return a}function bf(i,t){return t.area-i.area}function wf(i){let t=0;for(let a,s,h=0,f=i.length,y=f-1;h<f;y=h++)a=i[h],s=i[y],t+=(s.x-a.x)*(a.y+s.y);return t}const Wd=1/298.257223563,Xd=Wd*(2-Wd),Kd=Math.PI/180;class kc{constructor(t){const a=6378.137*Kd*1e3,s=Math.cos(t*Kd),h=1/(1-Xd*(1-s*s)),f=Math.sqrt(h);this.kx=a*f*s,this.ky=a*f*h*(1-Xd)}distance(t,a){const s=this.wrap(t[0]-a[0])*this.kx,h=(t[1]-a[1])*this.ky;return Math.sqrt(s*s+h*h)}pointOnLine(t,a){let s,h,f,y,x=1/0;for(let C=0;C<t.length-1;C++){let A=t[C][0],M=t[C][1],I=this.wrap(t[C+1][0]-A)*this.kx,k=(t[C+1][1]-M)*this.ky,F=0;I===0&&k===0||(F=(this.wrap(a[0]-A)*this.kx*I+(a[1]-M)*this.ky*k)/(I*I+k*k),F>1?(A=t[C+1][0],M=t[C+1][1]):F>0&&(A+=I/this.kx*F,M+=k/this.ky*F)),I=this.wrap(a[0]-A)*this.kx,k=(a[1]-M)*this.ky;const O=I*I+k*k;O<x&&(x=O,s=A,h=M,f=C,y=F)}return{point:[s,h],index:f,t:Math.max(0,Math.min(1,y))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Jd(i,t){return t[0]-i[0]}function dl(i){return i[1]-i[0]+1}function Qr(i,t){return i[1]>=i[0]&&i[1]<t}function Rc(i,t){if(i[0]>i[1])return[null,null];const a=dl(i);if(t){if(a===2)return[i,null];const h=Math.floor(a/2);return[[i[0],i[0]+h],[i[0]+h,i[1]]]}if(a===1)return[i,null];const s=Math.floor(a/2)-1;return[[i[0],i[0]+s],[i[0]+s+1,i[1]]]}function ss(i,t){if(!Qr(t,i.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let s=t[0];s<=t[1];++s)Vt(a,i[s]);return a}function Lc(i){const t=[1/0,1/0,-1/0,-1/0];for(const a of i)for(const s of a)Vt(t,s);return t}function Yd(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function Fc(i,t,a){if(!Yd(i)||!Yd(t))return NaN;let s=0,h=0;return i[2]<t[0]&&(s=t[0]-i[2]),i[0]>t[2]&&(s=i[0]-t[2]),i[1]>t[3]&&(h=i[1]-t[3]),i[3]<t[1]&&(h=t[1]-i[3]),a.distance([0,0],[s,h])}function Ba(i,t,a){const s=a.pointOnLine(t,i);return a.distance(i,s.point)}function vn(i,t,a,s,h){const f=Math.min(Ba(i,[a,s],h),Ba(t,[a,s],h)),y=Math.min(Ba(a,[i,t],h),Ba(s,[i,t],h));return Math.min(f,y)}function Cf(i,t,a,s,h){if(!Qr(t,i.length)||!Qr(s,a.length))return 1/0;let f=1/0;for(let y=t[0];y<t[1];++y){const x=i[y],C=i[y+1];for(let A=s[0];A<s[1];++A){const M=a[A],I=a[A+1];if(cl(x,C,M,I))return 0;f=Math.min(f,vn(x,C,M,I,h))}}return f}function Lt(i,t,a,s,h){if(!Qr(t,i.length)||!Qr(s,a.length))return NaN;let f=1/0;for(let y=t[0];y<=t[1];++y)for(let x=s[0];x<=s[1];++x)if(f=Math.min(f,h.distance(i[y],a[x])),f===0)return f;return f}function Bc(i,t,a){if(po(i,t,!0))return 0;let s=1/0;for(const h of t){const f=h[0],y=h[h.length-1];if(f!==y&&(s=Math.min(s,Ba(i,[y,f],a)),s===0))return s;const x=a.pointOnLine(h,i);if(s=Math.min(s,a.distance(i,x.point)),s===0)return s}return s}function dn(i,t,a,s){if(!Qr(t,i.length))return NaN;for(let f=t[0];f<=t[1];++f)if(po(i[f],a,!0))return 0;let h=1/0;for(let f=t[0];f<t[1];++f){const y=i[f],x=i[f+1];for(const C of a)for(let A=0,M=C.length,I=M-1;A<M;I=A++){const k=C[I],F=C[A];if(cl(y,x,k,F))return 0;h=Math.min(h,vn(y,x,k,F,s))}}return h}function en(i,t){for(const a of i)for(const s of a)if(po(s,t,!0))return!0;return!1}function hl(i,t,a,s=1/0){const h=Lc(i),f=Lc(t);if(s!==1/0&&Fc(h,f,a)>=s)return s;if(as(h,f)){if(en(i,t))return 0}else if(en(t,i))return 0;let y=1/0;for(const x of i)for(let C=0,A=x.length,M=A-1;C<A;M=C++){const I=x[M],k=x[C];for(const F of t)for(let O=0,U=F.length,J=U-1;O<U;J=O++){const ne=F[J],ye=F[O];if(cl(I,k,ne,ye))return 0;y=Math.min(y,vn(I,k,ne,ye,a))}}return y}function Oc(i,t,a,s,h,f){if(!f)return;const y=Fc(ss(s,f),h,a);y<t&&i.push([y,f,[0,0]])}function ls(i,t,a,s,h,f,y){if(!f||!y)return;const x=Fc(ss(s,f),ss(h,y),a);x<t&&i.push([x,f,y])}function pl(i,t,a,s,h=1/0){let f=Math.min(s.distance(i[0],a[0][0]),h);if(f===0)return f;const y=new Hd([[0,[0,i.length-1],[0,0]]],Jd),x=Lc(a);for(;y.length>0;){const C=y.pop();if(C[0]>=f)continue;const A=C[1],M=t?50:100;if(dl(A)<=M){if(!Qr(A,i.length))return NaN;if(t){const I=dn(i,A,a,s);if(isNaN(I)||I===0)return I;f=Math.min(f,I)}else for(let I=A[0];I<=A[1];++I){const k=Bc(i[I],a,s);if(f=Math.min(f,k),f===0)return 0}}else{const I=Rc(A,t);Oc(y,f,s,i,x,I[0]),Oc(y,f,s,i,x,I[1])}}return f}function fl(i,t,a,s,h,f=1/0){let y=Math.min(f,h.distance(i[0],a[0]));if(y===0)return y;const x=new Hd([[0,[0,i.length-1],[0,a.length-1]]],Jd);for(;x.length>0;){const C=x.pop();if(C[0]>=y)continue;const A=C[1],M=C[2],I=t?50:100,k=s?50:100;if(dl(A)<=I&&dl(M)<=k){if(!Qr(A,i.length)&&Qr(M,a.length))return NaN;let F;if(t&&s)F=Cf(i,A,a,M,h),y=Math.min(y,F);else if(t&&!s){const O=i.slice(A[0],A[1]+1);for(let U=M[0];U<=M[1];++U)if(F=Ba(a[U],O,h),y=Math.min(y,F),y===0)return y}else if(!t&&s){const O=a.slice(M[0],M[1]+1);for(let U=A[0];U<=A[1];++U)if(F=Ba(i[U],O,h),y=Math.min(y,F),y===0)return y}else F=Lt(i,A,a,M,h),y=Math.min(y,F)}else{const F=Rc(A,t),O=Rc(M,s);ls(x,y,h,i,a,F[0],O[0]),ls(x,y,h,i,a,F[0],O[1]),ls(x,y,h,i,a,F[1],O[0]),ls(x,y,h,i,a,F[1],O[1])}}return y}function Nc(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class Oa{constructor(t,a){this.type=Ue,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fr(t[1])){const s=t[1];if(s.type==="FeatureCollection")return new Oa(s,s.features.map(h=>Nc(h.geometry)).flat());if(s.type==="Feature")return new Oa(s,Nc(s.geometry));if("type"in s&&"coordinates"in s)return new Oa(s,Nc(s))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,s){const h=a.geometry(),f=h.flat().map(C=>ho([C.x,C.y],a.canonical));if(h.length===0)return NaN;const y=new kc(f[0][1]);let x=1/0;for(const C of s){switch(C.type){case"Point":x=Math.min(x,fl(f,!1,[C.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,fl(f,!1,C.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,pl(f,!1,C.coordinates,y,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,s){const h=a.geometry(),f=h.flat().map(C=>ho([C.x,C.y],a.canonical));if(h.length===0)return NaN;const y=new kc(f[0][1]);let x=1/0;for(const C of s){switch(C.type){case"Point":x=Math.min(x,fl(f,!0,[C.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,fl(f,!0,C.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,pl(f,!0,C.coordinates,y,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="Polygon")return function(a,s){const h=a.geometry();if(h.length===0||h[0].length===0)return NaN;const f=ul(h,0).map(C=>C.map(A=>A.map(M=>ho([M.x,M.y],a.canonical)))),y=new kc(f[0][0][0][1]);let x=1/0;for(const C of s)for(const A of f){switch(C.type){case"Point":x=Math.min(x,pl([C.coordinates],!1,A,y,x));break;case"LineString":x=Math.min(x,pl(C.coordinates,!0,A,y,x));break;case"Polygon":x=Math.min(x,hl(A,C.coordinates,y,x))}if(x===0)return x}return x}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Na={"==":Bd,"!=":hf,">":Od,"<":pf,">=":ff,"<=":Nd,array:pi,at:Tc,boolean:pi,case:rl,coalesce:ol,collator:sl,format:ll,image:Ic,in:ts,"index-of":nl,interpolate:ji,"interpolate-hcl":ji,"interpolate-lab":ji,length:Pc,let:Ht,literal:In,match:il,number:pi,"number-format":Mc,object:pi,slice:al,step:uo,string:pi,"to-boolean":ga,"to-color":ga,"to-number":ga,"to-string":ga,var:tl,within:Fa,distance:Oa};class Vi{constructor(t,a,s,h){this.name=t,this.type=a,this._evaluate=s,this.args=h}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,a){const s=t[0],h=Vi.definitions[s];if(!h)return a.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter(([A])=>!Array.isArray(A)||A.length===t.length-1);let C=null;for(const[A,M]of x){C=new ya(a.registry,ml,a.path,null,a.scope);const I=[];let k=!1;for(let F=1;F<t.length;F++){const O=t[F],U=Array.isArray(A)?A[F-1]:A.type,J=C.parse(O,1+I.length,U);if(!J){k=!0;break}I.push(J)}if(!k)if(Array.isArray(A)&&A.length!==I.length)C.error(`Expected ${A.length} arguments, but found ${I.length} instead.`);else{for(let F=0;F<I.length;F++){const O=Array.isArray(A)?A[F]:A.type,U=I[F];C.concat(F+1).checkSubtype(O,U.type)}if(C.errors.length===0)return new Vi(s,f,M,I)}}if(x.length===1)a.errors.push(...C.errors);else{const A=(x.length?x:y).map(([I])=>{return k=I,Array.isArray(k)?`(${k.map(L).join(", ")})`:`(${L(k.type)}...)`;var k}).join(" | "),M=[];for(let I=1;I<t.length;I++){const k=a.parse(t[I],1+M.length);if(!k)return null;M.push(L(k.type))}a.error(`Expected arguments of type ${A}, but found (${M.join(", ")}) instead.`)}return null}static register(t,a){Vi.definitions=a;for(const s in a)t[s]=Vi}}function jc(i,[t,a,s,h]){t=t.evaluate(i),a=a.evaluate(i),s=s.evaluate(i);const f=h?h.evaluate(i):1,y=Yr(t,a,s,f);if(y)throw new It(y);return new Et(t/255,a/255,s/255,f,!1)}function Vc(i,t){return i in t}function cs(i,t){const a=t[i];return a===void 0?null:a}function ja(i){return{type:i}}function ml(i){if(i instanceof tl)return ml(i.boundExpression);if(i instanceof Vi&&i.name==="error"||i instanceof sl||i instanceof Fa||i instanceof Oa)return!1;const t=i instanceof ga||i instanceof pi;let a=!0;return i.eachChild(s=>{a=t?a&&ml(s):a&&s instanceof In}),!!a&&gl(i)&&yl(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gl(i){if(i instanceof Vi&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Fa||i instanceof Oa)return!1;let t=!0;return i.eachChild(a=>{t&&!gl(a)&&(t=!1)}),t}function us(i){if(i instanceof Vi&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(a=>{t&&!us(a)&&(t=!1)}),t}function yl(i,t){if(i instanceof Vi&&t.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(s=>{a&&!yl(s,t)&&(a=!1)}),a}function Qd(i){return{result:"success",value:i}}function fo(i){return{result:"error",value:i}}function mo(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Uc(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function _l(i){return!!i.expression&&i.expression.interpolated}function jt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function vl(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function eh(i){return i}function $c(i,t){const a=t.type==="color",s=i.stops&&typeof i.stops[0][0]=="object",h=s||!(s||i.property!==void 0),f=i.type||(_l(t)?"exponential":"interval");if(a||t.type==="padding"){const M=a?Et.parse:Nn.parse;(i=wi({},i)).stops&&(i.stops=i.stops.map(I=>[I[0],M(I[1])])),i.default=M(i.default?i.default:t.default)}if(i.colorSpace&&(y=i.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var y;let x,C,A;if(f==="exponential")x=hs;else if(f==="interval")x=xl;else if(f==="categorical"){x=qc,C=Object.create(null);for(const M of i.stops)C[M[0]]=M[1];A=typeof i.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);x=th}if(s){const M={},I=[];for(let O=0;O<i.stops.length;O++){const U=i.stops[O],J=U[0].zoom;M[J]===void 0&&(M[J]={zoom:J,type:i.type,property:i.property,default:i.default,stops:[]},I.push(J)),M[J].stops.push([U[0].value,U[1]])}const k=[];for(const O of I)k.push([M[O].zoom,$c(M[O],t)]);const F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:ji.interpolationFactor.bind(void 0,F),zoomStops:k.map(O=>O[0]),evaluate:({zoom:O},U)=>hs({stops:k,base:i.base},t,O).evaluate(O,U)}}if(h){const M=f==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:ji.interpolationFactor.bind(void 0,M),zoomStops:i.stops.map(I=>I[0]),evaluate:({zoom:I})=>x(i,t,I,C,A)}}return{kind:"source",evaluate(M,I){const k=I&&I.properties?I.properties[i.property]:void 0;return k===void 0?ds(i.default,t.default):x(i,t,k,C,A)}}}function ds(i,t,a){return i!==void 0?i:t!==void 0?t:a!==void 0?a:void 0}function qc(i,t,a,s,h){return ds(typeof a===h?s[a]:void 0,i.default,t.default)}function xl(i,t,a){if(jt(a)!=="number")return ds(i.default,t.default);const s=i.stops.length;if(s===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[s-1][0])return i.stops[s-1][1];const h=ns(i.stops.map(f=>f[0]),a);return i.stops[h][1]}function hs(i,t,a){const s=i.base!==void 0?i.base:1;if(jt(a)!=="number")return ds(i.default,t.default);const h=i.stops.length;if(h===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[h-1][0])return i.stops[h-1][1];const f=ns(i.stops.map(M=>M[0]),a),y=function(M,I,k,F){const O=F-k,U=M-k;return O===0?0:I===1?U/O:(Math.pow(I,U)-1)/(Math.pow(I,O)-1)}(a,s,i.stops[f][0],i.stops[f+1][0]),x=i.stops[f][1],C=i.stops[f+1][1],A=Ni[t.type]||eh;return typeof x.evaluate=="function"?{evaluate(...M){const I=x.evaluate.apply(void 0,M),k=C.evaluate.apply(void 0,M);if(I!==void 0&&k!==void 0)return A(I,k,y,i.colorSpace)}}:A(x,C,y,i.colorSpace)}function th(i,t,a){switch(t.type){case"color":a=Et.parse(a);break;case"formatted":a=On.fromString(a.toString());break;case"resolvedImage":a=Mn.fromString(a.toString());break;case"padding":a=Nn.parse(a);break;default:jt(a)===t.type||t.type==="enum"&&t.values[a]||(a=void 0)}return ds(a,i.default,t.default)}Vi.register(Na,{error:[{kind:"error"},[Pt],(i,[t])=>{throw new It(t.evaluate(i))}],typeof:[Pt,[St],(i,[t])=>L(_t(t.evaluate(i)))],"to-rgba":[R(Ue,4),[Yn],(i,[t])=>{const[a,s,h,f]=t.evaluate(i).rgb;return[255*a,255*s,255*h,f]}],rgb:[Yn,[Ue,Ue,Ue],jc],rgba:[Yn,[Ue,Ue,Ue,Ue],jc],has:{type:yt,overloads:[[[Pt],(i,[t])=>Vc(t.evaluate(i),i.properties())],[[Pt,Ci],(i,[t,a])=>Vc(t.evaluate(i),a.evaluate(i))]]},get:{type:St,overloads:[[[Pt],(i,[t])=>cs(t.evaluate(i),i.properties())],[[Pt,Ci],(i,[t,a])=>cs(t.evaluate(i),a.evaluate(i))]]},"feature-state":[St,[Pt],(i,[t])=>cs(t.evaluate(i),i.featureState||{})],properties:[Ci,[],i=>i.properties()],"geometry-type":[Pt,[],i=>i.geometryType()],id:[St,[],i=>i.id()],zoom:[Ue,[],i=>i.globals.zoom],"heatmap-density":[Ue,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ue,[],i=>i.globals.lineProgress||0],accumulated:[St,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ue,ja(Ue),(i,t)=>{let a=0;for(const s of t)a+=s.evaluate(i);return a}],"*":[Ue,ja(Ue),(i,t)=>{let a=1;for(const s of t)a*=s.evaluate(i);return a}],"-":{type:Ue,overloads:[[[Ue,Ue],(i,[t,a])=>t.evaluate(i)-a.evaluate(i)],[[Ue],(i,[t])=>-t.evaluate(i)]]},"/":[Ue,[Ue,Ue],(i,[t,a])=>t.evaluate(i)/a.evaluate(i)],"%":[Ue,[Ue,Ue],(i,[t,a])=>t.evaluate(i)%a.evaluate(i)],ln2:[Ue,[],()=>Math.LN2],pi:[Ue,[],()=>Math.PI],e:[Ue,[],()=>Math.E],"^":[Ue,[Ue,Ue],(i,[t,a])=>Math.pow(t.evaluate(i),a.evaluate(i))],sqrt:[Ue,[Ue],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[Ue,[Ue],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[Ue,[Ue],(i,[t])=>Math.log(t.evaluate(i))],log2:[Ue,[Ue],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[Ue,[Ue],(i,[t])=>Math.sin(t.evaluate(i))],cos:[Ue,[Ue],(i,[t])=>Math.cos(t.evaluate(i))],tan:[Ue,[Ue],(i,[t])=>Math.tan(t.evaluate(i))],asin:[Ue,[Ue],(i,[t])=>Math.asin(t.evaluate(i))],acos:[Ue,[Ue],(i,[t])=>Math.acos(t.evaluate(i))],atan:[Ue,[Ue],(i,[t])=>Math.atan(t.evaluate(i))],min:[Ue,ja(Ue),(i,t)=>Math.min(...t.map(a=>a.evaluate(i)))],max:[Ue,ja(Ue),(i,t)=>Math.max(...t.map(a=>a.evaluate(i)))],abs:[Ue,[Ue],(i,[t])=>Math.abs(t.evaluate(i))],round:[Ue,[Ue],(i,[t])=>{const a=t.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[Ue,[Ue],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[Ue,[Ue],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[yt,[Pt,St],(i,[t,a])=>i.properties()[t.value]===a.value],"filter-id-==":[yt,[St],(i,[t])=>i.id()===t.value],"filter-type-==":[yt,[Pt],(i,[t])=>i.geometryType()===t.value],"filter-<":[yt,[Pt,St],(i,[t,a])=>{const s=i.properties()[t.value],h=a.value;return typeof s==typeof h&&s<h}],"filter-id-<":[yt,[St],(i,[t])=>{const a=i.id(),s=t.value;return typeof a==typeof s&&a<s}],"filter->":[yt,[Pt,St],(i,[t,a])=>{const s=i.properties()[t.value],h=a.value;return typeof s==typeof h&&s>h}],"filter-id->":[yt,[St],(i,[t])=>{const a=i.id(),s=t.value;return typeof a==typeof s&&a>s}],"filter-<=":[yt,[Pt,St],(i,[t,a])=>{const s=i.properties()[t.value],h=a.value;return typeof s==typeof h&&s<=h}],"filter-id-<=":[yt,[St],(i,[t])=>{const a=i.id(),s=t.value;return typeof a==typeof s&&a<=s}],"filter->=":[yt,[Pt,St],(i,[t,a])=>{const s=i.properties()[t.value],h=a.value;return typeof s==typeof h&&s>=h}],"filter-id->=":[yt,[St],(i,[t])=>{const a=i.id(),s=t.value;return typeof a==typeof s&&a>=s}],"filter-has":[yt,[St],(i,[t])=>t.value in i.properties()],"filter-has-id":[yt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[yt,[R(Pt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[yt,[R(St)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[yt,[Pt,R(St)],(i,[t,a])=>a.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[yt,[Pt,R(St)],(i,[t,a])=>function(s,h,f,y){for(;f<=y;){const x=f+y>>1;if(h[x]===s)return!0;h[x]>s?y=x-1:f=x+1}return!1}(i.properties()[t.value],a.value,0,a.value.length-1)],all:{type:yt,overloads:[[[yt,yt],(i,[t,a])=>t.evaluate(i)&&a.evaluate(i)],[ja(yt),(i,t)=>{for(const a of t)if(!a.evaluate(i))return!1;return!0}]]},any:{type:yt,overloads:[[[yt,yt],(i,[t,a])=>t.evaluate(i)||a.evaluate(i)],[ja(yt),(i,t)=>{for(const a of t)if(a.evaluate(i))return!0;return!1}]]},"!":[yt,[yt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[yt,[Pt],(i,[t])=>{const a=i.globals&&i.globals.isSupportedScript;return!a||a(t.evaluate(i))}],upcase:[Pt,[Pt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Pt,[Pt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Pt,ja(St),(i,t)=>t.map(a=>Zt(a.evaluate(i))).join("")],"resolved-locale":[Pt,[Ji],(i,[t])=>t.evaluate(i).resolvedLocale()]});class ps{constructor(t,a){var s;this.expression=t,this._warningHistory={},this._evaluator=new es,this._defaultValue=a?(s=a).type==="color"&&vl(s.default)?new Et(0,0,0,0):s.type==="color"?Et.parse(s.default)||null:s.type==="padding"?Nn.parse(s.default)||null:s.type==="variableAnchorOffsetCollection"?mn.parse(s.default)||null:s.default===void 0?null:s.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(t,a,s,h,f,y){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=s,this._evaluator.canonical=h,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(t,a,s,h,f,y){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=s||null,this._evaluator.canonical=h,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=y||null;try{const x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new It(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function fs(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Na}function ms(i,t){const a=new ya(Na,ml,[],t?function(h){const f={color:Yn,string:Pt,number:Ue,enum:Pt,boolean:yt,formatted:Yi,padding:Bi,resolvedImage:Oi,variableAnchorOffsetCollection:Q};return h.type==="array"?R(f[h.value]||St,h.length):f[h.type]}(t):void 0),s=a.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return s?Qd(new ps(s,t)):fo(a.errors)}class go{constructor(t,a){this.kind=t,this._styleExpression=a,this.isStateDependent=t!=="constant"&&!us(a.expression)}evaluateWithoutErrorHandling(t,a,s,h,f,y){return this._styleExpression.evaluateWithoutErrorHandling(t,a,s,h,f,y)}evaluate(t,a,s,h,f,y){return this._styleExpression.evaluate(t,a,s,h,f,y)}}class Gc{constructor(t,a,s,h){this.kind=t,this.zoomStops=s,this._styleExpression=a,this.isStateDependent=t!=="camera"&&!us(a.expression),this.interpolationType=h}evaluateWithoutErrorHandling(t,a,s,h,f,y){return this._styleExpression.evaluateWithoutErrorHandling(t,a,s,h,f,y)}evaluate(t,a,s,h,f,y){return this._styleExpression.evaluate(t,a,s,h,f,y)}interpolationFactor(t,a,s){return this.interpolationType?ji.interpolationFactor(this.interpolationType,t,a,s):0}}function nh(i,t){const a=ms(i,t);if(a.result==="error")return a;const s=a.value.expression,h=gl(s);if(!h&&!mo(t))return fo([new fn("","data expressions not supported")]);const f=yl(s,["zoom"]);if(!f&&!Uc(t))return fo([new fn("","zoom expressions not supported")]);const y=wl(s);return y||f?y instanceof fn?fo([y]):y instanceof ji&&!_l(t)?fo([new fn("",'"interpolate" expressions cannot be used with this property')]):Qd(y?new Gc(h?"camera":"composite",a.value,y.labels,y instanceof ji?y.interpolation:void 0):new go(h?"constant":"source",a.value)):fo([new fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bl{constructor(t,a){this._parameters=t,this._specification=a,wi(this,$c(this._parameters,this._specification))}static deserialize(t){return new bl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function wl(i){let t=null;if(i instanceof Ht)t=wl(i.result);else if(i instanceof ol){for(const a of i.args)if(t=wl(a),t)break}else(i instanceof uo||i instanceof ji)&&i.input instanceof Vi&&i.input.name==="zoom"&&(t=i);return t instanceof fn||i.eachChild(a=>{const s=wl(a);s instanceof fn?t=s:!t&&s?t=new fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&s&&t!==s&&(t=new fn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Hc(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!Hc(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Cl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yo(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Hc(i)||(i=gs(i));const t=ms(i,Cl);if(t.result==="error")throw new Error(t.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,s,h)=>t.value.evaluate(a,s,{},h),needGeometry:_o(i)}}function Ui(i,t){return i<t?-1:i>t?1:0}function _o(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(_o(i[t]))return!0;return!1}function gs(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Zc(i[1],i[2],"=="):t==="!="?ys(Zc(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Zc(i[1],i[2],t):t==="any"?(a=i.slice(1),["any"].concat(a.map(gs))):t==="all"?["all"].concat(i.slice(1).map(gs)):t==="none"?["all"].concat(i.slice(1).map(gs).map(ys)):t==="in"?ih(i[1],i.slice(2)):t==="!in"?ys(ih(i[1],i.slice(2))):t==="has"?vo(i[1]):t!=="!has"||ys(vo(i[1]));var a}function Zc(i,t,a){switch(i){case"$type":return[`filter-type-${a}`,t];case"$id":return[`filter-id-${a}`,t];default:return[`filter-${a}`,i,t]}}function ih(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(a=>typeof a!=typeof t[0])?["filter-in-large",i,["literal",t.sort(Ui)]]:["filter-in-small",i,["literal",t]]}}function vo(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function ys(i){return["!",i]}function _s(i){const t=typeof i;if(t==="number"||t==="boolean"||t==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let h="[";for(const f of i)h+=`${_s(f)},`;return`${h}]`}const a=Object.keys(i).sort();let s="{";for(let h=0;h<a.length;h++)s+=`${JSON.stringify(a[h])}:${_s(i[a[h]])},`;return`${s}}`}function Sf(i){let t="";for(const a of Kr)t+=`/${_s(i[a])}`;return t}function Sl(i){const t=i.value;return t?[new Ne(i.key,t,"constants have been deprecated as of v8")]:[]}function Sn(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function fr(i){if(Array.isArray(i))return i.map(fr);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const a in i)t[a]=fr(i[a]);return t}return Sn(i)}function er(i){const t=i.key,a=i.value,s=i.valueSpec||{},h=i.objectElementValidators||{},f=i.style,y=i.styleSpec,x=i.validateSpec;let C=[];const A=jt(a);if(A!=="object")return[new Ne(t,a,`object expected, ${A} found`)];for(const M in a){const I=M.split(".")[0],k=s[I]||s["*"];let F;if(h[I])F=h[I];else if(s[I])F=x;else if(h["*"])F=h["*"];else{if(!s["*"]){C.push(new Ne(t,a[M],`unknown property "${M}"`));continue}F=x}C=C.concat(F({key:(t&&`${t}.`)+M,value:a[M],valueSpec:k,style:f,styleSpec:y,object:a,objectKey:M,validateSpec:x},a))}for(const M in s)h[M]||s[M].required&&s[M].default===void 0&&a[M]===void 0&&C.push(new Ne(t,a,`missing required property "${M}"`));return C}function vs(i){const t=i.value,a=i.valueSpec,s=i.style,h=i.styleSpec,f=i.key,y=i.arrayElementValidator||i.validateSpec;if(jt(t)!=="array")return[new Ne(f,t,`array expected, ${jt(t)} found`)];if(a.length&&t.length!==a.length)return[new Ne(f,t,`array length ${a.length} expected, length ${t.length} found`)];if(a["min-length"]&&t.length<a["min-length"])return[new Ne(f,t,`array length at least ${a["min-length"]} expected, length ${t.length} found`)];let x={type:a.value,values:a.values};h.$version<7&&(x.function=a.function),jt(a.value)==="object"&&(x=a.value);let C=[];for(let A=0;A<t.length;A++)C=C.concat(y({array:t,arrayIndex:A,value:t[A],valueSpec:x,validateSpec:i.validateSpec,style:s,styleSpec:h,key:`${f}[${A}]`}));return C}function El(i){const t=i.key,a=i.value,s=i.valueSpec;let h=jt(a);return h==="number"&&a!=a&&(h="NaN"),h!=="number"?[new Ne(t,a,`number expected, ${h} found`)]:"minimum"in s&&a<s.minimum?[new Ne(t,a,`${a} is less than the minimum value ${s.minimum}`)]:"maximum"in s&&a>s.maximum?[new Ne(t,a,`${a} is greater than the maximum value ${s.maximum}`)]:[]}function Al(i){const t=i.valueSpec,a=Sn(i.value.type);let s,h,f,y={};const x=a!=="categorical"&&i.value.property===void 0,C=!x,A=jt(i.value.stops)==="array"&&jt(i.value.stops[0])==="array"&&jt(i.value.stops[0][0])==="object",M=er({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(F){if(a==="identity")return[new Ne(F.key,F.value,'identity function may not have a "stops" property')];let O=[];const U=F.value;return O=O.concat(vs({key:F.key,value:U,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:I})),jt(U)==="array"&&U.length===0&&O.push(new Ne(F.key,U,"array must have at least one stop")),O},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:t,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return a==="identity"&&x&&M.push(new Ne(i.key,i.value,'missing required property "property"')),a==="identity"||i.value.stops||M.push(new Ne(i.key,i.value,'missing required property "stops"')),a==="exponential"&&i.valueSpec.expression&&!_l(i.valueSpec)&&M.push(new Ne(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(C&&!mo(i.valueSpec)?M.push(new Ne(i.key,i.value,"property functions not supported")):x&&!Uc(i.valueSpec)&&M.push(new Ne(i.key,i.value,"zoom functions not supported"))),a!=="categorical"&&!A||i.value.property!==void 0||M.push(new Ne(i.key,i.value,'"property" property is required')),M;function I(F){let O=[];const U=F.value,J=F.key;if(jt(U)!=="array")return[new Ne(J,U,`array expected, ${jt(U)} found`)];if(U.length!==2)return[new Ne(J,U,`array length 2 expected, length ${U.length} found`)];if(A){if(jt(U[0])!=="object")return[new Ne(J,U,`object expected, ${jt(U[0])} found`)];if(U[0].zoom===void 0)return[new Ne(J,U,"object stop key must have zoom")];if(U[0].value===void 0)return[new Ne(J,U,"object stop key must have value")];if(f&&f>Sn(U[0].zoom))return[new Ne(J,U[0].zoom,"stop zoom values must appear in ascending order")];Sn(U[0].zoom)!==f&&(f=Sn(U[0].zoom),h=void 0,y={}),O=O.concat(er({key:`${J}[0]`,value:U[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:El,value:k}}))}else O=O.concat(k({key:`${J}[0]`,value:U[0],valueSpec:{},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},U));return fs(fr(U[1]))?O.concat([new Ne(`${J}[1]`,U[1],"expressions are not allowed in function stops.")]):O.concat(F.validateSpec({key:`${J}[1]`,value:U[1],valueSpec:t,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function k(F,O){const U=jt(F.value),J=Sn(F.value),ne=F.value!==null?F.value:O;if(s){if(U!==s)return[new Ne(F.key,ne,`${U} stop domain type must match previous stop domain type ${s}`)]}else s=U;if(U!=="number"&&U!=="string"&&U!=="boolean")return[new Ne(F.key,ne,"stop domain value must be a number, string, or boolean")];if(U!=="number"&&a!=="categorical"){let ye=`number expected, ${U} found`;return mo(t)&&a===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ne(F.key,ne,ye)]}return a!=="categorical"||U!=="number"||isFinite(J)&&Math.floor(J)===J?a!=="categorical"&&U==="number"&&h!==void 0&&J<h?[new Ne(F.key,ne,"stop domain values must appear in ascending order")]:(h=J,a==="categorical"&&J in y?[new Ne(F.key,ne,"stop domain values must be unique")]:(y[J]=!0,[])):[new Ne(F.key,ne,`integer expected, found ${J}`)]}}function Va(i){const t=(i.expressionContext==="property"?nh:ms)(fr(i.value),i.valueSpec);if(t.result==="error")return t.value.map(s=>new Ne(`${i.key}${s.key}`,i.value,s.message));const a=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!a.outputDefined())return[new Ne(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!us(a))return[new Ne(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!us(a))return[new Ne(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!yl(a,["zoom","feature-state"]))return[new Ne(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!gl(a))return[new Ne(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xo(i){const t=i.key,a=i.value,s=i.valueSpec,h=[];return Array.isArray(s.values)?s.values.indexOf(Sn(a))===-1&&h.push(new Ne(t,a,`expected one of [${s.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(s.values).indexOf(Sn(a))===-1&&h.push(new Ne(t,a,`expected one of [${Object.keys(s.values).join(", ")}], ${JSON.stringify(a)} found`)),h}function Wc(i){return Hc(fr(i.value))?Va(wi({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tl(i)}function Tl(i){const t=i.value,a=i.key;if(jt(t)!=="array")return[new Ne(a,t,`array expected, ${jt(t)} found`)];const s=i.styleSpec;let h,f=[];if(t.length<1)return[new Ne(a,t,"filter array must have at least 1 element")];switch(f=f.concat(xo({key:`${a}[0]`,value:t[0],valueSpec:s.filter_operator,style:i.style,styleSpec:i.styleSpec})),Sn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Sn(t[1])==="$type"&&f.push(new Ne(a,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&f.push(new Ne(a,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(h=jt(t[1]),h!=="string"&&f.push(new Ne(`${a}[1]`,t[1],`string expected, ${h} found`)));for(let y=2;y<t.length;y++)h=jt(t[y]),Sn(t[1])==="$type"?f=f.concat(xo({key:`${a}[${y}]`,value:t[y],valueSpec:s.geometry_type,style:i.style,styleSpec:i.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&f.push(new Ne(`${a}[${y}]`,t[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<t.length;y++)f=f.concat(Tl({key:`${a}[${y}]`,value:t[y],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=jt(t[1]),t.length!==2?f.push(new Ne(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):h!=="string"&&f.push(new Ne(`${a}[1]`,t[1],`string expected, ${h} found`))}return f}function xs(i,t){const a=i.key,s=i.validateSpec,h=i.style,f=i.styleSpec,y=i.value,x=i.objectKey,C=f[`${t}_${i.layerType}`];if(!C)return[];const A=x.match(/^(.*)-transition$/);if(t==="paint"&&A&&C[A[1]]&&C[A[1]].transition)return s({key:a,value:y,valueSpec:f.transition,style:h,styleSpec:f});const M=i.valueSpec||C[x];if(!M)return[new Ne(a,y,`unknown property "${x}"`)];let I;if(jt(y)==="string"&&mo(M)&&!M.tokens&&(I=/^{([^}]+)}$/.exec(y)))return[new Ne(a,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(I[1])} }\`.`)];const k=[];return i.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&k.push(new Ne(a,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&vl(fr(y))&&Sn(y.type)==="identity"&&k.push(new Ne(a,y,'"text-font" does not support identity functions'))),k.concat(s({key:i.key,value:y,valueSpec:M,style:h,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:x}))}function Xc(i){return xs(i,"paint")}function Kc(i){return xs(i,"layout")}function Jc(i){let t=[];const a=i.value,s=i.key,h=i.style,f=i.styleSpec;a.type||a.ref||t.push(new Ne(s,a,'either "type" or "ref" is required'));let y=Sn(a.type);const x=Sn(a.ref);if(a.id){const C=Sn(a.id);for(let A=0;A<i.arrayIndex;A++){const M=h.layers[A];Sn(M.id)===C&&t.push(new Ne(s,a.id,`duplicate layer id "${a.id}", previously used at line ${M.id.__line__}`))}}if("ref"in a){let C;["type","source","source-layer","filter","layout"].forEach(A=>{A in a&&t.push(new Ne(s,a[A],`"${A}" is prohibited for ref layers`))}),h.layers.forEach(A=>{Sn(A.id)===x&&(C=A)}),C?C.ref?t.push(new Ne(s,a.ref,"ref cannot reference another ref layer")):y=Sn(C.type):t.push(new Ne(s,a.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(a.source){const C=h.sources&&h.sources[a.source],A=C&&Sn(C.type);C?A==="vector"&&y==="raster"?t.push(new Ne(s,a.source,`layer "${a.id}" requires a raster source`)):A!=="raster-dem"&&y==="hillshade"?t.push(new Ne(s,a.source,`layer "${a.id}" requires a raster-dem source`)):A==="raster"&&y!=="raster"?t.push(new Ne(s,a.source,`layer "${a.id}" requires a vector source`)):A!=="vector"||a["source-layer"]?A==="raster-dem"&&y!=="hillshade"?t.push(new Ne(s,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!a.paint||!a.paint["line-gradient"]||A==="geojson"&&C.lineMetrics||t.push(new Ne(s,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ne(s,a,`layer "${a.id}" must specify a "source-layer"`)):t.push(new Ne(s,a.source,`source "${a.source}" not found`))}else t.push(new Ne(s,a,'missing required property "source"'));return t=t.concat(er({key:s,value:a,valueSpec:f.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${s}.type`,value:a.type,valueSpec:f.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:a,objectKey:"type"}),filter:Wc,layout:C=>er({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":A=>Kc(wi({layerType:y},A))}}),paint:C=>er({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":A=>Xc(wi({layerType:y},A))}})}})),t}function va(i){const t=i.value,a=i.key,s=jt(t);return s!=="string"?[new Ne(a,t,`string expected, ${s} found`)]:[]}const Ml={promoteId:function({key:i,value:t}){if(jt(t)==="string")return va({key:i,value:t});{const a=[];for(const s in t)a.push(...va({key:`${i}.${s}`,value:t[s]}));return a}}};function Yc(i){const t=i.value,a=i.key,s=i.styleSpec,h=i.style,f=i.validateSpec;if(!t.type)return[new Ne(a,t,'"type" is required')];const y=Sn(t.type);let x;switch(y){case"vector":case"raster":return x=er({key:a,value:t,valueSpec:s[`source_${y.replace("-","_")}`],style:i.style,styleSpec:s,objectElementValidators:Ml,validateSpec:f}),x;case"raster-dem":return x=function(C){var A;const M=(A=C.sourceName)!==null&&A!==void 0?A:"",I=C.value,k=C.styleSpec,F=k.source_raster_dem,O=C.style;let U=[];const J=jt(I);if(I===void 0)return U;if(J!=="object")return U.push(new Ne("source_raster_dem",I,`object expected, ${J} found`)),U;const ne=Sn(I.encoding)==="custom",ye=["redFactor","greenFactor","blueFactor","baseShift"],le=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const fe in I)!ne&&ye.includes(fe)?U.push(new Ne(fe,I[fe],`In "${M}": "${fe}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):F[fe]?U=U.concat(C.validateSpec({key:fe,value:I[fe],valueSpec:F[fe],validateSpec:C.validateSpec,style:O,styleSpec:k})):U.push(new Ne(fe,I[fe],`unknown property "${fe}"`));return U}({sourceName:a,value:t,style:i.style,styleSpec:s,validateSpec:f}),x;case"geojson":if(x=er({key:a,value:t,valueSpec:s.source_geojson,style:h,styleSpec:s,validateSpec:f,objectElementValidators:Ml}),t.cluster)for(const C in t.clusterProperties){const[A,M]=t.clusterProperties[C],I=typeof A=="string"?[A,["accumulated"],["get",C]]:A;x.push(...Va({key:`${a}.${C}.map`,value:M,validateSpec:f,expressionContext:"cluster-map"})),x.push(...Va({key:`${a}.${C}.reduce`,value:I,validateSpec:f,expressionContext:"cluster-reduce"}))}return x;case"video":return er({key:a,value:t,valueSpec:s.source_video,style:h,validateSpec:f,styleSpec:s});case"image":return er({key:a,value:t,valueSpec:s.source_image,style:h,validateSpec:f,styleSpec:s});case"canvas":return[new Ne(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xo({key:`${a}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,validateSpec:f,styleSpec:s})}}function rh(i){const t=i.value,a=i.styleSpec,s=a.light,h=i.style;let f=[];const y=jt(t);if(t===void 0)return f;if(y!=="object")return f=f.concat([new Ne("light",t,`object expected, ${y} found`)]),f;for(const x in t){const C=x.match(/^(.*)-transition$/);f=f.concat(C&&s[C[1]]&&s[C[1]].transition?i.validateSpec({key:x,value:t[x],valueSpec:a.transition,validateSpec:i.validateSpec,style:h,styleSpec:a}):s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],validateSpec:i.validateSpec,style:h,styleSpec:a}):[new Ne(x,t[x],`unknown property "${x}"`)])}return f}function Qc(i){const t=i.value,a=i.styleSpec,s=a.sky,h=i.style,f=jt(t);if(t===void 0)return[];if(f!=="object")return[new Ne("sky",t,`object expected, ${f} found`)];let y=[];for(const x in t)y=y.concat(s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],style:h,styleSpec:a}):[new Ne(x,t[x],`unknown property "${x}"`)]);return y}function ah(i){const t=i.value,a=i.styleSpec,s=a.terrain,h=i.style;let f=[];const y=jt(t);if(t===void 0)return f;if(y!=="object")return f=f.concat([new Ne("terrain",t,`object expected, ${y} found`)]),f;for(const x in t)f=f.concat(s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],validateSpec:i.validateSpec,style:h,styleSpec:a}):[new Ne(x,t[x],`unknown property "${x}"`)]);return f}function eu(i){let t=[];const a=i.value,s=i.key;if(Array.isArray(a)){const h=[],f=[];for(const y in a)a[y].id&&h.includes(a[y].id)&&t.push(new Ne(s,a,`all the sprites' ids must be unique, but ${a[y].id} is duplicated`)),h.push(a[y].id),a[y].url&&f.includes(a[y].url)&&t.push(new Ne(s,a,`all the sprites' URLs must be unique, but ${a[y].url} is duplicated`)),f.push(a[y].url),t=t.concat(er({key:`${s}[${y}]`,value:a[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return t}return va({key:s,value:a})}const tu={"*":()=>[],array:vs,boolean:function(i){const t=i.value,a=i.key,s=jt(t);return s!=="boolean"?[new Ne(a,t,`boolean expected, ${s} found`)]:[]},number:El,color:function(i){const t=i.key,a=i.value,s=jt(a);return s!=="string"?[new Ne(t,a,`color expected, ${s} found`)]:Et.parse(String(a))?[]:[new Ne(t,a,`color expected, "${a}" found`)]},constants:Sl,enum:xo,filter:Wc,function:Al,layer:Jc,object:er,source:Yc,light:rh,sky:Qc,terrain:ah,projection:function(i){const t=i.value,a=i.styleSpec,s=a.projection,h=i.style,f=jt(t);if(t===void 0)return[];if(f!=="object")return[new Ne("projection",t,`object expected, ${f} found`)];let y=[];for(const x in t)y=y.concat(s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],style:h,styleSpec:a}):[new Ne(x,t[x],`unknown property "${x}"`)]);return y},string:va,formatted:function(i){return va(i).length===0?[]:Va(i)},resolvedImage:function(i){return va(i).length===0?[]:Va(i)},padding:function(i){const t=i.key,a=i.value;if(jt(a)==="array"){if(a.length<1||a.length>4)return[new Ne(t,a,`padding requires 1 to 4 values; ${a.length} values found`)];const s={type:"number"};let h=[];for(let f=0;f<a.length;f++)h=h.concat(i.validateSpec({key:`${t}[${f}]`,value:a[f],validateSpec:i.validateSpec,valueSpec:s}));return h}return El({key:t,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const t=i.key,a=i.value,s=jt(a),h=i.styleSpec;if(s!=="array"||a.length<1||a.length%2!=0)return[new Ne(t,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let f=[];for(let y=0;y<a.length;y+=2)f=f.concat(xo({key:`${t}[${y}]`,value:a[y],valueSpec:h.layout_symbol["text-anchor"]})),f=f.concat(vs({key:`${t}[${y+1}]`,value:a[y+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:h}));return f},sprite:eu};function bo(i){const t=i.value,a=i.valueSpec,s=i.styleSpec;return i.validateSpec=bo,a.expression&&vl(Sn(t))?Al(i):a.expression&&fs(fr(t))?Va(i):a.type&&tu[a.type]?tu[a.type](i):er(wi({},i,{valueSpec:a.type?s[a.type]:a}))}function oh(i){const t=i.value,a=i.key,s=va(i);return s.length||(t.indexOf("{fontstack}")===-1&&s.push(new Ne(a,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&s.push(new Ne(a,t,'"glyphs" url must include a "{range}" token'))),s}function mr(i,t=be){let a=[];return a=a.concat(bo({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,validateSpec:bo,objectElementValidators:{glyphs:oh,"*":()=>[]}})),i.constants&&(a=a.concat(Sl({key:"constants",value:i.constants,style:i,styleSpec:t,validateSpec:bo}))),nu(a)}function gr(i){return function(t){return i({...t,validateSpec:bo})}}function nu(i){return[].concat(i).sort((t,a)=>t.line-a.line)}function yr(i){return function(...t){return nu(i.apply(this,t))}}mr.source=yr(gr(Yc)),mr.sprite=yr(gr(eu)),mr.glyphs=yr(gr(oh)),mr.light=yr(gr(rh)),mr.sky=yr(gr(Qc)),mr.terrain=yr(gr(ah)),mr.layer=yr(gr(Jc)),mr.filter=yr(gr(Wc)),mr.paintProperty=yr(gr(Xc)),mr.layoutProperty=yr(gr(Kc));const Ua=mr,Il=Ua.light,Ef=Ua.sky,iu=Ua.paintProperty,Af=Ua.layoutProperty;function sh(i,t){let a=!1;if(t&&t.length)for(const s of t)i.fire(new pn(new Error(s.message))),a=!0;return a}class wo{constructor(t,a,s){const h=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const y=new Int32Array(this.arrayBuffer);t=y[0],this.d=(a=y[1])+2*(s=y[2]);for(let C=0;C<this.d*this.d;C++){const A=y[3+C],M=y[3+C+1];h.push(A===M?null:y.subarray(A,M))}const x=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=a+2*s;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=t,this.padding=s,this.scale=a/t,this.uid=0;const f=s/a*t;this.min=-f,this.max=t+f}insert(t,a,s,h,f){this._forEachCell(a,s,h,f,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(a),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,a,s,h,f,y){this.cells[f].push(y)}query(t,a,s,h,f){const y=this.min,x=this.max;if(t<=y&&a<=y&&x<=s&&x<=h&&!f)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(t,a,s,h,this._queryCell,C,{},f),C}}_queryCell(t,a,s,h,f,y,x,C){const A=this.cells[f];if(A!==null){const M=this.keys,I=this.bboxes;for(let k=0;k<A.length;k++){const F=A[k];if(x[F]===void 0){const O=4*F;(C?C(I[O+0],I[O+1],I[O+2],I[O+3]):t<=I[O+2]&&a<=I[O+3]&&s>=I[O+0]&&h>=I[O+1])?(x[F]=!0,y.push(M[F])):x[F]=!1}}}}_forEachCell(t,a,s,h,f,y,x,C){const A=this._convertToCellCoord(t),M=this._convertToCellCoord(a),I=this._convertToCellCoord(s),k=this._convertToCellCoord(h);for(let F=A;F<=I;F++)for(let O=M;O<=k;O++){const U=this.d*O+F;if((!C||C(this._convertFromCellCoord(F),this._convertFromCellCoord(O),this._convertFromCellCoord(F+1),this._convertFromCellCoord(O+1)))&&f.call(this,t,a,s,h,U,y,x,C))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,a=3+this.cells.length+1+1;let s=0;for(let y=0;y<this.cells.length;y++)s+=this.cells[y].length;const h=new Int32Array(a+s+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let f=a;for(let y=0;y<t.length;y++){const x=t[y];h[3+y]=f,h.set(x,f),f+=x.length}return h[3+t.length]=f,h.set(this.keys,f),f+=this.keys.length,h[3+t.length+1]=f,h.set(this.bboxes,f),f+=this.bboxes.length,h.buffer}static serialize(t,a){const s=t.toArrayBuffer();return a&&a.push(s),{buffer:s}}static deserialize(t){return new wo(t.buffer)}}const Or={};function et(i,t,a={}){if(Or[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),Or[i]={klass:t,omit:a.omit||[],shallow:a.shallow||[]}}et("Object",Object),et("TransferableGridIndex",wo),et("Color",Et),et("Error",Error),et("AJAXError",an),et("ResolvedImage",Mn),et("StylePropertyFunction",bl),et("StyleExpression",ps,{omit:["_evaluator"]}),et("ZoomDependentExpression",Gc),et("ZoomConstantExpression",go),et("CompoundExpression",Vi,{omit:["_evaluate"]});for(const i in Na)Na[i]._classRegistryKey||et(`Expression_${i}`,Na[i]);function lh(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function ru(i){return i.$name||i.constructor._classRegistryKey}function ch(i){return!function(t){if(t===null||typeof t!="object")return!1;const a=ru(t);return!(!a||a==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||lh(i)||Un(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function bs(i,t){if(ch(i))return(lh(i)||Un(i))&&t&&t.push(i),ArrayBuffer.isView(i)&&t&&t.push(i.buffer),i instanceof ImageData&&t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const f=[];for(const y of i)f.push(bs(y,t));return f}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const a=ru(i);if(!a)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Or[a])throw new Error(`${a} is not registered.`);const{klass:s}=Or[a],h=s.serialize?s.serialize(i,t):{};if(s.serialize){if(t&&h===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const f in i){if(!i.hasOwnProperty(f)||Or[a].omit.indexOf(f)>=0)continue;const y=i[f];h[f]=Or[a].shallow.indexOf(f)>=0?y:bs(y,t)}i instanceof Error&&(h.message=i.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(h.$name=a),h}function ws(i){if(ch(i))return i;if(Array.isArray(i))return i.map(ws);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const t=ru(i)||"Object";if(!Or[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:a}=Or[t];if(!a)throw new Error(`can't deserialize unregistered class ${t}`);if(a.deserialize)return a.deserialize(i);const s=Object.create(a.prototype);for(const h of Object.keys(i)){if(h==="$name")continue;const f=i[h];s[h]=Or[t].shallow.indexOf(h)>=0?f:ws(f)}return s}class $a{constructor(){this.first=!0}update(t,a){const s=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=a),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=s,!0))}}const Bt={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function au(i){for(const t of i)if(ea(t.charCodeAt(0)))return!0;return!1}function Tf(i){for(const t of i)if(!Mf(t.charCodeAt(0)))return!1;return!0}function ou(i){const t=i.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(t.join("|"),"u")}const uh=ou(["Arab","Dupl","Mong","Ougr","Syrc"]);function Mf(i){return!uh.test(String.fromCodePoint(i))}const dh=ou(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ea(i){return!(i!==746&&i!==747&&(i<4352||!(Bt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Bt["CJK Compatibility"](i)||Bt["CJK Strokes"](i)||!(!Bt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Bt["Enclosed CJK Letters and Months"](i)||Bt["Ideographic Description Characters"](i)||Bt.Kanbun(i)||Bt.Katakana(i)&&i!==12540||!(!Bt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Bt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Bt["Vertical Forms"](i)||Bt["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||dh.test(String.fromCodePoint(i)))))}function su(i){return!(ea(i)||function(t){return!!(Bt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Bt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Bt["Letterlike Symbols"](t)||Bt["Number Forms"](t)||Bt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Bt["Control Pictures"](t)&&t!==9251||Bt["Optical Character Recognition"](t)||Bt["Enclosed Alphanumerics"](t)||Bt["Geometric Shapes"](t)||Bt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Bt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Bt["CJK Symbols and Punctuation"](t)||Bt.Katakana(t)||Bt["Private Use Area"](t)||Bt["CJK Compatibility Forms"](t)||Bt["Small Form Variants"](t)||Bt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}const lu=ou(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function cu(i){return lu.test(String.fromCodePoint(i))}function uu(i,t){return!(!t&&cu(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Bt.Khmer(i))}function If(i){for(const t of i)if(cu(t.charCodeAt(0)))return!0;return!1}const Nr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Kt{constructor(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $a,this.transition={})}isSupportedScript(t){return function(a,s){for(const h of a)if(!uu(h.charCodeAt(0),s))return!1;return!0}(t,Nr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,a=t-Math.floor(t),s=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*a}}}class Pl{constructor(t,a){this.property=t,this.value=a,this.expression=function(s,h){if(vl(s))return new bl(s,h);if(fs(s)){const f=nh(s,h);if(f.result==="error")throw new Error(f.value.map(y=>`${y.key}: ${y.message}`).join(", "));return f.value}{let f=s;return h.type==="color"&&typeof s=="string"?f=Et.parse(s):h.type!=="padding"||typeof s!="number"&&!Array.isArray(s)?h.type==="variableAnchorOffsetCollection"&&Array.isArray(s)&&(f=mn.parse(s)):f=Nn.parse(s),{kind:"constant",evaluate:()=>f}}}(a===void 0?t.specification.default:a,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,a,s){return this.property.possiblyEvaluate(this,t,a,s)}}class zl{constructor(t){this.property=t,this.value=new Pl(t,void 0)}transitioned(t,a){return new hh(this.property,this.value,a,Qe({},t.transition,this.transition),t.now)}untransitioned(){return new hh(this.property,this.value,null,{},0)}}class Co{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ot(this._values[t].value.value)}setValue(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new zl(this._values[t].property)),this._values[t].value=new Pl(this._values[t].property,a===null?void 0:ot(a))}getTransition(t){return ot(this._values[t].transition)}setTransition(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new zl(this._values[t].property)),this._values[t].transition=ot(a)||void 0}serialize(){const t={};for(const a of Object.keys(this._values)){const s=this.getValue(a);s!==void 0&&(t[a]=s);const h=this.getTransition(a);h!==void 0&&(t[`${a}-transition`]=h)}return t}transitioned(t,a){const s=new ph(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].transitioned(t,a._values[h]);return s}untransitioned(){const t=new ph(this._properties);for(const a of Object.keys(this._values))t._values[a]=this._values[a].untransitioned();return t}}class hh{constructor(t,a,s,h,f){this.property=t,this.value=a,this.begin=f+h.delay||0,this.end=this.begin+h.duration||0,t.specification.transition&&(h.delay||h.duration)&&(this.prior=s)}possiblyEvaluate(t,a,s){const h=t.now||0,f=this.value.possiblyEvaluate(t,a,s),y=this.prior;if(y){if(h>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(h<this.begin)return y.possiblyEvaluate(t,a,s);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(t,a,s),f,function(C){if(C<=0)return 0;if(C>=1)return 1;const A=C*C,M=A*C;return 4*(C<.5?M:3*(C-A)+M-.75)}(x))}}return f}}class ph{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,a,s){const h=new m(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].possiblyEvaluate(t,a,s);return h}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class fh{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ot(this._values[t].value)}setValue(t,a){this._values[t]=new Pl(this._values[t].property,a===null?void 0:ot(a))}serialize(){const t={};for(const a of Object.keys(this._values)){const s=this.getValue(a);s!==void 0&&(t[a]=s)}return t}possiblyEvaluate(t,a,s){const h=new m(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].possiblyEvaluate(t,a,s);return h}}class jr{constructor(t,a,s){this.property=t,this.value=a,this.parameters=s}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,a,s,h){return this.property.evaluate(this.value,this.parameters,t,a,s,h)}}class m{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class e{constructor(t){this.specification=t}possiblyEvaluate(t,a){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(a)}interpolate(t,a,s){const h=Ni[this.specification.type];return h?h(t,a,s):t}}class o{constructor(t,a){this.specification=t,this.overrides=a}possiblyEvaluate(t,a,s,h){return new jr(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(a,null,{},s,h)}:t.expression,a)}interpolate(t,a,s){if(t.value.kind!=="constant"||a.value.kind!=="constant")return t;if(t.value.value===void 0||a.value.value===void 0)return new jr(this,{kind:"constant",value:void 0},t.parameters);const h=Ni[this.specification.type];if(h){const f=h(t.value.value,a.value.value,s);return new jr(this,{kind:"constant",value:f},t.parameters)}return t}evaluate(t,a,s,h,f,y){return t.kind==="constant"?t.value:t.evaluate(a,s,h,f,y)}}class c extends o{possiblyEvaluate(t,a,s,h){if(t.value===void 0)return new jr(this,{kind:"constant",value:void 0},a);if(t.expression.kind==="constant"){const f=t.expression.evaluate(a,null,{},s,h),y=t.property.specification.type==="resolvedImage"&&typeof f!="string"?f.name:f,x=this._calculate(y,y,y,a);return new jr(this,{kind:"constant",value:x},a)}if(t.expression.kind==="camera"){const f=this._calculate(t.expression.evaluate({zoom:a.zoom-1}),t.expression.evaluate({zoom:a.zoom}),t.expression.evaluate({zoom:a.zoom+1}),a);return new jr(this,{kind:"constant",value:f},a)}return new jr(this,t.expression,a)}evaluate(t,a,s,h,f,y){if(t.kind==="source"){const x=t.evaluate(a,s,h,f,y);return this._calculate(x,x,x,a)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(a.zoom)-1},s,h),t.evaluate({zoom:Math.floor(a.zoom)},s,h),t.evaluate({zoom:Math.floor(a.zoom)+1},s,h),a):t.value}_calculate(t,a,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:s,to:a}}interpolate(t){return t}}class d{constructor(t){this.specification=t}possiblyEvaluate(t,a,s,h){if(t.value!==void 0){if(t.expression.kind==="constant"){const f=t.expression.evaluate(a,null,{},s,h);return this._calculate(f,f,f,a)}return this._calculate(t.expression.evaluate(new Kt(Math.floor(a.zoom-1),a)),t.expression.evaluate(new Kt(Math.floor(a.zoom),a)),t.expression.evaluate(new Kt(Math.floor(a.zoom+1),a)),a)}}_calculate(t,a,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:s,to:a}}interpolate(t){return t}}class g{constructor(t){this.specification=t}possiblyEvaluate(t,a,s,h){return!!t.expression.evaluate(a,null,{},s,h)}interpolate(){return!1}}class w{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in t){const s=t[a];s.specification.overridable&&this.overridableProperties.push(a);const h=this.defaultPropertyValues[a]=new Pl(s,void 0),f=this.defaultTransitionablePropertyValues[a]=new zl(s);this.defaultTransitioningPropertyValues[a]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=h.possiblyEvaluate({})}}}et("DataDrivenProperty",o),et("DataConstantProperty",e),et("CrossFadedDataDrivenProperty",c),et("CrossFadedProperty",d),et("ColorRampProperty",g);const S="-transition";class E extends Li{constructor(t,a){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),a.layout&&(this._unevaluatedLayout=new fh(a.layout)),a.paint)){this._transitionablePaint=new Co(a.paint);for(const s in t.paint)this.setPaintProperty(s,t.paint[s],{validate:!1});for(const s in t.layout)this.setLayoutProperty(s,t.layout[s],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new m(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,a,s={}){a!=null&&this._validate(Af,`layers.${this.id}.layout.${t}`,t,a,s)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,a):this.visibility=a)}getPaintProperty(t){return t.endsWith(S)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,a,s={}){if(a!=null&&this._validate(iu,`layers.${this.id}.paint.${t}`,t,a,s))return!1;if(t.endsWith(S))return this._transitionablePaint.setTransition(t.slice(0,-11),a||void 0),!1;{const h=this._transitionablePaint._values[t],f=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(t,a),this._handleSpecialPaintPropertyUpdate(t);const C=this._transitionablePaint._values[t].value;return C.isDataDriven()||y||f||this._handleOverridablePaintPropertyUpdate(t,x,C)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,a,s){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,a){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,a)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ct(t,(a,s)=>!(a===void 0||s==="layout"&&!Object.keys(a).length||s==="paint"&&!Object.keys(a).length))}_validate(t,a,s,h,f={}){return(!f||f.validate!==!1)&&sh(this,t.call(Ua,{key:a,layerType:this.type,objectKey:s,value:h,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const a=this.paint.get(t);if(a instanceof jr&&mo(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const T={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class z{constructor(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class P{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,a){return t._trim(),a&&(t.isTransferred=!0,a.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function B(i,t=1){let a=0,s=0;return{members:i.map(h=>{const f=T[h.type].BYTES_PER_ELEMENT,y=a=q(a,Math.max(t,f)),x=h.components||1;return s=Math.max(s,f),a+=f*x,{name:h.name,type:h.type,components:x,offset:y}}),size:q(a,Math.max(s,t)),alignment:t}}function q(i,t){return Math.ceil(i/t)*t}class G extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,a)}emplace(t,a,s){const h=2*t;return this.int16[h+0]=a,this.int16[h+1]=s,t}}G.prototype.bytesPerElement=4,et("StructArrayLayout2i4",G);class Y extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,a,s)}emplace(t,a,s,h){const f=3*t;return this.int16[f+0]=a,this.int16[f+1]=s,this.int16[f+2]=h,t}}Y.prototype.bytesPerElement=6,et("StructArrayLayout3i6",Y);class Z extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,t,a,s,h)}emplace(t,a,s,h,f){const y=4*t;return this.int16[y+0]=a,this.int16[y+1]=s,this.int16[y+2]=h,this.int16[y+3]=f,t}}Z.prototype.bytesPerElement=8,et("StructArrayLayout4i8",Z);class te extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,s,h,f,y)}emplace(t,a,s,h,f,y,x){const C=6*t;return this.int16[C+0]=a,this.int16[C+1]=s,this.int16[C+2]=h,this.int16[C+3]=f,this.int16[C+4]=y,this.int16[C+5]=x,t}}te.prototype.bytesPerElement=12,et("StructArrayLayout2i4i12",te);class oe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,s,h,f,y)}emplace(t,a,s,h,f,y,x){const C=4*t,A=8*t;return this.int16[C+0]=a,this.int16[C+1]=s,this.uint8[A+4]=h,this.uint8[A+5]=f,this.uint8[A+6]=y,this.uint8[A+7]=x,t}}oe.prototype.bytesPerElement=8,et("StructArrayLayout2i4ub8",oe);class K extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,a)}emplace(t,a,s){const h=2*t;return this.float32[h+0]=a,this.float32[h+1]=s,t}}K.prototype.bytesPerElement=8,et("StructArrayLayout2f8",K);class he extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y,x,C,A,M){const I=this.length;return this.resize(I+1),this.emplace(I,t,a,s,h,f,y,x,C,A,M)}emplace(t,a,s,h,f,y,x,C,A,M,I){const k=10*t;return this.uint16[k+0]=a,this.uint16[k+1]=s,this.uint16[k+2]=h,this.uint16[k+3]=f,this.uint16[k+4]=y,this.uint16[k+5]=x,this.uint16[k+6]=C,this.uint16[k+7]=A,this.uint16[k+8]=M,this.uint16[k+9]=I,t}}he.prototype.bytesPerElement=20,et("StructArrayLayout10ui20",he);class ge extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y,x,C,A,M,I,k){const F=this.length;return this.resize(F+1),this.emplace(F,t,a,s,h,f,y,x,C,A,M,I,k)}emplace(t,a,s,h,f,y,x,C,A,M,I,k,F){const O=12*t;return this.int16[O+0]=a,this.int16[O+1]=s,this.int16[O+2]=h,this.int16[O+3]=f,this.uint16[O+4]=y,this.uint16[O+5]=x,this.uint16[O+6]=C,this.uint16[O+7]=A,this.int16[O+8]=M,this.int16[O+9]=I,this.int16[O+10]=k,this.int16[O+11]=F,t}}ge.prototype.bytesPerElement=24,et("StructArrayLayout4i4ui4i24",ge);class _e extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,a,s)}emplace(t,a,s,h){const f=3*t;return this.float32[f+0]=a,this.float32[f+1]=s,this.float32[f+2]=h,t}}_e.prototype.bytesPerElement=12,et("StructArrayLayout3f12",_e);class Pe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint32[1*t+0]=a,t}}Pe.prototype.bytesPerElement=4,et("StructArrayLayout1ul4",Pe);class Be extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y,x,C,A){const M=this.length;return this.resize(M+1),this.emplace(M,t,a,s,h,f,y,x,C,A)}emplace(t,a,s,h,f,y,x,C,A,M){const I=10*t,k=5*t;return this.int16[I+0]=a,this.int16[I+1]=s,this.int16[I+2]=h,this.int16[I+3]=f,this.int16[I+4]=y,this.int16[I+5]=x,this.uint32[k+3]=C,this.uint16[I+8]=A,this.uint16[I+9]=M,t}}Be.prototype.bytesPerElement=20,et("StructArrayLayout6i1ul2ui20",Be);class Je extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,s,h,f,y)}emplace(t,a,s,h,f,y,x){const C=6*t;return this.int16[C+0]=a,this.int16[C+1]=s,this.int16[C+2]=h,this.int16[C+3]=f,this.int16[C+4]=y,this.int16[C+5]=x,t}}Je.prototype.bytesPerElement=12,et("StructArrayLayout2i2i2i12",Je);class Ye extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,t,a,s,h,f)}emplace(t,a,s,h,f,y){const x=4*t,C=8*t;return this.float32[x+0]=a,this.float32[x+1]=s,this.float32[x+2]=h,this.int16[C+6]=f,this.int16[C+7]=y,t}}Ye.prototype.bytesPerElement=16,et("StructArrayLayout2f1f2i16",Ye);class Oe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,s,h,f,y)}emplace(t,a,s,h,f,y,x){const C=16*t,A=4*t,M=8*t;return this.uint8[C+0]=a,this.uint8[C+1]=s,this.float32[A+1]=h,this.float32[A+2]=f,this.int16[M+6]=y,this.int16[M+7]=x,t}}Oe.prototype.bytesPerElement=16,et("StructArrayLayout2ub2f2i16",Oe);class je extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,a,s)}emplace(t,a,s,h){const f=3*t;return this.uint16[f+0]=a,this.uint16[f+1]=s,this.uint16[f+2]=h,t}}je.prototype.bytesPerElement=6,et("StructArrayLayout3ui6",je);class lt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y,x,C,A,M,I,k,F,O,U,J,ne){const ye=this.length;return this.resize(ye+1),this.emplace(ye,t,a,s,h,f,y,x,C,A,M,I,k,F,O,U,J,ne)}emplace(t,a,s,h,f,y,x,C,A,M,I,k,F,O,U,J,ne,ye){const le=24*t,fe=12*t,Ee=48*t;return this.int16[le+0]=a,this.int16[le+1]=s,this.uint16[le+2]=h,this.uint16[le+3]=f,this.uint32[fe+2]=y,this.uint32[fe+3]=x,this.uint32[fe+4]=C,this.uint16[le+10]=A,this.uint16[le+11]=M,this.uint16[le+12]=I,this.float32[fe+7]=k,this.float32[fe+8]=F,this.uint8[Ee+36]=O,this.uint8[Ee+37]=U,this.uint8[Ee+38]=J,this.uint32[fe+10]=ne,this.int16[le+22]=ye,t}}lt.prototype.bytesPerElement=48,et("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",lt);class At extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,s,h,f,y,x,C,A,M,I,k,F,O,U,J,ne,ye,le,fe,Ee,ke,Ke,vt,We,He,ht,at){const tt=this.length;return this.resize(tt+1),this.emplace(tt,t,a,s,h,f,y,x,C,A,M,I,k,F,O,U,J,ne,ye,le,fe,Ee,ke,Ke,vt,We,He,ht,at)}emplace(t,a,s,h,f,y,x,C,A,M,I,k,F,O,U,J,ne,ye,le,fe,Ee,ke,Ke,vt,We,He,ht,at,tt){const Ie=32*t,ft=16*t;return this.int16[Ie+0]=a,this.int16[Ie+1]=s,this.int16[Ie+2]=h,this.int16[Ie+3]=f,this.int16[Ie+4]=y,this.int16[Ie+5]=x,this.int16[Ie+6]=C,this.int16[Ie+7]=A,this.uint16[Ie+8]=M,this.uint16[Ie+9]=I,this.uint16[Ie+10]=k,this.uint16[Ie+11]=F,this.uint16[Ie+12]=O,this.uint16[Ie+13]=U,this.uint16[Ie+14]=J,this.uint16[Ie+15]=ne,this.uint16[Ie+16]=ye,this.uint16[Ie+17]=le,this.uint16[Ie+18]=fe,this.uint16[Ie+19]=Ee,this.uint16[Ie+20]=ke,this.uint16[Ie+21]=Ke,this.uint16[Ie+22]=vt,this.uint32[ft+12]=We,this.float32[ft+13]=He,this.float32[ft+14]=ht,this.uint16[Ie+30]=at,this.uint16[Ie+31]=tt,t}}At.prototype.bytesPerElement=64,et("StructArrayLayout8i15ui1ul2f2ui64",At);class Ge extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.float32[1*t+0]=a,t}}Ge.prototype.bytesPerElement=4,et("StructArrayLayout1f4",Ge);class Ze extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,a,s)}emplace(t,a,s,h){const f=3*t;return this.uint16[6*t+0]=a,this.float32[f+1]=s,this.float32[f+2]=h,t}}Ze.prototype.bytesPerElement=12,et("StructArrayLayout1ui2f12",Ze);class wt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,a,s)}emplace(t,a,s,h){const f=4*t;return this.uint32[2*t+0]=a,this.uint16[f+2]=s,this.uint16[f+3]=h,t}}wt.prototype.bytesPerElement=8,et("StructArrayLayout1ul2ui8",wt);class tn extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,a)}emplace(t,a,s){const h=2*t;return this.uint16[h+0]=a,this.uint16[h+1]=s,t}}tn.prototype.bytesPerElement=4,et("StructArrayLayout2ui4",tn);class zt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint16[1*t+0]=a,t}}zt.prototype.bytesPerElement=2,et("StructArrayLayout1ui2",zt);class Rt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,t,a,s,h)}emplace(t,a,s,h,f){const y=4*t;return this.float32[y+0]=a,this.float32[y+1]=s,this.float32[y+2]=h,this.float32[y+3]=f,t}}Rt.prototype.bytesPerElement=16,et("StructArrayLayout4f16",Rt);class on extends z{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new j(this.anchorPointX,this.anchorPointY)}}on.prototype.size=20;class ii extends Be{get(t){return new on(this,t)}}et("CollisionBoxArray",ii);class _r extends z{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}_r.prototype.size=48;class sn extends lt{get(t){return new _r(this,t)}}et("PlacedSymbolArray",sn);class Ei extends z{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ei.prototype.size=64;class fi extends At{get(t){return new Ei(this,t)}}et("SymbolInstanceArray",fi);class ri extends Ge{getoffsetX(t){return this.float32[1*t+0]}}et("GlyphOffsetArray",ri);class ai extends Y{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}et("SymbolLineVertexArray",ai);class vr extends z{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}vr.prototype.size=12;class qa extends Ze{get(t){return new vr(this,t)}}et("TextAnchorOffsetArray",qa);class Cs extends z{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Cs.prototype.size=8;class Ga extends wt{get(t){return new Cs(this,t)}}et("FeatureIndexArray",Ga);class xa extends G{}class Dl extends G{}class du extends G{}class tr extends te{}class xr extends oe{}class ba extends K{}class br extends he{}class mi extends ge{}class oi extends _e{}class $i extends Pe{}class xn extends Je{}class So extends Oe{}class wa extends je{}class Ss extends tn{}const Pf=B([{name:"a_pos",components:2,type:"Int16"}],4),{members:zf}=Pf;class Qn{constructor(t=[]){this.segments=t}prepareSegment(t,a,s,h){let f=this.segments[this.segments.length-1];return t>Qn.MAX_VERTEX_ARRAY_LENGTH&&Ot(`Max vertices per segment is ${Qn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!f||f.vertexLength+t>Qn.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==h)&&(f={vertexOffset:a.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},h!==void 0&&(f.sortKey=h),this.segments.push(f)),f}get(){return this.segments}destroy(){for(const t of this.segments)for(const a in t.vaos)t.vaos[a].destroy()}static simpleSegment(t,a,s,h){return new Qn([{vertexOffset:t,primitiveOffset:a,vertexLength:s,primitiveLength:h,vaos:{},sortKey:0}])}}function Ca(i,t){return 256*(i=Re(Math.floor(i),0,255))+Re(Math.floor(t),0,255)}Qn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,et("SegmentVector",Qn);const Es=B([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var As={exports:{}},hu={exports:{}};hu.exports=function(i,t){var a,s,h,f,y,x,C,A;for(s=i.length-(a=3&i.length),h=t,y=3432918353,x=461845907,A=0;A<s;)C=255&i.charCodeAt(A)|(255&i.charCodeAt(++A))<<8|(255&i.charCodeAt(++A))<<16|(255&i.charCodeAt(++A))<<24,++A,h=27492+(65535&(f=5*(65535&(h=(h^=C=(65535&(C=(C=(65535&C)*y+(((C>>>16)*y&65535)<<16)&4294967295)<<15|C>>>17))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(f>>>16)&65535)<<16);switch(C=0,a){case 3:C^=(255&i.charCodeAt(A+2))<<16;case 2:C^=(255&i.charCodeAt(A+1))<<8;case 1:h^=C=(65535&(C=(C=(65535&(C^=255&i.charCodeAt(A)))*y+(((C>>>16)*y&65535)<<16)&4294967295)<<15|C>>>17))*x+(((C>>>16)*x&65535)<<16)&4294967295}return h^=i.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var pu=hu.exports,fu={exports:{}};fu.exports=function(i,t){for(var a,s=i.length,h=t^s,f=0;s>=4;)a=1540483477*(65535&(a=255&i.charCodeAt(f)|(255&i.charCodeAt(++f))<<8|(255&i.charCodeAt(++f))<<16|(255&i.charCodeAt(++f))<<24))+((1540483477*(a>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),s-=4,++f;switch(s){case 3:h^=(255&i.charCodeAt(f+2))<<16;case 2:h^=(255&i.charCodeAt(f+1))<<8;case 1:h=1540483477*(65535&(h^=255&i.charCodeAt(f)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var kl=pu,rw=fu.exports;As.exports=kl,As.exports.murmur3=kl,As.exports.murmur2=rw;var Df=D(As.exports);class mh{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,a,s,h){this.ids.push(Wy(t)),this.positions.push(a,s,h)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Wy(t);let s=0,h=this.ids.length-1;for(;s<h;){const y=s+h>>1;this.ids[y]>=a?h=y:s=y+1}const f=[];for(;this.ids[s]===a;)f.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return f}static serialize(t,a){const s=new Float64Array(t.ids),h=new Uint32Array(t.positions);return kf(s,h,0,s.length-1),a&&a.push(s.buffer,h.buffer),{ids:s,positions:h}}static deserialize(t){const a=new mh;return a.ids=t.ids,a.positions=t.positions,a.indexed=!0,a}}function Wy(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Df(String(i))}function kf(i,t,a,s){for(;a<s;){const h=i[a+s>>1];let f=a-1,y=s+1;for(;;){do f++;while(i[f]<h);do y--;while(i[y]>h);if(f>=y)break;gh(i,f,y),gh(t,3*f,3*y),gh(t,3*f+1,3*y+1),gh(t,3*f+2,3*y+2)}y-a<s-y?(kf(i,t,a,y),a=y+1):(kf(i,t,y+1,s),s=y)}}function gh(i,t,a){const s=i[t];i[t]=i[a],i[a]=s}et("FeaturePositionMap",mh);class Ts{constructor(t,a){this.gl=t.gl,this.location=a}}class yh extends Ts{constructor(t,a){super(t,a),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Xy extends Ts{constructor(t,a){super(t,a),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Ky extends Ts{constructor(t,a){super(t,a),this.current=Et.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const aw=new Float32Array(16);function Rf(i){return[Ca(255*i.r,255*i.g),Ca(255*i.b,255*i.a)]}class mu{constructor(t,a,s){this.value=t,this.uniformNames=a.map(h=>`u_${h}`),this.type=s}setUniform(t,a,s){t.set(s.constantOr(this.value))}getBinding(t,a,s){return this.type==="color"?new Ky(t,a):new yh(t,a)}}class Rl{constructor(t,a){this.uniformNames=a.map(s=>`u_${s}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=t.tlbr}setUniform(t,a,s,h){const f=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&t.set(f)}getBinding(t,a,s){return s.substr(0,9)==="u_pattern"?new Xy(t,a):new yh(t,a)}}class Ha{constructor(t,a,s,h){this.expression=t,this.type=s,this.maxValue=0,this.paintVertexAttributes=a.map(f=>({name:`a_${f}`,type:"Float32",components:s==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(t,a,s,h,f){const y=this.paintVertexArray.length,x=this.expression.evaluate(new Kt(0),a,{},h,[],f);this.paintVertexArray.resize(t),this._setPaintValue(y,t,x)}updatePaintArray(t,a,s,h){const f=this.expression.evaluate({zoom:0},s,h);this._setPaintValue(t,a,f)}_setPaintValue(t,a,s){if(this.type==="color"){const h=Rf(s);for(let f=t;f<a;f++)this.paintVertexArray.emplace(f,h[0],h[1])}else{for(let h=t;h<a;h++)this.paintVertexArray.emplace(h,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ta{constructor(t,a,s,h,f,y){this.expression=t,this.uniformNames=a.map(x=>`u_${x}_t`),this.type=s,this.useIntegerZoom=h,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:s==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(t,a,s,h,f){const y=this.expression.evaluate(new Kt(this.zoom),a,{},h,[],f),x=this.expression.evaluate(new Kt(this.zoom+1),a,{},h,[],f),C=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(C,t,y,x)}updatePaintArray(t,a,s,h){const f=this.expression.evaluate({zoom:this.zoom},s,h),y=this.expression.evaluate({zoom:this.zoom+1},s,h);this._setPaintValue(t,a,f,y)}_setPaintValue(t,a,s,h){if(this.type==="color"){const f=Rf(s),y=Rf(h);for(let x=t;x<a;x++)this.paintVertexArray.emplace(x,f[0],f[1],y[0],y[1])}else{for(let f=t;f<a;f++)this.paintVertexArray.emplace(f,s,h);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(h))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,a){const s=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,h=Re(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);t.set(h)}getBinding(t,a,s){return new yh(t,a)}}class Eo{constructor(t,a,s,h,f,y){this.expression=t,this.type=a,this.useIntegerZoom=s,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f}populatePaintArray(t,a,s){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(h,t,a.patterns&&a.patterns[this.layerId],s)}updatePaintArray(t,a,s,h,f){this._setPaintValues(t,a,s.patterns&&s.patterns[this.layerId],f)}_setPaintValues(t,a,s,h){if(!h||!s)return;const{min:f,mid:y,max:x}=s,C=h[f],A=h[y],M=h[x];if(C&&A&&M)for(let I=t;I<a;I++)this.zoomInPaintVertexArray.emplace(I,A.tl[0],A.tl[1],A.br[0],A.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],A.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,A.tl[0],A.tl[1],A.br[0],A.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],A.pixelRatio,M.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Es.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Es.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Jy{constructor(t,a,s){this.binders={},this._buffers=[];const h=[];for(const f in t.paint._values){if(!s(f))continue;const y=t.paint.get(f);if(!(y instanceof jr&&mo(y.property.specification)))continue;const x=ow(f,t.type),C=y.value,A=y.property.specification.type,M=y.property.useIntegerZoom,I=y.property.specification["property-type"],k=I==="cross-faded"||I==="cross-faded-data-driven";if(C.kind==="constant")this.binders[f]=k?new Rl(C.value,x):new mu(C.value,x,A),h.push(`/u_${f}`);else if(C.kind==="source"||k){const F=Yy(f,A,"source");this.binders[f]=k?new Eo(C,A,M,a,F,t.id):new Ha(C,x,A,F),h.push(`/a_${f}`)}else{const F=Yy(f,A,"composite");this.binders[f]=new ta(C,x,A,M,a,F),h.push(`/z_${f}`)}}this.cacheKey=h.sort().join("")}getMaxValue(t){const a=this.binders[t];return a instanceof Ha||a instanceof ta?a.maxValue:0}populatePaintArrays(t,a,s,h,f){for(const y in this.binders){const x=this.binders[y];(x instanceof Ha||x instanceof ta||x instanceof Eo)&&x.populatePaintArray(t,a,s,h,f)}}setConstantPatternPositions(t,a){for(const s in this.binders){const h=this.binders[s];h instanceof Rl&&h.setConstantPatternPositions(t,a)}}updatePaintArrays(t,a,s,h,f){let y=!1;for(const x in t){const C=a.getPositions(x);for(const A of C){const M=s.feature(A.index);for(const I in this.binders){const k=this.binders[I];if((k instanceof Ha||k instanceof ta||k instanceof Eo)&&k.expression.isStateDependent===!0){const F=h.paint.get(I);k.expression=F.value,k.updatePaintArray(A.start,A.end,M,t[x],f),y=!0}}}}return y}defines(){const t=[];for(const a in this.binders){const s=this.binders[a];(s instanceof mu||s instanceof Rl)&&t.push(...s.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return t}getBinderAttributes(){const t=[];for(const a in this.binders){const s=this.binders[a];if(s instanceof Ha||s instanceof ta)for(let h=0;h<s.paintVertexAttributes.length;h++)t.push(s.paintVertexAttributes[h].name);else if(s instanceof Eo)for(let h=0;h<Es.members.length;h++)t.push(Es.members[h].name)}return t}getBinderUniforms(){const t=[];for(const a in this.binders){const s=this.binders[a];if(s instanceof mu||s instanceof Rl||s instanceof ta)for(const h of s.uniformNames)t.push(h)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,a){const s=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof mu||f instanceof Rl||f instanceof ta){for(const y of f.uniformNames)if(a[y]){const x=f.getBinding(t,a[y],y);s.push({name:y,property:h,binding:x})}}}return s}setUniforms(t,a,s,h){for(const{name:f,property:y,binding:x}of a)this.binders[y].setUniform(x,h,s.get(y),f)}updatePaintBuffers(t){this._buffers=[];for(const a in this.binders){const s=this.binders[a];if(t&&s instanceof Eo){const h=t.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(s instanceof Ha||s instanceof ta)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(t){for(const a in this.binders){const s=this.binders[a];(s instanceof Ha||s instanceof ta||s instanceof Eo)&&s.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const a=this.binders[t];(a instanceof Ha||a instanceof ta||a instanceof Eo)&&a.destroy()}}}class Ms{constructor(t,a,s=()=>!0){this.programConfigurations={};for(const h of t)this.programConfigurations[h.id]=new Jy(h,a,s);this.needsUpload=!1,this._featureMap=new mh,this._bufferOffset=0}populatePaintArrays(t,a,s,h,f,y){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(t,a,h,f,y);a.id!==void 0&&this._featureMap.add(a.id,s,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,a,s,h){for(const f of s)this.needsUpload=this.programConfigurations[f.id].updatePaintArrays(t,this._featureMap,a,f,h)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function ow(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function Yy(i,t,a){const s={color:{source:K,composite:Rt},number:{source:Ge,composite:K}},h=function(f){return{"line-pattern":{source:br,composite:br},"fill-pattern":{source:br,composite:br},"fill-extrusion-pattern":{source:br,composite:br}}[f]}(i);return h&&h[a]||s[t][a]}et("ConstantBinder",mu),et("CrossFadedConstantBinder",Rl),et("SourceExpressionBinder",Ha),et("CrossFadedCompositeBinder",Eo),et("CompositeExpressionBinder",ta),et("ProgramConfiguration",Jy,{omit:["_buffers"]}),et("ProgramConfigurationSet",Ms);const jn=8192,Lf=Math.pow(2,14)-1,Qy=-Lf-1;function Is(i){const t=jn/i.extent,a=i.loadGeometry();for(let s=0;s<a.length;s++){const h=a[s];for(let f=0;f<h.length;f++){const y=h[f],x=Math.round(y.x*t),C=Math.round(y.y*t);y.x=Re(x,Qy,Lf),y.y=Re(C,Qy,Lf),(x<y.x||x>y.x+1||C<y.y||C>y.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Ps(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?Is(i):[]}}function _h(i,t,a,s,h){i.emplaceBack(2*t+(s+1)/2,2*a+(h+1)/2)}class Ff{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Dl,this.indexArray=new wa,this.segments=new Qn,this.programConfigurations=new Ms(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,s){const h=this.layers[0],f=[];let y=null,x=!1;h.type==="circle"&&(y=h.layout.get("circle-sort-key"),x=!y.isConstant());for(const{feature:C,id:A,index:M,sourceLayerIndex:I}of t){const k=this.layers[0]._featureFilter.needGeometry,F=Ps(C,k);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),F,s))continue;const O=x?y.evaluate(F,{},s):void 0,U={id:A,properties:C.properties,type:C.type,sourceLayerIndex:I,index:M,geometry:k?F.geometry:Is(C),patterns:{},sortKey:O};f.push(U)}x&&f.sort((C,A)=>C.sortKey-A.sortKey);for(const C of f){const{geometry:A,index:M,sourceLayerIndex:I}=C,k=t[M].feature;this.addFeature(C,A,M,s),a.featureIndex.insert(k,A,M,I,this.index)}}update(t,a,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zf),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,a,s,h){for(const f of a)for(const y of f){const x=y.x,C=y.y;if(x<0||x>=jn||C<0||C>=jn)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=A.vertexLength;_h(this.layoutVertexArray,x,C,-1,-1),_h(this.layoutVertexArray,x,C,1,-1),_h(this.layoutVertexArray,x,C,1,1),_h(this.layoutVertexArray,x,C,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{},h)}}function e_(i,t){for(let a=0;a<i.length;a++)if(Ll(t,i[a]))return!0;for(let a=0;a<t.length;a++)if(Ll(i,t[a]))return!0;return!!Bf(i,t)}function sw(i,t,a){return!!Ll(i,t)||!!Of(t,i,a)}function t_(i,t){if(i.length===1)return i_(t,i[0]);for(let a=0;a<t.length;a++){const s=t[a];for(let h=0;h<s.length;h++)if(Ll(i,s[h]))return!0}for(let a=0;a<i.length;a++)if(i_(t,i[a]))return!0;for(let a=0;a<t.length;a++)if(Bf(i,t[a]))return!0;return!1}function lw(i,t,a){if(i.length>1){if(Bf(i,t))return!0;for(let s=0;s<t.length;s++)if(Of(t[s],i,a))return!0}for(let s=0;s<i.length;s++)if(Of(i[s],t,a))return!0;return!1}function Bf(i,t){if(i.length===0||t.length===0)return!1;for(let a=0;a<i.length-1;a++){const s=i[a],h=i[a+1];for(let f=0;f<t.length-1;f++)if(cw(s,h,t[f],t[f+1]))return!0}return!1}function cw(i,t,a,s){return Ft(i,a,s)!==Ft(t,a,s)&&Ft(i,t,a)!==Ft(i,t,s)}function Of(i,t,a){const s=a*a;if(t.length===1)return i.distSqr(t[0])<s;for(let h=1;h<t.length;h++)if(n_(i,t[h-1],t[h])<s)return!0;return!1}function n_(i,t,a){const s=t.distSqr(a);if(s===0)return i.distSqr(t);const h=((i.x-t.x)*(a.x-t.x)+(i.y-t.y)*(a.y-t.y))/s;return i.distSqr(h<0?t:h>1?a:a.sub(t)._mult(h)._add(t))}function i_(i,t){let a,s,h,f=!1;for(let y=0;y<i.length;y++){a=i[y];for(let x=0,C=a.length-1;x<a.length;C=x++)s=a[x],h=a[C],s.y>t.y!=h.y>t.y&&t.x<(h.x-s.x)*(t.y-s.y)/(h.y-s.y)+s.x&&(f=!f)}return f}function Ll(i,t){let a=!1;for(let s=0,h=i.length-1;s<i.length;h=s++){const f=i[s],y=i[h];f.y>t.y!=y.y>t.y&&t.x<(y.x-f.x)*(t.y-f.y)/(y.y-f.y)+f.x&&(a=!a)}return a}function uw(i,t,a){const s=a[0],h=a[2];if(i.x<s.x&&t.x<s.x||i.x>h.x&&t.x>h.x||i.y<s.y&&t.y<s.y||i.y>h.y&&t.y>h.y)return!1;const f=Ft(i,t,a[0]);return f!==Ft(i,t,a[1])||f!==Ft(i,t,a[2])||f!==Ft(i,t,a[3])}function gu(i,t,a){const s=t.paint.get(i).value;return s.kind==="constant"?s.value:a.programConfigurations.get(t.id).getMaxValue(i)}function vh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function xh(i,t,a,s,h){if(!t[0]&&!t[1])return i;const f=j.convert(t)._mult(h);a==="viewport"&&f._rotate(-s);const y=[];for(let x=0;x<i.length;x++)y.push(i[x].sub(f));return y}let r_,a_;et("CircleBucket",Ff,{omit:["layers"]});var dw={get paint(){return a_=a_||new w({"circle-radius":new o(be.paint_circle["circle-radius"]),"circle-color":new o(be.paint_circle["circle-color"]),"circle-blur":new o(be.paint_circle["circle-blur"]),"circle-opacity":new o(be.paint_circle["circle-opacity"]),"circle-translate":new e(be.paint_circle["circle-translate"]),"circle-translate-anchor":new e(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new e(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new e(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new o(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new o(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new o(be.paint_circle["circle-stroke-opacity"])})},get layout(){return r_=r_||new w({"circle-sort-key":new o(be.layout_circle["circle-sort-key"])})}},Ai=1e-6,Fl=typeof Float32Array<"u"?Float32Array:Array;function Nf(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function o_(i,t,a){var s=t[0],h=t[1],f=t[2],y=t[3],x=t[4],C=t[5],A=t[6],M=t[7],I=t[8],k=t[9],F=t[10],O=t[11],U=t[12],J=t[13],ne=t[14],ye=t[15],le=a[0],fe=a[1],Ee=a[2],ke=a[3];return i[0]=le*s+fe*x+Ee*I+ke*U,i[1]=le*h+fe*C+Ee*k+ke*J,i[2]=le*f+fe*A+Ee*F+ke*ne,i[3]=le*y+fe*M+Ee*O+ke*ye,i[4]=(le=a[4])*s+(fe=a[5])*x+(Ee=a[6])*I+(ke=a[7])*U,i[5]=le*h+fe*C+Ee*k+ke*J,i[6]=le*f+fe*A+Ee*F+ke*ne,i[7]=le*y+fe*M+Ee*O+ke*ye,i[8]=(le=a[8])*s+(fe=a[9])*x+(Ee=a[10])*I+(ke=a[11])*U,i[9]=le*h+fe*C+Ee*k+ke*J,i[10]=le*f+fe*A+Ee*F+ke*ne,i[11]=le*y+fe*M+Ee*O+ke*ye,i[12]=(le=a[12])*s+(fe=a[13])*x+(Ee=a[14])*I+(ke=a[15])*U,i[13]=le*h+fe*C+Ee*k+ke*J,i[14]=le*f+fe*A+Ee*F+ke*ne,i[15]=le*y+fe*M+Ee*O+ke*ye,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var yu,hw=o_;function bh(i,t,a){var s=t[0],h=t[1],f=t[2],y=t[3];return i[0]=a[0]*s+a[4]*h+a[8]*f+a[12]*y,i[1]=a[1]*s+a[5]*h+a[9]*f+a[13]*y,i[2]=a[2]*s+a[6]*h+a[10]*f+a[14]*y,i[3]=a[3]*s+a[7]*h+a[11]*f+a[15]*y,i}yu=new Fl(4),Fl!=Float32Array&&(yu[0]=0,yu[1]=0,yu[2]=0,yu[3]=0);class pw extends E{constructor(t){super(t,dw)}createBucket(t){return new Ff(t)}queryRadius(t){const a=t;return gu("circle-radius",this,a)+gu("circle-stroke-width",this,a)+vh(this.paint.get("circle-translate"))}queryIntersectsFeature(t,a,s,h,f,y,x,C){const A=xh(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),M=this.paint.get("circle-radius").evaluate(a,s)+this.paint.get("circle-stroke-width").evaluate(a,s),I=this.paint.get("circle-pitch-alignment")==="map",k=I?A:function(O,U){return O.map(J=>s_(J,U))}(A,C),F=I?M*x:M;for(const O of h)for(const U of O){const J=I?U:s_(U,C);let ne=F;const ye=bh([],[U.x,U.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=ye[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=y.cameraToCenterDistance/ye[3]),sw(k,J,ne))return!0}return!1}}function s_(i,t){const a=bh([],[i.x,i.y,0,1],t);return new j(a[0]/a[3],a[1]/a[3])}class l_ extends Ff{}let c_;et("HeatmapBucket",l_,{omit:["layers"]});var fw={get paint(){return c_=c_||new w({"heatmap-radius":new o(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new o(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new e(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new g(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new e(be.paint_heatmap["heatmap-opacity"])})}};function jf(i,{width:t,height:a},s,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==t*a*s)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${t*a*s}`)}else h=new Uint8Array(t*a*s);return i.width=t,i.height=a,i.data=h,i}function u_(i,{width:t,height:a},s){if(t===i.width&&a===i.height)return;const h=jf({},{width:t,height:a},s);Vf(i,h,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,a)},s),i.width=t,i.height=a,i.data=h.data}function Vf(i,t,a,s,h,f){if(h.width===0||h.height===0)return t;if(h.width>i.width||h.height>i.height||a.x>i.width-h.width||a.y>i.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||s.x>t.width-h.width||s.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=i.data,x=t.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<h.height;C++){const A=((a.y+C)*i.width+a.x)*f,M=((s.y+C)*t.width+s.x)*f;for(let I=0;I<h.width*f;I++)x[M+I]=y[A+I]}return t}class _u{constructor(t,a){jf(this,t,1,a)}resize(t){u_(this,t,1)}clone(){return new _u({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,s,h,f){Vf(t,a,s,h,f,1)}}class wr{constructor(t,a){jf(this,t,4,a)}resize(t){u_(this,t,4)}replace(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new wr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,s,h,f){Vf(t,a,s,h,f,4)}}function d_(i){const t={},a=i.resolution||256,s=i.clips?i.clips.length:1,h=i.image||new wr({width:a,height:s});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const f=(y,x,C)=>{t[i.evaluationKey]=C;const A=i.expression.evaluate(t);h.data[y+x+0]=Math.floor(255*A.r/A.a),h.data[y+x+1]=Math.floor(255*A.g/A.a),h.data[y+x+2]=Math.floor(255*A.b/A.a),h.data[y+x+3]=Math.floor(255*A.a)};if(i.clips)for(let y=0,x=0;y<s;++y,x+=4*a)for(let C=0,A=0;C<a;C++,A+=4){const M=C/(a-1),{start:I,end:k}=i.clips[y];f(x,A,I*(1-M)+k*M)}else for(let y=0,x=0;y<a;y++,x+=4)f(0,x,y/(a-1));return h}et("AlphaImage",_u),et("RGBAImage",wr);class mw extends E{createBucket(t){return new l_(t)}constructor(t){super(t,fw),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=d_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let h_;var gw={get paint(){return h_=h_||new w({"hillshade-illumination-direction":new e(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new e(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new e(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new e(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new e(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new e(be.paint_hillshade["hillshade-accent-color"])})}};class yw extends E{constructor(t){super(t,gw)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const _w=B([{name:"a_pos",components:2,type:"Int16"}],4),{members:vw}=_w;function p_(i,t,a=2){const s=t&&t.length,h=s?t[0]*a:i.length;let f=f_(i,0,h,a,!0);const y=[];if(!f||f.next===f.prev)return y;let x,C,A;if(s&&(f=function(M,I,k,F){const O=[];for(let U=0,J=I.length;U<J;U++){const ne=f_(M,I[U]*F,U<J-1?I[U+1]*F:M.length,F,!1);ne===ne.next&&(ne.steiner=!0),O.push(Tw(ne))}O.sort(Sw);for(let U=0;U<O.length;U++)k=Ew(O[U],k);return k}(i,t,f,a)),i.length>80*a){x=1/0,C=1/0;let M=-1/0,I=-1/0;for(let k=a;k<h;k+=a){const F=i[k],O=i[k+1];F<x&&(x=F),O<C&&(C=O),F>M&&(M=F),O>I&&(I=O)}A=Math.max(M-x,I-C),A=A!==0?32767/A:0}return vu(f,y,a,x,C,A,0),y}function f_(i,t,a,s,h){let f;if(h===function(y,x,C,A){let M=0;for(let I=x,k=C-A;I<C;I+=A)M+=(y[k]-y[I])*(y[I+1]+y[k+1]),k=I;return M}(i,t,a,s)>0)for(let y=t;y<a;y+=s)f=y_(y/s|0,i[y],i[y+1],f);else for(let y=a-s;y>=t;y-=s)f=y_(y/s|0,i[y],i[y+1],f);return f&&wh(f,f.next)&&(bu(f),f=f.next),f}function zs(i,t){if(!i)return i;t||(t=i);let a,s=i;do if(a=!1,s.steiner||!wh(s,s.next)&&Pn(s.prev,s,s.next)!==0)s=s.next;else{if(bu(s),s=t=s.prev,s===s.next)break;a=!0}while(a||s!==t);return t}function vu(i,t,a,s,h,f,y){if(!i)return;!y&&f&&function(C,A,M,I){let k=C;do k.z===0&&(k.z=Uf(k.x,k.y,A,M,I)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next;while(k!==C);k.prevZ.nextZ=null,k.prevZ=null,function(F){let O,U=1;do{let J,ne=F;F=null;let ye=null;for(O=0;ne;){O++;let le=ne,fe=0;for(let ke=0;ke<U&&(fe++,le=le.nextZ,le);ke++);let Ee=U;for(;fe>0||Ee>0&&le;)fe!==0&&(Ee===0||!le||ne.z<=le.z)?(J=ne,ne=ne.nextZ,fe--):(J=le,le=le.nextZ,Ee--),ye?ye.nextZ=J:F=J,J.prevZ=ye,ye=J;ne=le}ye.nextZ=null,U*=2}while(O>1)}(k)}(i,s,h,f);let x=i;for(;i.prev!==i.next;){const C=i.prev,A=i.next;if(f?bw(i,s,h,f):xw(i))t.push(C.i,i.i,A.i),bu(i),i=A.next,x=A.next;else if((i=A)===x){y?y===1?vu(i=ww(zs(i),t),t,a,s,h,f,2):y===2&&Cw(i,t,a,s,h,f):vu(zs(i),t,a,s,h,f,1);break}}}function xw(i){const t=i.prev,a=i,s=i.next;if(Pn(t,a,s)>=0)return!1;const h=t.x,f=a.x,y=s.x,x=t.y,C=a.y,A=s.y,M=h<f?h<y?h:y:f<y?f:y,I=x<C?x<A?x:A:C<A?C:A,k=h>f?h>y?h:y:f>y?f:y,F=x>C?x>A?x:A:C>A?C:A;let O=s.next;for(;O!==t;){if(O.x>=M&&O.x<=k&&O.y>=I&&O.y<=F&&Bl(h,x,f,C,y,A,O.x,O.y)&&Pn(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function bw(i,t,a,s){const h=i.prev,f=i,y=i.next;if(Pn(h,f,y)>=0)return!1;const x=h.x,C=f.x,A=y.x,M=h.y,I=f.y,k=y.y,F=x<C?x<A?x:A:C<A?C:A,O=M<I?M<k?M:k:I<k?I:k,U=x>C?x>A?x:A:C>A?C:A,J=M>I?M>k?M:k:I>k?I:k,ne=Uf(F,O,t,a,s),ye=Uf(U,J,t,a,s);let le=i.prevZ,fe=i.nextZ;for(;le&&le.z>=ne&&fe&&fe.z<=ye;){if(le.x>=F&&le.x<=U&&le.y>=O&&le.y<=J&&le!==h&&le!==y&&Bl(x,M,C,I,A,k,le.x,le.y)&&Pn(le.prev,le,le.next)>=0||(le=le.prevZ,fe.x>=F&&fe.x<=U&&fe.y>=O&&fe.y<=J&&fe!==h&&fe!==y&&Bl(x,M,C,I,A,k,fe.x,fe.y)&&Pn(fe.prev,fe,fe.next)>=0))return!1;fe=fe.nextZ}for(;le&&le.z>=ne;){if(le.x>=F&&le.x<=U&&le.y>=O&&le.y<=J&&le!==h&&le!==y&&Bl(x,M,C,I,A,k,le.x,le.y)&&Pn(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;fe&&fe.z<=ye;){if(fe.x>=F&&fe.x<=U&&fe.y>=O&&fe.y<=J&&fe!==h&&fe!==y&&Bl(x,M,C,I,A,k,fe.x,fe.y)&&Pn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.nextZ}return!0}function ww(i,t){let a=i;do{const s=a.prev,h=a.next.next;!wh(s,h)&&m_(s,a,a.next,h)&&xu(s,h)&&xu(h,s)&&(t.push(s.i,a.i,h.i),bu(a),bu(a.next),a=i=h),a=a.next}while(a!==i);return zs(a)}function Cw(i,t,a,s,h,f){let y=i;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&Mw(y,x)){let C=g_(y,x);return y=zs(y,y.next),C=zs(C,C.next),vu(y,t,a,s,h,f,0),void vu(C,t,a,s,h,f,0)}x=x.next}y=y.next}while(y!==i)}function Sw(i,t){return i.x-t.x}function Ew(i,t){const a=function(h,f){let y=f;const x=h.x,C=h.y;let A,M=-1/0;do{if(C<=y.y&&C>=y.next.y&&y.next.y!==y.y){const U=y.x+(C-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(U<=x&&U>M&&(M=U,A=y.x<y.next.x?y:y.next,U===x))return A}y=y.next}while(y!==f);if(!A)return null;const I=A,k=A.x,F=A.y;let O=1/0;y=A;do{if(x>=y.x&&y.x>=k&&x!==y.x&&Bl(C<F?x:M,C,k,F,C<F?M:x,C,y.x,y.y)){const U=Math.abs(C-y.y)/(x-y.x);xu(y,h)&&(U<O||U===O&&(y.x>A.x||y.x===A.x&&Aw(A,y)))&&(A=y,O=U)}y=y.next}while(y!==I);return A}(i,t);if(!a)return t;const s=g_(a,i);return zs(s,s.next),zs(a,a.next)}function Aw(i,t){return Pn(i.prev,i,t.prev)<0&&Pn(t.next,i,i.next)<0}function Uf(i,t,a,s,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-a)*h|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-s)*h|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Tw(i){let t=i,a=i;do(t.x<a.x||t.x===a.x&&t.y<a.y)&&(a=t),t=t.next;while(t!==i);return a}function Bl(i,t,a,s,h,f,y,x){return(h-y)*(t-x)>=(i-y)*(f-x)&&(i-y)*(s-x)>=(a-y)*(t-x)&&(a-y)*(f-x)>=(h-y)*(s-x)}function Mw(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(a,s){let h=a;do{if(h.i!==a.i&&h.next.i!==a.i&&h.i!==s.i&&h.next.i!==s.i&&m_(h,h.next,a,s))return!0;h=h.next}while(h!==a);return!1}(i,t)&&(xu(i,t)&&xu(t,i)&&function(a,s){let h=a,f=!1;const y=(a.x+s.x)/2,x=(a.y+s.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(f=!f),h=h.next;while(h!==a);return f}(i,t)&&(Pn(i.prev,i,t.prev)||Pn(i,t.prev,t))||wh(i,t)&&Pn(i.prev,i,i.next)>0&&Pn(t.prev,t,t.next)>0)}function Pn(i,t,a){return(t.y-i.y)*(a.x-t.x)-(t.x-i.x)*(a.y-t.y)}function wh(i,t){return i.x===t.x&&i.y===t.y}function m_(i,t,a,s){const h=Sh(Pn(i,t,a)),f=Sh(Pn(i,t,s)),y=Sh(Pn(a,s,i)),x=Sh(Pn(a,s,t));return h!==f&&y!==x||!(h!==0||!Ch(i,a,t))||!(f!==0||!Ch(i,s,t))||!(y!==0||!Ch(a,i,s))||!(x!==0||!Ch(a,t,s))}function Ch(i,t,a){return t.x<=Math.max(i.x,a.x)&&t.x>=Math.min(i.x,a.x)&&t.y<=Math.max(i.y,a.y)&&t.y>=Math.min(i.y,a.y)}function Sh(i){return i>0?1:i<0?-1:0}function xu(i,t){return Pn(i.prev,i,i.next)<0?Pn(i,t,i.next)>=0&&Pn(i,i.prev,t)>=0:Pn(i,t,i.prev)<0||Pn(i,i.next,t)<0}function g_(i,t){const a=$f(i.i,i.x,i.y),s=$f(t.i,t.x,t.y),h=i.next,f=t.prev;return i.next=t,t.prev=i,a.next=h,h.prev=a,s.next=a,a.prev=s,f.next=s,s.prev=f,s}function y_(i,t,a,s){const h=$f(i,t,a);return s?(h.next=s.next,h.prev=s,s.next.prev=h,s.next=h):(h.prev=h,h.next=h),h}function bu(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function $f(i,t,a){return{i,x:t,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function qf(i,t,a){const s=a.patternDependencies;let h=!1;for(const f of t){const y=f.paint.get(`${i}-pattern`);y.isConstant()||(h=!0);const x=y.constantOr(null);x&&(h=!0,s[x.to]=!0,s[x.from]=!0)}return h}function Gf(i,t,a,s,h){const f=h.patternDependencies;for(const y of t){const x=y.paint.get(`${i}-pattern`).value;if(x.kind!=="constant"){let C=x.evaluate({zoom:s-1},a,{},h.availableImages),A=x.evaluate({zoom:s},a,{},h.availableImages),M=x.evaluate({zoom:s+1},a,{},h.availableImages);C=C&&C.name?C.name:C,A=A&&A.name?A.name:A,M=M&&M.name?M.name:M,f[C]=!0,f[A]=!0,f[M]=!0,a.patterns[y.id]={min:C,mid:A,max:M}}}return a}class Hf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new du,this.indexArray=new wa,this.indexArray2=new Ss,this.programConfigurations=new Ms(t.layers,t.zoom),this.segments=new Qn,this.segments2=new Qn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,s){this.hasPattern=qf("fill",this.layers,a);const h=this.layers[0].layout.get("fill-sort-key"),f=!h.isConstant(),y=[];for(const{feature:x,id:C,index:A,sourceLayerIndex:M}of t){const I=this.layers[0]._featureFilter.needGeometry,k=Ps(x,I);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),k,s))continue;const F=f?h.evaluate(k,{},s,a.availableImages):void 0,O={id:C,properties:x.properties,type:x.type,sourceLayerIndex:M,index:A,geometry:I?k.geometry:Is(x),patterns:{},sortKey:F};y.push(O)}f&&y.sort((x,C)=>x.sortKey-C.sortKey);for(const x of y){const{geometry:C,index:A,sourceLayerIndex:M}=x;if(this.hasPattern){const I=Gf("fill",this.layers,x,this.zoom,a);this.patternFeatures.push(I)}else this.addFeature(x,C,A,s,{});a.featureIndex.insert(t[A].feature,C,A,M,this.index)}}update(t,a,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,s)}addFeatures(t,a,s){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,a,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vw),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,a,s,h,f){for(const y of ul(a,500)){let x=0;for(const F of y)x+=F.length;const C=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),A=C.vertexLength,M=[],I=[];for(const F of y){if(F.length===0)continue;F!==y[0]&&I.push(M.length/2);const O=this.segments2.prepareSegment(F.length,this.layoutVertexArray,this.indexArray2),U=O.vertexLength;this.layoutVertexArray.emplaceBack(F[0].x,F[0].y),this.indexArray2.emplaceBack(U+F.length-1,U),M.push(F[0].x),M.push(F[0].y);for(let J=1;J<F.length;J++)this.layoutVertexArray.emplaceBack(F[J].x,F[J].y),this.indexArray2.emplaceBack(U+J-1,U+J),M.push(F[J].x),M.push(F[J].y);O.vertexLength+=F.length,O.primitiveLength+=F.length}const k=p_(M,I);for(let F=0;F<k.length;F+=3)this.indexArray.emplaceBack(A+k[F],A+k[F+1],A+k[F+2]);C.vertexLength+=x,C.primitiveLength+=k.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,f,h)}}let __,v_;et("FillBucket",Hf,{omit:["layers","patternFeatures"]});var Iw={get paint(){return v_=v_||new w({"fill-antialias":new e(be.paint_fill["fill-antialias"]),"fill-opacity":new o(be.paint_fill["fill-opacity"]),"fill-color":new o(be.paint_fill["fill-color"]),"fill-outline-color":new o(be.paint_fill["fill-outline-color"]),"fill-translate":new e(be.paint_fill["fill-translate"]),"fill-translate-anchor":new e(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new c(be.paint_fill["fill-pattern"])})},get layout(){return __=__||new w({"fill-sort-key":new o(be.layout_fill["fill-sort-key"])})}};class Pw extends E{constructor(t){super(t,Iw)}recalculate(t,a){super.recalculate(t,a);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Hf(t)}queryRadius(){return vh(this.paint.get("fill-translate"))}queryIntersectsFeature(t,a,s,h,f,y,x){return t_(xh(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),h)}isTileClipped(){return!0}}const zw=B([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Dw=B([{name:"a_centroid",components:2,type:"Int16"}],4),{members:kw}=zw;var Ao={},Rw=V,x_=Ol;function Ol(i,t,a,s,h){this.properties={},this.extent=a,this.type=0,this._pbf=i,this._geometry=-1,this._keys=s,this._values=h,i.readFields(Lw,this,t)}function Lw(i,t,a){i==1?t.id=a.readVarint():i==2?function(s,h){for(var f=s.readVarint()+s.pos;s.pos<f;){var y=h._keys[s.readVarint()],x=h._values[s.readVarint()];h.properties[y]=x}}(a,t):i==3?t.type=a.readVarint():i==4&&(t._geometry=a.pos)}function Fw(i){for(var t,a,s=0,h=0,f=i.length,y=f-1;h<f;y=h++)s+=((a=i[y]).x-(t=i[h]).x)*(t.y+a.y);return s}Ol.types=["Unknown","Point","LineString","Polygon"],Ol.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,a=i.readVarint()+i.pos,s=1,h=0,f=0,y=0,x=[];i.pos<a;){if(h<=0){var C=i.readVarint();s=7&C,h=C>>3}if(h--,s===1||s===2)f+=i.readSVarint(),y+=i.readSVarint(),s===1&&(t&&x.push(t),t=[]),t.push(new Rw(f,y));else{if(s!==7)throw new Error("unknown command "+s);t&&t.push(t[0].clone())}}return t&&x.push(t),x},Ol.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,a=1,s=0,h=0,f=0,y=1/0,x=-1/0,C=1/0,A=-1/0;i.pos<t;){if(s<=0){var M=i.readVarint();a=7&M,s=M>>3}if(s--,a===1||a===2)(h+=i.readSVarint())<y&&(y=h),h>x&&(x=h),(f+=i.readSVarint())<C&&(C=f),f>A&&(A=f);else if(a!==7)throw new Error("unknown command "+a)}return[y,C,x,A]},Ol.prototype.toGeoJSON=function(i,t,a){var s,h,f=this.extent*Math.pow(2,a),y=this.extent*i,x=this.extent*t,C=this.loadGeometry(),A=Ol.types[this.type];function M(F){for(var O=0;O<F.length;O++){var U=F[O];F[O]=[360*(U.x+y)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(U.y+x)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(s=0;s<C.length;s++)I[s]=C[s][0];M(C=I);break;case 2:for(s=0;s<C.length;s++)M(C[s]);break;case 3:for(C=function(F){var O=F.length;if(O<=1)return[F];for(var U,J,ne=[],ye=0;ye<O;ye++){var le=Fw(F[ye]);le!==0&&(J===void 0&&(J=le<0),J===le<0?(U&&ne.push(U),U=[F[ye]]):U.push(F[ye]))}return U&&ne.push(U),ne}(C),s=0;s<C.length;s++)for(h=0;h<C[s].length;h++)M(C[s][h])}C.length===1?C=C[0]:A="Multi"+A;var k={type:"Feature",geometry:{type:A,coordinates:C},properties:this.properties};return"id"in this&&(k.id=this.id),k};var Bw=x_,b_=w_;function w_(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Ow,this,t),this.length=this._features.length}function Ow(i,t,a){i===15?t.version=a.readVarint():i===1?t.name=a.readString():i===5?t.extent=a.readVarint():i===2?t._features.push(a.pos):i===3?t._keys.push(a.readString()):i===4&&t._values.push(function(s){for(var h=null,f=s.readVarint()+s.pos;s.pos<f;){var y=s.readVarint()>>3;h=y===1?s.readString():y===2?s.readFloat():y===3?s.readDouble():y===4?s.readVarint64():y===5?s.readVarint():y===6?s.readSVarint():y===7?s.readBoolean():null}return h}(a))}w_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new Bw(this._pbf,t,this.extent,this._keys,this._values)};var Nw=b_;function jw(i,t,a){if(i===3){var s=new Nw(a,a.readVarint()+a.pos);s.length&&(t[s.name]=s)}}Ao.VectorTile=function(i,t){this.layers=i.readFields(jw,{},t)},Ao.VectorTileFeature=x_,Ao.VectorTileLayer=b_;const Vw=Ao.VectorTileFeature.types,Zf=Math.pow(2,13);function wu(i,t,a,s,h,f,y,x){i.emplaceBack(t,a,2*Math.floor(s*Zf)+y,h*Zf*2,f*Zf*2,Math.round(x))}class Wf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new tr,this.centroidVertexArray=new xa,this.indexArray=new wa,this.programConfigurations=new Ms(t.layers,t.zoom),this.segments=new Qn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,s){this.features=[],this.hasPattern=qf("fill-extrusion",this.layers,a);for(const{feature:h,id:f,index:y,sourceLayerIndex:x}of t){const C=this.layers[0]._featureFilter.needGeometry,A=Ps(h,C);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),A,s))continue;const M={id:f,sourceLayerIndex:x,index:y,geometry:C?A.geometry:Is(h),properties:h.properties,type:h.type,patterns:{}};this.hasPattern?this.features.push(Gf("fill-extrusion",this.layers,M,this.zoom,a)):this.addFeature(M,M.geometry,y,s,{}),a.featureIndex.insert(h,M.geometry,y,x,this.index,!0)}}addFeatures(t,a,s){for(const h of this.features){const{geometry:f}=h;this.addFeature(h,f,h.index,a,s)}}update(t,a,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,kw),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Dw.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,a,s,h,f){for(const y of ul(a,500)){const x={x:0,y:0,vertexCount:0};let C=0;for(const O of y)C+=O.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const O of y){if(O.length===0||$w(O))continue;let U=0;for(let J=0;J<O.length;J++){const ne=O[J];if(J>=1){const ye=O[J-1];if(!Uw(ne,ye)){A.vertexLength+4>Qn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const le=ne.sub(ye)._perp()._unit(),fe=ye.dist(ne);U+fe>32768&&(U=0),wu(this.layoutVertexArray,ne.x,ne.y,le.x,le.y,0,0,U),wu(this.layoutVertexArray,ne.x,ne.y,le.x,le.y,0,1,U),x.x+=2*ne.x,x.y+=2*ne.y,x.vertexCount+=2,U+=fe,wu(this.layoutVertexArray,ye.x,ye.y,le.x,le.y,0,0,U),wu(this.layoutVertexArray,ye.x,ye.y,le.x,le.y,0,1,U),x.x+=2*ye.x,x.y+=2*ye.y,x.vertexCount+=2;const Ee=A.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+C>Qn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),Vw[t.type]!=="Polygon")continue;const M=[],I=[],k=A.vertexLength;for(const O of y)if(O.length!==0){O!==y[0]&&I.push(M.length/2);for(let U=0;U<O.length;U++){const J=O[U];wu(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),x.x+=J.x,x.y+=J.y,x.vertexCount+=1,M.push(J.x),M.push(J.y)}}const F=p_(M,I);for(let O=0;O<F.length;O+=3)this.indexArray.emplaceBack(k+F[O],k+F[O+2],k+F[O+1]);A.primitiveLength+=F.length/3,A.vertexLength+=C;for(let O=0;O<x.vertexCount;O++){const U=Math.floor(x.x/x.vertexCount),J=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(U,J)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,f,h)}}function Uw(i,t){return i.x===t.x&&(i.x<0||i.x>jn)||i.y===t.y&&(i.y<0||i.y>jn)}function $w(i){return i.every(t=>t.x<0)||i.every(t=>t.x>jn)||i.every(t=>t.y<0)||i.every(t=>t.y>jn)}let C_;et("FillExtrusionBucket",Wf,{omit:["layers","features"]});var qw={get paint(){return C_=C_||new w({"fill-extrusion-opacity":new e(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new o(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new e(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new e(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new c(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new o(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new o(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new e(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Gw extends E{constructor(t){super(t,qw)}createBucket(t){return new Wf(t)}queryRadius(){return vh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,a,s,h,f,y,x,C){const A=xh(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(a,s),I=this.paint.get("fill-extrusion-base").evaluate(a,s),k=function(O,U,J,ne){const ye=[];for(const le of O){const fe=[le.x,le.y,0,1];bh(fe,fe,U),ye.push(new j(fe[0]/fe[3],fe[1]/fe[3]))}return ye}(A,C),F=function(O,U,J,ne){const ye=[],le=[],fe=ne[8]*U,Ee=ne[9]*U,ke=ne[10]*U,Ke=ne[11]*U,vt=ne[8]*J,We=ne[9]*J,He=ne[10]*J,ht=ne[11]*J;for(const at of O){const tt=[],Ie=[];for(const ft of at){const dt=ft.x,Ct=ft.y,Qt=ne[0]*dt+ne[4]*Ct+ne[12],Yt=ne[1]*dt+ne[5]*Ct+ne[13],Zn=ne[2]*dt+ne[6]*Ct+ne[14],Vr=ne[3]*dt+ne[7]*Ct+ne[15],li=Zn+ke,Wn=Vr+Ke,Ti=Qt+vt,Mi=Yt+We,Ii=Zn+He,En=Vr+ht,Xn=new j((Qt+fe)/Wn,(Yt+Ee)/Wn);Xn.z=li/Wn,tt.push(Xn);const gi=new j(Ti/En,Mi/En);gi.z=Ii/En,Ie.push(gi)}ye.push(tt),le.push(Ie)}return[ye,le]}(h,I,M,C);return function(O,U,J){let ne=1/0;t_(J,U)&&(ne=S_(J,U[0]));for(let ye=0;ye<U.length;ye++){const le=U[ye],fe=O[ye];for(let Ee=0;Ee<le.length-1;Ee++){const ke=le[Ee],Ke=[ke,le[Ee+1],fe[Ee+1],fe[Ee],ke];e_(J,Ke)&&(ne=Math.min(ne,S_(J,Ke)))}}return ne!==1/0&&ne}(F[0],F[1],k)}}function Cu(i,t){return i.x*t.x+i.y*t.y}function S_(i,t){if(i.length===1){let a=0;const s=t[a++];let h;for(;!h||s.equals(h);)if(h=t[a++],!h)return 1/0;for(;a<t.length;a++){const f=t[a],y=i[0],x=h.sub(s),C=f.sub(s),A=y.sub(s),M=Cu(x,x),I=Cu(x,C),k=Cu(C,C),F=Cu(A,x),O=Cu(A,C),U=M*k-I*I,J=(k*F-I*O)/U,ne=(M*O-I*F)/U,ye=s.z*(1-J-ne)+h.z*J+f.z*ne;if(isFinite(ye))return ye}return 1/0}{let a=1/0;for(const s of t)a=Math.min(a,s.z);return a}}const Hw=B([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Zw}=Hw,Ww=B([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Xw}=Ww,Kw=Ao.VectorTileFeature.types,Jw=Math.cos(Math.PI/180*37.5),E_=Math.pow(2,14)/.5;class Xf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new xr,this.layoutVertexArray2=new ba,this.indexArray=new wa,this.programConfigurations=new Ms(t.layers,t.zoom),this.segments=new Qn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,s){this.hasPattern=qf("line",this.layers,a);const h=this.layers[0].layout.get("line-sort-key"),f=!h.isConstant(),y=[];for(const{feature:x,id:C,index:A,sourceLayerIndex:M}of t){const I=this.layers[0]._featureFilter.needGeometry,k=Ps(x,I);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),k,s))continue;const F=f?h.evaluate(k,{},s):void 0,O={id:C,properties:x.properties,type:x.type,sourceLayerIndex:M,index:A,geometry:I?k.geometry:Is(x),patterns:{},sortKey:F};y.push(O)}f&&y.sort((x,C)=>x.sortKey-C.sortKey);for(const x of y){const{geometry:C,index:A,sourceLayerIndex:M}=x;if(this.hasPattern){const I=Gf("line",this.layers,x,this.zoom,a);this.patternFeatures.push(I)}else this.addFeature(x,C,A,s,{});a.featureIndex.insert(t[A].feature,C,A,M,this.index)}}update(t,a,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,s)}addFeatures(t,a,s){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,a,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Xw)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Zw),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,a,s,h,f){const y=this.layers[0].layout,x=y.get("line-join").evaluate(t,{}),C=y.get("line-cap"),A=y.get("line-miter-limit"),M=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const I of a)this.addLine(I,t,x,C,A,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,f,h)}addLine(t,a,s,h,f,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<t.length-1;ne++)this.totalDistance+=t[ne].dist(t[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=Kw[a.type]==="Polygon";let C=t.length;for(;C>=2&&t[C-1].equals(t[C-2]);)C--;let A=0;for(;A<C-1&&t[A].equals(t[A+1]);)A++;if(C<(x?3:2))return;s==="bevel"&&(f=1.05);const M=this.overscaling<=16?15*jn/(512*this.overscaling):0,I=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let k,F,O,U,J;this.e1=this.e2=-1,x&&(k=t[C-2],J=t[A].sub(k)._unit()._perp());for(let ne=A;ne<C;ne++){if(O=ne===C-1?x?t[A+1]:void 0:t[ne+1],O&&t[ne].equals(O))continue;J&&(U=J),k&&(F=k),k=t[ne],J=O?O.sub(k)._unit()._perp():U,U=U||J;let ye=U.add(J);ye.x===0&&ye.y===0||ye._unit();const le=U.x*J.x+U.y*J.y,fe=ye.x*J.x+ye.y*J.y,Ee=fe!==0?1/fe:1/0,ke=2*Math.sqrt(2-2*fe),Ke=fe<Jw&&F&&O,vt=U.x*J.y-U.y*J.x>0;if(Ke&&ne>A){const ht=k.dist(F);if(ht>2*M){const at=k.sub(k.sub(F)._mult(M/ht)._round());this.updateDistance(F,at),this.addCurrentVertex(at,U,0,0,I),F=at}}const We=F&&O;let He=We?s:x?"butt":h;if(We&&He==="round"&&(Ee<y?He="miter":Ee<=2&&(He="fakeround")),He==="miter"&&Ee>f&&(He="bevel"),He==="bevel"&&(Ee>2&&(He="flipbevel"),Ee<f&&(He="miter")),F&&this.updateDistance(F,k),He==="miter")ye._mult(Ee),this.addCurrentVertex(k,ye,0,0,I);else if(He==="flipbevel"){if(Ee>100)ye=J.mult(-1);else{const ht=Ee*U.add(J).mag()/U.sub(J).mag();ye._perp()._mult(ht*(vt?-1:1))}this.addCurrentVertex(k,ye,0,0,I),this.addCurrentVertex(k,ye.mult(-1),0,0,I)}else if(He==="bevel"||He==="fakeround"){const ht=-Math.sqrt(Ee*Ee-1),at=vt?ht:0,tt=vt?0:ht;if(F&&this.addCurrentVertex(k,U,at,tt,I),He==="fakeround"){const Ie=Math.round(180*ke/Math.PI/20);for(let ft=1;ft<Ie;ft++){let dt=ft/Ie;if(dt!==.5){const Qt=dt-.5;dt+=dt*Qt*(dt-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*Qt*Qt+(.848013+le*(.215638*le-1.06021)))}const Ct=J.sub(U)._mult(dt)._add(U)._unit()._mult(vt?-1:1);this.addHalfVertex(k,Ct.x,Ct.y,!1,vt,0,I)}}O&&this.addCurrentVertex(k,J,-at,-tt,I)}else if(He==="butt")this.addCurrentVertex(k,ye,0,0,I);else if(He==="square"){const ht=F?1:-1;this.addCurrentVertex(k,ye,ht,ht,I)}else He==="round"&&(F&&(this.addCurrentVertex(k,U,0,0,I),this.addCurrentVertex(k,U,1,1,I,!0)),O&&(this.addCurrentVertex(k,J,-1,-1,I,!0),this.addCurrentVertex(k,J,0,0,I)));if(Ke&&ne<C-1){const ht=k.dist(O);if(ht>2*M){const at=k.add(O.sub(k)._mult(M/ht)._round());this.updateDistance(k,at),this.addCurrentVertex(at,J,0,0,I),k=at}}}}addCurrentVertex(t,a,s,h,f,y=!1){const x=a.y*h-a.x,C=-a.y-a.x*h;this.addHalfVertex(t,a.x+a.y*s,a.y-a.x*s,y,!1,s,f),this.addHalfVertex(t,x,C,y,!0,-h,f),this.distance>E_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,a,s,h,f,y))}addHalfVertex({x:t,y:a},s,h,f,y,x,C){const A=.5*(this.lineClips?this.scaledDistance*(E_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(f?1:0),(a<<1)+(y?1:0),Math.round(63*s)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),C.primitiveLength++),y?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,a){this.distance+=t.dist(a),this.updateScaledDistance()}}let A_,T_;et("LineBucket",Xf,{omit:["layers","patternFeatures"]});var M_={get paint(){return T_=T_||new w({"line-opacity":new o(be.paint_line["line-opacity"]),"line-color":new o(be.paint_line["line-color"]),"line-translate":new e(be.paint_line["line-translate"]),"line-translate-anchor":new e(be.paint_line["line-translate-anchor"]),"line-width":new o(be.paint_line["line-width"]),"line-gap-width":new o(be.paint_line["line-gap-width"]),"line-offset":new o(be.paint_line["line-offset"]),"line-blur":new o(be.paint_line["line-blur"]),"line-dasharray":new d(be.paint_line["line-dasharray"]),"line-pattern":new c(be.paint_line["line-pattern"]),"line-gradient":new g(be.paint_line["line-gradient"])})},get layout(){return A_=A_||new w({"line-cap":new e(be.layout_line["line-cap"]),"line-join":new o(be.layout_line["line-join"]),"line-miter-limit":new e(be.layout_line["line-miter-limit"]),"line-round-limit":new e(be.layout_line["line-round-limit"]),"line-sort-key":new o(be.layout_line["line-sort-key"])})}};class Yw extends o{possiblyEvaluate(t,a){return a=new Kt(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(t,a)}evaluate(t,a,s,h){return a=Qe({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(t,a,s,h)}}let Eh;class Qw extends E{constructor(t){super(t,M_),this.gradientVersion=0,Eh||(Eh=new Yw(M_.paint.properties["line-width"].specification),Eh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(s){return s._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof uo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,a){super.recalculate(t,a),this.paint._values["line-floorwidth"]=Eh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Xf(t)}queryRadius(t){const a=t,s=I_(gu("line-width",this,a),gu("line-gap-width",this,a)),h=gu("line-offset",this,a);return s/2+Math.abs(h)+vh(this.paint.get("line-translate"))}queryIntersectsFeature(t,a,s,h,f,y,x){const C=xh(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),A=x/2*I_(this.paint.get("line-width").evaluate(a,s),this.paint.get("line-gap-width").evaluate(a,s)),M=this.paint.get("line-offset").evaluate(a,s);return M&&(h=function(I,k){const F=[];for(let O=0;O<I.length;O++){const U=I[O],J=[];for(let ne=0;ne<U.length;ne++){const ye=U[ne-1],le=U[ne],fe=U[ne+1],Ee=ne===0?new j(0,0):le.sub(ye)._unit()._perp(),ke=ne===U.length-1?new j(0,0):fe.sub(le)._unit()._perp(),Ke=Ee._add(ke)._unit(),vt=Ke.x*ke.x+Ke.y*ke.y;vt!==0&&Ke._mult(1/vt),J.push(Ke._mult(k)._add(le))}F.push(J)}return F}(h,M*x)),function(I,k,F){for(let O=0;O<k.length;O++){const U=k[O];if(I.length>=3){for(let J=0;J<U.length;J++)if(Ll(I,U[J]))return!0}if(lw(I,U,F))return!0}return!1}(C,h,A)}isTileClipped(){return!0}}function I_(i,t){return t>0?t+2*i:i}const e2=B([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),t2=B([{name:"a_projected_pos",components:3,type:"Float32"}],4);B([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const n2=B([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);B([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const P_=B([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),i2=B([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function r2(i,t,a){return i.sections.forEach(s=>{s.text=function(h,f,y){const x=f.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),Nr.applyArabicShaping&&(h=Nr.applyArabicShaping(h)),h}(s.text,t,a)}),i}B([{name:"triangle",components:3,type:"Uint16"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),B([{type:"Float32",name:"offsetX"}]),B([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),B([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Su={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var qn=24,z_=Jt,D_=function(i,t,a,s,h){var f,y,x=8*h-s-1,C=(1<<x)-1,A=C>>1,M=-7,I=h-1,k=-1,F=i[t+I];for(I+=k,f=F&(1<<-M)-1,F>>=-M,M+=x;M>0;f=256*f+i[t+I],I+=k,M-=8);for(y=f&(1<<-M)-1,f>>=-M,M+=s;M>0;y=256*y+i[t+I],I+=k,M-=8);if(f===0)f=1-A;else{if(f===C)return y?NaN:1/0*(F?-1:1);y+=Math.pow(2,s),f-=A}return(F?-1:1)*y*Math.pow(2,f-s)},k_=function(i,t,a,s,h,f){var y,x,C,A=8*f-h-1,M=(1<<A)-1,I=M>>1,k=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=0,O=1,U=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,y=M):(y=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-y))<1&&(y--,C*=2),(t+=y+I>=1?k/C:k*Math.pow(2,1-I))*C>=2&&(y++,C/=2),y+I>=M?(x=0,y=M):y+I>=1?(x=(t*C-1)*Math.pow(2,h),y+=I):(x=t*Math.pow(2,I-1)*Math.pow(2,h),y=0));h>=8;i[a+F]=255&x,F+=O,x/=256,h-=8);for(y=y<<h|x,A+=h;A>0;i[a+F]=255&y,F+=O,y/=256,A-=8);i[a+F-O]|=128*U};function Jt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Jt.Varint=0,Jt.Fixed64=1,Jt.Bytes=2,Jt.Fixed32=5;var Kf=4294967296,R_=1/Kf,L_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Za(i){return i.type===Jt.Bytes?i.readVarint()+i.pos:i.pos+1}function Nl(i,t,a){return a?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function F_(i,t,a){var s=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));a.realloc(s);for(var h=a.pos-1;h>=i;h--)a.buf[h+s]=a.buf[h]}function a2(i,t){for(var a=0;a<i.length;a++)t.writeVarint(i[a])}function o2(i,t){for(var a=0;a<i.length;a++)t.writeSVarint(i[a])}function s2(i,t){for(var a=0;a<i.length;a++)t.writeFloat(i[a])}function l2(i,t){for(var a=0;a<i.length;a++)t.writeDouble(i[a])}function c2(i,t){for(var a=0;a<i.length;a++)t.writeBoolean(i[a])}function u2(i,t){for(var a=0;a<i.length;a++)t.writeFixed32(i[a])}function d2(i,t){for(var a=0;a<i.length;a++)t.writeSFixed32(i[a])}function h2(i,t){for(var a=0;a<i.length;a++)t.writeFixed64(i[a])}function p2(i,t){for(var a=0;a<i.length;a++)t.writeSFixed64(i[a])}function Ah(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function jl(i,t,a){i[a]=t,i[a+1]=t>>>8,i[a+2]=t>>>16,i[a+3]=t>>>24}function B_(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}Jt.prototype={destroy:function(){this.buf=null},readFields:function(i,t,a){for(a=a||this.length;this.pos<a;){var s=this.readVarint(),h=s>>3,f=this.pos;this.type=7&s,i(h,t,this),this.pos===f&&this.skip(s)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=Ah(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=B_(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Ah(this.buf,this.pos)+Ah(this.buf,this.pos+4)*Kf;return this.pos+=8,i},readSFixed64:function(){var i=Ah(this.buf,this.pos)+B_(this.buf,this.pos+4)*Kf;return this.pos+=8,i},readFloat:function(){var i=D_(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=D_(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,a,s=this.buf;return t=127&(a=s[this.pos++]),a<128?t:(t|=(127&(a=s[this.pos++]))<<7,a<128?t:(t|=(127&(a=s[this.pos++]))<<14,a<128?t:(t|=(127&(a=s[this.pos++]))<<21,a<128?t:function(h,f,y){var x,C,A=y.buf;if(x=(112&(C=A[y.pos++]))>>4,C<128||(x|=(127&(C=A[y.pos++]))<<3,C<128)||(x|=(127&(C=A[y.pos++]))<<10,C<128)||(x|=(127&(C=A[y.pos++]))<<17,C<128)||(x|=(127&(C=A[y.pos++]))<<24,C<128)||(x|=(1&(C=A[y.pos++]))<<31,C<128))return Nl(h,x,f);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(a=s[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&L_?function(a,s,h){return L_.decode(a.subarray(s,h))}(this.buf,t,i):function(a,s,h){for(var f="",y=s;y<h;){var x,C,A,M=a[y],I=null,k=M>239?4:M>223?3:M>191?2:1;if(y+k>h)break;k===1?M<128&&(I=M):k===2?(192&(x=a[y+1]))==128&&(I=(31&M)<<6|63&x)<=127&&(I=null):k===3?(C=a[y+2],(192&(x=a[y+1]))==128&&(192&C)==128&&((I=(15&M)<<12|(63&x)<<6|63&C)<=2047||I>=55296&&I<=57343)&&(I=null)):k===4&&(C=a[y+2],A=a[y+3],(192&(x=a[y+1]))==128&&(192&C)==128&&(192&A)==128&&((I=(15&M)<<18|(63&x)<<12|(63&C)<<6|63&A)<=65535||I>=1114112)&&(I=null)),I===null?(I=65533,k=1):I>65535&&(I-=65536,f+=String.fromCharCode(I>>>10&1023|55296),I=56320|1023&I),f+=String.fromCharCode(I),y+=k}return f}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Jt.Bytes)return i.push(this.readVarint(t));var a=Za(this);for(i=i||[];this.pos<a;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSVarint());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Jt.Bytes)return i.push(this.readBoolean());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFloat());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Jt.Bytes)return i.push(this.readDouble());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFixed32());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSFixed32());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFixed64());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSFixed64());var t=Za(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Jt.Varint)for(;this.buf[this.pos++]>127;);else if(t===Jt.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Jt.Fixed32)this.pos+=4;else{if(t!==Jt.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var a=new Uint8Array(t);a.set(this.buf),this.buf=a,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),jl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),jl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),jl(this.buf,-1&i,this.pos),jl(this.buf,Math.floor(i*R_),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),jl(this.buf,-1&i,this.pos),jl(this.buf,Math.floor(i*R_),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,a){var s,h;if(t>=0?(s=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(s=~(-t%4294967296))?s=s+1|0:(s=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(f,y,x){x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,x.buf[x.pos]=127&(f>>>=7)}(s,0,a),function(f,y){var x=(7&f)<<4;y.buf[y.pos++]|=x|((f>>>=3)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f)))))}(h,a)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(s,h,f){for(var y,x,C=0;C<h.length;C++){if((y=h.charCodeAt(C))>55295&&y<57344){if(!x){y>56319||C+1===h.length?(s[f++]=239,s[f++]=191,s[f++]=189):x=y;continue}if(y<56320){s[f++]=239,s[f++]=191,s[f++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(s[f++]=239,s[f++]=191,s[f++]=189,x=null);y<128?s[f++]=y:(y<2048?s[f++]=y>>6|192:(y<65536?s[f++]=y>>12|224:(s[f++]=y>>18|240,s[f++]=y>>12&63|128),s[f++]=y>>6&63|128),s[f++]=63&y|128)}return f}(this.buf,i,this.pos);var a=this.pos-t;a>=128&&F_(t,a,this),this.pos=t-1,this.writeVarint(a),this.pos+=a},writeFloat:function(i){this.realloc(4),k_(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),k_(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var a=0;a<t;a++)this.buf[this.pos++]=i[a]},writeRawMessage:function(i,t){this.pos++;var a=this.pos;i(t,this);var s=this.pos-a;s>=128&&F_(a,s,this),this.pos=a-1,this.writeVarint(s),this.pos+=s},writeMessage:function(i,t,a){this.writeTag(i,Jt.Bytes),this.writeRawMessage(t,a)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,a2,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,o2,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,c2,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,s2,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,l2,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,u2,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,d2,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,h2,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,p2,t)},writeBytesField:function(i,t){this.writeTag(i,Jt.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Jt.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Jt.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Jt.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Jt.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Jt.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Jt.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Jt.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Jt.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Jt.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,!!t)}};var Jf=D(z_);const Yf=3;function f2(i,t,a){i===1&&a.readMessage(m2,t)}function m2(i,t,a){if(i===3){const{id:s,bitmap:h,width:f,height:y,left:x,top:C,advance:A}=a.readMessage(g2,{});t.push({id:s,bitmap:new _u({width:f+2*Yf,height:y+2*Yf},h),metrics:{width:f,height:y,left:x,top:C,advance:A}})}}function g2(i,t,a){i===1?t.id=a.readVarint():i===2?t.bitmap=a.readBytes():i===3?t.width=a.readVarint():i===4?t.height=a.readVarint():i===5?t.left=a.readSVarint():i===6?t.top=a.readSVarint():i===7&&(t.advance=a.readVarint())}const O_=Yf;function N_(i){let t=0,a=0;for(const y of i)t+=y.w*y.h,a=Math.max(a,y.w);i.sort((y,x)=>x.h-y.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),a),h:1/0}];let h=0,f=0;for(const y of i)for(let x=s.length-1;x>=0;x--){const C=s[x];if(!(y.w>C.w||y.h>C.h)){if(y.x=C.x,y.y=C.y,f=Math.max(f,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===C.w&&y.h===C.h){const A=s.pop();x<s.length&&(s[x]=A)}else y.h===C.h?(C.x+=y.w,C.w-=y.w):y.w===C.w?(C.y+=y.h,C.h-=y.h):(s.push({x:C.x+y.w,y:C.y,w:C.w-y.w,h:y.h}),C.y+=y.h,C.h-=y.h);break}}return{w:h,h:f,fill:t/(h*f)||0}}const qi=1;class Qf{constructor(t,{pixelRatio:a,version:s,stretchX:h,stretchY:f,content:y,textFitWidth:x,textFitHeight:C}){this.paddedRect=t,this.pixelRatio=a,this.stretchX=h,this.stretchY=f,this.content=y,this.version=s,this.textFitWidth=x,this.textFitHeight=C}get tl(){return[this.paddedRect.x+qi,this.paddedRect.y+qi]}get br(){return[this.paddedRect.x+this.paddedRect.w-qi,this.paddedRect.y+this.paddedRect.h-qi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*qi)/this.pixelRatio,(this.paddedRect.h-2*qi)/this.pixelRatio]}}class j_{constructor(t,a){const s={},h={};this.haveRenderCallbacks=[];const f=[];this.addImages(t,s,f),this.addImages(a,h,f);const{w:y,h:x}=N_(f),C=new wr({width:y||1,height:x||1});for(const A in t){const M=t[A],I=s[A].paddedRect;wr.copy(M.data,C,{x:0,y:0},{x:I.x+qi,y:I.y+qi},M.data)}for(const A in a){const M=a[A],I=h[A].paddedRect,k=I.x+qi,F=I.y+qi,O=M.data.width,U=M.data.height;wr.copy(M.data,C,{x:0,y:0},{x:k,y:F},M.data),wr.copy(M.data,C,{x:0,y:U-1},{x:k,y:F-1},{width:O,height:1}),wr.copy(M.data,C,{x:0,y:0},{x:k,y:F+U},{width:O,height:1}),wr.copy(M.data,C,{x:O-1,y:0},{x:k-1,y:F},{width:1,height:U}),wr.copy(M.data,C,{x:0,y:0},{x:k+O,y:F},{width:1,height:U})}this.image=C,this.iconPositions=s,this.patternPositions=h}addImages(t,a,s){for(const h in t){const f=t[h],y={x:0,y:0,w:f.data.width+2*qi,h:f.data.height+2*qi};s.push(y),a[h]=new Qf(y,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(t,a){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const s in t.updatedImages)this.patchUpdatedImage(this.iconPositions[s],t.getImage(s),a),this.patchUpdatedImage(this.patternPositions[s],t.getImage(s),a)}patchUpdatedImage(t,a,s){if(!t||!a||t.version===a.version)return;t.version=a.version;const[h,f]=t.tl;s.update(a.data,void 0,{x:h,y:f})}}var To;et("ImagePosition",Qf),et("ImageAtlas",j_),v.ah=void 0,(To=v.ah||(v.ah={}))[To.none=0]="none",To[To.horizontal=1]="horizontal",To[To.vertical=2]="vertical",To[To.horizontalOnly=3]="horizontalOnly";const Eu=-17;class Au{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,a){const s=new Au;return s.scale=t||1,s.fontStack=a,s}static forImage(t){const a=new Au;return a.imageName=t,a}}class Vl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,a){const s=new Vl;for(let h=0;h<t.sections.length;h++){const f=t.sections[h];f.image?s.addImageSection(f):s.addTextSection(f,a)}return s}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let a="";for(let s=0;s<t.length;s++){const h=t.charCodeAt(s+1)||null,f=t.charCodeAt(s-1)||null;a+=h&&su(h)&&!Su[t[s+1]]||f&&su(f)&&!Su[t[s-1]]||!Su[t[s]]?t[s]:Su[t[s]]}return a}(this.text)}trim(){let t=0;for(let s=0;s<this.text.length&&Mh[this.text.charCodeAt(s)];s++)t++;let a=this.text.length;for(let s=this.text.length-1;s>=0&&s>=t&&Mh[this.text.charCodeAt(s)];s--)a--;this.text=this.text.substring(t,a),this.sectionIndex=this.sectionIndex.slice(t,a)}substring(t,a){const s=new Vl;return s.text=this.text.substring(t,a),s.sectionIndex=this.sectionIndex.slice(t,a),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,a)=>Math.max(t,this.sections[a].scale),0)}addTextSection(t,a){this.text+=t.text,this.sections.push(Au.forText(t.scale,t.fontStack||a));const s=this.sections.length-1;for(let h=0;h<t.text.length;++h)this.sectionIndex.push(s)}addImageSection(t){const a=t.image?t.image.name:"";if(a.length===0)return void Ot("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Au.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Th(i,t,a,s,h,f,y,x,C,A,M,I,k,F,O){const U=Vl.fromFeature(i,h);let J;I===v.ah.vertical&&U.verticalizePunctuation();const{processBidirectionalText:ne,processStyledBidirectionalText:ye}=Nr;if(ne&&U.sections.length===1){J=[];const Ee=ne(U.toString(),em(U,A,f,t,s,F));for(const ke of Ee){const Ke=new Vl;Ke.text=ke,Ke.sections=U.sections;for(let vt=0;vt<ke.length;vt++)Ke.sectionIndex.push(0);J.push(Ke)}}else if(ye){J=[];const Ee=ye(U.text,U.sectionIndex,em(U,A,f,t,s,F));for(const ke of Ee){const Ke=new Vl;Ke.text=ke[0],Ke.sectionIndex=ke[1],Ke.sections=U.sections,J.push(Ke)}}else J=function(Ee,ke){const Ke=[],vt=Ee.text;let We=0;for(const He of ke)Ke.push(Ee.substring(We,He)),We=He;return We<vt.length&&Ke.push(Ee.substring(We,vt.length)),Ke}(U,em(U,A,f,t,s,F));const le=[],fe={positionedLines:le,text:U.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:I,iconsInText:!1,verticalizable:!1};return function(Ee,ke,Ke,vt,We,He,ht,at,tt,Ie,ft,dt){let Ct=0,Qt=Eu,Yt=0,Zn=0;const Vr=at==="right"?1:at==="left"?0:.5;let li=0;for(const En of We){En.trim();const Xn=En.getMaxScale(),gi=(Xn-1)*qn,ci={positionedGlyphs:[],lineOffset:0};Ee.positionedLines[li]=ci;const Pi=ci.positionedGlyphs;let ui=0;if(!En.length()){Qt+=He,++li;continue}for(let Gi=0;Gi<En.length();Gi++){const Gt=En.getSection(Gi),nn=En.getSectionIndex(Gi),ln=En.getCharCode(Gi);let nr=0,bn=null,Gl=null,Ea=null,Aa=qn;const Ur=!(tt===v.ah.horizontal||!ft&&!ea(ln)||ft&&(Mh[ln]||(Wn=ln,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Wn)))));if(Gt.imageName){const Er=vt[Gt.imageName];if(!Er)continue;Ea=Gt.imageName,Ee.iconsInText=Ee.iconsInText||!0,Gl=Er.paddedRect;const ei=Er.displaySize;Gt.scale=Gt.scale*qn/dt,bn={width:ei[0],height:ei[1],left:qi,top:-O_,advance:Ur?ei[1]:ei[0]},nr=gi+(qn-ei[1]*Gt.scale),Aa=bn.advance;const Wa=Ur?ei[0]*Gt.scale-qn*Xn:ei[1]*Gt.scale-qn*Xn;Wa>0&&Wa>ui&&(ui=Wa)}else{const Er=Ke[Gt.fontStack],ei=Er&&Er[ln];if(ei&&ei.rect)Gl=ei.rect,bn=ei.metrics;else{const Wa=ke[Gt.fontStack],Du=Wa&&Wa[ln];if(!Du)continue;bn=Du.metrics}nr=(Xn-Gt.scale)*qn}Ur?(Ee.verticalizable=!0,Pi.push({glyph:ln,imageName:Ea,x:Ct,y:Qt+nr,vertical:Ur,scale:Gt.scale,fontStack:Gt.fontStack,sectionIndex:nn,metrics:bn,rect:Gl}),Ct+=Aa*Gt.scale+Ie):(Pi.push({glyph:ln,imageName:Ea,x:Ct,y:Qt+nr,vertical:Ur,scale:Gt.scale,fontStack:Gt.fontStack,sectionIndex:nn,metrics:bn,rect:Gl}),Ct+=bn.advance*Gt.scale+Ie)}Pi.length!==0&&(Yt=Math.max(Ct-Ie,Yt),x2(Pi,0,Pi.length-1,Vr,ui)),Ct=0;const Sr=He*Xn+ui;ci.lineOffset=Math.max(ui,gi),Qt+=Sr,Zn=Math.max(Sr,Zn),++li}var Wn;const Ti=Qt-Eu,{horizontalAlign:Mi,verticalAlign:Ii}=tm(ht);(function(En,Xn,gi,ci,Pi,ui,Sr,Gi,Gt){const nn=(Xn-gi)*Pi;let ln=0;ln=ui!==Sr?-Gi*ci-Eu:(-ci*Gt+.5)*Sr;for(const nr of En)for(const bn of nr.positionedGlyphs)bn.x+=nn,bn.y+=ln})(Ee.positionedLines,Vr,Mi,Ii,Yt,Zn,He,Ti,We.length),Ee.top+=-Ii*Ti,Ee.bottom=Ee.top+Ti,Ee.left+=-Mi*Yt,Ee.right=Ee.left+Yt}(fe,t,a,s,J,y,x,C,I,A,k,O),!function(Ee){for(const ke of Ee)if(ke.positionedGlyphs.length!==0)return!1;return!0}(le)&&fe}const Mh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},y2={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},_2={40:!0};function V_(i,t,a,s,h,f){if(t.imageName){const y=s[t.imageName];return y?y.displaySize[0]*t.scale*qn/f+h:0}{const y=a[t.fontStack],x=y&&y[i];return x?x.metrics.advance*t.scale+h:0}}function U_(i,t,a,s){const h=Math.pow(i-t,2);return s?i<t?h/2:2*h:h+Math.abs(a)*a}function v2(i,t,a){let s=0;return i===10&&(s-=1e4),a&&(s+=150),i!==40&&i!==65288||(s+=50),t!==41&&t!==65289||(s+=50),s}function $_(i,t,a,s,h,f){let y=null,x=U_(t,a,h,f);for(const C of s){const A=U_(t-C.x,a,h,f)+C.badness;A<=x&&(y=C,x=A)}return{index:i,x:t,priorBreak:y,badness:x}}function q_(i){return i?q_(i.priorBreak).concat(i.index):[]}function em(i,t,a,s,h,f){if(!i)return[];const y=[],x=function(I,k,F,O,U,J){let ne=0;for(let ye=0;ye<I.length();ye++){const le=I.getSection(ye);ne+=V_(I.getCharCode(ye),le,O,U,k,J)}return ne/Math.max(1,Math.ceil(ne/F))}(i,t,a,s,h,f),C=i.text.indexOf("")>=0;let A=0;for(let I=0;I<i.length();I++){const k=i.getSection(I),F=i.getCharCode(I);if(Mh[F]||(A+=V_(F,k,s,h,t,f)),I<i.length()-1){const O=!((M=F)<11904)&&(!!Bt["CJK Compatibility Forms"](M)||!!Bt["CJK Compatibility"](M)||!!Bt["CJK Strokes"](M)||!!Bt["CJK Symbols and Punctuation"](M)||!!Bt["Enclosed CJK Letters and Months"](M)||!!Bt["Halfwidth and Fullwidth Forms"](M)||!!Bt["Ideographic Description Characters"](M)||!!Bt["Vertical Forms"](M)||dh.test(String.fromCodePoint(M)));(y2[F]||O||k.imageName||I!==i.length()-2&&_2[i.getCharCode(I+1)])&&y.push($_(I+1,A,x,y,v2(F,i.getCharCode(I+1),O&&C),!1))}}var M;return q_($_(i.length(),A,x,y,0,!0))}function tm(i){let t=.5,a=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:t,verticalAlign:a}}function x2(i,t,a,s,h){if(!s&&!h)return;const f=i[a],y=(i[a].x+f.metrics.advance*f.scale)*s;for(let x=t;x<=a;x++)i[x].x-=y,i[x].y+=h}function b2(i,t,a){const{horizontalAlign:s,verticalAlign:h}=tm(a),f=t[0]-i.displaySize[0]*s,y=t[1]-i.displaySize[1]*h;return{image:i,top:y,bottom:y+i.displaySize[1],left:f,right:f+i.displaySize[0]}}function G_(i){var t,a;let s=i.left,h=i.top,f=i.right-s,y=i.bottom-h;const x=(t=i.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",C=(a=i.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",A=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(C==="proportional"){if(x==="stretchOnly"&&f/y<A||x==="proportional"){const M=Math.ceil(y*A);s*=M/f,f=M}}else if(x==="proportional"&&C==="stretchOnly"&&A!==0&&f/y>A){const M=Math.ceil(f/A);h*=M/y,y=M}return{x1:s,y1:h,x2:s+f,y2:h+y}}function H_(i,t,a,s,h,f){const y=i.image;let x;if(y.content){const J=y.content,ne=y.pixelRatio||1;x=[J[0]/ne,J[1]/ne,y.displaySize[0]-J[2]/ne,y.displaySize[1]-J[3]/ne]}const C=t.left*f,A=t.right*f;let M,I,k,F;a==="width"||a==="both"?(F=h[0]+C-s[3],I=h[0]+A+s[1]):(F=h[0]+(C+A-y.displaySize[0])/2,I=F+y.displaySize[0]);const O=t.top*f,U=t.bottom*f;return a==="height"||a==="both"?(M=h[1]+O-s[0],k=h[1]+U+s[2]):(M=h[1]+(O+U-y.displaySize[1])/2,k=M+y.displaySize[1]),{image:y,top:M,right:I,bottom:k,left:F,collisionPadding:x}}const Tu=255,Sa=128,Mo=Tu*Sa;function Z_(i,t){const{expression:a}=t;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Kt(i+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:s,interpolationType:h}=a;let f=0;for(;f<s.length&&s[f]<=i;)f++;f=Math.max(0,f-1);let y=f;for(;y<s.length&&s[y]<i+1;)y++;y=Math.min(s.length-1,y);const x=s[f],C=s[y];return a.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:C,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:C,minSize:a.evaluate(new Kt(x)),maxSize:a.evaluate(new Kt(C)),interpolationType:h}}}function nm(i,t,a){let s="never";const h=i.get(t);return h?s=h:i.get(a)&&(s="always"),s}const w2=Ao.VectorTileFeature.types,C2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ih(i,t,a,s,h,f,y,x,C,A,M,I,k){const F=x?Math.min(Mo,Math.round(x[0])):0,O=x?Math.min(Mo,Math.round(x[1])):0;i.emplaceBack(t,a,Math.round(32*s),Math.round(32*h),f,y,(F<<1)+(C?1:0),O,16*A,16*M,256*I,256*k)}function im(i,t,a){i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a)}function S2(i){for(const t of i.sections)if(If(t.text))return!0;return!1}class rm{constructor(t){this.layoutVertexArray=new mi,this.indexArray=new wa,this.programConfigurations=t,this.segments=new Qn,this.dynamicLayoutVertexArray=new oi,this.opacityVertexArray=new $i,this.hasVisibleVertices=!1,this.placedSymbolArray=new sn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,a,s,h){this.isEmpty()||(s&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,e2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,t2.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,C2,!0),this.opacityVertexBuffer.itemSize=1),(s||h)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}et("SymbolBuffers",rm);class am{constructor(t,a,s){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new s,this.segments=new Qn,this.collisionVertexArray=new So}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,n2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}et("CollisionBuffers",am);class Ul{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(y=>y.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Nf([]),this.placementViewportMatrix=Nf([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Z_(this.zoom,a["text-size"]),this.iconSizeData=Z_(this.zoom,a["icon-size"]);const s=this.layers[0].layout,h=s.get("symbol-sort-key"),f=s.get("symbol-z-order");this.canOverlap=nm(s,"text-overlap","text-allow-overlap")!=="never"||nm(s,"icon-overlap","icon-allow-overlap")!=="never"||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(y=>v.ah[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=t.sourceID}createArrays(){this.text=new rm(new Ms(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new rm(new Ms(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new ri,this.lineVertexArray=new ai,this.symbolInstances=new fi,this.textAnchorOffsets=new qa}calculateGlyphDependencies(t,a,s,h,f){for(let y=0;y<t.length;y++)if(a[t.charCodeAt(y)]=!0,(s||h)&&f){const x=Su[t.charAt(y)];x&&(a[x.charCodeAt(0)]=!0)}}populate(t,a,s){const h=this.layers[0],f=h.layout,y=f.get("text-font"),x=f.get("text-field"),C=f.get("icon-image"),A=(x.value.kind!=="constant"||x.value.value instanceof On&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),M=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,I=f.get("symbol-sort-key");if(this.features=[],!A&&!M)return;const k=a.iconDependencies,F=a.glyphDependencies,O=a.availableImages,U=new Kt(this.zoom);for(const{feature:J,id:ne,index:ye,sourceLayerIndex:le}of t){const fe=h._featureFilter.needGeometry,Ee=Ps(J,fe);if(!h._featureFilter.filter(U,Ee,s))continue;let ke,Ke;if(fe||(Ee.geometry=Is(J)),A){const We=h.getValueAndResolveTokens("text-field",Ee,s,O),He=On.factory(We),ht=this.hasRTLText=this.hasRTLText||S2(He);(!ht||Nr.getRTLTextPluginStatus()==="unavailable"||ht&&Nr.isParsed())&&(ke=r2(He,h,Ee))}if(M){const We=h.getValueAndResolveTokens("icon-image",Ee,s,O);Ke=We instanceof Mn?We:Mn.fromString(We)}if(!ke&&!Ke)continue;const vt=this.sortFeaturesByKey?I.evaluate(Ee,{},s):void 0;if(this.features.push({id:ne,text:ke,icon:Ke,index:ye,sourceLayerIndex:le,geometry:Ee.geometry,properties:J.properties,type:w2[J.type],sortKey:vt}),Ke&&(k[Ke.name]=!0),ke){const We=y.evaluate(Ee,{},s).join(","),He=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.ah.vertical)>=0;for(const ht of ke.sections)if(ht.image)k[ht.image.name]=!0;else{const at=au(ke.toString()),tt=ht.fontStack||We,Ie=F[tt]=F[tt]||{};this.calculateGlyphDependencies(ht.text,Ie,He,this.allowVerticalPlacement,at)}}}f.get("symbol-placement")==="line"&&(this.features=function(J){const ne={},ye={},le=[];let fe=0;function Ee(We){le.push(J[We]),fe++}function ke(We,He,ht){const at=ye[We];return delete ye[We],ye[He]=at,le[at].geometry[0].pop(),le[at].geometry[0]=le[at].geometry[0].concat(ht[0]),at}function Ke(We,He,ht){const at=ne[He];return delete ne[He],ne[We]=at,le[at].geometry[0].shift(),le[at].geometry[0]=ht[0].concat(le[at].geometry[0]),at}function vt(We,He,ht){const at=ht?He[0][He[0].length-1]:He[0][0];return`${We}:${at.x}:${at.y}`}for(let We=0;We<J.length;We++){const He=J[We],ht=He.geometry,at=He.text?He.text.toString():null;if(!at){Ee(We);continue}const tt=vt(at,ht),Ie=vt(at,ht,!0);if(tt in ye&&Ie in ne&&ye[tt]!==ne[Ie]){const ft=Ke(tt,Ie,ht),dt=ke(tt,Ie,le[ft].geometry);delete ne[tt],delete ye[Ie],ye[vt(at,le[dt].geometry,!0)]=dt,le[ft].geometry=null}else tt in ye?ke(tt,Ie,ht):Ie in ne?Ke(tt,Ie,ht):(Ee(We),ne[tt]=fe-1,ye[Ie]=fe-1)}return le.filter(We=>We.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ne)=>J.sortKey-ne.sortKey)}update(t,a,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,a,this.layers,s),this.icon.programConfigurations.updatePaintArrays(t,a,this.layers,s))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,a){const s=this.lineVertexArray.length;if(t.segment!==void 0){let h=t.dist(a[t.segment+1]),f=t.dist(a[t.segment]);const y={};for(let x=t.segment+1;x<a.length;x++)y[x]={x:a[x].x,y:a[x].y,tileUnitDistanceFromAnchor:h},x<a.length-1&&(h+=a[x+1].dist(a[x]));for(let x=t.segment||0;x>=0;x--)y[x]={x:a[x].x,y:a[x].y,tileUnitDistanceFromAnchor:f},x>0&&(f+=a[x-1].dist(a[x]));for(let x=0;x<a.length;x++){const C=y[x];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(t,a,s,h,f,y,x,C,A,M,I,k){const F=t.indexArray,O=t.layoutVertexArray,U=t.segments.prepareSegment(4*a.length,O,F,this.canOverlap?y.sortKey:void 0),J=this.glyphOffsetArray.length,ne=U.vertexLength,ye=this.allowVerticalPlacement&&x===v.ah.vertical?Math.PI/2:0,le=y.text&&y.text.sections;for(let fe=0;fe<a.length;fe++){const{tl:Ee,tr:ke,bl:Ke,br:vt,tex:We,pixelOffsetTL:He,pixelOffsetBR:ht,minFontScaleX:at,minFontScaleY:tt,glyphOffset:Ie,isSDF:ft,sectionIndex:dt}=a[fe],Ct=U.vertexLength,Qt=Ie[1];Ih(O,C.x,C.y,Ee.x,Qt+Ee.y,We.x,We.y,s,ft,He.x,He.y,at,tt),Ih(O,C.x,C.y,ke.x,Qt+ke.y,We.x+We.w,We.y,s,ft,ht.x,He.y,at,tt),Ih(O,C.x,C.y,Ke.x,Qt+Ke.y,We.x,We.y+We.h,s,ft,He.x,ht.y,at,tt),Ih(O,C.x,C.y,vt.x,Qt+vt.y,We.x+We.w,We.y+We.h,s,ft,ht.x,ht.y,at,tt),im(t.dynamicLayoutVertexArray,C,ye),F.emplaceBack(Ct,Ct+1,Ct+2),F.emplaceBack(Ct+1,Ct+2,Ct+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ie[0]),fe!==a.length-1&&dt===a[fe+1].sectionIndex||t.programConfigurations.populatePaintArrays(O.length,y,y.index,{},k,le&&le[dt])}t.placedSymbolArray.emplaceBack(C.x,C.y,J,this.glyphOffsetArray.length-J,ne,A,M,C.segment,s?s[0]:0,s?s[1]:0,h[0],h[1],x,0,!1,0,I)}_addCollisionDebugVertex(t,a,s,h,f,y){return a.emplaceBack(0,0),t.emplaceBack(s.x,s.y,h,f,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(t,a,s,h,f,y,x){const C=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),A=C.vertexLength,M=f.layoutVertexArray,I=f.collisionVertexArray,k=x.anchorX,F=x.anchorY;this._addCollisionDebugVertex(M,I,y,k,F,new j(t,a)),this._addCollisionDebugVertex(M,I,y,k,F,new j(s,a)),this._addCollisionDebugVertex(M,I,y,k,F,new j(s,h)),this._addCollisionDebugVertex(M,I,y,k,F,new j(t,h)),C.vertexLength+=4;const O=f.indexArray;O.emplaceBack(A,A+1),O.emplaceBack(A+1,A+2),O.emplaceBack(A+2,A+3),O.emplaceBack(A+3,A),C.primitiveLength+=4}addDebugCollisionBoxes(t,a,s,h){for(let f=t;f<a;f++){const y=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,s)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new am(xn,P_.members,Ss),this.iconCollisionBox=new am(xn,P_.members,Ss);for(let t=0;t<this.symbolInstances.length;t++){const a=this.symbolInstances.get(t);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(t,a,s,h,f,y,x,C,A){const M={};for(let I=a;I<s;I++){const k=t.get(I);M.textBox={x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,anchorPointX:k.anchorPointX,anchorPointY:k.anchorPointY},M.textFeatureIndex=k.featureIndex;break}for(let I=h;I<f;I++){const k=t.get(I);M.verticalTextBox={x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,anchorPointX:k.anchorPointX,anchorPointY:k.anchorPointY},M.verticalTextFeatureIndex=k.featureIndex;break}for(let I=y;I<x;I++){const k=t.get(I);M.iconBox={x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,anchorPointX:k.anchorPointX,anchorPointY:k.anchorPointY},M.iconFeatureIndex=k.featureIndex;break}for(let I=C;I<A;I++){const k=t.get(I);M.verticalIconBox={x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,anchorPointX:k.anchorPointX,anchorPointY:k.anchorPointY},M.verticalIconFeatureIndex=k.featureIndex;break}return M}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const s=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,a){const s=t.placedSymbolArray.get(a),h=s.vertexStartIndex+4*s.numGlyphs;for(let f=s.vertexStartIndex;f<h;f+=4)t.indexArray.emplaceBack(f,f+1,f+2),t.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(t),s=Math.cos(t),h=[],f=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const C=this.symbolInstances.get(x);h.push(0|Math.round(a*C.anchorX+s*C.anchorY)),f.push(C.featureIndex)}return y.sort((x,C)=>h[x]-h[C]||f[C]-f[x]),y}addToSortKeyRanges(t,a){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===a?s.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const s=this.symbolInstances.get(a);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach((h,f,y)=>{h>=0&&y.indexOf(h)===f&&this.addIndicesForPlacedSymbol(this.text,h)}),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let W_,X_;et("SymbolBucket",Ul,{omit:["layers","collisionBoxArray","features","compareText"]}),Ul.MAX_GLYPHS=65535,Ul.addDynamicAttributes=im;var om={get paint(){return X_=X_||new w({"icon-opacity":new o(be.paint_symbol["icon-opacity"]),"icon-color":new o(be.paint_symbol["icon-color"]),"icon-halo-color":new o(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new o(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new o(be.paint_symbol["icon-halo-blur"]),"icon-translate":new e(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new e(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new o(be.paint_symbol["text-opacity"]),"text-color":new o(be.paint_symbol["text-color"],{runtimeType:Yn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new o(be.paint_symbol["text-halo-color"]),"text-halo-width":new o(be.paint_symbol["text-halo-width"]),"text-halo-blur":new o(be.paint_symbol["text-halo-blur"]),"text-translate":new e(be.paint_symbol["text-translate"]),"text-translate-anchor":new e(be.paint_symbol["text-translate-anchor"])})},get layout(){return W_=W_||new w({"symbol-placement":new e(be.layout_symbol["symbol-placement"]),"symbol-spacing":new e(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new e(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new o(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new e(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new e(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new e(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new e(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new e(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new e(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new o(be.layout_symbol["icon-size"]),"icon-text-fit":new e(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new e(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new o(be.layout_symbol["icon-image"]),"icon-rotate":new o(be.layout_symbol["icon-rotate"]),"icon-padding":new o(be.layout_symbol["icon-padding"]),"icon-keep-upright":new e(be.layout_symbol["icon-keep-upright"]),"icon-offset":new o(be.layout_symbol["icon-offset"]),"icon-anchor":new o(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new e(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new e(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new e(be.layout_symbol["text-rotation-alignment"]),"text-field":new o(be.layout_symbol["text-field"]),"text-font":new o(be.layout_symbol["text-font"]),"text-size":new o(be.layout_symbol["text-size"]),"text-max-width":new o(be.layout_symbol["text-max-width"]),"text-line-height":new e(be.layout_symbol["text-line-height"]),"text-letter-spacing":new o(be.layout_symbol["text-letter-spacing"]),"text-justify":new o(be.layout_symbol["text-justify"]),"text-radial-offset":new o(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new e(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new o(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new o(be.layout_symbol["text-anchor"]),"text-max-angle":new e(be.layout_symbol["text-max-angle"]),"text-writing-mode":new e(be.layout_symbol["text-writing-mode"]),"text-rotate":new o(be.layout_symbol["text-rotate"]),"text-padding":new e(be.layout_symbol["text-padding"]),"text-keep-upright":new e(be.layout_symbol["text-keep-upright"]),"text-transform":new o(be.layout_symbol["text-transform"]),"text-offset":new o(be.layout_symbol["text-offset"]),"text-allow-overlap":new e(be.layout_symbol["text-allow-overlap"]),"text-overlap":new e(be.layout_symbol["text-overlap"]),"text-ignore-placement":new e(be.layout_symbol["text-ignore-placement"]),"text-optional":new e(be.layout_symbol["text-optional"])})}};class K_{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:pr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}et("FormatSectionOverride",K_,{omit:["defaultValue"]});class Ph extends E{constructor(t){super(t,om)}recalculate(t,a){if(super.recalculate(t,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const s=this.layout.get("text-writing-mode");if(s){const h=[];for(const f of s)h.indexOf(f)<0&&h.push(f);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,a,s,h){const f=this.layout.get(t).evaluate(a,{},s,h),y=this._unevaluatedLayout._values[t];return y.isDataDriven()||fs(y.value)||!f?f:function(x,C){return C.replace(/{([^{}]+)}/g,(A,M)=>x&&M in x?String(x[M]):"")}(a.properties,f)}createBucket(t){return new Ul(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of om.paint.overridableProperties){if(!Ph.hasPaintOverride(this.layout,t))continue;const a=this.paint.get(t),s=new K_(a),h=new ps(s,a.property.specification);let f=null;f=a.value.kind==="constant"||a.value.kind==="source"?new go("source",h):new Gc("composite",h,a.value.zoomStops),this.paint._values[t]=new jr(a.property,f,a.parameters)}}_handleOverridablePaintPropertyUpdate(t,a,s){return!(!this.layout||a.isDataDriven()||s.isDataDriven())&&Ph.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,a){const s=t.get("text-field"),h=om.paint.properties[a];let f=!1;const y=x=>{for(const C of x)if(h.overrides&&h.overrides.hasOverride(C))return void(f=!0)};if(s.value.kind==="constant"&&s.value.value instanceof On)y(s.value.value.sections);else if(s.value.kind==="source"){const x=A=>{f||(A instanceof In&&_t(A.value)===Yi?y(A.value.sections):A instanceof ll?y(A.sections):A.eachChild(x))},C=s.value;C._styleExpression&&x(C._styleExpression.expression)}return f}}let J_;var E2={get paint(){return J_=J_||new w({"background-color":new e(be.paint_background["background-color"]),"background-pattern":new d(be.paint_background["background-pattern"]),"background-opacity":new e(be.paint_background["background-opacity"])})}};class A2 extends E{constructor(t){super(t,E2)}}let Y_;var T2={get paint(){return Y_=Y_||new w({"raster-opacity":new e(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new e(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new e(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new e(be.paint_raster["raster-brightness-max"]),"raster-saturation":new e(be.paint_raster["raster-saturation"]),"raster-contrast":new e(be.paint_raster["raster-contrast"]),"raster-resampling":new e(be.paint_raster["raster-resampling"]),"raster-fade-duration":new e(be.paint_raster["raster-fade-duration"])})}};class M2 extends E{constructor(t){super(t,T2)}}class I2 extends E{constructor(t){super(t,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class P2{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const sm=63710088e-1;class Io{constructor(t,a){if(isNaN(t)||isNaN(a))throw new Error(`Invalid LngLat object: (${t}, ${a})`);if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Io(Xe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const a=Math.PI/180,s=this.lat*a,h=t.lat*a,f=Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos((t.lng-this.lng)*a);return sm*Math.acos(Math.min(f,1))}static convert(t){if(t instanceof Io)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Io(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Io(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Q_=2*Math.PI*sm;function e0(i){return Q_*Math.cos(i*Math.PI/180)}function t0(i){return(180+i)/360}function n0(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function i0(i,t){return i/e0(t)}function lm(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Mu{constructor(t,a,s=0){this.x=+t,this.y=+a,this.z=+s}static fromLngLat(t,a=0){const s=Io.convert(t);return new Mu(t0(s.lng),n0(s.lat),i0(a,s.lat))}toLngLat(){return new Io(360*this.x-180,lm(this.y))}toAltitude(){return this.z*e0(lm(this.y))}meterInMercatorCoordinateUnits(){return 1/Q_*(t=lm(this.y),1/Math.cos(t*Math.PI/180));var t}}function r0(i,t,a){var s=2*Math.PI*6378137/256/Math.pow(2,a);return[i*s-2*Math.PI*6378137/2,t*s-2*Math.PI*6378137/2]}class cm{constructor(t,a,s){if(!function(h,f,y){return!(h<0||h>25||y<0||y>=Math.pow(2,h)||f<0||f>=Math.pow(2,h))}(t,a,s))throw new Error(`x=${a}, y=${s}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=a,this.y=s,this.key=Iu(0,t,t,a,s)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,a,s){const h=(y=this.y,x=this.z,C=r0(256*(f=this.x),256*(y=Math.pow(2,x)-y-1),x),A=r0(256*(f+1),256*(y+1),x),C[0]+","+C[1]+","+A[0]+","+A[1]);var f,y,x,C,A;const M=function(I,k,F){let O,U="";for(let J=I;J>0;J--)O=1<<J-1,U+=(k&O?1:0)+(F&O?2:0);return U}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,h)}isChildOf(t){const a=this.z-t.z;return a>0&&t.x===this.x>>a&&t.y===this.y>>a}getTilePoint(t){const a=Math.pow(2,this.z);return new j((t.x*a-this.x)*jn,(t.y*a-this.y)*jn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class a0{constructor(t,a){this.wrap=t,this.canonical=a,this.key=Iu(t,a.z,a.z,a.x,a.y)}}class Cr{constructor(t,a,s,h,f){if(t<s)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${s}`);this.overscaledZ=t,this.wrap=a,this.canonical=new cm(s,+h,+f),this.key=Iu(a,t,s,h,f)}clone(){return new Cr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-t;return t>this.canonical.z?new Cr(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cr(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(t,a){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?Iu(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y):Iu(this.wrap*+a,t,t,this.canonical.x>>s,this.canonical.y>>s)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const a=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a}children(t){if(this.overscaledZ>=t)return[new Cr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,s=2*this.canonical.x,h=2*this.canonical.y;return[new Cr(a,this.wrap,a,s,h),new Cr(a,this.wrap,a,s+1,h),new Cr(a,this.wrap,a,s,h+1),new Cr(a,this.wrap,a,s+1,h+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Cr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Cr(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new a0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Mu(t.x-this.wrap,t.y))}}function Iu(i,t,a,s,h){(i*=2)<0&&(i=-1*i-1);const f=1<<a;return(f*f*i+f*h+s).toString(36)+a.toString(36)+t.toString(36)}et("CanonicalTileID",cm),et("OverscaledTileID",Cr,{omit:["posMatrix"]});class o0{constructor(t,a,s,h=1,f=1,y=1,x=0){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(s&&!["mapbox","terrarium","custom"].includes(s))return void Ot(`"${s}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const C=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),s){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=f,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<C;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(C,A)]=this.data[this._idx(C-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,C)]=this.data[this._idx(A,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<C;A++)for(let M=0;M<C;M++){const I=this.get(A,M);I>this.max&&(this.max=I),I<this.min&&(this.min=I)}}get(t,a){const s=new Uint8Array(this.data.buffer),h=4*this._idx(t,a);return this.unpack(s[h],s[h+1],s[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)}unpack(t,a,s){return t*this.redFactor+a*this.greenFactor+s*this.blueFactor-this.baseShift}getPixels(){return new wr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,a,s){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let h=a*this.dim,f=a*this.dim+this.dim,y=s*this.dim,x=s*this.dim+this.dim;switch(a){case-1:h=f-1;break;case 1:f=h+1}switch(s){case-1:y=x-1;break;case 1:x=y+1}const C=-a*this.dim,A=-s*this.dim;for(let M=y;M<x;M++)for(let I=h;I<f;I++)this.data[this._idx(I,M)]=t.data[this._idx(I+C,M+A)]}}et("DEMData",o0);class s0{constructor(t){this._stringToNumber={},this._numberToString=[];for(let a=0;a<t.length;a++){const s=t[a];this._stringToNumber[s]=a,this._numberToString[a]=s}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class l0{constructor(t,a,s,h,f){this.type="Feature",this._vectorTileFeature=t,t._z=a,t._x=s,t._y=h,this.properties=t.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(t[a]=this[a]);return t}}class c0{constructor(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new wo(jn,16,0),this.grid3D=new wo(jn,16,0),this.featureIndexArray=new Ga,this.promoteId=a}insert(t,a,s,h,f,y){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,h,f);const C=y?this.grid3D:this.grid;for(let A=0;A<a.length;A++){const M=a[A],I=[1/0,1/0,-1/0,-1/0];for(let k=0;k<M.length;k++){const F=M[k];I[0]=Math.min(I[0],F.x),I[1]=Math.min(I[1],F.y),I[2]=Math.max(I[2],F.x),I[3]=Math.max(I[3],F.y)}I[0]<jn&&I[1]<jn&&I[2]>=0&&I[3]>=0&&C.insert(x,I[0],I[1],I[2],I[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ao.VectorTile(new Jf(this.rawTileData)).layers,this.sourceLayerCoder=new s0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,a,s,h){this.loadVTLayers();const f=t.params||{},y=jn/t.tileSize/t.scale,x=yo(f.filter),C=t.queryGeometry,A=t.queryPadding*y,M=d0(C),I=this.grid.query(M.minX-A,M.minY-A,M.maxX+A,M.maxY+A),k=d0(t.cameraQueryGeometry),F=this.grid3D.query(k.minX-A,k.minY-A,k.maxX+A,k.maxY+A,(J,ne,ye,le)=>function(fe,Ee,ke,Ke,vt){for(const He of fe)if(Ee<=He.x&&ke<=He.y&&Ke>=He.x&&vt>=He.y)return!0;const We=[new j(Ee,ke),new j(Ee,vt),new j(Ke,vt),new j(Ke,ke)];if(fe.length>2){for(const He of We)if(Ll(fe,He))return!0}for(let He=0;He<fe.length-1;He++)if(uw(fe[He],fe[He+1],We))return!0;return!1}(t.cameraQueryGeometry,J-A,ne-A,ye+A,le+A));for(const J of F)I.push(J);I.sort(z2);const O={};let U;for(let J=0;J<I.length;J++){const ne=I[J];if(ne===U)continue;U=ne;const ye=this.featureIndexArray.get(ne);let le=null;this.loadMatchingFeature(O,ye.bucketIndex,ye.sourceLayerIndex,ye.featureIndex,x,f.layers,f.availableImages,a,s,h,(fe,Ee,ke)=>(le||(le=Is(fe)),Ee.queryIntersectsFeature(C,fe,ke,le,this.z,t.transform,y,t.pixelPosMatrix)))}return O}loadMatchingFeature(t,a,s,h,f,y,x,C,A,M,I){const k=this.bucketLayerIDs[a];if(y&&!function(J,ne){for(let ye=0;ye<J.length;ye++)if(ne.indexOf(J[ye])>=0)return!0;return!1}(y,k))return;const F=this.sourceLayerCoder.decode(s),O=this.vtLayers[F].feature(h);if(f.needGeometry){const J=Ps(O,!0);if(!f.filter(new Kt(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!f.filter(new Kt(this.tileID.overscaledZ),O))return;const U=this.getId(O,F);for(let J=0;J<k.length;J++){const ne=k[J];if(y&&y.indexOf(ne)<0)continue;const ye=C[ne];if(!ye)continue;let le={};U&&M&&(le=M.getState(ye.sourceLayer||"_geojsonTileLayer",U));const fe=Qe({},A[ne]);fe.paint=u0(fe.paint,ye.paint,O,le,x),fe.layout=u0(fe.layout,ye.layout,O,le,x);const Ee=!I||I(O,ye,le);if(!Ee)continue;const ke=new l0(O,this.z,this.x,this.y,U);ke.layer=fe;let Ke=t[ne];Ke===void 0&&(Ke=t[ne]=[]),Ke.push({featureIndex:h,feature:ke,intersectionZ:Ee})}}lookupSymbolFeatures(t,a,s,h,f,y,x,C){const A={};this.loadVTLayers();const M=yo(f);for(const I of t)this.loadMatchingFeature(A,s,h,I,M,y,x,C,a);return A}hasLayer(t){for(const a of this.bucketLayerIDs)for(const s of a)if(t===s)return!0;return!1}getId(t,a){let s=t.id;return this.promoteId&&(s=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof s=="boolean"&&(s=Number(s))),s}}function u0(i,t,a,s,h){return pt(i,(f,y)=>{const x=t instanceof m?t.get(y):null;return x&&x.evaluate?x.evaluate(a,s,h):x})}function d0(i){let t=1/0,a=1/0,s=-1/0,h=-1/0;for(const f of i)t=Math.min(t,f.x),a=Math.min(a,f.y),s=Math.max(s,f.x),h=Math.max(h,f.y);return{minX:t,minY:a,maxX:s,maxY:h}}function z2(i,t){return t-i}function h0(i,t,a,s,h){const f=[];for(let y=0;y<i.length;y++){const x=i[y];let C;for(let A=0;A<x.length-1;A++){let M=x[A],I=x[A+1];M.x<t&&I.x<t||(M.x<t?M=new j(t,M.y+(t-M.x)/(I.x-M.x)*(I.y-M.y))._round():I.x<t&&(I=new j(t,M.y+(t-M.x)/(I.x-M.x)*(I.y-M.y))._round()),M.y<a&&I.y<a||(M.y<a?M=new j(M.x+(a-M.y)/(I.y-M.y)*(I.x-M.x),a)._round():I.y<a&&(I=new j(M.x+(a-M.y)/(I.y-M.y)*(I.x-M.x),a)._round()),M.x>=s&&I.x>=s||(M.x>=s?M=new j(s,M.y+(s-M.x)/(I.x-M.x)*(I.y-M.y))._round():I.x>=s&&(I=new j(s,M.y+(s-M.x)/(I.x-M.x)*(I.y-M.y))._round()),M.y>=h&&I.y>=h||(M.y>=h?M=new j(M.x+(h-M.y)/(I.y-M.y)*(I.x-M.x),h)._round():I.y>=h&&(I=new j(M.x+(h-M.y)/(I.y-M.y)*(I.x-M.x),h)._round()),C&&M.equals(C[C.length-1])||(C=[M],f.push(C)),C.push(I)))))}}return f}et("FeatureIndex",c0,{omit:["rawTileData","sourceLayerCoder"]});class Po extends j{constructor(t,a,s,h){super(t,a),this.angle=s,h!==void 0&&(this.segment=h)}clone(){return new Po(this.x,this.y,this.angle,this.segment)}}function p0(i,t,a,s,h){if(t.segment===void 0||a===0)return!0;let f=t,y=t.segment+1,x=0;for(;x>-a/2;){if(y--,y<0)return!1;x-=i[y].dist(f),f=i[y]}x+=i[y].dist(i[y+1]),y++;const C=[];let A=0;for(;x<a/2;){const M=i[y],I=i[y+1];if(!I)return!1;let k=i[y-1].angleTo(M)-M.angleTo(I);for(k=Math.abs((k+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:x,angleDelta:k}),A+=k;x-C[0].distance>s;)A-=C.shift().angleDelta;if(A>h)return!1;y++,x+=M.dist(I)}return!0}function f0(i){let t=0;for(let a=0;a<i.length-1;a++)t+=i[a].dist(i[a+1]);return t}function m0(i,t,a){return i?.6*t*a:0}function g0(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function D2(i,t,a,s,h,f){const y=m0(a,h,f),x=g0(a,s)*f;let C=0;const A=f0(i)/2;for(let M=0;M<i.length-1;M++){const I=i[M],k=i[M+1],F=I.dist(k);if(C+F>A){const O=(A-C)/F,U=Ni.number(I.x,k.x,O),J=Ni.number(I.y,k.y,O),ne=new Po(U,J,k.angleTo(I),M);return ne._round(),!y||p0(i,ne,x,y,t)?ne:void 0}C+=F}}function k2(i,t,a,s,h,f,y,x,C){const A=m0(s,f,y),M=g0(s,h),I=M*y,k=i[0].x===0||i[0].x===C||i[0].y===0||i[0].y===C;return t-I<t/4&&(t=I+t/4),y0(i,k?t/2*x%t:(M/2+2*f)*y*x%t,t,A,a,I,k,!1,C)}function y0(i,t,a,s,h,f,y,x,C){const A=f/2,M=f0(i);let I=0,k=t-a,F=[];for(let O=0;O<i.length-1;O++){const U=i[O],J=i[O+1],ne=U.dist(J),ye=J.angleTo(U);for(;k+a<I+ne;){k+=a;const le=(k-I)/ne,fe=Ni.number(U.x,J.x,le),Ee=Ni.number(U.y,J.y,le);if(fe>=0&&fe<C&&Ee>=0&&Ee<C&&k-A>=0&&k+A<=M){const ke=new Po(fe,Ee,ye,O);ke._round(),s&&!p0(i,ke,f,s,h)||F.push(ke)}}I+=ne}return x||F.length||y||(F=y0(i,I/2,a,s,h,f,y,!0,C)),F}et("Anchor",Po);const $l=qi;function _0(i,t,a,s){const h=[],f=i.image,y=f.pixelRatio,x=f.paddedRect.w-2*$l,C=f.paddedRect.h-2*$l;let A={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const M=f.stretchX||[[0,x]],I=f.stretchY||[[0,C]],k=(Ie,ft)=>Ie+ft[1]-ft[0],F=M.reduce(k,0),O=I.reduce(k,0),U=x-F,J=C-O;let ne=0,ye=F,le=0,fe=O,Ee=0,ke=U,Ke=0,vt=J;if(f.content&&s){const Ie=f.content,ft=Ie[2]-Ie[0],dt=Ie[3]-Ie[1];(f.textFitWidth||f.textFitHeight)&&(A=G_(i)),ne=zh(M,0,Ie[0]),le=zh(I,0,Ie[1]),ye=zh(M,Ie[0],Ie[2]),fe=zh(I,Ie[1],Ie[3]),Ee=Ie[0]-ne,Ke=Ie[1]-le,ke=ft-ye,vt=dt-fe}const We=A.x1,He=A.y1,ht=A.x2-We,at=A.y2-He,tt=(Ie,ft,dt,Ct)=>{const Qt=Dh(Ie.stretch-ne,ye,ht,We),Yt=kh(Ie.fixed-Ee,ke,Ie.stretch,F),Zn=Dh(ft.stretch-le,fe,at,He),Vr=kh(ft.fixed-Ke,vt,ft.stretch,O),li=Dh(dt.stretch-ne,ye,ht,We),Wn=kh(dt.fixed-Ee,ke,dt.stretch,F),Ti=Dh(Ct.stretch-le,fe,at,He),Mi=kh(Ct.fixed-Ke,vt,Ct.stretch,O),Ii=new j(Qt,Zn),En=new j(li,Zn),Xn=new j(li,Ti),gi=new j(Qt,Ti),ci=new j(Yt/y,Vr/y),Pi=new j(Wn/y,Mi/y),ui=t*Math.PI/180;if(ui){const Gt=Math.sin(ui),nn=Math.cos(ui),ln=[nn,-Gt,Gt,nn];Ii._matMult(ln),En._matMult(ln),gi._matMult(ln),Xn._matMult(ln)}const Sr=Ie.stretch+Ie.fixed,Gi=ft.stretch+ft.fixed;return{tl:Ii,tr:En,bl:gi,br:Xn,tex:{x:f.paddedRect.x+$l+Sr,y:f.paddedRect.y+$l+Gi,w:dt.stretch+dt.fixed-Sr,h:Ct.stretch+Ct.fixed-Gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ci,pixelOffsetBR:Pi,minFontScaleX:ke/y/ht,minFontScaleY:vt/y/at,isSDF:a}};if(s&&(f.stretchX||f.stretchY)){const Ie=v0(M,U,F),ft=v0(I,J,O);for(let dt=0;dt<Ie.length-1;dt++){const Ct=Ie[dt],Qt=Ie[dt+1];for(let Yt=0;Yt<ft.length-1;Yt++)h.push(tt(Ct,ft[Yt],Qt,ft[Yt+1]))}}else h.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:C+1}));return h}function zh(i,t,a){let s=0;for(const h of i)s+=Math.max(t,Math.min(a,h[1]))-Math.max(t,Math.min(a,h[0]));return s}function v0(i,t,a){const s=[{fixed:-$l,stretch:0}];for(const[h,f]of i){const y=s[s.length-1];s.push({fixed:h-y.stretch,stretch:y.stretch}),s.push({fixed:h-y.stretch,stretch:y.stretch+(f-h)})}return s.push({fixed:t+$l,stretch:a}),s}function Dh(i,t,a,s){return i/t*a+s}function kh(i,t,a,s){return i-t*a/s}class Rh{constructor(t,a,s,h,f,y,x,C,A,M){var I;if(this.boxStartIndex=t.length,A){let k=y.top,F=y.bottom;const O=y.collisionPadding;O&&(k-=O[1],F+=O[3]);let U=F-k;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{const k=!((I=y.image)===null||I===void 0)&&I.content&&(y.image.textFitWidth||y.image.textFitHeight)?G_(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};k.y1=k.y1*x-C[0],k.y2=k.y2*x+C[2],k.x1=k.x1*x-C[3],k.x2=k.x2*x+C[1];const F=y.collisionPadding;if(F&&(k.x1-=F[0]*x,k.y1-=F[1]*x,k.x2+=F[2]*x,k.y2+=F[3]*x),M){const O=new j(k.x1,k.y1),U=new j(k.x2,k.y1),J=new j(k.x1,k.y2),ne=new j(k.x2,k.y2),ye=M*Math.PI/180;O._rotate(ye),U._rotate(ye),J._rotate(ye),ne._rotate(ye),k.x1=Math.min(O.x,U.x,J.x,ne.x),k.x2=Math.max(O.x,U.x,J.x,ne.x),k.y1=Math.min(O.y,U.y,J.y,ne.y),k.y2=Math.max(O.y,U.y,J.y,ne.y)}t.emplaceBack(a.x,a.y,k.x1,k.y1,k.x2,k.y2,s,h,f)}this.boxEndIndex=t.length}}class R2{constructor(t=[],a=(s,h)=>s<h?-1:s>h?1:0){if(this.data=t,this.length=this.data.length,this.compare=a,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:a,compare:s}=this,h=a[t];for(;t>0;){const f=t-1>>1,y=a[f];if(s(h,y)>=0)break;a[t]=y,t=f}a[t]=h}_down(t){const{data:a,compare:s}=this,h=this.length>>1,f=a[t];for(;t<h;){let y=1+(t<<1);const x=y+1;if(x<this.length&&s(a[x],a[y])<0&&(y=x),s(a[y],f)>=0)break;a[t]=a[y],t=y}a[t]=f}}function L2(i,t=1,a=!1){let s=1/0,h=1/0,f=-1/0,y=-1/0;const x=i[0];for(let F=0;F<x.length;F++){const O=x[F];(!F||O.x<s)&&(s=O.x),(!F||O.y<h)&&(h=O.y),(!F||O.x>f)&&(f=O.x),(!F||O.y>y)&&(y=O.y)}const C=Math.min(f-s,y-h);let A=C/2;const M=new R2([],F2);if(C===0)return new j(s,h);for(let F=s;F<f;F+=C)for(let O=h;O<y;O+=C)M.push(new ql(F+A,O+A,A,i));let I=function(F){let O=0,U=0,J=0;const ne=F[0];for(let ye=0,le=ne.length,fe=le-1;ye<le;fe=ye++){const Ee=ne[ye],ke=ne[fe],Ke=Ee.x*ke.y-ke.x*Ee.y;U+=(Ee.x+ke.x)*Ke,J+=(Ee.y+ke.y)*Ke,O+=3*Ke}return new ql(U/O,J/O,0,F)}(i),k=M.length;for(;M.length;){const F=M.pop();(F.d>I.d||!I.d)&&(I=F,a&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,k)),F.max-I.d<=t||(A=F.h/2,M.push(new ql(F.p.x-A,F.p.y-A,A,i)),M.push(new ql(F.p.x+A,F.p.y-A,A,i)),M.push(new ql(F.p.x-A,F.p.y+A,A,i)),M.push(new ql(F.p.x+A,F.p.y+A,A,i)),k+=4)}return a&&(console.log(`num probes: ${k}`),console.log(`best distance: ${I.d}`)),I.p}function F2(i,t){return t.max-i.max}function ql(i,t,a,s){this.p=new j(i,t),this.h=a,this.d=function(h,f){let y=!1,x=1/0;for(let C=0;C<f.length;C++){const A=f[C];for(let M=0,I=A.length,k=I-1;M<I;k=M++){const F=A[M],O=A[k];F.y>h.y!=O.y>h.y&&h.x<(O.x-F.x)*(h.y-F.y)/(O.y-F.y)+F.x&&(y=!y),x=Math.min(x,n_(h,F,O))}}return(y?1:-1)*Math.sqrt(x)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}var si;v.aq=void 0,(si=v.aq||(v.aq={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const zo=7,um=Number.POSITIVE_INFINITY;function x0(i,t){return t[1]!==um?function(a,s,h){let f=0,y=0;switch(s=Math.abs(s),h=Math.abs(h),a){case"top-right":case"top-left":case"top":y=h-zo;break;case"bottom-right":case"bottom-left":case"bottom":y=-h+zo}switch(a){case"top-right":case"bottom-right":case"right":f=-s;break;case"top-left":case"bottom-left":case"left":f=s}return[f,y]}(i,t[0],t[1]):function(a,s){let h=0,f=0;s<0&&(s=0);const y=s/Math.SQRT2;switch(a){case"top-right":case"top-left":f=y-zo;break;case"bottom-right":case"bottom-left":f=-y+zo;break;case"bottom":f=-s+zo;break;case"top":f=s-zo}switch(a){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=s;break;case"right":h=-s}return[h,f]}(i,t[0])}function b0(i,t,a){var s;const h=i.layout,f=(s=h.get("text-variable-anchor-offset"))===null||s===void 0?void 0:s.evaluate(t,{},a);if(f){const x=f.values,C=[];for(let A=0;A<x.length;A+=2){const M=C[A]=x[A],I=x[A+1].map(k=>k*qn);M.startsWith("top")?I[1]-=zo:M.startsWith("bottom")&&(I[1]+=zo),C[A+1]=I}return new mn(C)}const y=h.get("text-variable-anchor");if(y){let x;x=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(t,{},a)*qn,um]:h.get("text-offset").evaluate(t,{},a).map(A=>A*qn);const C=[];for(const A of y)C.push(A,x0(A,x));return new mn(C)}return null}function dm(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function B2(i,t,a,s,h,f,y,x,C,A,M){let I=f.textMaxSize.evaluate(t,{});I===void 0&&(I=y);const k=i.layers[0].layout,F=k.get("icon-offset").evaluate(t,{},M),O=C0(a.horizontal),U=y/24,J=i.tilePixelRatio*U,ne=i.tilePixelRatio*I/24,ye=i.tilePixelRatio*x,le=i.tilePixelRatio*k.get("symbol-spacing"),fe=k.get("text-padding")*i.tilePixelRatio,Ee=function(Ie,ft,dt,Ct=1){const Qt=Ie.get("icon-padding").evaluate(ft,{},dt),Yt=Qt&&Qt.values;return[Yt[0]*Ct,Yt[1]*Ct,Yt[2]*Ct,Yt[3]*Ct]}(k,t,M,i.tilePixelRatio),ke=k.get("text-max-angle")/180*Math.PI,Ke=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point",vt=k.get("icon-rotation-alignment")==="map"&&k.get("symbol-placement")!=="point",We=k.get("symbol-placement"),He=le/2,ht=k.get("icon-text-fit");let at;s&&ht!=="none"&&(i.allowVerticalPlacement&&a.vertical&&(at=H_(s,a.vertical,ht,k.get("icon-text-fit-padding"),F,U)),O&&(s=H_(s,O,ht,k.get("icon-text-fit-padding"),F,U)));const tt=(Ie,ft)=>{ft.x<0||ft.x>=jn||ft.y<0||ft.y>=jn||function(dt,Ct,Qt,Yt,Zn,Vr,li,Wn,Ti,Mi,Ii,En,Xn,gi,ci,Pi,ui,Sr,Gi,Gt,nn,ln,nr,bn,Gl){const Ea=dt.addToLineVertexArray(Ct,Qt);let Aa,Ur,Er,ei,Wa=0,Du=0,T0=0,M0=0,vm=-1,xm=-1;const Xa={};let I0=Df("");if(dt.allowVerticalPlacement&&Yt.vertical){const yi=Wn.layout.get("text-rotate").evaluate(nn,{},bn)+90;Er=new Rh(Ti,Ct,Mi,Ii,En,Yt.vertical,Xn,gi,ci,yi),li&&(ei=new Rh(Ti,Ct,Mi,Ii,En,li,ui,Sr,ci,yi))}if(Zn){const yi=Wn.layout.get("icon-rotate").evaluate(nn,{}),Ar=Wn.layout.get("icon-text-fit")!=="none",Ds=_0(Zn,yi,nr,Ar),ia=li?_0(li,yi,nr,Ar):void 0;Ur=new Rh(Ti,Ct,Mi,Ii,En,Zn,ui,Sr,!1,yi),Wa=4*Ds.length;const ks=dt.iconSizeData;let Ta=null;ks.kind==="source"?(Ta=[Sa*Wn.layout.get("icon-size").evaluate(nn,{})],Ta[0]>Mo&&Ot(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Tu}. Reduce your "icon-size".`)):ks.kind==="composite"&&(Ta=[Sa*ln.compositeIconSizes[0].evaluate(nn,{},bn),Sa*ln.compositeIconSizes[1].evaluate(nn,{},bn)],(Ta[0]>Mo||Ta[1]>Mo)&&Ot(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Tu}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,Ds,Ta,Gt,Gi,nn,v.ah.none,Ct,Ea.lineStartIndex,Ea.lineLength,-1,bn),vm=dt.icon.placedSymbolArray.length-1,ia&&(Du=4*ia.length,dt.addSymbols(dt.icon,ia,Ta,Gt,Gi,nn,v.ah.vertical,Ct,Ea.lineStartIndex,Ea.lineLength,-1,bn),xm=dt.icon.placedSymbolArray.length-1)}const P0=Object.keys(Yt.horizontal);for(const yi of P0){const Ar=Yt.horizontal[yi];if(!Aa){I0=Df(Ar.text);const ia=Wn.layout.get("text-rotate").evaluate(nn,{},bn);Aa=new Rh(Ti,Ct,Mi,Ii,En,Ar,Xn,gi,ci,ia)}const Ds=Ar.positionedLines.length===1;if(T0+=w0(dt,Ct,Ar,Vr,Wn,ci,nn,Pi,Ea,Yt.vertical?v.ah.horizontal:v.ah.horizontalOnly,Ds?P0:[yi],Xa,vm,ln,bn),Ds)break}Yt.vertical&&(M0+=w0(dt,Ct,Yt.vertical,Vr,Wn,ci,nn,Pi,Ea,v.ah.vertical,["vertical"],Xa,xm,ln,bn));const j2=Aa?Aa.boxStartIndex:dt.collisionBoxArray.length,V2=Aa?Aa.boxEndIndex:dt.collisionBoxArray.length,U2=Er?Er.boxStartIndex:dt.collisionBoxArray.length,$2=Er?Er.boxEndIndex:dt.collisionBoxArray.length,q2=Ur?Ur.boxStartIndex:dt.collisionBoxArray.length,G2=Ur?Ur.boxEndIndex:dt.collisionBoxArray.length,H2=ei?ei.boxStartIndex:dt.collisionBoxArray.length,Z2=ei?ei.boxEndIndex:dt.collisionBoxArray.length;let na=-1;const Fh=(yi,Ar)=>yi&&yi.circleDiameter?Math.max(yi.circleDiameter,Ar):Ar;na=Fh(Aa,na),na=Fh(Er,na),na=Fh(Ur,na),na=Fh(ei,na);const z0=na>-1?1:0;z0&&(na*=Gl/qn),dt.glyphOffsetArray.length>=Ul.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),nn.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,nn.sortKey);const W2=b0(Wn,nn,bn),[X2,K2]=function(yi,Ar){const Ds=yi.length,ia=Ar==null?void 0:Ar.values;if((ia==null?void 0:ia.length)>0)for(let ks=0;ks<ia.length;ks+=2){const Ta=ia[ks+1];yi.emplaceBack(v.aq[ia[ks]],Ta[0],Ta[1])}return[Ds,yi.length]}(dt.textAnchorOffsets,W2);dt.symbolInstances.emplaceBack(Ct.x,Ct.y,Xa.right>=0?Xa.right:-1,Xa.center>=0?Xa.center:-1,Xa.left>=0?Xa.left:-1,Xa.vertical||-1,vm,xm,I0,j2,V2,U2,$2,q2,G2,H2,Z2,Mi,T0,M0,Wa,Du,z0,0,Xn,na,X2,K2)}(i,ft,Ie,a,s,h,at,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,J,[fe,fe,fe,fe],Ke,C,ye,Ee,vt,F,t,f,A,M,y)};if(We==="line")for(const Ie of h0(t.geometry,0,0,jn,jn)){const ft=k2(Ie,le,ke,a.vertical||O,s,24,ne,i.overscaling,jn);for(const dt of ft)O&&O2(i,O.text,He,dt)||tt(Ie,dt)}else if(We==="line-center"){for(const Ie of t.geometry)if(Ie.length>1){const ft=D2(Ie,ke,a.vertical||O,s,24,ne);ft&&tt(Ie,ft)}}else if(t.type==="Polygon")for(const Ie of ul(t.geometry,0)){const ft=L2(Ie,16);tt(Ie[0],new Po(ft.x,ft.y,0))}else if(t.type==="LineString")for(const Ie of t.geometry)tt(Ie,new Po(Ie[0].x,Ie[0].y,0));else if(t.type==="Point")for(const Ie of t.geometry)for(const ft of Ie)tt([ft],new Po(ft.x,ft.y,0))}function w0(i,t,a,s,h,f,y,x,C,A,M,I,k,F,O){const U=function(ye,le,fe,Ee,ke,Ke,vt,We){const He=Ee.layout.get("text-rotate").evaluate(Ke,{})*Math.PI/180,ht=[];for(const at of le.positionedLines)for(const tt of at.positionedGlyphs){if(!tt.rect)continue;const Ie=tt.rect||{};let ft=O_+1,dt=!0,Ct=1,Qt=0;const Yt=(ke||We)&&tt.vertical,Zn=tt.metrics.advance*tt.scale/2;if(We&&le.verticalizable&&(Qt=at.lineOffset/2-(tt.imageName?-(qn-tt.metrics.width*tt.scale)/2:(tt.scale-1)*qn)),tt.imageName){const Gt=vt[tt.imageName];dt=Gt.sdf,Ct=Gt.pixelRatio,ft=qi/Ct}const Vr=ke?[tt.x+Zn,tt.y]:[0,0];let li=ke?[0,0]:[tt.x+Zn+fe[0],tt.y+fe[1]-Qt],Wn=[0,0];Yt&&(Wn=li,li=[0,0]);const Ti=tt.metrics.isDoubleResolution?2:1,Mi=(tt.metrics.left-ft)*tt.scale-Zn+li[0],Ii=(-tt.metrics.top-ft)*tt.scale+li[1],En=Mi+Ie.w/Ti*tt.scale/Ct,Xn=Ii+Ie.h/Ti*tt.scale/Ct,gi=new j(Mi,Ii),ci=new j(En,Ii),Pi=new j(Mi,Xn),ui=new j(En,Xn);if(Yt){const Gt=new j(-Zn,Zn-Eu),nn=-Math.PI/2,ln=qn/2-Zn,nr=new j(5-Eu-ln,-(tt.imageName?ln:0)),bn=new j(...Wn);gi._rotateAround(nn,Gt)._add(nr)._add(bn),ci._rotateAround(nn,Gt)._add(nr)._add(bn),Pi._rotateAround(nn,Gt)._add(nr)._add(bn),ui._rotateAround(nn,Gt)._add(nr)._add(bn)}if(He){const Gt=Math.sin(He),nn=Math.cos(He),ln=[nn,-Gt,Gt,nn];gi._matMult(ln),ci._matMult(ln),Pi._matMult(ln),ui._matMult(ln)}const Sr=new j(0,0),Gi=new j(0,0);ht.push({tl:gi,tr:ci,bl:Pi,br:ui,tex:Ie,writingMode:le.writingMode,glyphOffset:Vr,sectionIndex:tt.sectionIndex,isSDF:dt,pixelOffsetTL:Sr,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}return ht}(0,a,x,h,f,y,s,i.allowVerticalPlacement),J=i.textSizeData;let ne=null;J.kind==="source"?(ne=[Sa*h.layout.get("text-size").evaluate(y,{})],ne[0]>Mo&&Ot(`${i.layerIds[0]}: Value for "text-size" is >= ${Tu}. Reduce your "text-size".`)):J.kind==="composite"&&(ne=[Sa*F.compositeTextSizes[0].evaluate(y,{},O),Sa*F.compositeTextSizes[1].evaluate(y,{},O)],(ne[0]>Mo||ne[1]>Mo)&&Ot(`${i.layerIds[0]}: Value for "text-size" is >= ${Tu}. Reduce your "text-size".`)),i.addSymbols(i.text,U,ne,x,f,y,A,t,C.lineStartIndex,C.lineLength,k,O);for(const ye of M)I[ye]=i.text.placedSymbolArray.length-1;return 4*U.length}function C0(i){for(const t in i)return i[t];return null}function O2(i,t,a,s){const h=i.compareText;if(t in h){const f=h[t];for(let y=f.length-1;y>=0;y--)if(s.dist(f[y])<a)return!0}else h[t]=[];return h[t].push(s),!1}const S0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hm{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,s]=new Uint8Array(t,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=s>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const f=S0[15&s];if(!f)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new hm(x,y,f,t)}constructor(t,a=64,s=Float64Array,h){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=s,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const f=S0.indexOf(this.ArrayType),y=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-x%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${s}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+C,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+C),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+C,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=t)}add(t,a){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=t,this.coords[this._pos++]=a,s}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return pm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,a,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:y,nodeSize:x}=this,C=[0,f.length-1,0],A=[];for(;C.length;){const M=C.pop()||0,I=C.pop()||0,k=C.pop()||0;if(I-k<=x){for(let J=k;J<=I;J++){const ne=y[2*J],ye=y[2*J+1];ne>=t&&ne<=s&&ye>=a&&ye<=h&&A.push(f[J])}continue}const F=k+I>>1,O=y[2*F],U=y[2*F+1];O>=t&&O<=s&&U>=a&&U<=h&&A.push(f[F]),(M===0?t<=O:a<=U)&&(C.push(k),C.push(F-1),C.push(1-M)),(M===0?s>=O:h>=U)&&(C.push(F+1),C.push(I),C.push(1-M))}return A}within(t,a,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:f,nodeSize:y}=this,x=[0,h.length-1,0],C=[],A=s*s;for(;x.length;){const M=x.pop()||0,I=x.pop()||0,k=x.pop()||0;if(I-k<=y){for(let J=k;J<=I;J++)A0(f[2*J],f[2*J+1],t,a)<=A&&C.push(h[J]);continue}const F=k+I>>1,O=f[2*F],U=f[2*F+1];A0(O,U,t,a)<=A&&C.push(h[F]),(M===0?t-s<=O:a-s<=U)&&(x.push(k),x.push(F-1),x.push(1-M)),(M===0?t+s>=O:a+s>=U)&&(x.push(F+1),x.push(I),x.push(1-M))}return C}}function pm(i,t,a,s,h,f){if(h-s<=a)return;const y=s+h>>1;E0(i,t,y,s,h,f),pm(i,t,a,s,y-1,1-f),pm(i,t,a,y+1,h,1-f)}function E0(i,t,a,s,h,f){for(;h>s;){if(h-s>600){const A=h-s+1,M=a-s+1,I=Math.log(A),k=.5*Math.exp(2*I/3),F=.5*Math.sqrt(I*k*(A-k)/A)*(M-A/2<0?-1:1);E0(i,t,a,Math.max(s,Math.floor(a-M*k/A+F)),Math.min(h,Math.floor(a+(A-M)*k/A+F)),f)}const y=t[2*a+f];let x=s,C=h;for(Pu(i,t,s,a),t[2*h+f]>y&&Pu(i,t,s,h);x<C;){for(Pu(i,t,x,C),x++,C--;t[2*x+f]<y;)x++;for(;t[2*C+f]>y;)C--}t[2*s+f]===y?Pu(i,t,s,C):(C++,Pu(i,t,C,h)),C<=a&&(s=C+1),a<=C&&(h=C-1)}}function Pu(i,t,a,s){fm(i,a,s),fm(t,2*a,2*s),fm(t,2*a+1,2*s+1)}function fm(i,t,a){const s=i[t];i[t]=i[a],i[a]=s}function A0(i,t,a,s){const h=i-a,f=t-s;return h*h+f*f}var mm;v.bf=void 0,(mm=v.bf||(v.bf={})).create="create",mm.load="load",mm.fullLoad="fullLoad";let Lh=null,zu=[];const gm=1e3/60,ym="loadTime",_m="fullLoadTime",N2={mark(i){performance.mark(i)},frame(i){const t=i;Lh!=null&&zu.push(t-Lh),Lh=t},clearMetrics(){Lh=null,zu=[],performance.clearMeasures(ym),performance.clearMeasures(_m);for(const i in v.bf)performance.clearMarks(v.bf[i])},getPerformanceMetrics(){performance.measure(ym,v.bf.create,v.bf.load),performance.measure(_m,v.bf.create,v.bf.fullLoad);const i=performance.getEntriesByName(ym)[0].duration,t=performance.getEntriesByName(_m)[0].duration,a=zu.length,s=1/(zu.reduce((f,y)=>f+y,0)/a/1e3),h=zu.filter(f=>f>gm).reduce((f,y)=>f+(y-gm)/gm,0);return{loadTime:i,fullLoadTime:t,fps:s,percentDroppedFrames:h/(a+h)*100,totalFrames:a}}};v.$=class extends Z{},v.A=Fl,v.B=Ef,v.C=function(i){if(Hn==null){const t=i.navigator?i.navigator.userAgent:null;Hn=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Hn},v.D=e,v.E=Li,v.F=class{constructor(i,t){this.target=i,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new P2(()=>this.process()),this.subscription=function(a,s,h,f){return a.addEventListener(s,h,!1),{unsubscribe:()=>{a.removeEventListener(s,h,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=Ln(self)?i:window}registerMessageHandler(i,t){this.messageHandlers[i]=t}sendAsync(i,t){return new Promise((a,s)=>{const h=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[h]={resolve:a,reject:s},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[h];const x={id:h,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)},{once:!0});const f=[],y=Object.assign(Object.assign({},i),{id:h,sourceMapId:this.mapId,origin:location.origin,data:bs(i.data,f)});this.target.postMessage(y,{transfer:f})})}receive(i){const t=i.data,a=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[a];const s=this.abortControllers[a];return delete this.abortControllers[a],void(s&&s.abort())}if(Ln(self)||t.mustQueue)return this.tasks[a]=t,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,t)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){return u(this,void 0,void 0,function*(){if(t.type==="<response>"){const h=this.resolveRejects[i];return delete this.resolveRejects[i],h?void(t.error?h.reject(ws(t.error)):h.resolve(ws(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=ws(t.data),s=new AbortController;this.abortControllers[i]=s;try{const h=yield this.messageHandlers[t.type](t.sourceMapId,a,s);this.completeTask(i,null,h)}catch(h){this.completeTask(i,h)}})}completeTask(i,t,a){const s=[];delete this.abortControllers[i];const h={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?bs(t):null,data:bs(a,s)};this.target.postMessage(h,{transfer:s})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},v.G=hn,v.H=function(){var i=new Fl(16);return Fl!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},v.I=Qf,v.J=function(i,t,a){var s,h,f,y,x,C,A,M,I,k,F,O,U=a[0],J=a[1],ne=a[2];return t===i?(i[12]=t[0]*U+t[4]*J+t[8]*ne+t[12],i[13]=t[1]*U+t[5]*J+t[9]*ne+t[13],i[14]=t[2]*U+t[6]*J+t[10]*ne+t[14],i[15]=t[3]*U+t[7]*J+t[11]*ne+t[15]):(h=t[1],f=t[2],y=t[3],x=t[4],C=t[5],A=t[6],M=t[7],I=t[8],k=t[9],F=t[10],O=t[11],i[0]=s=t[0],i[1]=h,i[2]=f,i[3]=y,i[4]=x,i[5]=C,i[6]=A,i[7]=M,i[8]=I,i[9]=k,i[10]=F,i[11]=O,i[12]=s*U+x*J+I*ne+t[12],i[13]=h*U+C*J+k*ne+t[13],i[14]=f*U+A*J+F*ne+t[14],i[15]=y*U+M*J+O*ne+t[15]),i},v.K=function(i,t,a){var s=a[0],h=a[1],f=a[2];return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=t[3]*s,i[4]=t[4]*h,i[5]=t[5]*h,i[6]=t[6]*h,i[7]=t[7]*h,i[8]=t[8]*f,i[9]=t[9]*f,i[10]=t[10]*f,i[11]=t[11]*f,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},v.L=o_,v.M=function(i,t){const a={};for(let s=0;s<t.length;s++){const h=t[s];h in i&&(a[h]=i[h])}return a},v.N=Io,v.O=t0,v.P=j,v.Q=n0,v.R=wr,v.S=Cr,v.T=Co,v.U=ae,v.V=ie,v.W=ut,v.X=jn,v.Y=B,v.Z=Mu,v._=u,v.a=yn,v.a$=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},v.a0=Qn,v.a1=cm,v.a2=Ne,v.a3=i=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(a=>{t.onloadstart=()=>{a(t)};for(const s of i){const h=window.document.createElement("source");lr(s)||(t.crossOrigin="Anonymous"),h.src=s,t.appendChild(h)}})},v.a4=function(){return pe++},v.a5=ii,v.a6=Ul,v.a7=yo,v.a8=Ps,v.a9=l0,v.aA=function(i){if(i.type==="custom")return new I2(i);switch(i.type){case"background":return new A2(i);case"circle":return new pw(i);case"fill":return new Pw(i);case"fill-extrusion":return new Gw(i);case"heatmap":return new mw(i);case"hillshade":return new yw(i);case"line":return new Qw(i);case"raster":return new M2(i);case"symbol":return new Ph(i)}},v.aB=ot,v.aC=function(i,t){if(!i)return[{command:"setStyle",args:[t]}];let a=[];try{if(!$t(i.version,t.version))return[{command:"setStyle",args:[t]}];$t(i.center,t.center)||a.push({command:"setCenter",args:[t.center]}),$t(i.zoom,t.zoom)||a.push({command:"setZoom",args:[t.zoom]}),$t(i.bearing,t.bearing)||a.push({command:"setBearing",args:[t.bearing]}),$t(i.pitch,t.pitch)||a.push({command:"setPitch",args:[t.pitch]}),$t(i.sprite,t.sprite)||a.push({command:"setSprite",args:[t.sprite]}),$t(i.glyphs,t.glyphs)||a.push({command:"setGlyphs",args:[t.glyphs]}),$t(i.transition,t.transition)||a.push({command:"setTransition",args:[t.transition]}),$t(i.light,t.light)||a.push({command:"setLight",args:[t.light]}),$t(i.terrain,t.terrain)||a.push({command:"setTerrain",args:[t.terrain]}),$t(i.sky,t.sky)||a.push({command:"setSky",args:[t.sky]}),$t(i.projection,t.projection)||a.push({command:"setProjection",args:[t.projection]});const s={},h=[];(function(y,x,C,A){let M;for(M in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,M)&&(Object.prototype.hasOwnProperty.call(x,M)||Lr(M,C,A));for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(y,M)?$t(y[M],x[M])||(y[M].type==="geojson"&&x[M].type==="geojson"&&fa(y,x,M)?un(C,{command:"setGeoJSONSourceData",args:[M,x[M].data]}):ur(M,x,C,A)):pa(M,x,C))})(i.sources,t.sources,h,s);const f=[];i.layers&&i.layers.forEach(y=>{"source"in y&&s[y.source]?a.push({command:"removeLayer",args:[y.id]}):f.push(y)}),a=a.concat(h),function(y,x,C){x=x||[];const A=(y=y||[]).map(dr),M=x.map(dr),I=y.reduce(hr,{}),k=x.reduce(hr,{}),F=A.slice(),O=Object.create(null);let U,J,ne,ye,le;for(let fe=0,Ee=0;fe<A.length;fe++)U=A[fe],Object.prototype.hasOwnProperty.call(k,U)?Ee++:(un(C,{command:"removeLayer",args:[U]}),F.splice(F.indexOf(U,Ee),1));for(let fe=0,Ee=0;fe<M.length;fe++)U=M[M.length-1-fe],F[F.length-1-fe]!==U&&(Object.prototype.hasOwnProperty.call(I,U)?(un(C,{command:"removeLayer",args:[U]}),F.splice(F.lastIndexOf(U,F.length-Ee),1)):Ee++,ye=F[F.length-fe],un(C,{command:"addLayer",args:[k[U],ye]}),F.splice(F.length-fe,0,U),O[U]=!0);for(let fe=0;fe<M.length;fe++)if(U=M[fe],J=I[U],ne=k[U],!O[U]&&!$t(J,ne))if($t(J.source,ne.source)&&$t(J["source-layer"],ne["source-layer"])&&$t(J.type,ne.type)){for(le in bi(J.layout,ne.layout,C,U,null,"setLayoutProperty"),bi(J.paint,ne.paint,C,U,null,"setPaintProperty"),$t(J.filter,ne.filter)||un(C,{command:"setFilter",args:[U,ne.filter]}),$t(J.minzoom,ne.minzoom)&&$t(J.maxzoom,ne.maxzoom)||un(C,{command:"setLayerZoomRange",args:[U,ne.minzoom,ne.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?bi(J[le],ne[le],C,U,le.slice(6),"setPaintProperty"):$t(J[le],ne[le])||un(C,{command:"setLayerProperty",args:[U,le,ne[le]]}));for(le in ne)Object.prototype.hasOwnProperty.call(ne,le)&&!Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?bi(J[le],ne[le],C,U,le.slice(6),"setPaintProperty"):$t(J[le],ne[le])||un(C,{command:"setLayerProperty",args:[U,le,ne[le]]}))}else un(C,{command:"removeLayer",args:[U]}),ye=F[F.lastIndexOf(U)+1],un(C,{command:"addLayer",args:[ne,ye]})}(f,t.layers,a)}catch(s){console.warn("Unable to compute style diff:",s),a=[{command:"setStyle",args:[t]}]}return a},v.aD=function(i){const t=[],a=i.id;return a===void 0&&t.push({message:`layers.${a}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${a}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),t},v.aE=function i(t,a){if(Array.isArray(t)){if(!Array.isArray(a)||t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],a[s]))return!1;return!0}if(typeof t=="object"&&t!==null&&a!==null){if(typeof a!="object"||Object.keys(t).length!==Object.keys(a).length)return!1;for(const s in t)if(!i(t[s],a[s]))return!1;return!0}return t===a},v.aF=pt,v.aG=ct,v.aH=class extends Ts{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},v.aI=yh,v.aJ=class extends Ts{constructor(i,t){super(i,t),this.current=aw}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},v.aK=Xy,v.aL=Ky,v.aM=Et,v.aN=class extends Ts{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},v.aO=class extends Ts{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},v.aP=function(i,t,a,s,h,f,y){var x=1/(t-a),C=1/(s-h),A=1/(f-y);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*C,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*A,i[11]=0,i[12]=(t+a)*x,i[13]=(h+s)*C,i[14]=(y+f)*A,i[15]=1,i},v.aQ=hw,v.aR=class extends Ye{},v.aS=i2,v.aT=class extends je{},v.aU=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},v.aV=d_,v.aW=xa,v.aX=wa,v.aY=class extends zt{},v.aZ=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]&&i[6]===t[6]&&i[7]===t[7]&&i[8]===t[8]&&i[9]===t[9]&&i[10]===t[10]&&i[11]===t[11]&&i[12]===t[12]&&i[13]===t[13]&&i[14]===t[14]&&i[15]===t[15]},v.a_=function(i,t){var a=i[0],s=i[1],h=i[2],f=i[3],y=i[4],x=i[5],C=i[6],A=i[7],M=i[8],I=i[9],k=i[10],F=i[11],O=i[12],U=i[13],J=i[14],ne=i[15],ye=t[0],le=t[1],fe=t[2],Ee=t[3],ke=t[4],Ke=t[5],vt=t[6],We=t[7],He=t[8],ht=t[9],at=t[10],tt=t[11],Ie=t[12],ft=t[13],dt=t[14],Ct=t[15];return Math.abs(a-ye)<=Ai*Math.max(1,Math.abs(a),Math.abs(ye))&&Math.abs(s-le)<=Ai*Math.max(1,Math.abs(s),Math.abs(le))&&Math.abs(h-fe)<=Ai*Math.max(1,Math.abs(h),Math.abs(fe))&&Math.abs(f-Ee)<=Ai*Math.max(1,Math.abs(f),Math.abs(Ee))&&Math.abs(y-ke)<=Ai*Math.max(1,Math.abs(y),Math.abs(ke))&&Math.abs(x-Ke)<=Ai*Math.max(1,Math.abs(x),Math.abs(Ke))&&Math.abs(C-vt)<=Ai*Math.max(1,Math.abs(C),Math.abs(vt))&&Math.abs(A-We)<=Ai*Math.max(1,Math.abs(A),Math.abs(We))&&Math.abs(M-He)<=Ai*Math.max(1,Math.abs(M),Math.abs(He))&&Math.abs(I-ht)<=Ai*Math.max(1,Math.abs(I),Math.abs(ht))&&Math.abs(k-at)<=Ai*Math.max(1,Math.abs(k),Math.abs(at))&&Math.abs(F-tt)<=Ai*Math.max(1,Math.abs(F),Math.abs(tt))&&Math.abs(O-Ie)<=Ai*Math.max(1,Math.abs(O),Math.abs(Ie))&&Math.abs(U-ft)<=Ai*Math.max(1,Math.abs(U),Math.abs(ft))&&Math.abs(J-dt)<=Ai*Math.max(1,Math.abs(J),Math.abs(dt))&&Math.abs(ne-Ct)<=Ai*Math.max(1,Math.abs(ne),Math.abs(Ct))},v.aa=function(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,s,h,f)=>{const y=h||f;return t[s]=!y||y.toLowerCase(),""}),t["max-age"]){const a=parseInt(t["max-age"],10);isNaN(a)?delete t["max-age"]:t["max-age"]=a}return t},v.ab=function(i,t){const a=[];for(const s in i)s in t||a.push(s);return a},v.ac=Re,v.ad=function(i,t,a){var s=Math.sin(a),h=Math.cos(a),f=t[0],y=t[1],x=t[2],C=t[3],A=t[4],M=t[5],I=t[6],k=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=f*h+A*s,i[1]=y*h+M*s,i[2]=x*h+I*s,i[3]=C*h+k*s,i[4]=A*h-f*s,i[5]=M*h-y*s,i[6]=I*h-x*s,i[7]=k*h-C*s,i},v.ae=function(i){var t=new Fl(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},v.af=bh,v.ag=function(i,t){let a=0,s=0;if(i.kind==="constant")s=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:h,minZoom:f,maxZoom:y}=i,x=h?Re(ji.interpolationFactor(h,t,f,y),0,1):0;i.kind==="camera"?s=Ni.number(i.minSize,i.maxSize,x):a=x}return{uSizeT:a,uSize:s}},v.ai=function(i,{uSize:t,uSizeT:a},{lowerSize:s,upperSize:h}){return i.kind==="source"?s/Sa:i.kind==="composite"?Ni.number(s/Sa,h/Sa,a):t},v.aj=im,v.ak=function(i,t,a,s){const h=t.y-i.y,f=t.x-i.x,y=s.y-a.y,x=s.x-a.x,C=y*f-x*h;if(C===0)return null;const A=(x*(i.y-a.y)-y*(i.x-a.x))/C;return new j(i.x+A*f,i.y+A*h)},v.al=h0,v.am=e_,v.an=Nf,v.ao=function(i){let t=1/0,a=1/0,s=-1/0,h=-1/0;for(const f of i)t=Math.min(t,f.x),a=Math.min(a,f.y),s=Math.max(s,f.x),h=Math.max(h,f.y);return[t,a,s,h]},v.ap=qn,v.ar=nm,v.as=function(i,t){var a=t[0],s=t[1],h=t[2],f=t[3],y=t[4],x=t[5],C=t[6],A=t[7],M=t[8],I=t[9],k=t[10],F=t[11],O=t[12],U=t[13],J=t[14],ne=t[15],ye=a*x-s*y,le=a*C-h*y,fe=a*A-f*y,Ee=s*C-h*x,ke=s*A-f*x,Ke=h*A-f*C,vt=M*U-I*O,We=M*J-k*O,He=M*ne-F*O,ht=I*J-k*U,at=I*ne-F*U,tt=k*ne-F*J,Ie=ye*tt-le*at+fe*ht+Ee*He-ke*We+Ke*vt;return Ie?(i[0]=(x*tt-C*at+A*ht)*(Ie=1/Ie),i[1]=(h*at-s*tt-f*ht)*Ie,i[2]=(U*Ke-J*ke+ne*Ee)*Ie,i[3]=(k*ke-I*Ke-F*Ee)*Ie,i[4]=(C*He-y*tt-A*We)*Ie,i[5]=(a*tt-h*He+f*We)*Ie,i[6]=(J*fe-O*Ke-ne*le)*Ie,i[7]=(M*Ke-k*fe+F*le)*Ie,i[8]=(y*at-x*He+A*vt)*Ie,i[9]=(s*He-a*at-f*vt)*Ie,i[10]=(O*ke-U*fe+ne*ye)*Ie,i[11]=(I*fe-M*ke-F*ye)*Ie,i[12]=(x*We-y*ht-C*vt)*Ie,i[13]=(a*ht-s*We+h*vt)*Ie,i[14]=(U*le-O*Ee-J*ye)*Ie,i[15]=(M*Ee-I*le+k*ye)*Ie,i):null},v.at=dm,v.au=tm,v.av=hm,v.aw=function(){const i={},t=be.$version;for(const a in be.$root){const s=be.$root[a];if(s.required){let h=null;h=a==="version"?t:s.type==="array"?[]:{},h!=null&&(i[a]=h)}}return i},v.ax=$a,v.ay=$n,v.az=function(i){i=i.slice();const t=Object.create(null);for(let a=0;a<i.length;a++)t[i[a].id]=i[a];for(let a=0;a<i.length;a++)"ref"in i[a]&&(i[a]=Fi(i[a],t[i[a].ref]));return i},v.b=Un,v.b0=function(i,t,a){return i[0]=t[0]*a[0],i[1]=t[1]*a[1],i[2]=t[2]*a[2],i[3]=t[3]*a[3],i},v.b1=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},v.b2=Xe,v.b3=a0,v.b4=i0,v.b5=function(i,t,a,s,h){var f,y=1/Math.tan(t/2);return i[0]=y/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,h!=null&&h!==1/0?(i[10]=(h+s)*(f=1/(s-h)),i[14]=2*h*s*f):(i[10]=-1,i[14]=-2*s),i},v.b6=function(i,t,a){var s=Math.sin(a),h=Math.cos(a),f=t[4],y=t[5],x=t[6],C=t[7],A=t[8],M=t[9],I=t[10],k=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=f*h+A*s,i[5]=y*h+M*s,i[6]=x*h+I*s,i[7]=C*h+k*s,i[8]=A*h-f*s,i[9]=M*h-y*s,i[10]=I*h-x*s,i[11]=k*h-C*s,i},v.b7=ce,v.b8=Ae,v.b9=function(i){return i*Math.PI/180},v.bA=function(i){return i.message===Nt},v.bB=ms,v.bC=Nr,v.ba=function(i,t){const{x:a,y:s}=Mu.fromLngLat(t);return!(i<0||i>25||s<0||s>=1||a<0||a>=1)},v.bb=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},v.bc=class extends Y{},v.bd=sm,v.be=N2,v.bg=an,v.bh=function(i,t){yn.REGISTERED_PROTOCOLS[i]=t},v.bi=function(i){delete yn.REGISTERED_PROTOCOLS[i]},v.bj=function(i,t){const a={};for(let h=0;h<i.length;h++){const f=t&&t[i[h].id]||Sf(i[h]);t&&(t[i[h].id]=f);let y=a[f];y||(y=a[f]=[]),y.push(i[h])}const s=[];for(const h in a)s.push(a[h]);return s},v.bk=et,v.bl=s0,v.bm=c0,v.bn=j_,v.bo=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=jn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0],a=t.layout,s=t._unevaluatedLayout._values,h={layoutIconSize:s["icon-size"].possiblyEvaluate(new Kt(i.bucket.zoom+1),i.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new Kt(i.bucket.zoom+1),i.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new Kt(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:M}=i.bucket.textSizeData;h.compositeTextSizes=[s["text-size"].possiblyEvaluate(new Kt(A),i.canonical),s["text-size"].possiblyEvaluate(new Kt(M),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:M}=i.bucket.iconSizeData;h.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new Kt(A),i.canonical),s["icon-size"].possiblyEvaluate(new Kt(M),i.canonical)]}const f=a.get("text-line-height")*qn,y=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",x=a.get("text-keep-upright"),C=a.get("text-size");for(const A of i.bucket.features){const M=a.get("text-font").evaluate(A,{},i.canonical).join(","),I=C.evaluate(A,{},i.canonical),k=h.layoutTextSize.evaluate(A,{},i.canonical),F=h.layoutIconSize.evaluate(A,{},i.canonical),O={horizontal:{},vertical:void 0},U=A.text;let J,ne=[0,0];if(U){const fe=U.toString(),Ee=a.get("text-letter-spacing").evaluate(A,{},i.canonical)*qn,ke=Tf(fe)?Ee:0,Ke=a.get("text-anchor").evaluate(A,{},i.canonical),vt=b0(t,A,i.canonical);if(!vt){const at=a.get("text-radial-offset").evaluate(A,{},i.canonical);ne=at?x0(Ke,[at*qn,um]):a.get("text-offset").evaluate(A,{},i.canonical).map(tt=>tt*qn)}let We=y?"center":a.get("text-justify").evaluate(A,{},i.canonical);const He=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(A,{},i.canonical)*qn:1/0,ht=()=>{i.bucket.allowVerticalPlacement&&au(fe)&&(O.vertical=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,He,f,Ke,"left",ke,ne,v.ah.vertical,!0,k,I))};if(!y&&vt){const at=new Set;if(We==="auto")for(let Ie=0;Ie<vt.values.length;Ie+=2)at.add(dm(vt.values[Ie]));else at.add(We);let tt=!1;for(const Ie of at)if(!O.horizontal[Ie])if(tt)O.horizontal[Ie]=O.horizontal[0];else{const ft=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,He,f,"center",Ie,ke,ne,v.ah.horizontal,!1,k,I);ft&&(O.horizontal[Ie]=ft,tt=ft.positionedLines.length===1)}ht()}else{We==="auto"&&(We=dm(Ke));const at=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,He,f,Ke,We,ke,ne,v.ah.horizontal,!1,k,I);at&&(O.horizontal[We]=at),ht(),au(fe)&&y&&x&&(O.vertical=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,He,f,Ke,We,ke,ne,v.ah.vertical,!1,k,I))}}let ye=!1;if(A.icon&&A.icon.name){const fe=i.imageMap[A.icon.name];fe&&(J=b2(i.imagePositions[A.icon.name],a.get("icon-offset").evaluate(A,{},i.canonical),a.get("icon-anchor").evaluate(A,{},i.canonical)),ye=!!fe.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=ye:i.bucket.sdfIcons!==ye&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fe.pixelRatio!==i.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const le=C0(O.horizontal)||O.vertical;i.bucket.iconsInText=!!le&&le.iconsInText,(le||J)&&B2(i.bucket,A,O,J,i.imageMap,h,k,F,ne,ye,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},v.bp=Xf,v.bq=Hf,v.br=Wf,v.bs=Ao,v.bt=Jf,v.bu=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},v.bv=function(i,t,a,s,h){return u(this,void 0,void 0,function*(){if(ie())try{return yield ut(i,t,a,s,h)}catch{}return function(f,y,x,C,A){const M=f.width,I=f.height;bt&&kt||(bt=new OffscreenCanvas(M,I),kt=bt.getContext("2d",{willReadFrequently:!0})),bt.width=M,bt.height=I,kt.drawImage(f,0,0,M,I);const k=kt.getImageData(y,x,C,A);return kt.clearRect(0,0,M,I),k.data}(i,t,a,s,h)})},v.bw=o0,v.bx=D,v.by=V,v.bz=z_,v.c=Tn,v.d=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(t)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),v.e=Qe,v.f=i=>new Promise((t,a)=>{const s=new Image;s.onload=()=>{t(s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=rt})},s.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(i)],{type:"image/png"});s.src=i.byteLength?URL.createObjectURL(h):rt}),v.g=Fn,v.h=(i,t)=>Xr(Qe(i,{type:"json"}),t),v.i=Ln,v.j=pn,v.k=Rr,v.l=(i,t)=>Xr(Qe(i,{type:"arrayBuffer"}),t),v.m=Xr,v.n=function(i){return new Jf(i).readFields(f2,[])},v.o=_u,v.p=N_,v.q=w,v.r=Il,v.s=lr,v.t=sh,v.u=Ua,v.v=be,v.w=Ot,v.x=function([i,t,a]){return t+=90,t*=Math.PI/180,a*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(a),y:i*Math.sin(t)*Math.sin(a),z:i*Math.cos(a)}},v.y=Ni,v.z=Kt}),_("worker",["./shared"],function(v){class u{constructor(R){this.keyCache={},R&&this.replace(R)}replace(R){this._layerConfigs={},this._layers={},this.update(R,[])}update(R,L){for(const X of R){this._layerConfigs[X.id]=X;const se=this._layers[X.id]=v.aA(X);se._featureFilter=v.a7(se.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(const X of L)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};const $=v.bj(Object.values(this._layerConfigs),this.keyCache);for(const X of $){const se=X.map(ve=>this._layers[ve.id]),de=se[0];if(de.visibility==="none")continue;const me=de.source||"";let re=this.familiesBySource[me];re||(re=this.familiesBySource[me]={});const Se=de.sourceLayer||"_geojsonTileLayer";let ze=re[Se];ze||(ze=re[Se]=[]),ze.push(se)}}}class D{constructor(R){const L={},$=[];for(const me in R){const re=R[me],Se=L[me]={};for(const ze in re){const ve=re[+ze];if(!ve||ve.bitmap.width===0||ve.bitmap.height===0)continue;const H={x:0,y:0,w:ve.bitmap.width+2,h:ve.bitmap.height+2};$.push(H),Se[ze]={rect:H,metrics:ve.metrics}}}const{w:X,h:se}=v.p($),de=new v.o({width:X||1,height:se||1});for(const me in R){const re=R[me];for(const Se in re){const ze=re[+Se];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const ve=L[me][Se].rect;v.o.copy(ze.bitmap,de,{x:0,y:0},{x:ve.x+1,y:ve.y+1},ze.bitmap)}}this.image=de,this.positions=L}}v.bk("GlyphAtlas",D);class V{constructor(R){this.tileID=new v.S(R.tileID.overscaledZ,R.tileID.wrap,R.tileID.canonical.z,R.tileID.canonical.x,R.tileID.canonical.y),this.uid=R.uid,this.zoom=R.zoom,this.pixelRatio=R.pixelRatio,this.tileSize=R.tileSize,this.source=R.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=R.showCollisionBoxes,this.collectResourceTiming=!!R.collectResourceTiming,this.returnDependencies=!!R.returnDependencies,this.promoteId=R.promoteId,this.inFlightDependencies=[]}parse(R,L,$,X){return v._(this,void 0,void 0,function*(){this.status="parsing",this.data=R,this.collisionBoxArray=new v.a5;const se=new v.bl(Object.keys(R.layers).sort()),de=new v.bm(this.tileID,this.promoteId);de.bucketLayerIDs=[];const me={},re={featureIndex:de,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:$},Se=L.familiesBySource[this.source];for(const Ve in Se){const st=R.layers[Ve];if(!st)continue;st.version===1&&v.w(`Vector tile source "${this.source}" layer "${Ve}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xt=se.encode(Ve),Tt=[];for(let Dt=0;Dt<st.length;Dt++){const Mt=st.feature(Dt),_n=de.getId(Mt,Ve);Tt.push({feature:Mt,id:_n,index:Dt,sourceLayerIndex:xt})}for(const Dt of Se[Ve]){const Mt=Dt[0];Mt.source!==this.source&&v.w(`layer.source = ${Mt.source} does not equal this.source = ${this.source}`),Mt.minzoom&&this.zoom<Math.floor(Mt.minzoom)||Mt.maxzoom&&this.zoom>=Mt.maxzoom||Mt.visibility!=="none"&&(W(Dt,this.zoom,$),(me[Mt.id]=Mt.createBucket({index:de.bucketLayerIDs.length,layers:Dt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xt,sourceID:this.source})).populate(Tt,re,this.tileID.canonical),de.bucketLayerIDs.push(Dt.map(_n=>_n.id)))}}const ze=v.aF(re.glyphDependencies,Ve=>Object.keys(Ve).map(Number));this.inFlightDependencies.forEach(Ve=>Ve==null?void 0:Ve.abort()),this.inFlightDependencies=[];let ve=Promise.resolve({});if(Object.keys(ze).length){const Ve=new AbortController;this.inFlightDependencies.push(Ve),ve=X.sendAsync({type:"GG",data:{stacks:ze,source:this.source,tileID:this.tileID,type:"glyphs"}},Ve)}const H=Object.keys(re.iconDependencies);let ee=Promise.resolve({});if(H.length){const Ve=new AbortController;this.inFlightDependencies.push(Ve),ee=X.sendAsync({type:"GI",data:{icons:H,source:this.source,tileID:this.tileID,type:"icons"}},Ve)}const ue=Object.keys(re.patternDependencies);let xe=Promise.resolve({});if(ue.length){const Ve=new AbortController;this.inFlightDependencies.push(Ve),xe=X.sendAsync({type:"GI",data:{icons:ue,source:this.source,tileID:this.tileID,type:"patterns"}},Ve)}const[Le,De,nt]=yield Promise.all([ve,ee,xe]),Fe=new D(Le),gt=new v.bn(De,nt);for(const Ve in me){const st=me[Ve];st instanceof v.a6?(W(st.layers,this.zoom,$),v.bo({bucket:st,glyphMap:Le,glyphPositions:Fe.positions,imageMap:De,imagePositions:gt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):st.hasPattern&&(st instanceof v.bp||st instanceof v.bq||st instanceof v.br)&&(W(st.layers,this.zoom,$),st.addFeatures(re,this.tileID.canonical,gt.patternPositions))}return this.status="done",{buckets:Object.values(me).filter(Ve=>!Ve.isEmpty()),featureIndex:de,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fe.image,imageAtlas:gt,glyphMap:this.returnDependencies?Le:null,iconMap:this.returnDependencies?De:null,glyphPositions:this.returnDependencies?Fe.positions:null}})}}function W(Q,R,L){const $=new v.z(R);for(const X of Q)X.recalculate($,L)}class j{constructor(R,L,$){this.actor=R,this.layerIndex=L,this.availableImages=$,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(R,L){return v._(this,void 0,void 0,function*(){const $=yield v.l(R.request,L);try{return{vectorTile:new v.bs.VectorTile(new v.bt($.data)),rawData:$.data,cacheControl:$.cacheControl,expires:$.expires}}catch(X){const se=new Uint8Array($.data);let de=`Unable to parse the tile at ${R.request.url}, `;throw de+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${X.message}`,new Error(de)}})}loadTile(R){return v._(this,void 0,void 0,function*(){const L=R.uid,$=!!(R&&R.request&&R.request.collectResourceTiming)&&new v.bu(R.request),X=new V(R);this.loading[L]=X;const se=new AbortController;X.abort=se;try{const de=yield this.loadVectorTile(R,se);if(delete this.loading[L],!de)return null;const me=de.rawData,re={};de.expires&&(re.expires=de.expires),de.cacheControl&&(re.cacheControl=de.cacheControl);const Se={};if($){const ve=$.finish();ve&&(Se.resourceTiming=JSON.parse(JSON.stringify(ve)))}X.vectorTile=de.vectorTile;const ze=X.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[L]=X,this.fetching[L]={rawTileData:me,cacheControl:re,resourceTiming:Se};try{const ve=yield ze;return v.e({rawTileData:me.slice(0)},ve,re,Se)}finally{delete this.fetching[L]}}catch(de){throw delete this.loading[L],X.status="done",this.loaded[L]=X,de}})}reloadTile(R){return v._(this,void 0,void 0,function*(){const L=R.uid;if(!this.loaded||!this.loaded[L])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const $=this.loaded[L];if($.showCollisionBoxes=R.showCollisionBoxes,$.status==="parsing"){const X=yield $.parse($.vectorTile,this.layerIndex,this.availableImages,this.actor);let se;if(this.fetching[L]){const{rawTileData:de,cacheControl:me,resourceTiming:re}=this.fetching[L];delete this.fetching[L],se=v.e({rawTileData:de.slice(0)},X,me,re)}else se=X;return se}if($.status==="done"&&$.vectorTile)return $.parse($.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(R){return v._(this,void 0,void 0,function*(){const L=this.loading,$=R.uid;L&&L[$]&&L[$].abort&&(L[$].abort.abort(),delete L[$])})}removeTile(R){return v._(this,void 0,void 0,function*(){this.loaded&&this.loaded[R.uid]&&delete this.loaded[R.uid]})}}class N{constructor(){this.loaded={}}loadTile(R){return v._(this,void 0,void 0,function*(){const{uid:L,encoding:$,rawImageData:X,redFactor:se,greenFactor:de,blueFactor:me,baseShift:re}=R,Se=X.width+2,ze=X.height+2,ve=v.b(X)?new v.R({width:Se,height:ze},yield v.bv(X,-1,-1,Se,ze)):X,H=new v.bw(L,ve,$,se,de,me,re);return this.loaded=this.loaded||{},this.loaded[L]=H,H})}removeTile(R){const L=this.loaded,$=R.uid;L&&L[$]&&delete L[$]}}function Te(Q,R){if(Q.length!==0){Ce(Q[0],R);for(var L=1;L<Q.length;L++)Ce(Q[L],!R)}}function Ce(Q,R){for(var L=0,$=0,X=0,se=Q.length,de=se-1;X<se;de=X++){var me=(Q[X][0]-Q[de][0])*(Q[de][1]+Q[X][1]),re=L+me;$+=Math.abs(L)>=Math.abs(me)?L-re+me:me-re+L,L=re}L+$>=0!=!!R&&Q.reverse()}var we=v.bx(function Q(R,L){var $,X=R&&R.type;if(X==="FeatureCollection")for($=0;$<R.features.length;$++)Q(R.features[$],L);else if(X==="GeometryCollection")for($=0;$<R.geometries.length;$++)Q(R.geometries[$],L);else if(X==="Feature")Q(R.geometry,L);else if(X==="Polygon")Te(R.coordinates,L);else if(X==="MultiPolygon")for($=0;$<R.coordinates.length;$++)Te(R.coordinates[$],L);return R});const qe=v.bs.VectorTileFeature.prototype.toGeoJSON;var ae={exports:{}},ie=v.by,ce=v.bs.VectorTileFeature,Ae=Re;function Re(Q,R){this.options=R||{},this.features=Q,this.length=Q.length}function Xe(Q,R){this.id=typeof Q.id=="number"?Q.id:void 0,this.type=Q.type,this.rawGeometry=Q.type===1?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=R||4096}Re.prototype.feature=function(Q){return new Xe(this.features[Q],this.options.extent)},Xe.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var R=0;R<Q.length;R++){for(var L=Q[R],$=[],X=0;X<L.length;X++)$.push(new ie(L[X][0],L[X][1]));this.geometry.push($)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,R=1/0,L=-1/0,$=1/0,X=-1/0,se=0;se<Q.length;se++)for(var de=Q[se],me=0;me<de.length;me++){var re=de[me];R=Math.min(R,re.x),L=Math.max(L,re.x),$=Math.min($,re.y),X=Math.max(X,re.y)}return[R,$,L,X]},Xe.prototype.toGeoJSON=ce.prototype.toGeoJSON;var Qe=v.bz,pe=Ae;function pt(Q){var R=new Qe;return function(L,$){for(var X in L.layers)$.writeMessage(3,ct,L.layers[X])}(Q,R),R.finish()}function ct(Q,R){var L;R.writeVarintField(15,Q.version||1),R.writeStringField(1,Q.name||""),R.writeVarintField(5,Q.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(L=0;L<Q.length;L++)$.feature=Q.feature(L),R.writeMessage(2,ot,$);var X=$.keys;for(L=0;L<X.length;L++)R.writeStringField(3,X[L]);var se=$.values;for(L=0;L<se.length;L++)R.writeMessage(4,Hn,se[L])}function ot(Q,R){var L=Q.feature;L.id!==void 0&&R.writeVarintField(1,L.id),R.writeMessage(2,Xt,Q),R.writeVarintField(3,L.type),R.writeMessage(4,Ln,L)}function Xt(Q,R){var L=Q.feature,$=Q.keys,X=Q.values,se=Q.keycache,de=Q.valuecache;for(var me in L.properties){var re=L.properties[me],Se=se[me];if(re!==null){Se===void 0&&($.push(me),se[me]=Se=$.length-1),R.writeVarint(Se);var ze=typeof re;ze!=="string"&&ze!=="boolean"&&ze!=="number"&&(re=JSON.stringify(re));var ve=ze+":"+re,H=de[ve];H===void 0&&(X.push(re),de[ve]=H=X.length-1),R.writeVarint(H)}}}function Ot(Q,R){return(R<<3)+(7&Q)}function Ft(Q){return Q<<1^Q>>31}function Ln(Q,R){for(var L=Q.loadGeometry(),$=Q.type,X=0,se=0,de=L.length,me=0;me<de;me++){var re=L[me],Se=1;$===1&&(Se=re.length),R.writeVarint(Ot(1,Se));for(var ze=$===3?re.length-1:re.length,ve=0;ve<ze;ve++){ve===1&&$!==1&&R.writeVarint(Ot(2,ze-1));var H=re[ve].x-X,ee=re[ve].y-se;R.writeVarint(Ft(H)),R.writeVarint(Ft(ee)),X+=H,se+=ee}$===3&&R.writeVarint(Ot(7,1))}}function Hn(Q,R){var L=typeof Q;L==="string"?R.writeStringField(1,Q):L==="boolean"?R.writeBooleanField(7,Q):L==="number"&&(Q%1!=0?R.writeDoubleField(3,Q):Q<0?R.writeSVarintField(6,Q):R.writeVarintField(5,Q))}ae.exports=pt,ae.exports.fromVectorTileJs=pt,ae.exports.fromGeojsonVt=function(Q,R){R=R||{};var L={};for(var $ in Q)L[$]=new pe(Q[$].features,R),L[$].name=$,L[$].version=R.version,L[$].extent=R.extent;return pt({layers:L})},ae.exports.GeoJSONWrapper=pe;var Un=v.bx(ae.exports);const rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},ut=Math.fround||(bt=new Float32Array(1),Q=>(bt[0]=+Q,bt[0]));var bt;const kt=3,Nt=5,Tn=6;class yn{constructor(R){this.options=Object.assign(Object.create(rt),R),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(R){const{log:L,minZoom:$,maxZoom:X}=this.options;L&&console.time("total time");const se=`prepare ${R.length} points`;L&&console.time(se),this.points=R;const de=[];for(let re=0;re<R.length;re++){const Se=R[re];if(!Se.geometry)continue;const[ze,ve]=Se.geometry.coordinates,H=ut(an(ze)),ee=ut($n(ve));de.push(H,ee,1/0,re,-1,1),this.options.reduce&&de.push(0)}let me=this.trees[X+1]=this._createTree(de);L&&console.timeEnd(se);for(let re=X;re>=$;re--){const Se=+Date.now();me=this.trees[re]=this._createTree(this._cluster(me,re)),L&&console.log("z%d: %d clusters in %dms",re,me.numItems,+Date.now()-Se)}return L&&console.timeEnd("total time"),this}getClusters(R,L){let $=((R[0]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,R[1]));let se=R[2]===180?180:((R[2]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,R[3]));if(R[2]-R[0]>=360)$=-180,se=180;else if($>se){const ve=this.getClusters([$,X,180,de],L),H=this.getClusters([-180,X,se,de],L);return ve.concat(H)}const me=this.trees[this._limitZoom(L)],re=me.range(an($),$n(de),an(se),$n(X)),Se=me.data,ze=[];for(const ve of re){const H=this.stride*ve;ze.push(Se[H+Nt]>1?Fn(Se,H,this.clusterProps):this.points[Se[H+kt]])}return ze}getChildren(R){const L=this._getOriginId(R),$=this._getOriginZoom(R),X="No cluster with the specified id.",se=this.trees[$];if(!se)throw new Error(X);const de=se.data;if(L*this.stride>=de.length)throw new Error(X);const me=this.options.radius/(this.options.extent*Math.pow(2,$-1)),re=se.within(de[L*this.stride],de[L*this.stride+1],me),Se=[];for(const ze of re){const ve=ze*this.stride;de[ve+4]===R&&Se.push(de[ve+Nt]>1?Fn(de,ve,this.clusterProps):this.points[de[ve+kt]])}if(Se.length===0)throw new Error(X);return Se}getLeaves(R,L,$){const X=[];return this._appendLeaves(X,R,L=L||10,$=$||0,0),X}getTile(R,L,$){const X=this.trees[this._limitZoom(R)],se=Math.pow(2,R),{extent:de,radius:me}=this.options,re=me/de,Se=($-re)/se,ze=($+1+re)/se,ve={features:[]};return this._addTileFeatures(X.range((L-re)/se,Se,(L+1+re)/se,ze),X.data,L,$,se,ve),L===0&&this._addTileFeatures(X.range(1-re/se,Se,1,ze),X.data,se,$,se,ve),L===se-1&&this._addTileFeatures(X.range(0,Se,re/se,ze),X.data,-1,$,se,ve),ve.features.length?ve:null}getClusterExpansionZoom(R){let L=this._getOriginZoom(R)-1;for(;L<=this.options.maxZoom;){const $=this.getChildren(R);if(L++,$.length!==1)break;R=$[0].properties.cluster_id}return L}_appendLeaves(R,L,$,X,se){const de=this.getChildren(L);for(const me of de){const re=me.properties;if(re&&re.cluster?se+re.point_count<=X?se+=re.point_count:se=this._appendLeaves(R,re.cluster_id,$,X,se):se<X?se++:R.push(me),R.length===$)break}return se}_createTree(R){const L=new v.av(R.length/this.stride|0,this.options.nodeSize,Float32Array);for(let $=0;$<R.length;$+=this.stride)L.add(R[$],R[$+1]);return L.finish(),L.data=R,L}_addTileFeatures(R,L,$,X,se,de){for(const me of R){const re=me*this.stride,Se=L[re+Nt]>1;let ze,ve,H;if(Se)ze=hn(L,re,this.clusterProps),ve=L[re],H=L[re+1];else{const xe=this.points[L[re+kt]];ze=xe.properties;const[Le,De]=xe.geometry.coordinates;ve=an(Le),H=$n(De)}const ee={type:1,geometry:[[Math.round(this.options.extent*(ve*se-$)),Math.round(this.options.extent*(H*se-X))]],tags:ze};let ue;ue=Se||this.options.generateId?L[re+kt]:this.points[L[re+kt]].id,ue!==void 0&&(ee.id=ue),de.features.push(ee)}}_limitZoom(R){return Math.max(this.options.minZoom,Math.min(Math.floor(+R),this.options.maxZoom+1))}_cluster(R,L){const{radius:$,extent:X,reduce:se,minPoints:de}=this.options,me=$/(X*Math.pow(2,L)),re=R.data,Se=[],ze=this.stride;for(let ve=0;ve<re.length;ve+=ze){if(re[ve+2]<=L)continue;re[ve+2]=L;const H=re[ve],ee=re[ve+1],ue=R.within(re[ve],re[ve+1],me),xe=re[ve+Nt];let Le=xe;for(const De of ue){const nt=De*ze;re[nt+2]>L&&(Le+=re[nt+Nt])}if(Le>xe&&Le>=de){let De,nt=H*xe,Fe=ee*xe,gt=-1;const Ve=((ve/ze|0)<<5)+(L+1)+this.points.length;for(const st of ue){const xt=st*ze;if(re[xt+2]<=L)continue;re[xt+2]=L;const Tt=re[xt+Nt];nt+=re[xt]*Tt,Fe+=re[xt+1]*Tt,re[xt+4]=Ve,se&&(De||(De=this._map(re,ve,!0),gt=this.clusterProps.length,this.clusterProps.push(De)),se(De,this._map(re,xt)))}re[ve+4]=Ve,Se.push(nt/Le,Fe/Le,1/0,Ve,-1,Le),se&&Se.push(gt)}else{for(let De=0;De<ze;De++)Se.push(re[ve+De]);if(Le>1)for(const De of ue){const nt=De*ze;if(!(re[nt+2]<=L)){re[nt+2]=L;for(let Fe=0;Fe<ze;Fe++)Se.push(re[nt+Fe])}}}}return Se}_getOriginId(R){return R-this.points.length>>5}_getOriginZoom(R){return(R-this.points.length)%32}_map(R,L,$){if(R[L+Nt]>1){const de=this.clusterProps[R[L+Tn]];return $?Object.assign({},de):de}const X=this.points[R[L+kt]].properties,se=this.options.map(X);return $&&se===X?Object.assign({},se):se}}function Fn(Q,R,L){return{type:"Feature",id:Q[R+kt],properties:hn(Q,R,L),geometry:{type:"Point",coordinates:[($=Q[R],360*($-.5)),Xr(Q[R+1])]}};var $}function hn(Q,R,L){const $=Q[R+Nt],X=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$,se=Q[R+Tn],de=se===-1?{}:Object.assign({},L[se]);return Object.assign(de,{cluster:!0,cluster_id:Q[R+kt],point_count:$,point_count_abbreviated:X})}function an(Q){return Q/360+.5}function $n(Q){const R=Math.sin(Q*Math.PI/180),L=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return L<0?0:L>1?1:L}function Xr(Q){const R=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(R))/Math.PI-90}function lr(Q,R,L,$){let X=$;const se=R+(L-R>>1);let de,me=L-R;const re=Q[R],Se=Q[R+1],ze=Q[L],ve=Q[L+1];for(let H=R+3;H<L;H+=3){const ee=ka(Q[H],Q[H+1],re,Se,ze,ve);if(ee>X)de=H,X=ee;else if(ee===X){const ue=Math.abs(H-se);ue<me&&(de=H,me=ue)}}X>$&&(de-R>3&&lr(Q,R,de,$),Q[de+2]=X,L-de>3&&lr(Q,de,L,$))}function ka(Q,R,L,$,X,se){let de=X-L,me=se-$;if(de!==0||me!==0){const re=((Q-L)*de+(R-$)*me)/(de*de+me*me);re>1?(L=X,$=se):re>0&&(L+=de*re,$+=me*re)}return de=Q-L,me=R-$,de*de+me*me}function cr(Q,R,L,$){const X={id:Q??null,type:R,geometry:L,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(R==="Point"||R==="MultiPoint"||R==="LineString")Rr(X,L);else if(R==="Polygon")Rr(X,L[0]);else if(R==="MultiLineString")for(const se of L)Rr(X,se);else if(R==="MultiPolygon")for(const se of L)Rr(X,se[0]);return X}function Rr(Q,R){for(let L=0;L<R.length;L+=3)Q.minX=Math.min(Q.minX,R[L]),Q.minY=Math.min(Q.minY,R[L+1]),Q.maxX=Math.max(Q.maxX,R[L]),Q.maxY=Math.max(Q.maxY,R[L+1])}function pn(Q,R,L,$){if(!R.geometry)return;const X=R.geometry.coordinates;if(X&&X.length===0)return;const se=R.geometry.type,de=Math.pow(L.tolerance/((1<<L.maxZoom)*L.extent),2);let me=[],re=R.id;if(L.promoteId?re=R.properties[L.promoteId]:L.generateId&&(re=$||0),se==="Point")Li(X,me);else if(se==="MultiPoint")for(const Se of X)Li(Se,me);else if(se==="LineString")be(X,me,de,!1);else if(se==="MultiLineString"){if(L.lineMetrics){for(const Se of X)me=[],be(Se,me,de,!1),Q.push(cr(re,"LineString",me,R.properties));return}Kr(X,me,de,!1)}else if(se==="Polygon")Kr(X,me,de,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(const Se of R.geometry.geometries)pn(Q,{id:re,geometry:Se,properties:R.properties},L,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Se of X){const ze=[];Kr(Se,ze,de,!0),me.push(ze)}}Q.push(cr(re,se,me,R.properties))}function Li(Q,R){R.push(Fi(Q[0]),$t(Q[1]),0)}function be(Q,R,L,$){let X,se,de=0;for(let re=0;re<Q.length;re++){const Se=Fi(Q[re][0]),ze=$t(Q[re][1]);R.push(Se,ze,0),re>0&&(de+=$?(X*ze-Se*se)/2:Math.sqrt(Math.pow(Se-X,2)+Math.pow(ze-se,2))),X=Se,se=ze}const me=R.length-3;R[2]=1,lr(R,0,me,L),R[me+2]=1,R.size=Math.abs(de),R.start=0,R.end=R.size}function Kr(Q,R,L,$){for(let X=0;X<Q.length;X++){const se=[];be(Q[X],se,L,$),R.push(se)}}function Fi(Q){return Q/360+.5}function $t(Q){const R=Math.sin(Q*Math.PI/180),L=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return L<0?0:L>1?1:L}function un(Q,R,L,$,X,se,de,me){if($/=R,se>=(L/=R)&&de<$)return Q;if(de<L||se>=$)return null;const re=[];for(const Se of Q){const ze=Se.geometry;let ve=Se.type;const H=X===0?Se.minX:Se.minY,ee=X===0?Se.maxX:Se.maxY;if(H>=L&&ee<$){re.push(Se);continue}if(ee<L||H>=$)continue;let ue=[];if(ve==="Point"||ve==="MultiPoint")pa(ze,ue,L,$,X);else if(ve==="LineString")Lr(ze,ue,L,$,X,!1,me.lineMetrics);else if(ve==="MultiLineString")fa(ze,ue,L,$,X,!1);else if(ve==="Polygon")fa(ze,ue,L,$,X,!0);else if(ve==="MultiPolygon")for(const xe of ze){const Le=[];fa(xe,Le,L,$,X,!0),Le.length&&ue.push(Le)}if(ue.length){if(me.lineMetrics&&ve==="LineString"){for(const xe of ue)re.push(cr(Se.id,ve,xe,Se.tags));continue}ve!=="LineString"&&ve!=="MultiLineString"||(ue.length===1?(ve="LineString",ue=ue[0]):ve="MultiLineString"),ve!=="Point"&&ve!=="MultiPoint"||(ve=ue.length===3?"Point":"MultiPoint"),re.push(cr(Se.id,ve,ue,Se.tags))}}return re.length?re:null}function pa(Q,R,L,$,X){for(let se=0;se<Q.length;se+=3){const de=Q[se+X];de>=L&&de<=$&&bi(R,Q[se],Q[se+1],Q[se+2])}}function Lr(Q,R,L,$,X,se,de){let me=ur(Q);const re=X===0?dr:hr;let Se,ze,ve=Q.start;for(let Le=0;Le<Q.length-3;Le+=3){const De=Q[Le],nt=Q[Le+1],Fe=Q[Le+2],gt=Q[Le+3],Ve=Q[Le+4],st=X===0?De:nt,xt=X===0?gt:Ve;let Tt=!1;de&&(Se=Math.sqrt(Math.pow(De-gt,2)+Math.pow(nt-Ve,2))),st<L?xt>L&&(ze=re(me,De,nt,gt,Ve,L),de&&(me.start=ve+Se*ze)):st>$?xt<$&&(ze=re(me,De,nt,gt,Ve,$),de&&(me.start=ve+Se*ze)):bi(me,De,nt,Fe),xt<L&&st>=L&&(ze=re(me,De,nt,gt,Ve,L),Tt=!0),xt>$&&st<=$&&(ze=re(me,De,nt,gt,Ve,$),Tt=!0),!se&&Tt&&(de&&(me.end=ve+Se*ze),R.push(me),me=ur(Q)),de&&(ve+=Se)}let H=Q.length-3;const ee=Q[H],ue=Q[H+1],xe=X===0?ee:ue;xe>=L&&xe<=$&&bi(me,ee,ue,Q[H+2]),H=me.length-3,se&&H>=3&&(me[H]!==me[0]||me[H+1]!==me[1])&&bi(me,me[0],me[1],me[2]),me.length&&R.push(me)}function ur(Q){const R=[];return R.size=Q.size,R.start=Q.start,R.end=Q.end,R}function fa(Q,R,L,$,X,se){for(const de of Q)Lr(de,R,L,$,X,se,!1)}function bi(Q,R,L,$){Q.push(R,L,$)}function dr(Q,R,L,$,X,se){const de=(se-R)/($-R);return bi(Q,se,L+(X-L)*de,1),de}function hr(Q,R,L,$,X,se){const de=(se-L)/(X-L);return bi(Q,R+($-R)*de,se,1),de}function Ne(Q,R){const L=[];for(let $=0;$<Q.length;$++){const X=Q[$],se=X.type;let de;if(se==="Point"||se==="MultiPoint"||se==="LineString")de=wi(X.geometry,R);else if(se==="MultiLineString"||se==="Polygon"){de=[];for(const me of X.geometry)de.push(wi(me,R))}else if(se==="MultiPolygon"){de=[];for(const me of X.geometry){const re=[];for(const Se of me)re.push(wi(Se,R));de.push(re)}}L.push(cr(X.id,se,de,X.tags))}return L}function wi(Q,R){const L=[];L.size=Q.size,Q.start!==void 0&&(L.start=Q.start,L.end=Q.end);for(let $=0;$<Q.length;$+=3)L.push(Q[$]+R,Q[$+1],Q[$+2]);return L}function fn(Q,R){if(Q.transformed)return Q;const L=1<<Q.z,$=Q.x,X=Q.y;for(const se of Q.features){const de=se.geometry,me=se.type;if(se.geometry=[],me===1)for(let re=0;re<de.length;re+=2)se.geometry.push(Bn(de[re],de[re+1],R,L,$,X));else for(let re=0;re<de.length;re++){const Se=[];for(let ze=0;ze<de[re].length;ze+=2)Se.push(Bn(de[re][ze],de[re][ze+1],R,L,$,X));se.geometry.push(Se)}}return Q.transformed=!0,Q}function Bn(Q,R,L,$,X,se){return[Math.round(L*(Q*$-X)),Math.round(L*(R*$-se))]}function pr(Q,R,L,$,X){const se=R===X.maxZoom?0:X.tolerance/((1<<R)*X.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:Q.length,source:null,x:L,y:$,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const me of Q)Ue(de,me,se,X);return de}function Ue(Q,R,L,$){const X=R.geometry,se=R.type,de=[];if(Q.minX=Math.min(Q.minX,R.minX),Q.minY=Math.min(Q.minY,R.minY),Q.maxX=Math.max(Q.maxX,R.maxX),Q.maxY=Math.max(Q.maxY,R.maxY),se==="Point"||se==="MultiPoint")for(let me=0;me<X.length;me+=3)de.push(X[me],X[me+1]),Q.numPoints++,Q.numSimplified++;else if(se==="LineString")Pt(de,X,Q,L,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(let me=0;me<X.length;me++)Pt(de,X[me],Q,L,se==="Polygon",me===0);else if(se==="MultiPolygon")for(let me=0;me<X.length;me++){const re=X[me];for(let Se=0;Se<re.length;Se++)Pt(de,re[Se],Q,L,!0,Se===0)}if(de.length){let me=R.tags||null;if(se==="LineString"&&$.lineMetrics){me={};for(const Se in R.tags)me[Se]=R.tags[Se];me.mapbox_clip_start=X.start/X.size,me.mapbox_clip_end=X.end/X.size}const re={geometry:de,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:me};R.id!==null&&(re.id=R.id),Q.features.push(re)}}function Pt(Q,R,L,$,X,se){const de=$*$;if($>0&&R.size<(X?de:$))return void(L.numPoints+=R.length/3);const me=[];for(let re=0;re<R.length;re+=3)($===0||R[re+2]>de)&&(L.numSimplified++,me.push(R[re],R[re+1])),L.numPoints++;X&&function(re,Se){let ze=0;for(let ve=0,H=re.length,ee=H-2;ve<H;ee=ve,ve+=2)ze+=(re[ve]-re[ee])*(re[ve+1]+re[ee+1]);if(ze>0===Se)for(let ve=0,H=re.length;ve<H/2;ve+=2){const ee=re[ve],ue=re[ve+1];re[ve]=re[H-2-ve],re[ve+1]=re[H-1-ve],re[H-2-ve]=ee,re[H-1-ve]=ue}}(me,se),Q.push(me)}const yt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Yn{constructor(R,L){const $=(L=this.options=function(se,de){for(const me in de)se[me]=de[me];return se}(Object.create(yt),L)).debug;if($&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");let X=function(se,de){const me=[];if(se.type==="FeatureCollection")for(let re=0;re<se.features.length;re++)pn(me,se.features[re],de,re);else pn(me,se.type==="Feature"?se:{geometry:se},de);return me}(R,L);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(se,de){const me=de.buffer/de.extent;let re=se;const Se=un(se,1,-1-me,me,0,-1,2,de),ze=un(se,1,1-me,2+me,0,-1,2,de);return(Se||ze)&&(re=un(se,1,-me,1+me,0,-1,2,de)||[],Se&&(re=Ne(Se,1).concat(re)),ze&&(re=re.concat(Ne(ze,-1)))),re}(X,L),X.length&&this.splitTile(X,0,0,0),$&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(R,L,$,X,se,de,me){const re=[R,L,$,X],Se=this.options,ze=Se.debug;for(;re.length;){X=re.pop(),$=re.pop(),L=re.pop(),R=re.pop();const ve=1<<L,H=Ci(L,$,X);let ee=this.tiles[H];if(!ee&&(ze>1&&console.time("creation"),ee=this.tiles[H]=pr(R,L,$,X,Se),this.tileCoords.push({z:L,x:$,y:X}),ze)){ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,$,X,ee.numFeatures,ee.numPoints,ee.numSimplified),console.timeEnd("creation"));const Tt=`z${L}`;this.stats[Tt]=(this.stats[Tt]||0)+1,this.total++}if(ee.source=R,se==null){if(L===Se.indexMaxZoom||ee.numPoints<=Se.indexMaxPoints)continue}else{if(L===Se.maxZoom||L===se)continue;if(se!=null){const Tt=se-L;if($!==de>>Tt||X!==me>>Tt)continue}}if(ee.source=null,R.length===0)continue;ze>1&&console.time("clipping");const ue=.5*Se.buffer/Se.extent,xe=.5-ue,Le=.5+ue,De=1+ue;let nt=null,Fe=null,gt=null,Ve=null,st=un(R,ve,$-ue,$+Le,0,ee.minX,ee.maxX,Se),xt=un(R,ve,$+xe,$+De,0,ee.minX,ee.maxX,Se);R=null,st&&(nt=un(st,ve,X-ue,X+Le,1,ee.minY,ee.maxY,Se),Fe=un(st,ve,X+xe,X+De,1,ee.minY,ee.maxY,Se),st=null),xt&&(gt=un(xt,ve,X-ue,X+Le,1,ee.minY,ee.maxY,Se),Ve=un(xt,ve,X+xe,X+De,1,ee.minY,ee.maxY,Se),xt=null),ze>1&&console.timeEnd("clipping"),re.push(nt||[],L+1,2*$,2*X),re.push(Fe||[],L+1,2*$,2*X+1),re.push(gt||[],L+1,2*$+1,2*X),re.push(Ve||[],L+1,2*$+1,2*X+1)}}getTile(R,L,$){R=+R,L=+L,$=+$;const X=this.options,{extent:se,debug:de}=X;if(R<0||R>24)return null;const me=1<<R,re=Ci(R,L=L+me&me-1,$);if(this.tiles[re])return fn(this.tiles[re],se);de>1&&console.log("drilling down to z%d-%d-%d",R,L,$);let Se,ze=R,ve=L,H=$;for(;!Se&&ze>0;)ze--,ve>>=1,H>>=1,Se=this.tiles[Ci(ze,ve,H)];return Se&&Se.source?(de>1&&(console.log("found parent tile z%d-%d-%d",ze,ve,H),console.time("drilling down")),this.splitTile(Se.source,ze,ve,H,R,L,$),de>1&&console.timeEnd("drilling down"),this.tiles[re]?fn(this.tiles[re],se):null):null}}function Ci(Q,R,L){return 32*((1<<Q)*L+R)+Q}function St(Q,R){return R?Q.properties[R]:Q.id}function Ji(Q,R){if(Q==null)return!0;if(Q.type==="Feature")return St(Q,R)!=null;if(Q.type==="FeatureCollection"){const L=new Set;for(const $ of Q.features){const X=St($,R);if(X==null||L.has(X))return!1;L.add(X)}return!0}return!1}function Yi(Q,R){const L=new Map;if(Q!=null)if(Q.type==="Feature")L.set(St(Q,R),Q);else for(const $ of Q.features)L.set(St($,R),$);return L}class Bi extends j{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(R,L){return v._(this,void 0,void 0,function*(){const $=R.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const X=this._geoJSONIndex.getTile($.z,$.x,$.y);if(!X)return null;const se=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.X,this.length=me.length,this._features=me}feature(me){return new class{constructor(re){this._feature=re,this.extent=v.X,this.type=re.type,this.properties=re.tags,"id"in re&&!isNaN(re.id)&&(this.id=parseInt(re.id,10))}loadGeometry(){if(this._feature.type===1){const re=[];for(const Se of this._feature.geometry)re.push([new v.P(Se[0],Se[1])]);return re}{const re=[];for(const Se of this._feature.geometry){const ze=[];for(const ve of Se)ze.push(new v.P(ve[0],ve[1]));re.push(ze)}return re}}toGeoJSON(re,Se,ze){return qe.call(this,re,Se,ze)}}(this._features[me])}}(X.features);let de=Un(se);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:se,rawData:de.buffer}})}loadData(R){return v._(this,void 0,void 0,function*(){var L;(L=this._pendingRequest)===null||L===void 0||L.abort();const $=!!(R&&R.request&&R.request.collectResourceTiming)&&new v.bu(R.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(R,this._pendingRequest),this._geoJSONIndex=R.cluster?new yn(function({superclusterOptions:de,clusterProperties:me}){if(!me||!de)return de;const re={},Se={},ze={accumulated:null,zoom:0},ve={properties:null},H=Object.keys(me);for(const ee of H){const[ue,xe]=me[ee],Le=v.bB(xe),De=v.bB(typeof ue=="string"?[ue,["accumulated"],["get",ee]]:ue);re[ee]=Le.value,Se[ee]=De.value}return de.map=ee=>{ve.properties=ee;const ue={};for(const xe of H)ue[xe]=re[xe].evaluate(ze,ve);return ue},de.reduce=(ee,ue)=>{ve.properties=ue;for(const xe of H)ze.accumulated=ee[xe],ee[xe]=Se[xe].evaluate(ze,ve)},de}(R)).load((yield this._pendingData).features):(X=yield this._pendingData,new Yn(X,R.geojsonVtOptions)),this.loaded={};const se={};if($){const de=$.finish();de&&(se.resourceTiming={},se.resourceTiming[R.source]=JSON.parse(JSON.stringify(de)))}return se}catch(se){if(delete this._pendingRequest,v.bA(se))return{abandoned:!0};throw se}var X})}getData(){return v._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(R){const L=this.loaded;return L&&L[R.uid]?super.reloadTile(R):this.loadTile(R)}loadAndProcessGeoJSON(R,L){return v._(this,void 0,void 0,function*(){let $=yield this.loadGeoJSON(R,L);if(delete this._pendingRequest,typeof $!="object")throw new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`);if(we($,!0),R.filter){const X=v.bB(R.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(X.result==="error")throw new Error(X.value.map(de=>`${de.key}: ${de.message}`).join(", "));$={type:"FeatureCollection",features:$.features.filter(de=>X.value.evaluate({zoom:0},de))}}return $})}loadGeoJSON(R,L){return v._(this,void 0,void 0,function*(){const{promoteId:$}=R;if(R.request){const X=yield v.h(R.request,L);return this._dataUpdateable=Ji(X.data,$)?Yi(X.data,$):void 0,X.data}if(typeof R.data=="string")try{const X=JSON.parse(R.data);return this._dataUpdateable=Ji(X,$)?Yi(X,$):void 0,X}catch{throw new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`)}if(!R.dataDiff)throw new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${R.source}`);return function(X,se,de){var me,re,Se,ze;if(se.removeAll&&X.clear(),se.remove)for(const ve of se.remove)X.delete(ve);if(se.add)for(const ve of se.add){const H=St(ve,de);H!=null&&X.set(H,ve)}if(se.update)for(const ve of se.update){let H=X.get(ve.id);if(H==null)continue;const ee=!ve.removeAllProperties&&(((me=ve.removeProperties)===null||me===void 0?void 0:me.length)>0||((re=ve.addOrUpdateProperties)===null||re===void 0?void 0:re.length)>0);if((ve.newGeometry||ve.removeAllProperties||ee)&&(H=Object.assign({},H),X.set(ve.id,H),ee&&(H.properties=Object.assign({},H.properties))),ve.newGeometry&&(H.geometry=ve.newGeometry),ve.removeAllProperties)H.properties={};else if(((Se=ve.removeProperties)===null||Se===void 0?void 0:Se.length)>0)for(const ue of ve.removeProperties)Object.prototype.hasOwnProperty.call(H.properties,ue)&&delete H.properties[ue];if(((ze=ve.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0)for(const{key:ue,value:xe}of ve.addOrUpdateProperties)H.properties[ue]=xe}}(this._dataUpdateable,R.dataDiff,$),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(R){return v._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(R){return this._geoJSONIndex.getClusterExpansionZoom(R.clusterId)}getClusterChildren(R){return this._geoJSONIndex.getChildren(R.clusterId)}getClusterLeaves(R){return this._geoJSONIndex.getLeaves(R.clusterId,R.limit,R.offset)}}class Oi{constructor(R){this.self=R,this.actor=new v.F(R),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(L,$)=>{if(this.externalWorkerSourceTypes[L])throw new Error(`Worker source with name "${L}" already registered.`);this.externalWorkerSourceTypes[L]=$},this.self.addProtocol=v.bh,this.self.removeProtocol=v.bi,this.self.registerRTLTextPlugin=L=>{if(v.bC.isParsed())throw new Error("RTL text plugin already registered.");v.bC.setMethods(L)},this.actor.registerMessageHandler("LDT",(L,$)=>this._getDEMWorkerSource(L,$.source).loadTile($)),this.actor.registerMessageHandler("RDT",(L,$)=>v._(this,void 0,void 0,function*(){this._getDEMWorkerSource(L,$.source).removeTile($)})),this.actor.registerMessageHandler("GCEZ",(L,$)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(L,$.type,$.source).getClusterExpansionZoom($)})),this.actor.registerMessageHandler("GCC",(L,$)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(L,$.type,$.source).getClusterChildren($)})),this.actor.registerMessageHandler("GCL",(L,$)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(L,$.type,$.source).getClusterLeaves($)})),this.actor.registerMessageHandler("LD",(L,$)=>this._getWorkerSource(L,$.type,$.source).loadData($)),this.actor.registerMessageHandler("GD",(L,$)=>this._getWorkerSource(L,$.type,$.source).getData()),this.actor.registerMessageHandler("LT",(L,$)=>this._getWorkerSource(L,$.type,$.source).loadTile($)),this.actor.registerMessageHandler("RT",(L,$)=>this._getWorkerSource(L,$.type,$.source).reloadTile($)),this.actor.registerMessageHandler("AT",(L,$)=>this._getWorkerSource(L,$.type,$.source).abortTile($)),this.actor.registerMessageHandler("RMT",(L,$)=>this._getWorkerSource(L,$.type,$.source).removeTile($)),this.actor.registerMessageHandler("RS",(L,$)=>v._(this,void 0,void 0,function*(){if(!this.workerSources[L]||!this.workerSources[L][$.type]||!this.workerSources[L][$.type][$.source])return;const X=this.workerSources[L][$.type][$.source];delete this.workerSources[L][$.type][$.source],X.removeSource!==void 0&&X.removeSource($)})),this.actor.registerMessageHandler("RM",L=>v._(this,void 0,void 0,function*(){delete this.layerIndexes[L],delete this.availableImages[L],delete this.workerSources[L],delete this.demWorkerSources[L]})),this.actor.registerMessageHandler("SR",(L,$)=>v._(this,void 0,void 0,function*(){this.referrer=$})),this.actor.registerMessageHandler("SRPS",(L,$)=>this._syncRTLPluginState(L,$)),this.actor.registerMessageHandler("IS",(L,$)=>v._(this,void 0,void 0,function*(){this.self.importScripts($)})),this.actor.registerMessageHandler("SI",(L,$)=>this._setImages(L,$)),this.actor.registerMessageHandler("UL",(L,$)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(L).update($.layers,$.removedIds)})),this.actor.registerMessageHandler("SL",(L,$)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(L).replace($)}))}_setImages(R,L){return v._(this,void 0,void 0,function*(){this.availableImages[R]=L;for(const $ in this.workerSources[R]){const X=this.workerSources[R][$];for(const se in X)X[se].availableImages=L}})}_syncRTLPluginState(R,L){return v._(this,void 0,void 0,function*(){if(v.bC.isParsed())return v.bC.getState();if(L.pluginStatus!=="loading")return v.bC.setState(L),L;const $=L.pluginURL;if(this.self.importScripts($),v.bC.isParsed()){const X={pluginStatus:"loaded",pluginURL:$};return v.bC.setState(X),X}throw v.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${$}`)})}_getAvailableImages(R){let L=this.availableImages[R];return L||(L=[]),L}_getLayerIndex(R){let L=this.layerIndexes[R];return L||(L=this.layerIndexes[R]=new u),L}_getWorkerSource(R,L,$){if(this.workerSources[R]||(this.workerSources[R]={}),this.workerSources[R][L]||(this.workerSources[R][L]={}),!this.workerSources[R][L][$]){const X={sendAsync:(se,de)=>(se.targetMapId=R,this.actor.sendAsync(se,de))};switch(L){case"vector":this.workerSources[R][L][$]=new j(X,this._getLayerIndex(R),this._getAvailableImages(R));break;case"geojson":this.workerSources[R][L][$]=new Bi(X,this._getLayerIndex(R),this._getAvailableImages(R));break;default:this.workerSources[R][L][$]=new this.externalWorkerSourceTypes[L](X,this._getLayerIndex(R),this._getAvailableImages(R))}}return this.workerSources[R][L][$]}_getDEMWorkerSource(R,L){return this.demWorkerSources[R]||(this.demWorkerSources[R]={}),this.demWorkerSources[R][L]||(this.demWorkerSources[R][L]=new N),this.demWorkerSources[R][L]}}return v.i(self)&&(self.worker=new Oi(self)),Oi}),_("index",["exports","./shared"],function(v,u){var D="4.6.0";let V,W;const j={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:m=>new Promise((e,o)=>{const c=requestAnimationFrame(e);m.signal.addEventListener("abort",()=>{cancelAnimationFrame(c),o(u.c())})}),getImageData(m,e=0){return this.getImageCanvasContext(m).getImageData(-e,-e,m.width+2*e,m.height+2*e)},getImageCanvasContext(m){const e=window.document.createElement("canvas"),o=e.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return e.width=m.width,e.height=m.height,o.drawImage(m,0,0,m.width,m.height),o},resolveURL:m=>(V||(V=document.createElement("a")),V.href=m,V.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(W==null&&(W=matchMedia("(prefers-reduced-motion: reduce)")),W.matches)}};class N{static testProp(e){if(!N.docStyle)return e[0];for(let o=0;o<e.length;o++)if(e[o]in N.docStyle)return e[o];return e[0]}static create(e,o,c){const d=window.document.createElement(e);return o!==void 0&&(d.className=o),c&&c.appendChild(d),d}static createNS(e,o){return window.document.createElementNS(e,o)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(e,o){e.style[N.transformProp]=o}static addEventListener(e,o,c,d={}){e.addEventListener(o,c,"passive"in d?d:d.capture)}static removeEventListener(e,o,c,d={}){e.removeEventListener(o,c,"passive"in d?d:d.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",N.suppressClickInternal,!0)},0)}static getScale(e){const o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}static getPoint(e,o,c){const d=o.boundingClientRect;return new u.P((c.clientX-d.left)/o.x-e.clientLeft,(c.clientY-d.top)/o.y-e.clientTop)}static mousePos(e,o){const c=N.getScale(e);return N.getPoint(e,c,o)}static touchPos(e,o){const c=[],d=N.getScale(e);for(let g=0;g<o.length;g++)c.push(N.getPoint(e,d,o[g]));return c}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const Te={supported:!1,testSupport:function(m){!qe&&we&&(ae?ie(m):Ce=m)}};let Ce,we,qe=!1,ae=!1;function ie(m){const e=m.createTexture();m.bindTexture(m.TEXTURE_2D,e);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,we),m.isContextLost())return;Te.supported=!0}catch{}m.deleteTexture(e),qe=!0}var ce;typeof document<"u"&&(we=document.createElement("img"),we.onload=()=>{Ce&&ie(Ce),Ce=null,ae=!0},we.onerror=()=>{qe=!0,Ce=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let e,o,c,d;m.resetRequestQueue=()=>{e=[],o=0,c=0,d={}},m.addThrottleControl=E=>{const T=c++;return d[T]=E,T},m.removeThrottleControl=E=>{delete d[E],w()},m.getImage=(E,T,z=!0)=>new Promise((P,B)=>{Te.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),u.e(E,{type:"image"}),e.push({abortController:T,requestParameters:E,supportImageRefresh:z,state:"queued",onError:q=>{B(q)},onSuccess:q=>{P(q)}}),w()});const g=E=>u._(this,void 0,void 0,function*(){E.state="running";const{requestParameters:T,supportImageRefresh:z,onError:P,onSuccess:B,abortController:q}=E,G=z===!1&&!u.i(self)&&!u.g(T.url)&&(!T.headers||Object.keys(T.headers).reduce((te,oe)=>te&&oe==="accept",!0));o++;const Y=G?S(T,q):u.m(T,q);try{const te=yield Y;delete E.abortController,E.state="completed",te.data instanceof HTMLImageElement||u.b(te.data)?B(te):te.data&&B({data:yield(Z=te.data,typeof createImageBitmap=="function"?u.d(Z):u.f(Z)),cacheControl:te.cacheControl,expires:te.expires})}catch(te){delete E.abortController,P(te)}finally{o--,w()}var Z}),w=()=>{const E=(()=>{for(const T of Object.keys(d))if(d[T]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let T=o;T<E&&e.length>0;T++){const z=e.shift();z.abortController.signal.aborted?T--:g(z)}},S=(E,T)=>new Promise((z,P)=>{const B=new Image,q=E.url,G=E.credentials;G&&G==="include"?B.crossOrigin="use-credentials":(G&&G==="same-origin"||!u.s(q))&&(B.crossOrigin="anonymous"),T.signal.addEventListener("abort",()=>{B.src="",P(u.c())}),B.fetchPriority="high",B.onload=()=>{B.onerror=B.onload=null,z({data:B})},B.onerror=()=>{B.onerror=B.onload=null,T.signal.aborted||P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},B.src=q})}(ce||(ce={})),ce.resetRequestQueue();class Ae{constructor(e){this._transformRequestFn=e}transformRequest(e,o){return this._transformRequestFn&&this._transformRequestFn(e,o)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Re(m){var e=new u.A(3);return e[0]=m[0],e[1]=m[1],e[2]=m[2],e}var Xe,Qe=function(m,e,o){return m[0]=e[0]-o[0],m[1]=e[1]-o[1],m[2]=e[2]-o[2],m};Xe=new u.A(3),u.A!=Float32Array&&(Xe[0]=0,Xe[1]=0,Xe[2]=0);var pe=function(m){var e=m[0],o=m[1];return e*e+o*o};function pt(m){const e=[];if(typeof m=="string")e.push({id:"default",url:m});else if(m&&m.length>0){const o=[];for(const{id:c,url:d}of m){const g=`${c}${d}`;o.indexOf(g)===-1&&(o.push(g),e.push({id:c,url:d}))}}return e}function ct(m,e,o){const c=m.split("?");return c[0]+=`${e}${o}`,c.join("?")}(function(){var m=new u.A(2);u.A!=Float32Array&&(m[0]=0,m[1]=0)})();class ot{constructor(e,o,c,d){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(o,d)}update(e,o,c){const{width:d,height:g}=e,w=!(this.size&&this.size[0]===d&&this.size[1]===g||c),{context:S}=this,{gl:E}=S;if(this.useMipmap=!!(o&&o.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!o||o.premultiply!==!1)),w)this.size=[d,g],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,e):E.texImage2D(E.TEXTURE_2D,0,this.format,d,g,0,this.format,E.UNSIGNED_BYTE,e.data);else{const{x:T,y:z}=c||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?E.texSubImage2D(E.TEXTURE_2D,0,T,z,E.RGBA,E.UNSIGNED_BYTE,e):E.texSubImage2D(E.TEXTURE_2D,0,T,z,d,g,E.RGBA,E.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(e,o,c){const{context:d}=this,{gl:g}=d;g.bindTexture(g.TEXTURE_2D,this.texture),c!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=g.LINEAR),e!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,c||e),this.filter=e),o!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function Xt(m){const{userImage:e}=m;return!!(e&&e.render&&e.render())&&(m.data.replace(new Uint8Array(e.data.buffer)),!0)}class Ot extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:o,promiseResolve:c}of this.requestors)c(this._getImagesForIds(o));this.requestors=[]}}getImage(e){const o=this.images[e];if(o&&!o.data&&o.spriteData){const c=o.spriteData;o.data=new u.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),o.spriteData=null}return o}addImage(e,o){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,o)&&(this.images[e]=o)}_validate(e,o){let c=!0;const d=o.data||o.spriteData;return this._validateStretch(o.stretchX,d&&d.width)||(this.fire(new u.j(new Error(`Image "${e}" has invalid "stretchX" value`))),c=!1),this._validateStretch(o.stretchY,d&&d.height)||(this.fire(new u.j(new Error(`Image "${e}" has invalid "stretchY" value`))),c=!1),this._validateContent(o.content,o)||(this.fire(new u.j(new Error(`Image "${e}" has invalid "content" value`))),c=!1),c}_validateStretch(e,o){if(!e)return!0;let c=0;for(const d of e){if(d[0]<c||d[1]<d[0]||o<d[1])return!1;c=d[1]}return!0}_validateContent(e,o){if(!e)return!0;if(e.length!==4)return!1;const c=o.spriteData,d=c&&c.width||o.data.width,g=c&&c.height||o.data.height;return!(e[0]<0||d<e[0]||e[1]<0||g<e[1]||e[2]<0||d<e[2]||e[3]<0||g<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,o,c=!0){const d=this.getImage(e);if(c&&(d.data.width!==o.data.width||d.data.height!==o.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=d.version+1,this.images[e]=o,this.updatedImages[e]=!0}removeImage(e){const o=this.images[e];delete this.images[e],delete this.patterns[e],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((o,c)=>{let d=!0;if(!this.isLoaded())for(const g of e)this.images[g]||(d=!1);this.isLoaded()||d?o(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:o})})}_getImagesForIds(e){const o={};for(const c of e){let d=this.getImage(c);d||(this.fire(new u.k("styleimagemissing",{id:c})),d=this.getImage(c)),d?o[c]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:u.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:e,height:o}=this.atlasImage;return{width:e,height:o}}getPattern(e){const o=this.patterns[e],c=this.getImage(e);if(!c)return null;if(o&&o.position.version===c.version)return o.position;if(o)o.position.version=c.version;else{const d={w:c.data.width+2,h:c.data.height+2,x:0,y:0},g=new u.I(d,c);this.patterns[e]={bin:d,position:g}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const o=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ot(e,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const g in this.patterns)e.push(this.patterns[g].bin);const{w:o,h:c}=u.p(e),d=this.atlasImage;d.resize({width:o||1,height:c||1});for(const g in this.patterns){const{bin:w}=this.patterns[g],S=w.x+1,E=w.y+1,T=this.getImage(g).data,z=T.width,P=T.height;u.R.copy(T,d,{x:0,y:0},{x:S,y:E},{width:z,height:P}),u.R.copy(T,d,{x:0,y:P-1},{x:S,y:E-1},{width:z,height:1}),u.R.copy(T,d,{x:0,y:0},{x:S,y:E+P},{width:z,height:1}),u.R.copy(T,d,{x:z-1,y:0},{x:S-1,y:E},{width:1,height:P}),u.R.copy(T,d,{x:0,y:0},{x:S+z,y:E},{width:1,height:P})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const o of e){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const c=this.getImage(o);c||u.w(`Image with ID: "${o}" was not found`),Xt(c)&&this.updateImage(o,c)}}}const Ft=1e20;function Ln(m,e,o,c,d,g,w,S,E){for(let T=e;T<e+c;T++)Hn(m,o*g+T,g,d,w,S,E);for(let T=o;T<o+d;T++)Hn(m,T*g+e,1,c,w,S,E)}function Hn(m,e,o,c,d,g,w){g[0]=0,w[0]=-Ft,w[1]=Ft,d[0]=m[e];for(let S=1,E=0,T=0;S<c;S++){d[S]=m[e+S*o];const z=S*S;do{const P=g[E];T=(d[S]-d[P]+z-P*P)/(S-P)/2}while(T<=w[E]&&--E>-1);E++,g[E]=S,w[E]=T,w[E+1]=Ft}for(let S=0,E=0;S<c;S++){for(;w[E+1]<S;)E++;const T=g[E],z=S-T;m[e+S*o]=d[T]+z*z}}class Un{constructor(e,o){this.requestManager=e,this.localIdeographFontFamily=o,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return u._(this,void 0,void 0,function*(){const o=[];for(const g in e)for(const w of e[g])o.push(this._getAndCacheGlyphsPromise(g,w));const c=yield Promise.all(o),d={};for(const{stack:g,id:w,glyph:S}of c)d[g]||(d[g]={}),d[g][w]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics};return d})}_getAndCacheGlyphsPromise(e,o){return u._(this,void 0,void 0,function*(){let c=this.entries[e];c||(c=this.entries[e]={glyphs:{},requests:{},ranges:{}});let d=c.glyphs[o];if(d!==void 0)return{stack:e,id:o,glyph:d};if(d=this._tinySDF(c,e,o),d)return c.glyphs[o]=d,{stack:e,id:o,glyph:d};const g=Math.floor(o/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[g])return{stack:e,id:o,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[g]){const S=Un.loadGlyphRange(e,g,this.url,this.requestManager);c.requests[g]=S}const w=yield c.requests[g];for(const S in w)this._doesCharSupportLocalGlyph(+S)||(c.glyphs[+S]=w[+S]);return c.ranges[g]=!0,{stack:e,id:o,glyph:w[o]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,o,c){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(c))return;let g=e.tinySDF;if(!g){let S="400";/bold/i.test(o)?S="900":/medium/i.test(o)?S="500":/light/i.test(o)&&(S="200"),g=e.tinySDF=new Un.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:S})}const w=g.draw(String.fromCharCode(c));return{id:c,bitmap:new u.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Un.loadGlyphRange=function(m,e,o,c){return u._(this,void 0,void 0,function*(){const d=256*e,g=d+255,w=c.transformRequest(o.replace("{fontstack}",m).replace("{range}",`${d}-${g}`),"Glyphs"),S=yield u.l(w,new AbortController);if(!S||!S.data)throw new Error(`Could not load glyph range. range: ${e}, ${d}-${g}`);const E={};for(const T of u.n(S.data))E[T.id]=T;return E})},Un.TinySDF=class{constructor({fontSize:m=24,buffer:e=3,radius:o=8,cutoff:c=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:w="normal"}={}){this.buffer=e,this.cutoff=c,this.radius=o;const S=this.size=m+4*e,E=this._createCanvas(S),T=this.ctx=E.getContext("2d",{willReadFrequently:!0});T.font=`${w} ${g} ${m}px ${d}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(m){const e=document.createElement("canvas");return e.width=e.height=m,e}draw(m){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:c,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(m),w=Math.ceil(o),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),E=Math.min(this.size-this.buffer,w+Math.ceil(c)),T=S+2*this.buffer,z=E+2*this.buffer,P=Math.max(T*z,0),B=new Uint8ClampedArray(P),q={data:B,width:T,height:z,glyphWidth:S,glyphHeight:E,glyphTop:w,glyphLeft:0,glyphAdvance:e};if(S===0||E===0)return q;const{ctx:G,buffer:Y,gridInner:Z,gridOuter:te}=this;G.clearRect(Y,Y,S,E),G.fillText(m,Y,Y+w);const oe=G.getImageData(Y,Y,S,E);te.fill(Ft,0,P),Z.fill(0,0,P);for(let K=0;K<E;K++)for(let he=0;he<S;he++){const ge=oe.data[4*(K*S+he)+3]/255;if(ge===0)continue;const _e=(K+Y)*T+he+Y;if(ge===1)te[_e]=0,Z[_e]=Ft;else{const Pe=.5-ge;te[_e]=Pe>0?Pe*Pe:0,Z[_e]=Pe<0?Pe*Pe:0}}Ln(te,0,0,T,z,T,this.f,this.v,this.z),Ln(Z,Y,Y,S,E,T,this.f,this.v,this.z);for(let K=0;K<P;K++){const he=Math.sqrt(te[K])-Math.sqrt(Z[K]);B[K]=Math.round(255-255*(he/this.radius+this.cutoff))}return q}};class rt{constructor(){this.specification=u.v.light.position}possiblyEvaluate(e,o){return u.x(e.expression.evaluate(o))}interpolate(e,o,c){return{x:u.y.number(e.x,o.x,c),y:u.y.number(e.y,o.y,c),z:u.y.number(e.z,o.z,c)}}}let ut;class bt extends u.E{constructor(e){super(),ut=ut||new u.q({anchor:new u.D(u.v.light.anchor),position:new rt,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(ut),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,o={}){if(!this._validate(u.r,e,o))for(const c in e){const d=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),d):this._transitionable.setValue(c,d)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,c){return(!c||c.validate!==!1)&&u.t(this,e.call(u.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const kt=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Nt extends u.E{constructor(e){super(),this._transitionable=new u.T(kt),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(e,o={}){if(!this._validate(u.B,e,o)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent"});for(const c in e){const d=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),d):this._transitionable.setValue(c,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,c={}){return(c==null?void 0:c.validate)!==!1&&u.t(this,e.call(u.u,u.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Tn{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,o){const c=e.join(",")+String(o);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(e,o)),this.dashEntry[c]}getDashRanges(e,o,c){const d=[];let g=e.length%2==1?-e[e.length-1]*c:0,w=e[0]*c,S=!0;d.push({left:g,right:w,isDash:S,zeroLength:e[0]===0});let E=e[0];for(let T=1;T<e.length;T++){S=!S;const z=e[T];g=E*c,E+=z,w=E*c,d.push({left:g,right:w,isDash:S,zeroLength:z===0})}return d}addRoundDash(e,o,c){const d=o/2;for(let g=-c;g<=c;g++){const w=this.width*(this.nextRow+c+g);let S=0,E=e[S];for(let T=0;T<this.width;T++){T/E.right>1&&(E=e[++S]);const z=Math.abs(T-E.left),P=Math.abs(T-E.right),B=Math.min(z,P);let q;const G=g/c*(d+1);if(E.isDash){const Y=d-Math.abs(G);q=Math.sqrt(B*B+Y*Y)}else q=d-Math.sqrt(B*B+G*G);this.data[w+T]=Math.max(0,Math.min(255,q+128))}}}addRegularDash(e){for(let S=e.length-1;S>=0;--S){const E=e[S],T=e[S+1];E.zeroLength?e.splice(S,1):T&&T.isDash===E.isDash&&(T.left=E.left,e.splice(S,1))}const o=e[0],c=e[e.length-1];o.isDash===c.isDash&&(o.left=c.left-this.width,c.right=o.right+this.width);const d=this.width*this.nextRow;let g=0,w=e[g];for(let S=0;S<this.width;S++){S/w.right>1&&(w=e[++g]);const E=Math.abs(S-w.left),T=Math.abs(S-w.right),z=Math.min(E,T);this.data[d+S]=Math.max(0,Math.min(255,(w.isDash?z:-z)+128))}}addDash(e,o){const c=o?7:0,d=2*c+1;if(this.nextRow+d>this.height)return u.w("LineAtlas out of space"),null;let g=0;for(let S=0;S<e.length;S++)g+=e[S];if(g!==0){const S=this.width/g,E=this.getDashRanges(e,this.width,S);o?this.addRoundDash(E,S,c):this.addRegularDash(E)}const w={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=d,this.dirty=!0,w}bind(e){const o=e.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const yn="maplibre_preloaded_worker_pool";class Fn{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Fn.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[yn]}numActive(){return Object.keys(this.active).length}}const hn=Math.floor(j.hardwareConcurrency/2);let an,$n;function Xr(){return an||(an=new Fn),an}Fn.workerCount=u.C(globalThis)?Math.max(Math.min(hn,3),1):1;class lr{constructor(e,o){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=o;const c=this.workerPool.acquire(o);for(let d=0;d<c.length;d++){const g=new u.F(c[d],o);g.name=`Worker ${d}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,o){const c=[];for(const d of this.actors)c.push(d.sendAsync({type:e,data:o}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,o){for(const c of this.actors)c.registerMessageHandler(e,o)}}function ka(){return $n||($n=new lr(Xr(),u.G),$n.registerMessageHandler("GR",(m,e,o)=>u.m(e,o))),$n}function cr(m,e){const o=u.H();return u.J(o,o,[1,1,0]),u.K(o,o,[.5*m.width,.5*m.height,1]),u.L(o,o,m.calculatePosMatrix(e.toUnwrapped()))}function Rr(m,e,o,c,d,g){const w=function(P,B,q){if(P)for(const G of P){const Y=B[G];if(Y&&Y.source===q&&Y.type==="fill-extrusion")return!0}else for(const G in B){const Y=B[G];if(Y.source===q&&Y.type==="fill-extrusion")return!0}return!1}(d&&d.layers,e,m.id),S=g.maxPitchScaleFactor(),E=m.tilesIn(c,S,w);E.sort(pn);const T=[];for(const P of E)T.push({wrappedTileID:P.tileID.wrapped().key,queryResults:P.tile.queryRenderedFeatures(e,o,m._state,P.queryGeometry,P.cameraQueryGeometry,P.scale,d,g,S,cr(m.transform,P.tileID))});const z=function(P){const B={},q={};for(const G of P){const Y=G.queryResults,Z=G.wrappedTileID,te=q[Z]=q[Z]||{};for(const oe in Y){const K=Y[oe],he=te[oe]=te[oe]||{},ge=B[oe]=B[oe]||[];for(const _e of K)he[_e.featureIndex]||(he[_e.featureIndex]=!0,ge.push(_e))}}return B}(T);for(const P in z)z[P].forEach(B=>{const q=B.feature,G=m.getFeatureState(q.layer["source-layer"],q.id);q.source=q.layer.source,q.layer["source-layer"]&&(q.sourceLayer=q.layer["source-layer"]),q.state=G});return z}function pn(m,e){const o=m.tileID,c=e.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}function Li(m,e,o){return u._(this,void 0,void 0,function*(){let c=m;if(m.url?c=(yield u.h(e.transformRequest(m.url,"Source"),o)).data:yield j.frameAsync(o),!c)return null;const d=u.M(u.e(c,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(d.vectorLayerIds=c.vector_layers.map(g=>g.id)),d})}class be{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof u.N?new u.N(e.lng,e.lat):u.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof u.N?new u.N(e.lng,e.lat):u.N.convert(e),this}extend(e){const o=this._sw,c=this._ne;let d,g;if(e instanceof u.N)d=e,g=e;else{if(!(e instanceof be))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(be.convert(e)):this.extend(u.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(u.N.convert(e)):this;if(d=e._sw,g=e._ne,!d||!g)return this}return o||c?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),c.lng=Math.max(g.lng,c.lng),c.lat=Math.max(g.lat,c.lat)):(this._sw=new u.N(d.lng,d.lat),this._ne=new u.N(g.lng,g.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:c}=u.N.convert(e);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(e){return e instanceof be?e:e&&new be(e)}static fromLngLat(e,o=0){const c=360*o/40075017,d=c/Math.cos(Math.PI/180*e.lat);return new be(new u.N(e.lng-d,e.lat-c),new u.N(e.lng+d,e.lat+c))}}class Kr{constructor(e,o,c){this.bounds=be.convert(this.validateBounds(e)),this.minzoom=o||0,this.maxzoom=c||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const o=Math.pow(2,e.z),c=Math.floor(u.O(this.bounds.getWest())*o),d=Math.floor(u.Q(this.bounds.getNorth())*o),g=Math.ceil(u.O(this.bounds.getEast())*o),w=Math.ceil(u.Q(this.bounds.getSouth())*o);return e.x>=c&&e.x<g&&e.y>=d&&e.y<w}}class Fi extends u.E{constructor(e,o,c,d){if(super(),this.id=e,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(o,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(u.e(this,e),e.bounds&&(this.tileBounds=new Kr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(o,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((g,w)=>{e.reloadPromise={resolve:g,reject:w}})}else e.actor=this.dispatcher.getActor(),d="LT";e.abortController=new AbortController;try{const g=yield e.actor.sendAsync({type:d,data:c},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,g)}catch(g){if(delete e.abortController,e.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,o){if(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),e.reloadPromise){const c=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(c.resolve).catch(c.reject)}}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class $t extends u.E{constructor(e,o,c,d){super(),this.id=e,this.dispatcher=c,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},o),u.e(this,u.M(o,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(u.e(this,e),e.bounds&&(this.tileBounds=new Kr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return u.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const c=yield ce.getImage(this.map._requestManager.transformRequest(o,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&e.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const d=this.map.painter.context,g=d.gl,w=c.data;e.texture=this.map.painter.getTileTexture(w.width),e.texture?e.texture.update(w,{useMipmap:!0}):(e.texture=new ot(d,w,g.RGBA,{useMipmap:!0}),e.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(c){if(delete e.abortController,e.aborted)e.state="unloaded";else if(c)throw e.state="errored",c}})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class un extends $t{constructor(e,o,c,d){super(e,o,c,d),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(o,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const d=yield ce.getImage(c,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){const g=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const w=u.b(g)&&u.U()?g:yield this.readImageNow(g),S={type:this.type,uid:e.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const E=yield e.actor.sendAsync({type:"LDT",data:S});e.dem=E,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}readImageNow(e){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const o=e.width+2,c=e.height+2;try{return new u.R({width:o,height:c},yield u.W(e,-1,-1,o,c))}catch{}}return j.getImageData(e,1)})}_getNeighboringTiles(e){const o=e.canonical,c=Math.pow(2,o.z),d=(o.x-1+c)%c,g=o.x===0?e.wrap-1:e.wrap,w=(o.x+1+c)%c,S=o.x+1===c?e.wrap+1:e.wrap,E={};return E[new u.S(e.overscaledZ,g,o.z,d,o.y).key]={backfilled:!1},E[new u.S(e.overscaledZ,S,o.z,w,o.y).key]={backfilled:!1},o.y>0&&(E[new u.S(e.overscaledZ,g,o.z,d,o.y-1).key]={backfilled:!1},E[new u.S(e.overscaledZ,e.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},E[new u.S(e.overscaledZ,S,o.z,w,o.y-1).key]={backfilled:!1}),o.y+1<c&&(E[new u.S(e.overscaledZ,g,o.z,d,o.y+1).key]={backfilled:!1},E[new u.S(e.overscaledZ,e.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},E[new u.S(e.overscaledZ,S,o.z,w,o.y+1).key]={backfilled:!1}),E}unloadTile(e){return u._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class pa extends u.E{constructor(e,o,c,d){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(d),this._data=o.data,this._options=u.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const g=u.X/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*g,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*g,extent:u.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:u.X,radius:(o.clusterRadius||50)*g,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return u._(this,void 0,void 0,function*(){const e=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,o,c){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:o,offset:c}})}_updateWorkerData(e){return u._(this,void 0,void 0,function*(){const o=u.e({type:this.type},this.workerOptions);e?o.dataDiff=e:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(j.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let d=null;c.resourceTiming&&c.resourceTiming[this.id]&&(d=c.resourceTiming[this.id].slice(0));const g={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&u.e(g,{resourceTiming:d}),this.fire(new u.k("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(c))}})}loaded(){return this._pendingLoads===0}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.actor?"RT":"LT";e.actor=this.actor;const c={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const d=yield this.actor.sendAsync({type:o,data:c},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(d,this.map.painter,o==="RT")})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Lr=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ur extends u.E{constructor(e,o,c,d){super(),this.id=e,this.dispatcher=c,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=o}load(e){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield ce.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,e&&(this.coordinates=e),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new u.j(o))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const o=e.map(u.Z.fromLngLat);this.tileID=function(d){let g=1/0,w=1/0,S=-1/0,E=-1/0;for(const B of d)g=Math.min(g,B.x),w=Math.min(w,B.y),S=Math.max(S,B.x),E=Math.max(E,B.y);const T=Math.max(S-g,E-w),z=Math.max(0,Math.floor(-Math.log(T)/Math.LN2)),P=Math.pow(2,z);return new u.a1(z,Math.floor((g+S)/2*P),Math.floor((w+E)/2*P))}(o),this.minzoom=this.maxzoom=this.tileID.z;const c=o.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,u.X,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,u.X),this._boundsArray.emplaceBack(c[2].x,c[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Lr.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ot(e,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let c=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,c=!0)}c&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class fa extends ur{constructor(e,o,c,d){super(e,o,c,d),this.roundZoom=!0,this.type="video",this.options=o}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const o of e.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield u.a3(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new u.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const o=this.video.seekable;e<o.start(0)||e>o.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Lr.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new ot(e,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let c=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,c=!0)}c&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class bi extends ur{constructor(e,o,c,d){super(e,o,c,d),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(w=>typeof w!="number"))||this.fire(new u.j(new u.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${e}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,c=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Lr.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ot(o,this.canvas,c.RGBA,{premultiply:!0});let d=!1;for(const g in this.tiles){const w=this.tiles[g];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const dr={},hr=m=>{switch(m){case"geojson":return pa;case"image":return ur;case"raster":return $t;case"raster-dem":return un;case"vector":return Fi;case"video":return fa;case"canvas":return bi}return dr[m]},Ne="RTLPluginLoaded";class wi extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ka()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return u._(this,arguments,void 0,function*(o,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=j.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Ne))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let fn=null;function Bn(){return fn||(fn=new wi),fn}class pr{constructor(e,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=u.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const o=e+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,o,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,g){const w={};if(!g)return w;for(const S of d){const E=S.layerIds.map(T=>g.getLayer(T)).filter(Boolean);if(E.length!==0){S.layers=E,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(T=>E.filter(z=>z.id===T)[0]));for(const T of E)w[T.id]=S}}return w}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof u.a6){if(this.hasSymbolBuckets=!0,!c)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof u.a6&&g.hasRTLText){this.hasRTLText=!0,Bn().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(d).queryRadius(g))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const c in this.buckets){const d=this.buckets[c];d.uploadPending()&&d.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ot(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ot(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,c,d,g,w,S,E,T,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:g,scale:w,tileSize:this.tileSize,pixelPosMatrix:z,transform:E,params:S,queryPadding:this.queryPadding*T},e,o,c):{}}querySourceFeatures(e,o){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const d=c.loadVTLayers(),g=o&&o.sourceLayer?o.sourceLayer:"",w=d._geojsonTileLayer||d[g];if(!w)return;const S=u.a7(o&&o.filter),{z:E,x:T,y:z}=this.tileID.canonical,P={z:E,x:T,y:z};for(let B=0;B<w.length;B++){const q=w.feature(B);if(S.needGeometry){const Z=u.a8(q,!0);if(!S.filter(new u.z(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!S.filter(new u.z(this.tileID.overscaledZ),q))continue;const G=c.getId(q,g),Y=new u.a9(q,E,T,z,G);Y.tile=P,e.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const c=u.aa(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const c=Date.now();let d=!1;if(this.expirationTime>c)d=!1;else if(o)if(this.expirationTime<o)d=!0;else{const g=this.expirationTime-o;g?this.expirationTime=c+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!o.style.hasLayer(d))continue;const g=this.buckets[d],w=g.layers[0].sourceLayer||"_geojsonTileLayer",S=c[w],E=e[w];if(!S||!E||Object.keys(E).length===0)continue;g.update(E,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const T=o&&o.style&&o.style.getLayer(d);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=j.now()+e}setDependencies(e,o){const c={};for(const d of o)c[d]=!0;this.dependencies[e]=c}hasDependency(e,o){for(const c of e){const d=this.dependencies[c];if(d){for(const g of o)if(d[g])return!0}}return!1}}class Ue{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,c){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:o,timeout:void 0};if(c!==void 0&&(g.timeout=setTimeout(()=>{this.remove(e,g)},c)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const c=e.wrapped().key,d=o===void 0?0:this.data[c].indexOf(o),g=this.data[c][d];return this.data[c].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(g.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const c in this.data)for(const d of this.data[c])e(d.value)||o.push(d);for(const c of o)this.remove(c.value.tileID,c)}}class Pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,c){const d=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},u.e(this.stateChanges[e][d],c),this.deletedStates[e]===null){this.deletedStates[e]={};for(const g in this.state[e])g!==d&&(this.deletedStates[e][g]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const g in this.state[e][d])c[g]||(this.deletedStates[e][d][g]=null)}else for(const g in c)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][g]===null&&delete this.deletedStates[e][d][g]}removeFeatureState(e,o,c){if(this.deletedStates[e]===null)return;const d=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&o!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][c]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(c in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][c]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,o){const c=String(o),d=u.e({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const g=this.deletedStates[e][o];if(g===null)return{};for(const w in g)delete d[w]}return d}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const c={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),u.e(this.state[d][w],this.stateChanges[d][w]),g[w]=this.state[d][w];c[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const w in this.state[d])g[w]={},this.state[d][w]={};else for(const w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(const S of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][S];g[w]=this.state[d][w]}c[d]=c[d]||{},u.e(c[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const d in e)e[d].setFeatureState(c,o)}}class yt extends u.E{constructor(e,o,c){super(),this.id=e,this.dispatcher=c,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,g,w,S)=>{const E=new(hr(g.type))(d,g,w,S);if(E.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${E.id}`);return E})(e,o,c,this),this._tiles={},this._cache=new Ue(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Pt,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,o,c){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,o,c)}catch(d){e.state="errored",d.status!==404?this._source.fire(new u.j(d,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new u.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const c=this._tiles[o];c.upload(e),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(Yn).map(e=>e.key)}getRenderableIds(e){const o=[];for(const c in this._tiles)this._isIdRenderable(c,e)&&o.push(this._tiles[c]);return e?o.sort((c,d)=>{const g=c.tileID,w=d.tileID,S=new u.P(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),E=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-w.overscaledZ||E.y-S.y||E.x-S.x}).map(c=>c.tileID.key):o.map(c=>c.tileID).sort(Yn).map(c=>c.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,o){return u._(this,void 0,void 0,function*(){const c=this._tiles[e];c&&(c.state!=="loading"&&(c.state=o),yield this._loadTile(c,e,o))})}_tileLoaded(e,o,c){e.timeAdded=j.now(),c==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const o=this.getRenderableIds();for(let d=0;d<o.length;d++){const g=o[d];if(e.neighboringTiles&&e.neighboringTiles[g]){const w=this.getTileByID(g);c(e,w),c(w,e)}}function c(d,g){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=g.tileID.canonical.x-d.tileID.canonical.x;const S=g.tileID.canonical.y-d.tileID.canonical.y,E=Math.pow(2,d.tileID.canonical.z),T=g.tileID.key;w===0&&S===0||Math.abs(S)>1||(Math.abs(w)>1&&(Math.abs(w+E)===1?w+=E:Math.abs(w-E)===1&&(w-=E)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,w,S),d.neighboringTiles&&d.neighboringTiles[T]&&(d.neighboringTiles[T].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,c,d){for(const g in this._tiles){let w=this._tiles[g];if(d[g]||!w.hasData()||w.tileID.overscaledZ<=o||w.tileID.overscaledZ>c)continue;let S=w.tileID;for(;w&&w.tileID.overscaledZ>o+1;){const T=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[T.key],w&&w.hasData()&&(S=T)}let E=S;for(;E.overscaledZ>o;)if(E=E.scaledTo(E.overscaledZ-1),e[E.key]){d[S.key]=S;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const c=this._loadedParentTiles[e.key];return c&&c.tileID.overscaledZ>=o?c:null}for(let c=e.overscaledZ-1;c>=o;c--){const d=e.scaledTo(c),g=this._getLoadedTile(d);if(g)return g}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const o=Math.ceil(e.width/this._source.tileSize)+1,c=Math.ceil(e.height/this._source.tileSize)+1,d=Math.floor(o*c*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(g)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const c={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+o),c[g.tileID.key]=g}this._tiles=c;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(e,o,c,d,g,w){const S={},E={},T=Object.keys(e),z=j.now();for(const P of T){const B=e[P],q=this._tiles[P];if(!q||q.fadeEndTime!==0&&q.fadeEndTime<=z)continue;const G=this.findLoadedParent(B,o),Y=this.findLoadedSibling(B),Z=G||Y||null;Z&&(this._addTile(Z.tileID),S[Z.tileID.key]=Z.tileID),E[P]=B}this._retainLoadedChildren(E,d,c,e);for(const P in S)e[P]||(this._coveredTiles[P]=!0,e[P]=S[P]);if(w){const P={},B={};for(const q of g)this._tiles[q.key].hasData()?P[q.key]=q:B[q.key]=q;for(const q in B){const G=B[q].children(this._source.maxzoom);this._tiles[G[0].key]&&this._tiles[G[1].key]&&this._tiles[G[2].key]&&this._tiles[G[3].key]&&(P[G[0].key]=e[G[0].key]=G[0],P[G[1].key]=e[G[1].key]=G[1],P[G[2].key]=e[G[2].key]=G[2],P[G[3].key]=e[G[3].key]=G[3],delete B[q])}for(const q in B){const G=B[q],Y=this.findLoadedParent(G,this._source.minzoom),Z=this.findLoadedSibling(G),te=Y||Z||null;if(te){P[te.tileID.key]=e[te.tileID.key]=te.tileID;for(const oe in P)P[oe].isChildOf(te.tileID)&&delete P[oe]}}for(const q in this._tiles)P[q]||(this._coveredTiles[q]=!0)}}update(e,o){if(!this._sourceLoaded||this._paused)return;let c;this.transform=e,this.terrain=o,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new u.S(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(c=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(c=c.filter(z=>this._source.hasTile(z)))):c=[];const d=e.coveringZoomLevel(this._source),g=Math.max(d-yt.maxOverzooming,this._source.minzoom),w=Math.max(d+yt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const P of c)if(P.canonical.z>this._source.minzoom){const B=P.scaledTo(P.canonical.z-1);z[B.key]=B;const q=P.scaledTo(Math.max(this._source.minzoom,Math.min(P.canonical.z,5)));z[q.key]=q}c=c.concat(Object.values(z))}const S=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(c,d);Ci(this._source.type)&&this._updateCoveredAndRetainedTiles(E,g,w,d,c,o);for(const z in E)this._tiles[z].clearFadeHold();const T=u.ab(this._tiles,E);for(const z of T){const P=this._tiles[z];P.hasSymbolBuckets&&!P.holdingForFade()?P.setHoldDuration(this.map._fadeDuration):P.hasSymbolBuckets&&!P.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,o){var c;const d={},g={},w=Math.max(o-yt.maxOverzooming,this._source.minzoom),S=Math.max(o+yt.maxUnderzooming,this._source.minzoom),E={};for(const T of e){const z=this._addTile(T);d[T.key]=T,z.hasData()||o<this._source.maxzoom&&(E[T.key]=T)}this._retainLoadedChildren(E,o,S,d);for(const T of e){let z=this._tiles[T.key];if(z.hasData())continue;if(o+1>this._source.maxzoom){const B=T.children(this._source.maxzoom)[0],q=this.getTile(B);if(q&&q.hasData()){d[B.key]=B;continue}}else{const B=T.children(this._source.maxzoom);if(d[B[0].key]&&d[B[1].key]&&d[B[2].key]&&d[B[3].key])continue}let P=z.wasRequested();for(let B=T.overscaledZ-1;B>=w;--B){const q=T.scaledTo(B);if(g[q.key])break;if(g[q.key]=!0,z=this.getTile(q),!z&&P&&(z=this._addTile(q)),z){const G=z.hasData();if((G||!(!((c=this.map)===null||c===void 0)&&c.cancelPendingTileRequestsWhileZooming)||P)&&(d[q.key]=q),P=z.wasRequested(),G)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let c,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){c=this._loadedParentTiles[d.key];break}o.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(c=this._getLoadedTile(g),c)break;d=g}for(const g of o)this._loadedParentTiles[g]=c}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const o=this._tiles[e].tileID,c=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=c}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const c=o;return o||(o=new pr(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(o,e.key,o.state)),o.uses++,this._tiles[e.key]=o,c||this._source.fire(new u.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const c=o.getExpiryTimeout();c&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},c))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(e){const o=e.sourceDataType;e.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&o==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,o,c){const d=[],g=this.transform;if(!g)return d;const w=c?g.getCameraQueryGeometry(e):e,S=e.map(G=>g.pointCoordinate(G,this.terrain)),E=w.map(G=>g.pointCoordinate(G,this.terrain)),T=this.getIds();let z=1/0,P=1/0,B=-1/0,q=-1/0;for(const G of E)z=Math.min(z,G.x),P=Math.min(P,G.y),B=Math.max(B,G.x),q=Math.max(q,G.y);for(let G=0;G<T.length;G++){const Y=this._tiles[T[G]];if(Y.holdingForFade())continue;const Z=Y.tileID,te=Math.pow(2,g.zoom-Y.tileID.overscaledZ),oe=o*Y.queryPadding*u.X/Y.tileSize/te,K=[Z.getTilePoint(new u.Z(z,P)),Z.getTilePoint(new u.Z(B,q))];if(K[0].x-oe<u.X&&K[0].y-oe<u.X&&K[1].x+oe>=0&&K[1].y+oe>=0){const he=S.map(_e=>Z.getTilePoint(_e)),ge=E.map(_e=>Z.getTilePoint(_e));d.push({tile:Y,tileID:Z,queryGeometry:he,cameraQueryGeometry:ge,scale:te})}}return d}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(c=>this._tiles[c].tileID);for(const c of o)c.posMatrix=this.transform.calculatePosMatrix(c.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Ci(this._source.type)){const e=j.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=e)return!0}return!1}setFeatureState(e,o,c){this._state.updateState(e=e||"_geojsonTileLayer",o,c)}removeFeatureState(e,o,c){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,c)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,c){const d=this._tiles[e];d&&d.setDependencies(o,c)}reloadTilesForDependencies(e,o){for(const c in this._tiles)this._tiles[c].hasDependency(e,o)&&this._reloadTile(c,"reloading");this._cache.filter(c=>!c.hasDependency(e,o))}}function Yn(m,e){const o=Math.abs(2*m.wrap)-+(m.wrap<0),c=Math.abs(2*e.wrap)-+(e.wrap<0);return m.overscaledZ-e.overscaledZ||c-o||e.canonical.y-m.canonical.y||e.canonical.x-m.canonical.x}function Ci(m){return m==="raster"||m==="image"||m==="video"}yt.maxOverzooming=10,yt.maxUnderzooming=3;class St{constructor(e,o){this.reset(e,o)}reset(e,o){this.points=e||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=u.ac(e,0,1);let o=1,c=this._distances[o];const d=e*this.paddedLength+this.padding;for(;c<d&&o<this._distances.length;)c=this._distances[++o];const g=o-1,w=this._distances[g],S=c-w,E=S>0?(d-w)/S:0;return this.points[g].mult(1-E).add(this.points[o].mult(E))}}function Ji(m,e){let o=!0;return m==="always"||m!=="never"&&e!=="never"||(o=!1),o}class Yi{constructor(e,o,c){const d=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(e/c),this.yCellCount=Math.ceil(o/c);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=o,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,o,c,d,g){this._forEachCell(o,c,d,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g)}insertCircle(e,o,c,d){this._forEachCell(o-d,c-d,o+d,c+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(o),this.circles.push(c),this.circles.push(d)}_insertBoxCell(e,o,c,d,g,w){this.boxCells[g].push(w)}_insertCircleCell(e,o,c,d,g,w){this.circleCells[g].push(w)}_query(e,o,c,d,g,w,S){if(c<0||e>this.width||d<0||o>this.height)return[];const E=[];if(e<=0&&o<=0&&this.width<=c&&this.height<=d){if(g)return[{key:null,x1:e,y1:o,x2:c,y2:d}];for(let T=0;T<this.boxKeys.length;T++)E.push({key:this.boxKeys[T],x1:this.bboxes[4*T],y1:this.bboxes[4*T+1],x2:this.bboxes[4*T+2],y2:this.bboxes[4*T+3]});for(let T=0;T<this.circleKeys.length;T++){const z=this.circles[3*T],P=this.circles[3*T+1],B=this.circles[3*T+2];E.push({key:this.circleKeys[T],x1:z-B,y1:P-B,x2:z+B,y2:P+B})}}else this._forEachCell(e,o,c,d,this._queryCell,E,{hitTest:g,overlapMode:w,seenUids:{box:{},circle:{}}},S);return E}query(e,o,c,d){return this._query(e,o,c,d,!1,null)}hitTest(e,o,c,d,g,w){return this._query(e,o,c,d,!0,g,w).length>0}hitTestCircle(e,o,c,d,g){const w=e-c,S=e+c,E=o-c,T=o+c;if(S<0||w>this.width||T<0||E>this.height)return!1;const z=[];return this._forEachCell(w,E,S,T,this._queryCellCircle,z,{hitTest:!0,overlapMode:d,circle:{x:e,y:o,radius:c},seenUids:{box:{},circle:{}}},g),z.length>0}_queryCell(e,o,c,d,g,w,S,E){const{seenUids:T,hitTest:z,overlapMode:P}=S,B=this.boxCells[g];if(B!==null){const G=this.bboxes;for(const Y of B)if(!T.box[Y]){T.box[Y]=!0;const Z=4*Y,te=this.boxKeys[Y];if(e<=G[Z+2]&&o<=G[Z+3]&&c>=G[Z+0]&&d>=G[Z+1]&&(!E||E(te))&&(!z||!Ji(P,te.overlapMode))&&(w.push({key:te,x1:G[Z],y1:G[Z+1],x2:G[Z+2],y2:G[Z+3]}),z))return!0}}const q=this.circleCells[g];if(q!==null){const G=this.circles;for(const Y of q)if(!T.circle[Y]){T.circle[Y]=!0;const Z=3*Y,te=this.circleKeys[Y];if(this._circleAndRectCollide(G[Z],G[Z+1],G[Z+2],e,o,c,d)&&(!E||E(te))&&(!z||!Ji(P,te.overlapMode))){const oe=G[Z],K=G[Z+1],he=G[Z+2];if(w.push({key:te,x1:oe-he,y1:K-he,x2:oe+he,y2:K+he}),z)return!0}}}return!1}_queryCellCircle(e,o,c,d,g,w,S,E){const{circle:T,seenUids:z,overlapMode:P}=S,B=this.boxCells[g];if(B!==null){const G=this.bboxes;for(const Y of B)if(!z.box[Y]){z.box[Y]=!0;const Z=4*Y,te=this.boxKeys[Y];if(this._circleAndRectCollide(T.x,T.y,T.radius,G[Z+0],G[Z+1],G[Z+2],G[Z+3])&&(!E||E(te))&&!Ji(P,te.overlapMode))return w.push(!0),!0}}const q=this.circleCells[g];if(q!==null){const G=this.circles;for(const Y of q)if(!z.circle[Y]){z.circle[Y]=!0;const Z=3*Y,te=this.circleKeys[Y];if(this._circlesCollide(G[Z],G[Z+1],G[Z+2],T.x,T.y,T.radius)&&(!E||E(te))&&!Ji(P,te.overlapMode))return w.push(!0),!0}}}_forEachCell(e,o,c,d,g,w,S,E){const T=this._convertToXCellCoord(e),z=this._convertToYCellCoord(o),P=this._convertToXCellCoord(c),B=this._convertToYCellCoord(d);for(let q=T;q<=P;q++)for(let G=z;G<=B;G++)if(g.call(this,e,o,c,d,this.xCellCount*G+q,w,S,E))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,o,c,d,g,w){const S=d-e,E=g-o,T=c+w;return T*T>S*S+E*E}_circleAndRectCollide(e,o,c,d,g,w,S){const E=(w-d)/2,T=Math.abs(e-(d+E));if(T>E+c)return!1;const z=(S-g)/2,P=Math.abs(o-(g+z));if(P>z+c)return!1;if(T<=E||P<=z)return!0;const B=T-E,q=P-z;return B*B+q*q<=c*c}}function Bi(m,e,o,c,d){const g=u.H();return e?(u.K(g,g,[1/d,1/d,1]),o||u.ad(g,g,c.angle)):u.L(g,c.labelPlaneMatrix,m),g}function Oi(m,e,o,c,d){if(e){const g=u.ae(m);return u.K(g,g,[d,d,1]),o||u.ad(g,g,-c.angle),g}return c.glCoordMatrix}function Q(m,e,o){let c;o?(c=[m.x,m.y,o(m.x,m.y),1],u.af(c,c,e)):(c=[m.x,m.y,0,1],function(g,w,S){const E=w[0],T=w[1];g[0]=S[0]*E+S[4]*T+S[12],g[1]=S[1]*E+S[5]*T+S[13],g[3]=S[3]*E+S[7]*T+S[15]}(c,c,e));const d=c[3];return{point:new u.P(c[0]/d,c[1]/d),signedDistanceFromCamera:d,isOccluded:!1}}function R(m,e){return .5+m/e*.5}function L(m,e){return m.x>=-e[0]&&m.x<=e[0]&&m.y>=-e[1]&&m.y<=e[1]}function $(m,e,o,c,d,g,w,S,E,T,z,P,B,q,G){const Y=c?m.textSizeData:m.iconSizeData,Z=u.ag(Y,o.transform.zoom),te=[256/o.width*2+1,256/o.height*2+1],oe=c?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;oe.clear();const K=m.lineVertexArray,he=c?m.text.placedSymbolArray:m.icon.placedSymbolArray,ge=o.transform.width/o.transform.height;let _e=!1;for(let Pe=0;Pe<he.length;Pe++){const Be=he.get(Pe);if(Be.hidden||Be.writingMode===u.ah.vertical&&!_e){ue(Be.numGlyphs,oe);continue}_e=!1;const Je=Q(new u.P(Be.anchorX,Be.anchorY),e,G);if(!L(Je.point,te)){ue(Be.numGlyphs,oe);continue}const Ye=R(o.transform.cameraToCenterDistance,Je.signedDistanceFromCamera),Oe=u.ai(Y,Z,Be),je=w?Oe/Ye:Oe*Ye,lt={getElevation:G,labelPlaneMatrix:d,lineVertexArray:K,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:T,tileAnchorPoint:new u.P(Be.anchorX,Be.anchorY),unwrappedTileID:z,width:P,height:B,translation:q},At=de(lt,Be,je,!1,S,e,g,m.glyphOffsetArray,oe,ge,E);_e=At.useVertical,(At.notEnoughRoom||_e||At.needsFlipping&&de(lt,Be,je,!0,S,e,g,m.glyphOffsetArray,oe,ge,E).notEnoughRoom)&&ue(Be.numGlyphs,oe)}c?m.text.dynamicLayoutVertexBuffer.updateData(oe):m.icon.dynamicLayoutVertexBuffer.updateData(oe)}function X(m,e,o,c,d,g,w,S){const E=g.glyphStartIndex+g.numGlyphs,T=g.lineStartIndex,z=g.lineStartIndex+g.lineLength,P=e.getoffsetX(g.glyphStartIndex),B=e.getoffsetX(E-1),q=H(m*P,o,c,d,g.segment,T,z,S,w);if(!q)return null;const G=H(m*B,o,c,d,g.segment,T,z,S,w);return G?S.projectionCache.anyProjectionOccluded?null:{first:q,last:G}:null}function se(m,e,o,c){return m===u.ah.horizontal&&Math.abs(o.y-e.y)>Math.abs(o.x-e.x)*c?{useVertical:!0}:(m===u.ah.vertical?e.y<o.y:e.x>o.x)?{needsFlipping:!0}:null}function de(m,e,o,c,d,g,w,S,E,T,z){const P=o/24,B=e.lineOffsetX*P,q=e.lineOffsetY*P;let G;if(e.numGlyphs>1){const Y=e.glyphStartIndex+e.numGlyphs,Z=e.lineStartIndex,te=e.lineStartIndex+e.lineLength,oe=X(P,S,B,q,c,e,z,m);if(!oe)return{notEnoughRoom:!0};const K=Q(oe.first.point,w,m.getElevation).point,he=Q(oe.last.point,w,m.getElevation).point;if(d&&!c){const ge=se(e.writingMode,K,he,T);if(ge)return ge}G=[oe.first];for(let ge=e.glyphStartIndex+1;ge<Y-1;ge++)G.push(H(P*S.getoffsetX(ge),B,q,c,e.segment,Z,te,m,z));G.push(oe.last)}else{if(d&&!c){const Z=Q(m.tileAnchorPoint,g,m.getElevation).point,te=e.lineStartIndex+e.segment+1,oe=new u.P(m.lineVertexArray.getx(te),m.lineVertexArray.gety(te)),K=Q(oe,g,m.getElevation),he=K.signedDistanceFromCamera>0?K.point:function(_e,Pe,Be,Je,Ye,Oe){return me(_e,Pe,Be,1,Ye,Oe)}(m.tileAnchorPoint,oe,Z,0,g,m),ge=se(e.writingMode,Z,he,T);if(ge)return ge}const Y=H(P*S.getoffsetX(e.glyphStartIndex),B,q,c,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,m,z);if(!Y||m.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};G=[Y]}for(const Y of G)u.aj(E,Y.point,Y.angle);return{}}function me(m,e,o,c,d,g){const w=m.add(m.sub(e)._unit()),S=d!==void 0?Q(w,d,g.getElevation).point:Se(w.x,w.y,g).point,E=o.sub(S);return o.add(E._mult(c/E.mag()))}function re(m,e,o){const c=e.projectionCache;if(c.projections[m])return c.projections[m];const d=new u.P(e.lineVertexArray.getx(m),e.lineVertexArray.gety(m)),g=Se(d.x,d.y,e);if(g.signedDistanceFromCamera>0)return c.projections[m]=g.point,c.anyProjectionOccluded=c.anyProjectionOccluded||g.isOccluded,g.point;const w=m-o.direction;return function(S,E,T,z,P){return me(S,E,T,z,void 0,P)}(o.distanceFromAnchor===0?e.tileAnchorPoint:new u.P(e.lineVertexArray.getx(w),e.lineVertexArray.gety(w)),d,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,e)}function Se(m,e,o){const c=m+o.translation[0],d=e+o.translation[1];let g;return!o.pitchWithMap&&o.projection.useSpecialProjectionForSymbols?(g=o.projection.projectTileCoordinates(c,d,o.unwrappedTileID,o.getElevation),g.point.x=(.5*g.point.x+.5)*o.width,g.point.y=(.5*-g.point.y+.5)*o.height):(g=Q(new u.P(c,d),o.labelPlaneMatrix,o.getElevation),g.isOccluded=!1),g}function ze(m,e,o){return m._unit()._perp()._mult(e*o)}function ve(m,e,o,c,d,g,w,S,E){if(S.projectionCache.offsets[m])return S.projectionCache.offsets[m];const T=o.add(e);if(m+E.direction<c||m+E.direction>=d)return S.projectionCache.offsets[m]=T,T;const z=re(m+E.direction,S,E),P=ze(z.sub(o),w,E.direction),B=o.add(P),q=z.add(P);return S.projectionCache.offsets[m]=u.ak(g,T,B,q)||T,S.projectionCache.offsets[m]}function H(m,e,o,c,d,g,w,S,E){const T=c?m-e:m+e;let z=T>0?1:-1,P=0;c&&(z*=-1,P=Math.PI),z<0&&(P+=Math.PI);let B,q=z>0?g+d:g+d+1;S.projectionCache.cachedAnchorPoint?B=S.projectionCache.cachedAnchorPoint:(B=Se(S.tileAnchorPoint.x,S.tileAnchorPoint.y,S).point,S.projectionCache.cachedAnchorPoint=B);let G,Y,Z=B,te=B,oe=0,K=0;const he=Math.abs(T),ge=[];let _e;for(;oe+K<=he;){if(q+=z,q<g||q>=w)return null;oe+=K,te=Z,Y=G;const Je={absOffsetX:he,direction:z,distanceFromAnchor:oe,previousVertex:te};if(Z=re(q,S,Je),o===0)ge.push(te),_e=Z.sub(te);else{let Ye;const Oe=Z.sub(te);Ye=Oe.mag()===0?ze(re(q+z,S,Je).sub(Z),o,z):ze(Oe,o,z),Y||(Y=te.add(Ye)),G=ve(q,Ye,Z,g,w,Y,o,S,Je),ge.push(Y),_e=G.sub(Y)}K=_e.mag()}const Pe=_e._mult((he-oe)/K)._add(Y||te),Be=P+Math.atan2(Z.y-te.y,Z.x-te.x);return ge.push(Pe),{point:Pe,angle:E?Be:0,path:ge}}const ee=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ue(m,e){for(let o=0;o<m;o++){const c=e.length;e.resize(c+4),e.float32.set(ee,3*c)}}const xe=100;class Le{constructor(e,o,c=new Yi(e.width+200,e.height+200,25),d=new Yi(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=o,this.grid=c,this.ignoredGrid=d,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+xe,this.screenBottomBoundary=e.height+xe,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,o,c,d,g,w,S,E,T,z,P){const B=e.anchorPointX+E[0],q=e.anchorPointY+E[1],G=this.projectAndGetPerspectiveRatio(d,B,q,g,z),Y=this._projectCollisionBox(e,c,d,g,w,S,E,G,z,P),[Z,te,oe,K]=Y.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?Y.allPointsOccluded:this.mapProjection.isOccluded(B,q,g))||G.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Z,te,oe,K)||o!=="always"&&this.grid.hitTest(Z,te,oe,K,o,T)?{box:[Z,te,oe,K],placeable:!1,offscreen:!1}:{box:[Z,te,oe,K],placeable:!0,offscreen:this.isOffscreen(Z,te,oe,K)}}placeCollisionCircles(e,o,c,d,g,w,S,E,T,z,P,B,q,G,Y,Z){const te=[],oe=new u.P(o.anchorX,o.anchorY),K=this.getPerspectiveRatio(w,oe.x,oe.y,S,Z),he=(P?g/K:g*K)/u.ap,ge={getElevation:Z,labelPlaneMatrix:E,lineVertexArray:c,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:oe,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:Y},_e=X(he,d,o.lineOffsetX*he,o.lineOffsetY*he,!1,o,!1,ge);let Pe=!1,Be=!1,Je=!0;if(_e){const Ye=.5*q*K+G,Oe=new u.P(-100,-100),je=new u.P(this.screenRightBoundary,this.screenBottomBoundary),lt=new St,At=_e.first,Ge=_e.last;let Ze=[];for(let zt=At.path.length-1;zt>=1;zt--)Ze.push(At.path[zt]);for(let zt=1;zt<Ge.path.length;zt++)Ze.push(Ge.path[zt]);const wt=2.5*Ye;if(T){const zt=this.projectPathToScreenSpace(Ze,ge,T);Ze=zt.some(Rt=>Rt.signedDistanceFromCamera<=0)?[]:zt.map(Rt=>Rt.point)}let tn=[];if(Ze.length>0){const zt=Ze[0].clone(),Rt=Ze[0].clone();for(let on=1;on<Ze.length;on++)zt.x=Math.min(zt.x,Ze[on].x),zt.y=Math.min(zt.y,Ze[on].y),Rt.x=Math.max(Rt.x,Ze[on].x),Rt.y=Math.max(Rt.y,Ze[on].y);tn=zt.x>=Oe.x&&Rt.x<=je.x&&zt.y>=Oe.y&&Rt.y<=je.y?[Ze]:Rt.x<Oe.x||zt.x>je.x||Rt.y<Oe.y||zt.y>je.y?[]:u.al([Ze],Oe.x,Oe.y,je.x,je.y)}for(const zt of tn){lt.reset(zt,.25*Ye);let Rt=0;Rt=lt.length<=.5*Ye?1:Math.ceil(lt.paddedLength/wt)+1;for(let on=0;on<Rt;on++){const ii=on/Math.max(Rt-1,1),_r=lt.lerp(ii),sn=_r.x+xe,Ei=_r.y+xe;te.push(sn,Ei,Ye,0);const fi=sn-Ye,ri=Ei-Ye,ai=sn+Ye,vr=Ei+Ye;if(Je=Je&&this.isOffscreen(fi,ri,ai,vr),Be=Be||this.isInsideGrid(fi,ri,ai,vr),e!=="always"&&this.grid.hitTestCircle(sn,Ei,Ye,e,B)&&(Pe=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!z&&Pe||!Be||K<this.perspectiveRatioCutoff?[]:te,offscreen:Je,collisionDetected:Pe}}projectPathToScreenSpace(e,o,c){return e.map(d=>Q(d,c,o.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let c=1/0,d=1/0,g=-1/0,w=-1/0;for(const z of e){const P=new u.P(z.x+xe,z.y+xe);c=Math.min(c,P.x),d=Math.min(d,P.y),g=Math.max(g,P.x),w=Math.max(w,P.y),o.push(P)}const S=this.grid.query(c,d,g,w).concat(this.ignoredGrid.query(c,d,g,w)),E={},T={};for(const z of S){const P=z.key;if(E[P.bucketInstanceId]===void 0&&(E[P.bucketInstanceId]={}),E[P.bucketInstanceId][P.featureIndex])continue;const B=[new u.P(z.x1,z.y1),new u.P(z.x2,z.y1),new u.P(z.x2,z.y2),new u.P(z.x1,z.y2)];u.am(o,B)&&(E[P.bucketInstanceId][P.featureIndex]=!0,T[P.bucketInstanceId]===void 0&&(T[P.bucketInstanceId]=[]),T[P.bucketInstanceId].push(P.featureIndex))}return T}insertCollisionBox(e,o,c,d,g,w){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:g,collisionGroupID:w,overlapMode:o},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,o,c,d,g,w){const S=c?this.ignoredGrid:this.grid,E={bucketInstanceId:d,featureIndex:g,collisionGroupID:w,overlapMode:o};for(let T=0;T<e.length;T+=4)S.insertCircle(E,e[T],e[T+1],e[T+2])}projectAndGetPerspectiveRatio(e,o,c,d,g){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,c,d,g):Q(new u.P(o,c),e,g);return{point:new u.P((w.point.x+1)/2*this.transform.width+xe,(1-w.point.y)/2*this.transform.height+xe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}getPerspectiveRatio(e,o,c,d,g){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,c,d,g):Q(new u.P(o,c),e,g);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(e,o,c,d){return c<xe||e>=this.screenRightBoundary||d<xe||o>this.screenBottomBoundary}isInsideGrid(e,o,c,d){return c>=0&&e<this.gridRightBoundary&&d>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const e=u.an([]);return u.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,o,c,d,g,w,S,E,T,z){const P=o*E.perspectiveRatio;let B=new u.P(1,0),q=new u.P(0,1);const G=new u.P(e.anchorPointX+S[0],e.anchorPointY+S[1]);if(w&&!g){const Ye=this.projectAndGetPerspectiveRatio(c,G.x+1,G.y,d,T).point.sub(E.point).unit(),Oe=Math.atan(Ye.y/Ye.x)+(Ye.x<0?Math.PI:0),je=Math.sin(Oe),lt=Math.cos(Oe);B=new u.P(lt,je),q=new u.P(-je,lt)}else if(!w&&g){const Ye=-this.transform.angle,Oe=Math.sin(Ye),je=Math.cos(Ye);B=new u.P(je,Oe),q=new u.P(-Oe,je)}let Y=E.point,Z=P;if(g){Y=G;const Ye=this.transform.zoom-Math.floor(this.transform.zoom);Z=Math.pow(2,-Ye),Z*=this.mapProjection.getPitchedTextCorrection(this.transform,G,d),z||(Z*=u.ac(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}z&&(Y=Y.add(B.mult(z.x*Z)).add(q.mult(z.y*Z)));const te=e.x1*Z,oe=e.x2*Z,K=(te+oe)/2,he=e.y1*Z,ge=e.y2*Z,_e=(he+ge)/2,Pe=[{offsetX:te,offsetY:he},{offsetX:K,offsetY:he},{offsetX:oe,offsetY:he},{offsetX:oe,offsetY:_e},{offsetX:oe,offsetY:ge},{offsetX:K,offsetY:ge},{offsetX:te,offsetY:ge},{offsetX:te,offsetY:_e}];let Be=[];for(const{offsetX:Ye,offsetY:Oe}of Pe)Be.push(new u.P(Y.x+B.x*Ye+q.x*Oe,Y.y+B.y*Ye+q.y*Oe));let Je=!1;if(g){const Ye=Be.map(Oe=>this.projectAndGetPerspectiveRatio(c,Oe.x,Oe.y,d,T));Je=Ye.some(Oe=>!Oe.isOccluded),Be=Ye.map(Oe=>Oe.point)}else Je=!0;return{box:u.ao(Be),allPointsOccluded:!Je}}}function De(m,e,o){return e*(u.X/(m.tileSize*Math.pow(2,o-m.tileID.overscaledZ)))}class nt{constructor(e,o,c,d){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?o:-o))):d&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class Fe{constructor(e,o,c,d,g){this.text=new nt(e?e.text:null,o,c,g),this.icon=new nt(e?e.icon:null,o,d,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gt{constructor(e,o,c){this.text=e,this.icon=o,this.skipFade=c}}class Ve{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class st{constructor(e,o,c,d,g){this.bucketInstanceId=e,this.featureIndex=o,this.sourceLayerIndex=c,this.bucketIndex=d,this.tileID=g}}class xt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const o=++this.maxGroupID;this.collisionGroups[e]={ID:o,predicate:c=>c.collisionGroupID===o}}return this.collisionGroups[e]}}function Tt(m,e,o,c,d){const{horizontalAlign:g,verticalAlign:w}=u.au(m);return new u.P(-(g-.5)*e+c[0]*d,-(w-.5)*o+c[1]*d)}class Dt{constructor(e,o,c,d,g,w){this.transform=e.clone(),this.terrain=c,this.collisionIndex=new Le(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new xt(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const o=this.terrain;return o?(c,d)=>o.getElevation(e,c,d):null}getBucketParts(e,o,c,d){const g=c.getBucket(o),w=c.latestFeatureIndex;if(!g||!w||o.id!==g.layerIds[0])return;const S=c.collisionBoxArray,E=g.layers[0].layout,T=g.layers[0].paint,z=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),P=c.tileSize/u.X,B=c.tileID.toUnwrapped(),q=this.transform.calculatePosMatrix(B),G=E.get("text-pitch-alignment")==="map",Y=E.get("text-rotation-alignment")==="map",Z=De(c,1,this.transform.zoom),te=this.collisionIndex.mapProjection.translatePosition(this.transform,c,T.get("text-translate"),T.get("text-translate-anchor")),oe=this.collisionIndex.mapProjection.translatePosition(this.transform,c,T.get("icon-translate"),T.get("icon-translate-anchor")),K=Bi(q,G,Y,this.transform,Z);let he=null;if(G){const _e=Oi(q,G,Y,this.transform,Z);he=u.L([],this.transform.labelPlaneMatrix,_e)}this.retainedQueryData[g.bucketInstanceId]=new st(g.bucketInstanceId,w,g.sourceLayerIndex,g.index,c.tileID);const ge={bucket:g,layout:E,translationText:te,translationIcon:oe,posMatrix:q,unwrappedTileID:B,textLabelPlaneMatrix:K,labelToScreenMatrix:he,scale:z,textPixelRatio:P,holdingForFade:c.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:u.ag(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(d)for(const _e of g.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:Be,symbolInstanceEnd:Je}=_e;e.push({sortKey:Pe,symbolInstanceStart:Be,symbolInstanceEnd:Je,parameters:ge})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(e,o,c,d,g,w,S,E,T,z,P,B,q,G,Y,Z,te,oe,K){const he=u.aq[e.textAnchor],ge=[e.textOffset0,e.textOffset1],_e=Tt(he,c,d,ge,g),Pe=this.collisionIndex.placeCollisionBox(o,B,E,T,z,S,w,Z,P.predicate,K,_e);if((!oe||this.collisionIndex.placeCollisionBox(oe,B,E,T,z,S,w,te,P.predicate,K,_e).placeable)&&Pe.placeable){let Be;if(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(Be=this.prevPlacement.variableOffsets[q.crossTileID].anchor),q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[q.crossTileID]={textOffset:ge,width:c,height:d,anchor:he,textBoxScale:g,prevAnchor:Be},this.markUsedJustification(G,he,q,Y),G.allowVerticalPlacement&&(this.markUsedOrientation(G,Y,q),this.placedOrientations[q.crossTileID]=Y),{shift:_e,placedGlyphBoxes:Pe}}}placeLayerBucketPart(e,o,c){const{bucket:d,layout:g,translationText:w,translationIcon:S,posMatrix:E,unwrappedTileID:T,textLabelPlaneMatrix:z,labelToScreenMatrix:P,textPixelRatio:B,holdingForFade:q,collisionBoxArray:G,partiallyEvaluatedTextSize:Y,collisionGroup:Z}=e.parameters,te=g.get("text-optional"),oe=g.get("icon-optional"),K=u.ar(g,"text-overlap","text-allow-overlap"),he=K==="always",ge=u.ar(g,"icon-overlap","icon-allow-overlap"),_e=ge==="always",Pe=g.get("text-rotation-alignment")==="map",Be=g.get("text-pitch-alignment")==="map",Je=g.get("icon-text-fit")!=="none",Ye=g.get("symbol-z-order")==="viewport-y",Oe=he&&(_e||!d.hasIconData()||oe),je=_e&&(he||!d.hasTextData()||te);!d.collisionArrays&&G&&d.deserializeCollisionBoxes(G);const lt=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),At=(Ge,Ze,wt)=>{var tn,zt;if(o[Ge.crossTileID])return;if(q)return void(this.placements[Ge.crossTileID]=new gt(!1,!1,!1));let Rt=!1,on=!1,ii=!0,_r=null,sn={box:null,placeable:!1,offscreen:null},Ei={box:null,placeable:!1,offscreen:null},fi=null,ri=null,ai=null,vr=0,qa=0,Cs=0;Ze.textFeatureIndex?vr=Ze.textFeatureIndex:Ge.useRuntimeCollisionCircles&&(vr=Ge.featureIndex),Ze.verticalTextFeatureIndex&&(qa=Ze.verticalTextFeatureIndex);const Ga=Ze.textBox;if(Ga){const tr=mi=>{let oi=u.ah.horizontal;if(d.allowVerticalPlacement&&!mi&&this.prevPlacement){const $i=this.prevPlacement.placedOrientations[Ge.crossTileID];$i&&(this.placedOrientations[Ge.crossTileID]=$i,oi=$i,this.markUsedOrientation(d,oi,Ge))}return oi},xr=(mi,oi)=>{if(d.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&Ze.verticalTextBox){for(const $i of d.writingModes)if($i===u.ah.vertical?(sn=oi(),Ei=sn):sn=mi(),sn&&sn.placeable)break}else sn=mi()},ba=Ge.textAnchorOffsetStartIndex,br=Ge.textAnchorOffsetEndIndex;if(br===ba){const mi=(oi,$i)=>{const xn=this.collisionIndex.placeCollisionBox(oi,K,B,E,T,Be,Pe,w,Z.predicate,lt);return xn&&xn.placeable&&(this.markUsedOrientation(d,$i,Ge),this.placedOrientations[Ge.crossTileID]=$i),xn};xr(()=>mi(Ga,u.ah.horizontal),()=>{const oi=Ze.verticalTextBox;return d.allowVerticalPlacement&&Ge.numVerticalGlyphVertices>0&&oi?mi(oi,u.ah.vertical):{box:null,offscreen:null}}),tr(sn&&sn.placeable)}else{let mi=u.aq[(zt=(tn=this.prevPlacement)===null||tn===void 0?void 0:tn.variableOffsets[Ge.crossTileID])===null||zt===void 0?void 0:zt.anchor];const oi=(xn,So,wa)=>{const Ss=xn.x2-xn.x1,Pf=xn.y2-xn.y1,zf=Ge.textBoxScale,Qn=Je&&ge==="never"?So:null;let Ca=null,Es=K==="never"?1:2,As="never";mi&&Es++;for(let hu=0;hu<Es;hu++){for(let pu=ba;pu<br;pu++){const fu=d.textAnchorOffsets.get(pu);if(mi&&fu.textAnchor!==mi)continue;const kl=this.attemptAnchorPlacement(fu,xn,Ss,Pf,zf,Pe,Be,B,E,T,Z,As,Ge,d,wa,w,S,Qn,lt);if(kl&&(Ca=kl.placedGlyphBoxes,Ca&&Ca.placeable))return Rt=!0,_r=kl.shift,Ca}mi?mi=null:As=K}return c&&!Ca&&(Ca={box:this.collisionIndex.placeCollisionBox(Ga,"always",B,E,T,Be,Pe,w,Z.predicate,lt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Ca};xr(()=>oi(Ga,Ze.iconBox,u.ah.horizontal),()=>{const xn=Ze.verticalTextBox;return d.allowVerticalPlacement&&(!sn||!sn.placeable)&&Ge.numVerticalGlyphVertices>0&&xn?oi(xn,Ze.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),sn&&(Rt=sn.placeable,ii=sn.offscreen);const $i=tr(sn&&sn.placeable);if(!Rt&&this.prevPlacement){const xn=this.prevPlacement.variableOffsets[Ge.crossTileID];xn&&(this.variableOffsets[Ge.crossTileID]=xn,this.markUsedJustification(d,xn.anchor,Ge,$i))}}}if(fi=sn,Rt=fi&&fi.placeable,ii=fi&&fi.offscreen,Ge.useRuntimeCollisionCircles){const tr=d.text.placedSymbolArray.get(Ge.centerJustifiedTextSymbolIndex),xr=u.ai(d.textSizeData,Y,tr),ba=g.get("text-padding");ri=this.collisionIndex.placeCollisionCircles(K,tr,d.lineVertexArray,d.glyphOffsetArray,xr,E,T,z,P,c,Be,Z.predicate,Ge.collisionCircleDiameter,ba,w,lt),ri.circles.length&&ri.collisionDetected&&!c&&u.w("Collisions detected, but collision boxes are not shown"),Rt=he||ri.circles.length>0&&!ri.collisionDetected,ii=ii&&ri.offscreen}if(Ze.iconFeatureIndex&&(Cs=Ze.iconFeatureIndex),Ze.iconBox){const tr=xr=>this.collisionIndex.placeCollisionBox(xr,ge,B,E,T,Be,Pe,S,Z.predicate,lt,Je&&_r?_r:void 0);Ei&&Ei.placeable&&Ze.verticalIconBox?(ai=tr(Ze.verticalIconBox),on=ai.placeable):(ai=tr(Ze.iconBox),on=ai.placeable),ii=ii&&ai.offscreen}const xa=te||Ge.numHorizontalGlyphVertices===0&&Ge.numVerticalGlyphVertices===0,Dl=oe||Ge.numIconVertices===0;xa||Dl?Dl?xa||(on=on&&Rt):Rt=on&&Rt:on=Rt=on&&Rt;const du=on&&ai.placeable;if(Rt&&fi.placeable&&this.collisionIndex.insertCollisionBox(fi.box,K,g.get("text-ignore-placement"),d.bucketInstanceId,Ei&&Ei.placeable&&qa?qa:vr,Z.ID),du&&this.collisionIndex.insertCollisionBox(ai.box,ge,g.get("icon-ignore-placement"),d.bucketInstanceId,Cs,Z.ID),ri&&Rt&&this.collisionIndex.insertCollisionCircles(ri.circles,K,g.get("text-ignore-placement"),d.bucketInstanceId,vr,Z.ID),c&&this.storeCollisionData(d.bucketInstanceId,wt,Ze,fi,ai,ri),Ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ge.crossTileID]=new gt(Rt||Oe,on||je,ii||d.justReloaded),o[Ge.crossTileID]=!0};if(Ye){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ge=d.getSortedSymbolIndexes(this.transform.angle);for(let Ze=Ge.length-1;Ze>=0;--Ze){const wt=Ge[Ze];At(d.symbolInstances.get(wt),d.collisionArrays[wt],wt)}}else for(let Ge=e.symbolInstanceStart;Ge<e.symbolInstanceEnd;Ge++)At(d.symbolInstances.get(Ge),d.collisionArrays[Ge],Ge);if(c&&d.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[d.bucketInstanceId];u.as(Ge.invProjMatrix,E),Ge.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(e,o,c,d,g,w){if(c.textBox||c.iconBox){let S,E;this.collisionBoxArrays.has(e)?S=this.collisionBoxArrays.get(e):(S=new Map,this.collisionBoxArrays.set(e,S)),S.has(o)?E=S.get(o):(E={text:null,icon:null},S.set(o,E)),c.textBox&&(E.text=d.box),c.iconBox&&(E.icon=g.box)}if(w){let S=this.collisionCircleArrays[e];S===void 0&&(S=this.collisionCircleArrays[e]=new Ve);for(let E=0;E<w.circles.length;E+=4)S.circles.push(w.circles[E+0]),S.circles.push(w.circles[E+1]),S.circles.push(w.circles[E+2]),S.circles.push(w.collisionDetected?1:0)}}markUsedJustification(e,o,c,d){let g;g=d===u.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[u.at(o)];const w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const S of w)S>=0&&(e.text.placedSymbolArray.get(S).crossTileID=g>=0&&S!==g?0:c.crossTileID)}markUsedOrientation(e,o,c){const d=o===u.ah.horizontal||o===u.ah.horizontalOnly?o:0,g=o===u.ah.vertical?o:0,w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const S of w)e.text.placedSymbolArray.get(S).placedOrientation=d;c.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let c=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const d=o?o.symbolFadeChange(e):1,g=o?o.opacities:{},w=o?o.variableOffsets:{},S=o?o.placedOrientations:{};for(const E in this.placements){const T=this.placements[E],z=g[E];z?(this.opacities[E]=new Fe(z,d,T.text,T.icon),c=c||T.text!==z.text.placed||T.icon!==z.icon.placed):(this.opacities[E]=new Fe(null,d,T.text,T.icon,T.skipFade),c=c||T.text||T.icon)}for(const E in g){const T=g[E];if(!this.opacities[E]){const z=new Fe(T,d,!1,!1);z.isHidden()||(this.opacities[E]=z,c=c||T.text.placed||T.icon.placed)}}for(const E in w)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=w[E]);for(const E in S)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=S[E]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:e)}updateLayerOpacities(e,o){const c={};for(const d of o){const g=d.getBucket(e);g&&d.latestFeatureIndex&&e.id===g.layerIds[0]&&this.updateBucketOpacities(g,d.tileID,c,d.collisionBoxArray)}}updateBucketOpacities(e,o,c,d){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const g=e.layers[0],w=g.layout,S=new Fe(null,0,!1,!1,!0),E=w.get("text-allow-overlap"),T=w.get("icon-allow-overlap"),z=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),P=w.get("text-rotation-alignment")==="map",B=w.get("text-pitch-alignment")==="map",q=w.get("icon-text-fit")!=="none",G=new Fe(null,0,E&&(T||!e.hasIconData()||w.get("icon-optional")),T&&(E||!e.hasTextData()||w.get("text-optional")),!0);!e.collisionArrays&&d&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(d);const Y=(te,oe,K)=>{for(let he=0;he<oe/4;he++)te.opacityVertexArray.emplaceBack(K);te.hasVisibleVertices=te.hasVisibleVertices||K!==Mn},Z=this.collisionBoxArrays.get(e.bucketInstanceId);for(let te=0;te<e.symbolInstances.length;te++){const oe=e.symbolInstances.get(te),{numHorizontalGlyphVertices:K,numVerticalGlyphVertices:he,crossTileID:ge}=oe;let _e=this.opacities[ge];c[ge]?_e=S:_e||(_e=G,this.opacities[ge]=_e),c[ge]=!0;const Pe=oe.numIconVertices>0,Be=this.placedOrientations[oe.crossTileID],Je=Be===u.ah.vertical,Ye=Be===u.ah.horizontal||Be===u.ah.horizontalOnly;if(K>0||he>0){const je=mn(_e.text);Y(e.text,K,Je?Mn:je),Y(e.text,he,Ye?Mn:je);const lt=_e.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(Ze=>{Ze>=0&&(e.text.placedSymbolArray.get(Ze).hidden=lt||Je?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=lt||Ye?1:0);const At=this.variableOffsets[oe.crossTileID];At&&this.markUsedJustification(e,At.anchor,oe,Be);const Ge=this.placedOrientations[oe.crossTileID];Ge&&(this.markUsedJustification(e,"left",oe,Ge),this.markUsedOrientation(e,Ge,oe))}if(Pe){const je=mn(_e.icon),lt=!(q&&oe.verticalPlacedIconSymbolIndex&&Je);oe.placedIconSymbolIndex>=0&&(Y(e.icon,oe.numIconVertices,lt?je:Mn),e.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=_e.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(Y(e.icon,oe.numVerticalIconVertices,lt?Mn:je),e.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=_e.icon.isHidden())}const Oe=Z&&Z.has(te)?Z.get(te):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const je=e.collisionArrays[te];if(je){let lt=new u.P(0,0);if(je.textBox||je.verticalTextBox){let At=!0;if(z){const Ge=this.variableOffsets[ge];Ge?(lt=Tt(Ge.anchor,Ge.width,Ge.height,Ge.textOffset,Ge.textBoxScale),P&&lt._rotate(B?this.transform.angle:-this.transform.angle)):At=!1}if(je.textBox||je.verticalTextBox){let Ge;je.textBox&&(Ge=Je),je.verticalTextBox&&(Ge=Ye),Mt(e.textCollisionBox.collisionVertexArray,_e.text.placed,!At||Ge,Oe.text,lt.x,lt.y)}}if(je.iconBox||je.verticalIconBox){const At=!!(!Ye&&je.verticalIconBox);let Ge;je.iconBox&&(Ge=At),je.verticalIconBox&&(Ge=!At),Mt(e.iconCollisionBox.collisionVertexArray,_e.icon.placed,Ge,Oe.icon,q?lt.x:0,q?lt.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const te=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=te.invProjMatrix,e.placementViewportMatrix=te.viewportMatrix,e.collisionCircleArray=te.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,o){const c=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*c>e}setStale(){this.stale=!0}}function Mt(m,e,o,c,d,g){c&&c.length!==0||(c=[0,0,0,0]);const w=c[0]-xe,S=c[1]-xe,E=c[2]-xe,T=c[3]-xe;m.emplaceBack(e?1:0,o?1:0,d||0,g||0,w,S),m.emplaceBack(e?1:0,o?1:0,d||0,g||0,E,S),m.emplaceBack(e?1:0,o?1:0,d||0,g||0,E,T),m.emplaceBack(e?1:0,o?1:0,d||0,g||0,w,T)}const _n=Math.pow(2,25),Et=Math.pow(2,24),Jr=Math.pow(2,17),Qi=Math.pow(2,16),On=Math.pow(2,9),Nn=Math.pow(2,8),ma=Math.pow(2,1);function mn(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const e=m.placed?1:0,o=Math.floor(127*m.opacity);return o*_n+e*Et+o*Jr+e*Qi+o*On+e*Nn+o*ma+e}const Mn=0;function Yr(){return{isOccluded:(m,e,o)=>!1,getPitchedTextCorrection:(m,e,o)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(m,e,o,c){throw new Error("Not implemented.")},translatePosition:(m,e,o,c)=>function(d,g,w,S,E=!1){if(!w[0]&&!w[1])return[0,0];const T=E?S==="map"?d.angle:0:S==="viewport"?-d.angle:0;if(T){const z=Math.sin(T),P=Math.cos(T);w=[w[0]*P-w[1]*z,w[0]*z+w[1]*P]}return[E?w[0]:De(g,w[0],d.zoom),E?w[1]:De(g,w[1],d.zoom)]}(m,e,o,c),getCircleRadiusCorrection:m=>1}}class Fr{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,o,c,d,g){const w=this._bucketParts;for(;this._currentTileIndex<e.length;)if(o.getBucketParts(w,d,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((S,E)=>S.sortKey-E.sortKey));this._currentPartIndex<w.length;)if(o.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,g())return!0;return!1}}class _t{constructor(e,o,c,d,g,w,S,E){this.placement=new Dt(e,Yr(),o,w,S,E),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(e,o,c){const d=j.now(),g=()=>!this._forceFullPlacement&&j.now()-d>2;for(;this._currentPlacementIndex>=0;){const w=o[e[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=S)&&(!w.maxzoom||w.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Fr(w)),this._inProgressLayer.continuePlacement(c[w.source],this.placement,this._showCollisionBoxes,w,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Zt=512/u.X/2;class In{constructor(e,o,c){this.tileID=e,this.bucketInstanceId=c,this._symbolsByKey={};const d=new Map;for(let g=0;g<o.length;g++){const w=o.get(g),S=w.key,E=d.get(S);E?E.push(w):d.set(S,[w])}for(const[g,w]of d){const S={positions:w.map(E=>({x:Math.floor(E.anchorX*Zt),y:Math.floor(E.anchorY*Zt)})),crossTileIDs:w.map(E=>E.crossTileID)};if(S.positions.length>128){const E=new u.av(S.positions.length,16,Uint16Array);for(const{x:T,y:z}of S.positions)E.add(T,z);E.finish(),delete S.positions,S.index=E}this._symbolsByKey[g]=S}}getScaledCoordinates(e,o){const{x:c,y:d,z:g}=this.tileID.canonical,{x:w,y:S,z:E}=o.canonical,T=Zt/Math.pow(2,E-g),z=(S*u.X+e.anchorY)*T,P=d*u.X*Zt;return{x:Math.floor((w*u.X+e.anchorX)*T-c*u.X*Zt),y:Math.floor(z-P)}}findMatches(e,o,c){const d=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let g=0;g<e.length;g++){const w=e.get(g);if(w.crossTileID)continue;const S=this._symbolsByKey[w.key];if(!S)continue;const E=this.getScaledCoordinates(w,o);if(S.index){const T=S.index.range(E.x-d,E.y-d,E.x+d,E.y+d).sort();for(const z of T){const P=S.crossTileIDs[z];if(!c[P]){c[P]=!0,w.crossTileID=P;break}}}else if(S.positions)for(let T=0;T<S.positions.length;T++){const z=S.positions[T],P=S.crossTileIDs[T];if(Math.abs(z.x-E.x)<=d&&Math.abs(z.y-E.y)<=d&&!c[P]){c[P]=!0,w.crossTileID=P;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class It{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Si{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const o=Math.round((e-this.lng)/360);if(o!==0)for(const c in this.indexes){const d=this.indexes[c],g={};for(const w in d){const S=d[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+o),g[S.tileID.key]=S}this.indexes[c]=g}this.lng=e}addBucket(e,o,c){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let g=0;g<o.symbolInstances.length;g++)o.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const d=this.usedCrossTileIDs[e.overscaledZ];for(const g in this.indexes){const w=this.indexes[g];if(Number(g)>e.overscaledZ)for(const S in w){const E=w[S];E.tileID.isChildOf(e)&&E.findMatches(o.symbolInstances,e,d)}else{const S=w[e.scaledTo(Number(g)).key];S&&S.findMatches(o.symbolInstances,e,d)}}for(let g=0;g<o.symbolInstances.length;g++){const w=o.symbolInstances.get(g);w.crossTileID||(w.crossTileID=c.generate(),d[w.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new In(e,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(e,o){for(const c of o.getCrossTileIDsLists())for(const d of c)delete this.usedCrossTileIDs[e][d]}removeStaleBuckets(e){let o=!1;for(const c in this.indexes){const d=this.indexes[c];for(const g in d)e[d[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[g]),delete d[g],o=!0)}return o}}class pi{constructor(){this.layerIndexes={},this.crossTileIDs=new It,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,o,c){let d=this.layerIndexes[e.id];d===void 0&&(d=this.layerIndexes[e.id]=new Si);let g=!1;const w={};d.handleWrapJump(c);for(const S of o){const E=S.getBucket(e);E&&e.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(S.tileID,E,this.crossTileIDs)&&(g=!0),w[E.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(g=!0),g}pruneUnusedLayers(e){const o={};e.forEach(c=>{o[c]=!0});for(const c in this.layerIndexes)o[c]||delete this.layerIndexes[c]}}const Ra=(m,e)=>u.t(m,e&&e.filter(o=>o.identifier!=="source.canvas")),ga=u.aw();class Ac extends u.E{constructor(e,o={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const d=this.sourceCaches[c].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[c].reload()}},this.map=e,this.dispatcher=new lr(Xr(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(c,d)=>this.getGlyphs(c,d)),this.dispatcher.registerMessageHandler("GI",(c,d)=>this.getImages(c,d)),this.imageManager=new Ot,this.imageManager.setEventedParent(this),this.glyphManager=new Un(e._requestManager,o.localIdeographFontFamily),this.lineAtlas=new Tn(256,512),this.crossTileSymbolIndex=new pi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),Bn().on(Ne,this._rtlPluginLoaded),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const d=this.sourceCaches[c.sourceId];if(!d)return;const g=d.getSource();if(g&&g.vectorLayerIds)for(const w in this._layers){const S=this._layers[w];S.source===g.id&&this._validateLayer(S)}})}loadURL(e,o={},c){this.fire(new u.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const d=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const g=this._loadStyleRequest;u.h(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,o,c)}).catch(w=>{this._loadStyleRequest=null,w&&!g.signal.aborted&&this.fire(new u.j(w))})}loadJSON(e,o={},c){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,j.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(e,o,c)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(ga,{validate:!1})}_load(e,o,c){var d;const g=o.transformStyle?o.transformStyle(c,e):e;if(!o.validate||!Ra(this,u.u(g))){this._loaded=!0,this.stylesheet=g;for(const w in g.sources)this.addSource(w,g.sources[w],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new bt(this.stylesheet.light),this.sky=new Nt(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const e=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of e){const c=u.aA(o);c.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=c}}_loadSprite(e,o=!1,c=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,w,S,E){return u._(this,void 0,void 0,function*(){const T=pt(g),z=S>1?"@2x":"",P={},B={};for(const{id:q,url:G}of T){const Y=w.transformRequest(ct(G,z,".json"),"SpriteJSON");P[q]=u.h(Y,E);const Z=w.transformRequest(ct(G,z,".png"),"SpriteImage");B[q]=ce.getImage(Z,E)}return yield Promise.all([...Object.values(P),...Object.values(B)]),function(q,G){return u._(this,void 0,void 0,function*(){const Y={};for(const Z in q){Y[Z]={};const te=j.getImageCanvasContext((yield G[Z]).data),oe=(yield q[Z]).data;for(const K in oe){const{width:he,height:ge,x:_e,y:Pe,sdf:Be,pixelRatio:Je,stretchX:Ye,stretchY:Oe,content:je,textFitWidth:lt,textFitHeight:At}=oe[K];Y[Z][K]={data:null,pixelRatio:Je,sdf:Be,stretchX:Ye,stretchY:Oe,content:je,textFitWidth:lt,textFitHeight:At,spriteData:{width:he,height:ge,x:_e,y:Pe,context:te}}}}return Y})}(P,B)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(const w in g){this._spritesImagesIds[w]=[];const S=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(E=>!(E in g)):[];for(const E of S)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in g[w]){const T=w==="default"?E:`${w}:${E}`;this._spritesImagesIds[w].push(T),T in this.imageManager.images?this.imageManager.updateImage(T,g[w][E],!1):this.imageManager.addImage(T,g[w][E]),o&&(this._changedImages[T]=!0)}}}).catch(g=>{this._spriteRequest=null,d=g,this.fire(new u.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),c&&c(d)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(e){const o=this.sourceCaches[e.source];if(!o)return;const c=e.sourceLayer;if(!c)return;const d=o.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(c)===-1)&&this.fire(new u.j(new Error(`Source layer "${c}" does not exist on source "${d.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,o=!1){const c=this._serializedAllLayers();if(!e||e.length===0)return Object.values(o?u.aB(c):c);const d=[];for(const g of e)if(c[g]){const w=o?u.aB(c[g]):c[g];d.push(w)}return d}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const o=Object.keys(this._layers);for(const c of o){const d=this._layers[c];d.type!=="custom"&&(e[c]=d.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const o=this._changed;if(o){const d=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(d.length||g.length)&&this._updateWorkerLayers(d,g);for(const w in this._updatedSources){const S=this._updatedSources[w];if(S==="reload")this._reloadSource(w);else{if(S!=="clear")throw new Error(`Invalid action ${S}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const c={};for(const d in this.sourceCaches){const g=this.sourceCaches[d];c[d]=g.used,g.used=!1}for(const d of this._order){const g=this._layers[d];g.recalculate(e,this._availableImages),!g.isHidden(e.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(const d in c){const g=this.sourceCaches[d];!!c[d]!=!!g.used&&g.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,o&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,o={}){var c;this._checkLoaded();const d=this.serialize();if(e=o.transformStyle?o.transformStyle(d,e):e,((c=o.validate)===null||c===void 0||c)&&Ra(this,u.u(e)))return!1;(e=u.aB(e)).layers=u.az(e.layers);const g=u.aC(d,e),w=this._getOperationsToPerform(g);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const S of w.operations)S();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const o=[],c=[];for(const d of e)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":o.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":o.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":o.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":o.push(()=>{});break;default:c.push(d.command)}return{operations:o,unimplemented:c}}addImage(e,o){if(this.getImage(e))return this.fire(new u.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,o),this._afterImageUpdated(e)}updateImage(e,o){this.imageManager.updateImage(e,o)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new u.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,o,c={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(u.u.source,`sources.${e}`,o,null,c))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const d=this.sourceCaches[e]=new yt(e,o,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:e})),d.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===e)return this.fire(new u.j(new Error(`Source "${e}" cannot be removed while layer "${c}" is using it.`)));const o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,o){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const c=this.sourceCaches[e].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(o),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,o,c={}){this._checkLoaded();const d=e.id;if(this.getLayer(d))return void this.fire(new u.j(new Error(`Layer "${d}" already exists on this map.`)));let g;if(e.type==="custom"){if(Ra(this,u.aD(e)))return;g=u.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(d,e.source),e=u.aB(e),e=u.e(e,{source:d})),this._validate(u.u.layer,`layers.${d}`,e,{arrayIndex:-1},c))return;g=u.aA(e),this._validateLayer(g),g.setEventedParent(this,{layer:{id:d}})}const w=o?this._order.indexOf(o):this._order.length;if(o&&w===-1)this.fire(new u.j(new Error(`Cannot add layer "${d}" before non-existing layer "${o}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=g,this._removedLayers[d]&&g.source&&g.type!=="custom"){const S=this._removedLayers[d];delete this._removedLayers[d],S.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(e,o){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new u.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===o)return;const c=this._order.indexOf(e);this._order.splice(c,1);const d=o?this._order.indexOf(o):this._order.length;o&&d===-1?this.fire(new u.j(new Error(`Cannot move layer "${e}" before non-existing layer "${o}".`))):(this._order.splice(d,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const o=this._layers[e];if(!o)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${e}".`)));o.setEventedParent(null);const c=this._order.indexOf(e);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=o,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],o.onRemove&&o.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,o,c){this._checkLoaded();const d=this.getLayer(e);d?d.minzoom===o&&d.maxzoom===c||(o!=null&&(d.minzoom=o),c!=null&&(d.maxzoom=c),this._updateLayer(d)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,o,c={}){this._checkLoaded();const d=this.getLayer(e);if(d){if(!u.aE(d.filter,o))return o==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(u.u.filter,`layers.${d.id}.filter`,o,null,c)||(d.filter=u.aB(o),this._updateLayer(d)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return u.aB(this.getLayer(e).filter)}setLayoutProperty(e,o,c,d={}){this._checkLoaded();const g=this.getLayer(e);g?u.aE(g.getLayoutProperty(o),c)||(g.setLayoutProperty(o,c,d),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,o){const c=this.getLayer(e);if(c)return c.getLayoutProperty(o);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,o,c,d={}){this._checkLoaded();const g=this.getLayer(e);g?u.aE(g.getPaintProperty(o),c)||(g.setPaintProperty(o,c,d)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,o){return this.getLayer(e).getPaintProperty(o)}setFeatureState(e,o){this._checkLoaded();const c=e.source,d=e.sourceLayer,g=this.sourceCaches[c];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)));const w=g.getSource().type;w==="geojson"&&d?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(e.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.setFeatureState(d,e.id,o)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,o){this._checkLoaded();const c=e.source,d=this.sourceCaches[c];if(d===void 0)return void this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)));const g=d.getSource().type,w=g==="vector"?e.sourceLayer:void 0;g!=="vector"||w?o&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,e.id,o):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const o=e.source,c=e.sourceLayer,d=this.sourceCaches[o];if(d!==void 0)return d.getSource().type!=="vector"||c?(e.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(c,e.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=u.aF(this.sourceCaches,g=>g.serialize()),o=this._serializeByIds(this._order,!0),c=this.map.getTerrain()||void 0,d=this.stylesheet;return u.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:e,layers:o,terrain:c},g=>g!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const o=w=>this._layers[w].type==="fill-extrusion",c={},d=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(o(S)){c[S]=w;for(const E of e){const T=E[S];if(T)for(const z of T)d.push(z)}}}d.sort((w,S)=>S.intersectionZ-w.intersectionZ);const g=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(o(S))for(let E=d.length-1;E>=0;E--){const T=d[E].feature;if(c[T.layer.id]<w)break;g.push(T),d.pop()}else for(const E of e){const T=E[S];if(T)for(const z of T)g.push(z.feature)}}return g}queryRenderedFeatures(e,o,c){o&&o.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const d={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const S of o.layers){const E=this._layers[S];if(!E)return this.fire(new u.j(new Error(`The layer '${S}' does not exist in the map's style and cannot be queried for features.`))),[];d[E.source]=!0}}const g=[];o.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const S in this.sourceCaches)o.layers&&!d[S]||g.push(Rr(this.sourceCaches[S],this._layers,w,e,o,c));return this.placement&&g.push(function(S,E,T,z,P,B,q){const G={},Y=B.queryRenderedSymbols(z),Z=[];for(const te of Object.keys(Y).map(Number))Z.push(q[te]);Z.sort(pn);for(const te of Z){const oe=te.featureIndex.lookupSymbolFeatures(Y[te.bucketInstanceId],E,te.bucketIndex,te.sourceLayerIndex,P.filter,P.layers,P.availableImages,S);for(const K in oe){const he=G[K]=G[K]||[],ge=oe[K];ge.sort((_e,Pe)=>{const Be=te.featureSortOrder;if(Be){const Je=Be.indexOf(_e.featureIndex);return Be.indexOf(Pe.featureIndex)-Je}return Pe.featureIndex-_e.featureIndex});for(const _e of ge)he.push(_e)}}for(const te in G)G[te].forEach(oe=>{const K=oe.feature,he=T[S[te].source].getFeatureState(K.layer["source-layer"],K.id);K.source=K.layer.source,K.layer["source-layer"]&&(K.sourceLayer=K.layer["source-layer"]),K.state=he});return G}(this._layers,w,this.sourceCaches,e,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(e,o){o&&o.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",o.filter,null,o);const c=this.sourceCaches[e];return c?function(d,g){const w=d.getRenderableIds().map(T=>d.getTileByID(T)),S=[],E={};for(let T=0;T<w.length;T++){const z=w[T],P=z.tileID.canonical.key;E[P]||(E[P]=!0,z.querySourceFeatures(S,g))}return S}(c,o):[]}getLight(){return this.light.getLight()}setLight(e,o={}){this._checkLoaded();const c=this.light.getLight();let d=!1;for(const w in e)if(!u.aE(e[w],c[w])){d=!0;break}if(!d)return;const g={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,o),this.light.updateTransitions(g)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,o={}){const c=this.getSky();let d=!1;if(!e&&!c)return;if(e&&!c)d=!0;else if(!e&&c)d=!0;else for(const w in e)if(!u.aE(e[w],c[w])){d=!0;break}if(!d)return;const g={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,o),this.sky.updateTransitions(g)}_validate(e,o,c,d,g={}){return(!g||g.validate!==!1)&&Ra(this,e.call(u.u,u.e({key:o,style:this.serialize(),value:c,styleSpec:u.v},d)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Bn().off(Ne,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const c=this.sourceCaches[o];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const o in this.sourceCaches)this.sourceCaches[o].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,o,c,d,g=!1){let w=!1,S=!1;const E={};for(const T of this._order){const z=this._layers[T];if(z.type!=="symbol")continue;if(!E[z.source]){const B=this.sourceCaches[z.source];E[z.source]=B.getRenderableIds(!0).map(q=>B.getTileByID(q)).sort((q,G)=>G.tileID.overscaledZ-q.tileID.overscaledZ||(q.tileID.isLessThan(G.tileID)?-1:1))}const P=this.crossTileSymbolIndex.addLayer(z,E[z.source],e.center.lng);w=w||P}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.now(),e.zoom))&&(this.pauseablePlacement=new _t(e,this.map.terrain,this._order,g,o,c,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.now()),S=!0),w&&this.pauseablePlacement.placement.setStale()),S||w)for(const T of this._order){const z=this._layers[T];z.type==="symbol"&&this.placement.updateLayerOpacities(z,E[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,o){return u._(this,void 0,void 0,function*(){const c=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,o.icons),c})}getGlyphs(e,o){return u._(this,void 0,void 0,function*(){const c=yield this.glyphManager.getGlyphs(o.stacks),d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,[""]),c})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,o={}){this._checkLoaded(),e&&this._validate(u.u.glyphs,"glyphs",e,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,o,c={},d){this._checkLoaded();const g=[{id:e,url:o}],w=[...pt(this.stylesheet.sprite),...g];this._validate(u.u.sprite,"sprite",w,null,c)||(this.stylesheet.sprite=w,this._loadSprite(g,!0,d))}removeSprite(e){this._checkLoaded();const o=pt(this.stylesheet.sprite);if(o.find(c=>c.id===e)){if(this._spritesImagesIds[e])for(const c of this._spritesImagesIds[e])this.imageManager.removeImage(c),this._changedImages[c]=!0;o.splice(o.findIndex(c=>c.id===e),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return pt(this.stylesheet.sprite)}setSprite(e,o={},c){this._checkLoaded(),e&&this._validate(u.u.sprite,"sprite",e,null,o)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,c):(this._unloadSprite(),c&&c(null)))}}var es=u.Y([{name:"a_pos",type:"Int16",components:2}]);const ya={prelude:Ht(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ht(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ht(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ht(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ht("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ht(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ht(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ht("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ht("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ht("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ht(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ht(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ht(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ht(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ht(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ht(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ht(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ht(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ht(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ht(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ht(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ht("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ht("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ht("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ht("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ht(m,e){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=e.match(/attribute ([\w]+) ([\w]+)/g),d=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=g?g.concat(d):d,S={};return{fragmentSource:m=m.replace(o,(E,T,z,P,B)=>(S[B]=!0,T==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${z} ${P} ${B};
#else
uniform ${z} ${P} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${z} ${P} ${B} = u_${B};
#endif
`)),vertexSource:e=e.replace(o,(E,T,z,P,B)=>{const q=P==="float"?"vec2":"vec4",G=B.match(/color/)?"color":q;return S[B]?T==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${q} a_${B};
varying ${z} ${P} ${B};
#else
uniform ${z} ${P} u_${B};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${z} ${P} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${G}(a_${B}, u_${B}_t);
#else
    ${z} ${P} ${B} = u_${B};
#endif
`:T==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${q} a_${B};
#else
uniform ${z} ${P} u_${B};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${P} ${B} = a_${B};
#else
    ${z} ${P} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${P} ${B} = unpack_mix_${G}(a_${B}, u_${B}_t);
#else
    ${z} ${P} ${B} = u_${B};
#endif
`}),staticAttributes:c,staticUniforms:w}}class tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,o,c,d,g,w,S,E,T){this.context=e;let z=this.boundPaintVertexBuffers.length!==d.length;for(let P=0;!z&&P<d.length;P++)this.boundPaintVertexBuffers[P]!==d[P]&&(z=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==c||z||this.boundIndexBuffer!==g||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==S||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==T?this.freshBind(o,c,d,g,w,S,E,T):(e.bindVertexArray.set(this.vao),S&&S.bind(),g&&g.dynamicDraw&&g.bind(),E&&E.bind(),T&&T.bind())}freshBind(e,o,c,d,g,w,S,E){const T=e.numAttributes,z=this.context,P=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=E,o.enableAttributes(P,e);for(const B of c)B.enableAttributes(P,e);w&&w.enableAttributes(P,e),S&&S.enableAttributes(P,e),E&&E.enableAttributes(P,e),o.bind(),o.setVertexAttribPointers(P,e,g);for(const B of c)B.bind(),B.setVertexAttribPointers(P,e,g);w&&(w.bind(),w.setVertexAttribPointers(P,e,g)),d&&d.bind(),S&&(S.bind(),S.setVertexAttribPointers(P,e,g)),E&&(E.bind(),E.setVertexAttribPointers(P,e,g)),z.currentNumAttributes=T}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Tc=(m,e,o,c,d)=>({u_matrix:m,u_texture:0,u_ele_delta:e,u_fog_matrix:o,u_fog_color:c?c.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:c?c.calculateFogBlendOpacity(d):0,u_horizon_color:c?c.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1});function ts(m){const e=[];for(let o=0;o<m.length;o++){if(m[o]===null)continue;const c=m[o].split(" ");e.push(c.pop())}return e}class nl{constructor(e,o,c,d,g,w){const S=e.gl;this.program=S.createProgram();const E=ts(o.staticAttributes),T=c?c.getBinderAttributes():[],z=E.concat(T),P=ya.prelude.staticUniforms?ts(ya.prelude.staticUniforms):[],B=o.staticUniforms?ts(o.staticUniforms):[],q=c?c.getBinderUniforms():[],G=P.concat(B).concat(q),Y=[];for(const _e of G)Y.indexOf(_e)<0&&Y.push(_e);const Z=c?c.defines():[];g&&Z.push("#define OVERDRAW_INSPECTOR;"),w&&Z.push("#define TERRAIN3D;");const te=Z.concat(ya.prelude.fragmentSource,o.fragmentSource).join(`
`),oe=Z.concat(ya.prelude.vertexSource,o.vertexSource).join(`
`),K=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);if(S.shaderSource(K,te),S.compileShader(K),!S.getShaderParameter(K,S.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${S.getShaderInfoLog(K)}`);S.attachShader(this.program,K);const he=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);if(S.shaderSource(he,oe),S.compileShader(he),!S.getShaderParameter(he,S.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${S.getShaderInfoLog(he)}`);S.attachShader(this.program,he),this.attributes={};const ge={};this.numAttributes=z.length;for(let _e=0;_e<this.numAttributes;_e++)z[_e]&&(S.bindAttribLocation(this.program,_e,z[_e]),this.attributes[z[_e]]=_e);if(S.linkProgram(this.program),!S.getProgramParameter(this.program,S.LINK_STATUS))throw new Error(`Program failed to link: ${S.getProgramInfoLog(this.program)}`);S.deleteShader(he),S.deleteShader(K);for(let _e=0;_e<Y.length;_e++){const Pe=Y[_e];if(Pe&&!ge[Pe]){const Be=S.getUniformLocation(this.program,Pe);Be&&(ge[Pe]=Be)}}this.fixedUniforms=d(e,ge),this.terrainUniforms=((_e,Pe)=>({u_depth:new u.aH(_e,Pe.u_depth),u_terrain:new u.aH(_e,Pe.u_terrain),u_terrain_dim:new u.aI(_e,Pe.u_terrain_dim),u_terrain_matrix:new u.aJ(_e,Pe.u_terrain_matrix),u_terrain_unpack:new u.aK(_e,Pe.u_terrain_unpack),u_terrain_exaggeration:new u.aI(_e,Pe.u_terrain_exaggeration)}))(e,ge),this.binderUniforms=c?c.getUniforms(e,ge):[]}draw(e,o,c,d,g,w,S,E,T,z,P,B,q,G,Y,Z,te,oe){const K=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(c),e.setStencilMode(d),e.setColorMode(g),e.setCullFace(w),E){e.activeTexture.set(K.TEXTURE2),K.bindTexture(K.TEXTURE_2D,E.depthTexture),e.activeTexture.set(K.TEXTURE3),K.bindTexture(K.TEXTURE_2D,E.texture);for(const ge in this.terrainUniforms)this.terrainUniforms[ge].set(E[ge])}for(const ge in this.fixedUniforms)this.fixedUniforms[ge].set(S[ge]);Y&&Y.setUniforms(e,this.binderUniforms,q,{zoom:G});let he=0;switch(o){case K.LINES:he=2;break;case K.TRIANGLES:he=3;break;case K.LINE_STRIP:he=1}for(const ge of B.get()){const _e=ge.vaos||(ge.vaos={});(_e[T]||(_e[T]=new tl)).bind(e,this,z,Y?Y.getPaintVertexBuffers():[],P,ge.vertexOffset,Z,te,oe),K.drawElements(o,ge.primitiveLength*he,K.UNSIGNED_SHORT,ge.primitiveOffset*he*2)}}}function il(m,e,o){const c=1/De(o,1,e.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),g=o.tileSize*Math.pow(2,e.transform.tileZoom)/d,w=g*(o.tileID.canonical.x+o.tileID.wrap*d),S=g*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[w>>16,S>>16],u_pixel_coord_lower:[65535&w,65535&S]}}const rl=(m,e,o,c)=>{const d=e.style.light,g=d.properties.get("position"),w=[g.x,g.y,g.z],S=function(){var T=new u.A(9);return u.A!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[5]=0,T[6]=0,T[7]=0),T[0]=1,T[4]=1,T[8]=1,T}();d.properties.get("anchor")==="viewport"&&function(T,z){var P=Math.sin(z),B=Math.cos(z);T[0]=B,T[1]=P,T[2]=0,T[3]=-P,T[4]=B,T[5]=0,T[6]=0,T[7]=0,T[8]=1}(S,-e.transform.angle),function(T,z,P){var B=z[0],q=z[1],G=z[2];T[0]=B*P[0]+q*P[3]+G*P[6],T[1]=B*P[1]+q*P[4]+G*P[7],T[2]=B*P[2]+q*P[5]+G*P[8]}(w,w,S);const E=d.properties.get("color");return{u_matrix:m,u_lightpos:w,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+o,u_opacity:c}},al=(m,e,o,c,d,g,w)=>u.e(rl(m,e,o,c),il(g,e,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),ns=m=>({u_matrix:m}),uo=(m,e,o,c)=>u.e(ns(m),il(o,e,c)),cf=(m,e)=>({u_matrix:m,u_world:e}),uf=(m,e,o,c,d)=>u.e(uo(m,e,o,c),{u_world:d}),Rd=(m,e,o,c)=>{const d=m.transform;let g,w;if(c.paint.get("circle-pitch-alignment")==="map"){const S=De(o,1,d.zoom);g=!0,w=[S,S]}else g=!1,w=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(e.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:w}},df=(m,e,o)=>({u_matrix:m,u_inv_matrix:e,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}),_a=(m,e,o=1)=>({u_matrix:m,u_color:e,u_overlay:0,u_overlay_scale:o}),is=m=>({u_matrix:m}),Ni=(m,e,o,c)=>({u_matrix:m,u_extrude_scale:De(e,1,o),u_intensity:c});function ji(m,e){const o=Math.pow(2,e.canonical.z),c=e.canonical.y;return[new u.Z(0,c/o).toLngLat().lat,new u.Z(0,(c+1)/o).toLngLat().lat]}const rs=(m,e,o,c)=>{const d=m.transform;return{u_matrix:Bd(m,e,o,c),u_ratio:1/De(e,1,d.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},ol=(m,e,o,c,d)=>u.e(rs(m,e,o,d),{u_image:0,u_image_height:c}),Ld=(m,e,o,c,d)=>{const g=m.transform,w=La(e,g);return{u_matrix:Bd(m,e,o,d),u_texsize:e.imageAtlasTexture.size,u_ratio:1/De(e,1,g.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Fd=(m,e,o,c,d,g)=>{const w=m.lineAtlas,S=La(e,m.transform),E=o.layout.get("line-cap")==="round",T=w.getDash(c.from,E),z=w.getDash(c.to,E),P=T.width*d.fromScale,B=z.width*d.toScale;return u.e(rs(m,e,o,g),{u_patternscale_a:[S/P,-T.height/2],u_patternscale_b:[S/B,-z.height/2],u_sdfgamma:w.width/(256*Math.min(P,B)*m.pixelRatio)/2,u_image:0,u_tex_y_a:T.y,u_tex_y_b:z.y,u_mix:d.t})};function La(m,e){return 1/De(m,1,e.tileZoom)}function Bd(m,e,o,c){return m.translatePosMatrix(c?c.posMatrix:e.tileID.posMatrix,e,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const hf=(m,e,o,c,d)=>{return{u_matrix:m,u_tl_parent:e,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(w=d.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(g=d.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:pf(d.paint.get("raster-hue-rotate"))};var g,w};function pf(m){m*=Math.PI/180;const e=Math.sin(m),o=Math.cos(m);return[(2*o+1)/3,(-Math.sqrt(3)*e-o+1)/3,(Math.sqrt(3)*e-o+1)/3]}const Od=(m,e,o,c,d,g,w,S,E,T,z,P,B,q)=>{const G=w.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:G.width/G.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:E,u_coord_matrix:T,u_is_text:+P,u_pitch_with_map:+c,u_is_along_line:d,u_is_variable_anchor:g,u_texsize:B,u_texture:0,u_translation:z,u_pitched_scale:q}},Nd=(m,e,o,c,d,g,w,S,E,T,z,P,B,q,G)=>{const Y=w.transform;return u.e(Od(m,e,o,c,d,g,w,S,E,T,z,P,B,G),{u_gamma_scale:c?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+q})},ff=(m,e,o,c,d,g,w,S,E,T,z,P,B,q)=>u.e(Nd(m,e,o,c,d,g,w,S,E,T,z,!0,P,!0,q),{u_texsize_icon:B,u_texture_icon:1}),sl=(m,e,o)=>({u_matrix:m,u_opacity:e,u_color:o}),Mc=(m,e,o,c,d,g)=>u.e(function(w,S,E,T){const z=E.imageManager.getPattern(w.from.toString()),P=E.imageManager.getPattern(w.to.toString()),{width:B,height:q}=E.imageManager.getPixelSize(),G=Math.pow(2,T.tileID.overscaledZ),Y=T.tileSize*Math.pow(2,E.transform.tileZoom)/G,Z=Y*(T.tileID.canonical.x+T.tileID.wrap*G),te=Y*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:P.tl,u_pattern_br_b:P.br,u_texsize:[B,q],u_mix:S.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:P.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/De(T,1,E.transform.tileZoom),u_pixel_coord_upper:[Z>>16,te>>16],u_pixel_coord_lower:[65535&Z,65535&te]}}(c,g,o,d),{u_matrix:m,u_opacity:e}),ll={fillExtrusion:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_lightpos:new u.aN(m,e.u_lightpos),u_lightintensity:new u.aI(m,e.u_lightintensity),u_lightcolor:new u.aN(m,e.u_lightcolor),u_vertical_gradient:new u.aI(m,e.u_vertical_gradient),u_opacity:new u.aI(m,e.u_opacity)}),fillExtrusionPattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_lightpos:new u.aN(m,e.u_lightpos),u_lightintensity:new u.aI(m,e.u_lightintensity),u_lightcolor:new u.aN(m,e.u_lightcolor),u_vertical_gradient:new u.aI(m,e.u_vertical_gradient),u_height_factor:new u.aI(m,e.u_height_factor),u_image:new u.aH(m,e.u_image),u_texsize:new u.aO(m,e.u_texsize),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade),u_opacity:new u.aI(m,e.u_opacity)}),fill:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix)}),fillPattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_image:new u.aH(m,e.u_image),u_texsize:new u.aO(m,e.u_texsize),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade)}),fillOutline:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_world:new u.aO(m,e.u_world)}),fillOutlinePattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_world:new u.aO(m,e.u_world),u_image:new u.aH(m,e.u_image),u_texsize:new u.aO(m,e.u_texsize),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade)}),circle:(m,e)=>({u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_scale_with_map:new u.aH(m,e.u_scale_with_map),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_extrude_scale:new u.aO(m,e.u_extrude_scale),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_matrix:new u.aJ(m,e.u_matrix)}),collisionBox:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_pixel_extrude_scale:new u.aO(m,e.u_pixel_extrude_scale)}),collisionCircle:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_inv_matrix:new u.aJ(m,e.u_inv_matrix),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_viewport_size:new u.aO(m,e.u_viewport_size)}),debug:(m,e)=>({u_color:new u.aL(m,e.u_color),u_matrix:new u.aJ(m,e.u_matrix),u_overlay:new u.aH(m,e.u_overlay),u_overlay_scale:new u.aI(m,e.u_overlay_scale)}),clippingMask:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix)}),heatmap:(m,e)=>({u_extrude_scale:new u.aI(m,e.u_extrude_scale),u_intensity:new u.aI(m,e.u_intensity),u_matrix:new u.aJ(m,e.u_matrix)}),heatmapTexture:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_world:new u.aO(m,e.u_world),u_image:new u.aH(m,e.u_image),u_color_ramp:new u.aH(m,e.u_color_ramp),u_opacity:new u.aI(m,e.u_opacity)}),hillshade:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_image:new u.aH(m,e.u_image),u_latrange:new u.aO(m,e.u_latrange),u_light:new u.aO(m,e.u_light),u_shadow:new u.aL(m,e.u_shadow),u_highlight:new u.aL(m,e.u_highlight),u_accent:new u.aL(m,e.u_accent)}),hillshadePrepare:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_image:new u.aH(m,e.u_image),u_dimension:new u.aO(m,e.u_dimension),u_zoom:new u.aI(m,e.u_zoom),u_unpack:new u.aK(m,e.u_unpack)}),line:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels)}),lineGradient:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels),u_image:new u.aH(m,e.u_image),u_image_height:new u.aI(m,e.u_image_height)}),linePattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_texsize:new u.aO(m,e.u_texsize),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_image:new u.aH(m,e.u_image),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade)}),lineSDF:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels),u_patternscale_a:new u.aO(m,e.u_patternscale_a),u_patternscale_b:new u.aO(m,e.u_patternscale_b),u_sdfgamma:new u.aI(m,e.u_sdfgamma),u_image:new u.aH(m,e.u_image),u_tex_y_a:new u.aI(m,e.u_tex_y_a),u_tex_y_b:new u.aI(m,e.u_tex_y_b),u_mix:new u.aI(m,e.u_mix)}),raster:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_tl_parent:new u.aO(m,e.u_tl_parent),u_scale_parent:new u.aI(m,e.u_scale_parent),u_buffer_scale:new u.aI(m,e.u_buffer_scale),u_fade_t:new u.aI(m,e.u_fade_t),u_opacity:new u.aI(m,e.u_opacity),u_image0:new u.aH(m,e.u_image0),u_image1:new u.aH(m,e.u_image1),u_brightness_low:new u.aI(m,e.u_brightness_low),u_brightness_high:new u.aI(m,e.u_brightness_high),u_saturation_factor:new u.aI(m,e.u_saturation_factor),u_contrast_factor:new u.aI(m,e.u_contrast_factor),u_spin_weights:new u.aN(m,e.u_spin_weights)}),symbolIcon:(m,e)=>({u_is_size_zoom_constant:new u.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(m,e.u_is_size_feature_constant),u_size_t:new u.aI(m,e.u_size_t),u_size:new u.aI(m,e.u_size),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_pitch:new u.aI(m,e.u_pitch),u_rotate_symbol:new u.aH(m,e.u_rotate_symbol),u_aspect_ratio:new u.aI(m,e.u_aspect_ratio),u_fade_change:new u.aI(m,e.u_fade_change),u_matrix:new u.aJ(m,e.u_matrix),u_label_plane_matrix:new u.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new u.aJ(m,e.u_coord_matrix),u_is_text:new u.aH(m,e.u_is_text),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_is_along_line:new u.aH(m,e.u_is_along_line),u_is_variable_anchor:new u.aH(m,e.u_is_variable_anchor),u_texsize:new u.aO(m,e.u_texsize),u_texture:new u.aH(m,e.u_texture),u_translation:new u.aO(m,e.u_translation),u_pitched_scale:new u.aI(m,e.u_pitched_scale)}),symbolSDF:(m,e)=>({u_is_size_zoom_constant:new u.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(m,e.u_is_size_feature_constant),u_size_t:new u.aI(m,e.u_size_t),u_size:new u.aI(m,e.u_size),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_pitch:new u.aI(m,e.u_pitch),u_rotate_symbol:new u.aH(m,e.u_rotate_symbol),u_aspect_ratio:new u.aI(m,e.u_aspect_ratio),u_fade_change:new u.aI(m,e.u_fade_change),u_matrix:new u.aJ(m,e.u_matrix),u_label_plane_matrix:new u.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new u.aJ(m,e.u_coord_matrix),u_is_text:new u.aH(m,e.u_is_text),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_is_along_line:new u.aH(m,e.u_is_along_line),u_is_variable_anchor:new u.aH(m,e.u_is_variable_anchor),u_texsize:new u.aO(m,e.u_texsize),u_texture:new u.aH(m,e.u_texture),u_gamma_scale:new u.aI(m,e.u_gamma_scale),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_is_halo:new u.aH(m,e.u_is_halo),u_translation:new u.aO(m,e.u_translation),u_pitched_scale:new u.aI(m,e.u_pitched_scale)}),symbolTextAndIcon:(m,e)=>({u_is_size_zoom_constant:new u.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(m,e.u_is_size_feature_constant),u_size_t:new u.aI(m,e.u_size_t),u_size:new u.aI(m,e.u_size),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_pitch:new u.aI(m,e.u_pitch),u_rotate_symbol:new u.aH(m,e.u_rotate_symbol),u_aspect_ratio:new u.aI(m,e.u_aspect_ratio),u_fade_change:new u.aI(m,e.u_fade_change),u_matrix:new u.aJ(m,e.u_matrix),u_label_plane_matrix:new u.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new u.aJ(m,e.u_coord_matrix),u_is_text:new u.aH(m,e.u_is_text),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_is_along_line:new u.aH(m,e.u_is_along_line),u_is_variable_anchor:new u.aH(m,e.u_is_variable_anchor),u_texsize:new u.aO(m,e.u_texsize),u_texsize_icon:new u.aO(m,e.u_texsize_icon),u_texture:new u.aH(m,e.u_texture),u_texture_icon:new u.aH(m,e.u_texture_icon),u_gamma_scale:new u.aI(m,e.u_gamma_scale),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_is_halo:new u.aH(m,e.u_is_halo),u_translation:new u.aO(m,e.u_translation),u_pitched_scale:new u.aI(m,e.u_pitched_scale)}),background:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_opacity:new u.aI(m,e.u_opacity),u_color:new u.aL(m,e.u_color)}),backgroundPattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_opacity:new u.aI(m,e.u_opacity),u_image:new u.aH(m,e.u_image),u_pattern_tl_a:new u.aO(m,e.u_pattern_tl_a),u_pattern_br_a:new u.aO(m,e.u_pattern_br_a),u_pattern_tl_b:new u.aO(m,e.u_pattern_tl_b),u_pattern_br_b:new u.aO(m,e.u_pattern_br_b),u_texsize:new u.aO(m,e.u_texsize),u_mix:new u.aI(m,e.u_mix),u_pattern_size_a:new u.aO(m,e.u_pattern_size_a),u_pattern_size_b:new u.aO(m,e.u_pattern_size_b),u_scale_a:new u.aI(m,e.u_scale_a),u_scale_b:new u.aI(m,e.u_scale_b),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(m,e.u_tile_units_to_pixels)}),terrain:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_texture:new u.aH(m,e.u_texture),u_ele_delta:new u.aI(m,e.u_ele_delta),u_fog_matrix:new u.aJ(m,e.u_fog_matrix),u_fog_color:new u.aL(m,e.u_fog_color),u_fog_ground_blend:new u.aI(m,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(m,e.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(m,e.u_horizon_color),u_horizon_fog_blend:new u.aI(m,e.u_horizon_fog_blend)}),terrainDepth:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ele_delta:new u.aI(m,e.u_ele_delta)}),terrainCoords:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_texture:new u.aH(m,e.u_texture),u_terrain_coords_id:new u.aI(m,e.u_terrain_coords_id),u_ele_delta:new u.aI(m,e.u_ele_delta)}),sky:(m,e)=>({u_sky_color:new u.aL(m,e.u_sky_color),u_horizon_color:new u.aL(m,e.u_horizon_color),u_horizon:new u.aI(m,e.u_horizon),u_sky_horizon_blend:new u.aI(m,e.u_sky_horizon_blend)})};class Ic{constructor(e,o,c){this.context=e;const d=e.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Br{constructor(e,o,c,d){this.length=o.length,this.attributes=c,this.itemSize=o.bytesPerElement,this.dynamicDraw=d,this.context=e;const g=e.gl;this.buffer=g.createBuffer(),e.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,o){for(let c=0;c<this.attributes.length;c++){const d=o.attributes[this.attributes[c].name];d!==void 0&&e.enableVertexAttribArray(d)}}setVertexAttribPointers(e,o,c){for(let d=0;d<this.attributes.length;d++){const g=this.attributes[d],w=o.attributes[g.name];w!==void 0&&e.vertexAttribPointer(w,g.components,e[Pc[g.type]],!1,this.itemSize,g.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const zc=new WeakMap;function ho(m){var e;if(zc.has(m))return zc.get(m);{const o=(e=m.getParameter(m.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return zc.set(m,o),o}}class Vt{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class as extends Vt{getDefault(){return u.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class mf extends Vt{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class cl extends Vt{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class gf extends Vt{getDefault(){return[!0,!0,!0,!0]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class po extends Vt{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class yf extends Vt{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class jd extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const o=this.current;(e.func!==o.func||e.ref!==o.ref||e.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class _f extends Vt{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Vd extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=e,this.dirty=!1}}class Dc extends Vt{getDefault(){return[0,1]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ud extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=e,this.dirty=!1}}class $d extends Vt{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class qd extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.BLEND):o.disable(o.BLEND),this.current=e,this.dirty=!1}}class Gd extends Vt{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Fa extends Vt{getDefault(){return u.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Hd extends Vt{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class vf extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=e,this.dirty=!1}}class Zd extends Vt{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class os extends Vt{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class xf extends Vt{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class ul extends Vt{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class bf extends Vt{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class wf extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Wd extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Xd extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Kd extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class kc extends Vt{getDefault(){return null}set(e){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Jd extends Vt{getDefault(){return null}set(e){var o;if(e===this.current&&!this.dirty)return;const c=this.gl;ho(c)?c.bindVertexArray(e):(o=c.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class dl extends Vt{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Qr extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Rc extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class ss extends Vt{constructor(e,o){super(e),this.context=e,this.parent=o}getDefault(){return null}}class Lc extends ss{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Yd extends ss{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Fc extends ss{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ba{constructor(e,o,c,d,g){this.context=e,this.width=o,this.height=c;const w=e.gl,S=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Lc(e,S),d)this.depthAttachment=g?new Fc(e,S):new Yd(e,S);else if(g)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,o=this.colorAttachment.get();if(o&&e.deleteTexture(o),this.depthAttachment){const c=this.depthAttachment.get();c&&e.deleteRenderbuffer(c)}e.deleteFramebuffer(this.framebuffer)}}class vn{constructor(e,o,c){this.blendFunction=e,this.blendColor=o,this.mask=c}}vn.Replace=[1,0],vn.disabled=new vn(vn.Replace,u.aM.transparent,[!1,!1,!1,!1]),vn.unblended=new vn(vn.Replace,u.aM.transparent,[!0,!0,!0,!0]),vn.alphaBlended=new vn([1,771],u.aM.transparent,[!0,!0,!0,!0]);class Cf{constructor(e){var o,c;if(this.gl=e,this.clearColor=new as(this),this.clearDepth=new mf(this),this.clearStencil=new cl(this),this.colorMask=new gf(this),this.depthMask=new po(this),this.stencilMask=new yf(this),this.stencilFunc=new jd(this),this.stencilOp=new _f(this),this.stencilTest=new Vd(this),this.depthRange=new Dc(this),this.depthTest=new Ud(this),this.depthFunc=new $d(this),this.blend=new qd(this),this.blendFunc=new Gd(this),this.blendColor=new Fa(this),this.blendEquation=new Hd(this),this.cullFace=new vf(this),this.cullFaceSide=new Zd(this),this.frontFace=new os(this),this.program=new xf(this),this.activeTexture=new ul(this),this.viewport=new bf(this),this.bindFramebuffer=new wf(this),this.bindRenderbuffer=new Wd(this),this.bindTexture=new Xd(this),this.bindVertexBuffer=new Kd(this),this.bindElementBuffer=new kc(this),this.bindVertexArray=new Jd(this),this.pixelStoreUnpack=new dl(this),this.pixelStoreUnpackPremultiplyAlpha=new Qr(this),this.pixelStoreUnpackFlipY=new Rc(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),ho(e)){this.HALF_FLOAT=e.HALF_FLOAT;const d=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=e.RGBA16F)!==null&&o!==void 0?o:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(c=e.RGB16F)!==null&&c!==void 0?c:d==null?void 0:d.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const d=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,o){return new Ic(this,e,o)}createVertexBuffer(e,o,c){return new Br(this,e,o,c)}createRenderbuffer(e,o,c){const d=this.gl,g=d.createRenderbuffer();return this.bindRenderbuffer.set(g),d.renderbufferStorage(d.RENDERBUFFER,e,o,c),this.bindRenderbuffer.set(null),g}createFramebuffer(e,o,c,d){return new Ba(this,e,o,c,d)}clear({color:e,depth:o,stencil:c}){const d=this.gl;let g=0;e&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c!==void 0&&(g|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),d.clear(g)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){u.aE(e.blendFunction,vn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return ho(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var o;return ho(this.gl)?this.gl.deleteVertexArray(e):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Lt{constructor(e,o,c){this.func=e,this.mask=o,this.range=c}}Lt.ReadOnly=!1,Lt.ReadWrite=!0,Lt.disabled=new Lt(519,Lt.ReadOnly,[0,1]);const Bc=7680;class dn{constructor(e,o,c,d,g,w){this.test=e,this.ref=o,this.mask=c,this.fail=d,this.depthFail=g,this.pass=w}}dn.disabled=new dn({func:519,mask:0},0,0,Bc,Bc,Bc);class en{constructor(e,o,c){this.enable=e,this.mode=o,this.frontFace=c}}let hl;function Oc(m,e,o,c,d){const g=m.context,w=g.gl,S=m.useProgram("collisionBox"),E=[];let T=0,z=0;for(let te=0;te<c.length;te++){const oe=c[te],K=e.getTile(oe).getBucket(o);if(!K)continue;const he=d?K.textCollisionBox:K.iconCollisionBox,ge=K.collisionCircleArray;if(ge.length>0){const _e=u.H();u.aQ(_e,K.placementInvProjMatrix,m.transform.glCoordMatrix),u.aQ(_e,_e,K.placementViewportMatrix),E.push({circleArray:ge,circleOffset:z,transform:oe.posMatrix,invTransform:_e,coord:oe}),T+=ge.length/4,z=T}he&&S.draw(g,w.LINES,Lt.disabled,dn.disabled,m.colorModeForRenderPass(),en.disabled,{u_matrix:oe.posMatrix,u_pixel_extrude_scale:[1/(P=m.transform).width,1/P.height]},m.style.map.terrain&&m.style.map.terrain.getTerrainData(oe),o.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,null,m.transform.zoom,null,null,he.collisionVertexBuffer)}var P;if(!d||!E.length)return;const B=m.useProgram("collisionCircle"),q=new u.aR;q.resize(4*T),q._trim();let G=0;for(const te of E)for(let oe=0;oe<te.circleArray.length/4;oe++){const K=4*oe,he=te.circleArray[K+0],ge=te.circleArray[K+1],_e=te.circleArray[K+2],Pe=te.circleArray[K+3];q.emplace(G++,he,ge,_e,Pe,0),q.emplace(G++,he,ge,_e,Pe,1),q.emplace(G++,he,ge,_e,Pe,2),q.emplace(G++,he,ge,_e,Pe,3)}(!hl||hl.length<2*T)&&(hl=function(te){const oe=2*te,K=new u.aT;K.resize(oe),K._trim();for(let he=0;he<oe;he++){const ge=6*he;K.uint16[ge+0]=4*he+0,K.uint16[ge+1]=4*he+1,K.uint16[ge+2]=4*he+2,K.uint16[ge+3]=4*he+2,K.uint16[ge+4]=4*he+3,K.uint16[ge+5]=4*he+0}return K}(T));const Y=g.createIndexBuffer(hl,!0),Z=g.createVertexBuffer(q,u.aS.members,!0);for(const te of E){const oe=df(te.transform,te.invTransform,m.transform);B.draw(g,w.TRIANGLES,Lt.disabled,dn.disabled,m.colorModeForRenderPass(),en.disabled,oe,m.style.map.terrain&&m.style.map.terrain.getTerrainData(te.coord),o.id,Z,Y,u.a0.simpleSegment(0,2*te.circleOffset,te.circleArray.length,te.circleArray.length/2),null,m.transform.zoom,null,null,null)}Z.destroy(),Y.destroy()}en.disabled=new en(!1,1029,2305),en.backCCW=new en(!0,1029,2305);const ls=u.an(new Float32Array(16));function pl(m,e,o,c,d,g){const{horizontalAlign:w,verticalAlign:S}=u.au(m);return new u.P((-(w-.5)*e/d+c[0])*g,(-(S-.5)*o/d+c[1])*g)}function fl(m,e,o,c,d,g){const w=e.tileAnchorPoint.add(new u.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let S=c.mult(g);return o||(S=S.rotate(-d)),Q(w.add(S),e.labelPlaneMatrix,e.getElevation).point}if(o){const S=Se(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(m),E=Math.atan(S.y/S.x)+(S.x<0?Math.PI:0);return m.add(c.rotate(E))}return m.add(c)}function Nc(m,e,o,c,d,g,w,S,E,T,z,P,B,q){const G=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,Z=m.icon.dynamicLayoutVertexArray,te={};Y.clear();for(let oe=0;oe<G.length;oe++){const K=G.get(oe),he=K.hidden||!K.crossTileID||m.allowVerticalPlacement&&!K.placedOrientation?null:c[K.crossTileID];if(he){const ge=new u.P(K.anchorX,K.anchorY),_e={getElevation:q,width:d.width,height:d.height,labelPlaneMatrix:g,lineVertexArray:null,pitchWithMap:o,projection:z,projectionCache:null,tileAnchorPoint:ge,translation:P,unwrappedTileID:B},Pe=o?Q(ge,w,q):Se(ge.x,ge.y,_e),Be=R(d.cameraToCenterDistance,Pe.signedDistanceFromCamera);let Je=u.ai(m.textSizeData,E,K)*Be/u.ap;o&&(Je*=m.tilePixelRatio/S);const{width:Ye,height:Oe,anchor:je,textOffset:lt,textBoxScale:At}=he,Ge=pl(je,Ye,Oe,lt,At,Je),Ze=z.getPitchedTextCorrection(d,ge.add(new u.P(P[0],P[1])),B),wt=fl(Pe.point,_e,e,Ge,d.angle,Ze),tn=m.allowVerticalPlacement&&K.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let zt=0;zt<K.numGlyphs;zt++)u.aj(Y,wt,tn);T&&K.associatedIconIndex>=0&&(te[K.associatedIconIndex]={shiftedAnchor:wt,angle:tn})}else ue(K.numGlyphs,Y)}if(T){Z.clear();const oe=m.icon.placedSymbolArray;for(let K=0;K<oe.length;K++){const he=oe.get(K);if(he.hidden)ue(he.numGlyphs,Z);else{const ge=te[K];if(ge)for(let _e=0;_e<he.numGlyphs;_e++)u.aj(Z,ge.shiftedAnchor,ge.angle);else ue(he.numGlyphs,Z)}}m.icon.dynamicLayoutVertexBuffer.updateData(Z)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function Oa(m,e,o){return o.iconsInText&&e?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Na(m,e,o,c,d,g,w,S,E,T,z,P){const B=m.context,q=B.gl,G=m.transform,Y=Yr(),Z=S==="map",te=E==="map",oe=S!=="viewport"&&o.layout.get("symbol-placement")!=="point",K=Z&&!te&&!oe,he=!te&&oe,ge=!o.layout.get("symbol-sort-key").isConstant();let _e=!1;const Pe=m.depthModeForSublayer(0,Lt.ReadOnly),Be=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Je=[],Ye=Y.getCircleRadiusCorrection(G);for(const Oe of c){const je=e.getTile(Oe),lt=je.getBucket(o);if(!lt)continue;const At=d?lt.text:lt.icon;if(!At||!At.segments.get().length||!At.hasVisibleVertices)continue;const Ge=At.programConfigurations.get(o.id),Ze=d||lt.sdfIcons,wt=d?lt.textSizeData:lt.iconSizeData,tn=te||G.pitch!==0,zt=m.useProgram(Oa(Ze,d,lt),Ge),Rt=u.ag(wt,G.zoom),on=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Oe);let ii,_r,sn,Ei,fi=[0,0],ri=null;if(d)_r=je.glyphAtlasTexture,sn=q.LINEAR,ii=je.glyphAtlasTexture.size,lt.iconsInText&&(fi=je.imageAtlasTexture.size,ri=je.imageAtlasTexture,Ei=tn||m.options.rotating||m.options.zooming||wt.kind==="composite"||wt.kind==="camera"?q.LINEAR:q.NEAREST);else{const xn=o.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;_r=je.imageAtlasTexture,sn=Ze||m.options.rotating||m.options.zooming||xn||tn?q.LINEAR:q.NEAREST,ii=je.imageAtlasTexture.size}const ai=De(je,1,m.transform.zoom),vr=he?Oe.posMatrix:ls,qa=Bi(vr,te,Z,m.transform,ai),Cs=Oi(vr,te,Z,m.transform,ai),Ga=Oi(Oe.posMatrix,te,Z,m.transform,ai),xa=Y.translatePosition(m.transform,je,g,w),Dl=Be&&lt.hasTextData(),du=o.layout.get("icon-text-fit")!=="none"&&Dl&&lt.hasIconData();if(oe){const xn=m.style.map.terrain?(wa,Ss)=>m.style.map.terrain.getElevation(Oe,wa,Ss):null,So=o.layout.get("text-rotation-alignment")==="map";$(lt,Oe.posMatrix,m,d,qa,Ga,te,T,So,Y,Oe.toUnwrapped(),G.width,G.height,xa,xn)}const tr=Oe.posMatrix,xr=d&&Be||du,ba=oe||xr?ls:qa,br=Cs,mi=Ze&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=Ze?lt.iconsInText?ff(wt.kind,Rt,K,te,oe,xr,m,tr,ba,br,xa,ii,fi,Ye):Nd(wt.kind,Rt,K,te,oe,xr,m,tr,ba,br,xa,d,ii,!0,Ye):Od(wt.kind,Rt,K,te,oe,xr,m,tr,ba,br,xa,d,ii,Ye);const $i={program:zt,buffers:At,uniformValues:oi,atlasTexture:_r,atlasTextureIcon:ri,atlasInterpolation:sn,atlasInterpolationIcon:Ei,isSDF:Ze,hasHalo:mi};if(ge&&lt.canOverlap){_e=!0;const xn=At.segments.get();for(const So of xn)Je.push({segments:new u.a0([So]),sortKey:So.sortKey,state:$i,terrainData:on})}else Je.push({segments:At.segments,sortKey:0,state:$i,terrainData:on})}_e&&Je.sort((Oe,je)=>Oe.sortKey-je.sortKey);for(const Oe of Je){const je=Oe.state;if(B.activeTexture.set(q.TEXTURE0),je.atlasTexture.bind(je.atlasInterpolation,q.CLAMP_TO_EDGE),je.atlasTextureIcon&&(B.activeTexture.set(q.TEXTURE1),je.atlasTextureIcon&&je.atlasTextureIcon.bind(je.atlasInterpolationIcon,q.CLAMP_TO_EDGE)),je.isSDF){const lt=je.uniformValues;je.hasHalo&&(lt.u_is_halo=1,Vi(je.buffers,Oe.segments,o,m,je.program,Pe,z,P,lt,Oe.terrainData)),lt.u_is_halo=0}Vi(je.buffers,Oe.segments,o,m,je.program,Pe,z,P,je.uniformValues,Oe.terrainData)}}function Vi(m,e,o,c,d,g,w,S,E,T){const z=c.context;d.draw(z,z.gl.TRIANGLES,g,w,S,en.disabled,E,T,o.id,m.layoutVertexBuffer,m.indexBuffer,e,o.paint,c.transform.zoom,m.programConfigurations.get(o.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function jc(m,e,o,c,d){if(!o||!c||!c.imageAtlas)return;const g=c.imageAtlas.patternPositions;let w=g[o.to.toString()],S=g[o.from.toString()];if(!w&&S&&(w=S),!S&&w&&(S=w),!w||!S){const E=d.getPaintProperty(e);w=g[E],S=g[E]}w&&S&&m.setConstantPatternPositions(w,S)}function Vc(m,e,o,c,d,g,w){const S=m.context.gl,E="fill-pattern",T=o.paint.get(E),z=T&&T.constantOr(1),P=o.getCrossfadeParameters();let B,q,G,Y,Z;w?(q=z&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=S.LINES):(q=z?"fillPattern":"fill",B=S.TRIANGLES);const te=T.constantOr(null);for(const oe of c){const K=e.getTile(oe);if(z&&!K.patternsLoaded())continue;const he=K.getBucket(o);if(!he)continue;const ge=he.programConfigurations.get(o.id),_e=m.useProgram(q,ge),Pe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(oe);z&&(m.context.activeTexture.set(S.TEXTURE0),K.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),ge.updatePaintBuffers(P)),jc(ge,E,te,K,o);const Be=Pe?oe:null,Je=m.translatePosMatrix(Be?Be.posMatrix:oe.posMatrix,K,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(w){Y=he.indexBuffer2,Z=he.segments2;const Ye=[S.drawingBufferWidth,S.drawingBufferHeight];G=q==="fillOutlinePattern"&&z?uf(Je,m,P,K,Ye):cf(Je,Ye)}else Y=he.indexBuffer,Z=he.segments,G=z?uo(Je,m,P,K):ns(Je);_e.draw(m.context,B,d,m.stencilModeForClipping(oe),g,en.disabled,G,Pe,o.id,he.layoutVertexBuffer,Y,Z,o.paint,m.transform.zoom,ge)}}function cs(m,e,o,c,d,g,w){const S=m.context,E=S.gl,T="fill-extrusion-pattern",z=o.paint.get(T),P=z.constantOr(1),B=o.getCrossfadeParameters(),q=o.paint.get("fill-extrusion-opacity"),G=z.constantOr(null);for(const Y of c){const Z=e.getTile(Y),te=Z.getBucket(o);if(!te)continue;const oe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Y),K=te.programConfigurations.get(o.id),he=m.useProgram(P?"fillExtrusionPattern":"fillExtrusion",K);P&&(m.context.activeTexture.set(E.TEXTURE0),Z.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),K.updatePaintBuffers(B)),jc(K,T,G,Z,o);const ge=m.translatePosMatrix(Y.posMatrix,Z,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),_e=o.paint.get("fill-extrusion-vertical-gradient"),Pe=P?al(ge,m,_e,q,Y,B,Z):rl(ge,m,_e,q);he.draw(S,S.gl.TRIANGLES,d,g,w,en.backCCW,Pe,oe,o.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,o.paint,m.transform.zoom,K,m.style.map.terrain&&te.centroidVertexBuffer)}}function ja(m,e,o,c,d,g,w){const S=m.context,E=S.gl,T=o.fbo;if(!T)return;const z=m.useProgram("hillshade"),P=m.style.map.terrain&&m.style.map.terrain.getTerrainData(e);S.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,T.colorAttachment.get()),z.draw(S,E.TRIANGLES,d,g,w,en.disabled,((B,q,G,Y)=>{const Z=G.paint.get("hillshade-shadow-color"),te=G.paint.get("hillshade-highlight-color"),oe=G.paint.get("hillshade-accent-color");let K=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(K-=B.transform.angle);const he=!B.options.moving;return{u_matrix:Y?Y.posMatrix:B.transform.calculatePosMatrix(q.tileID.toUnwrapped(),he),u_image:0,u_latrange:ji(0,q.tileID),u_light:[G.paint.get("hillshade-exaggeration"),K],u_shadow:Z,u_highlight:te,u_accent:oe}})(m,o,c,P?e:null),P,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function ml(m,e,o,c,d,g){const w=m.context,S=w.gl,E=e.dem;if(E&&E.data){const T=E.dim,z=E.stride,P=E.getPixels();if(w.activeTexture.set(S.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||m.getTileTexture(z),e.demTexture){const q=e.demTexture;q.update(P,{premultiply:!1}),q.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else e.demTexture=new ot(w,P,S.RGBA,{premultiply:!1}),e.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);w.activeTexture.set(S.TEXTURE0);let B=e.fbo;if(!B){const q=new ot(w,{width:T,height:T,data:null},S.RGBA);q.bind(S.LINEAR,S.CLAMP_TO_EDGE),B=e.fbo=w.createFramebuffer(T,T,!0,!1),B.colorAttachment.set(q.texture)}w.bindFramebuffer.set(B.framebuffer),w.viewport.set([0,0,T,T]),m.useProgram("hillshadePrepare").draw(w,S.TRIANGLES,c,d,g,en.disabled,((q,G)=>{const Y=G.stride,Z=u.H();return u.aP(Z,0,u.X,-u.X,0,0,1),u.J(Z,Z,[0,-u.X,0]),{u_matrix:Z,u_image:1,u_dimension:[Y,Y],u_zoom:q.overscaledZ,u_unpack:G.getUnpackVector()}})(e.tileID,E),null,o.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function gl(m,e,o,c,d,g){const w=c.paint.get("raster-fade-duration");if(!g&&w>0){const S=j.now(),E=(S-m.timeAdded)/w,T=e?(S-e.timeAdded)/w:-1,z=o.getSource(),P=d.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),B=!e||Math.abs(e.tileID.overscaledZ-P)>Math.abs(m.tileID.overscaledZ-P),q=B&&m.refreshedUponExpiration?1:u.ac(B?E:1-T,0,1);return m.refreshedUponExpiration&&E>=1&&(m.refreshedUponExpiration=!1),e?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}const us=new u.aM(1,0,0,1),yl=new u.aM(0,1,0,1),Qd=new u.aM(0,0,1,1),fo=new u.aM(1,0,1,1),mo=new u.aM(0,1,1,1);function Uc(m,e,o,c){jt(m,0,e+o/2,m.transform.width,o,c)}function _l(m,e,o,c){jt(m,e-o/2,0,o,m.transform.height,c)}function jt(m,e,o,c,d,g){const w=m.context,S=w.gl;S.enable(S.SCISSOR_TEST),S.scissor(e*m.pixelRatio,o*m.pixelRatio,c*m.pixelRatio,d*m.pixelRatio),w.clear({color:g}),S.disable(S.SCISSOR_TEST)}function vl(m,e,o){const c=m.context,d=c.gl,g=o.posMatrix,w=m.useProgram("debug"),S=Lt.disabled,E=dn.disabled,T=m.colorModeForRenderPass(),z="$debug",P=m.style.map.terrain&&m.style.map.terrain.getTerrainData(o);c.activeTexture.set(d.TEXTURE0);const B=e.getTileByID(o.key).latestRawTileData,q=Math.floor((B&&B.byteLength||0)/1024),G=e.getTile(o).tileSize,Y=512/Math.min(G,512)*(o.overscaledZ/m.transform.zoom)*.5;let Z=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(Z+=` => ${o.overscaledZ}`),function(te,oe){te.initDebugOverlayCanvas();const K=te.debugOverlayCanvas,he=te.context.gl,ge=te.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,K.width,K.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(oe,5,5),ge.strokeText(oe,5,5),te.debugOverlayTexture.update(K),te.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(m,`${Z} ${q}kB`),w.draw(c,d.TRIANGLES,S,E,vn.alphaBlended,en.disabled,_a(g,u.aM.transparent,Y),null,z,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),w.draw(c,d.LINE_STRIP,S,E,T,en.disabled,_a(g,u.aM.red),P,z,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function eh(m,e,o){const c=m.context,d=c.gl,g=m.colorModeForRenderPass(),w=new Lt(d.LEQUAL,Lt.ReadWrite,m.depthRangeFor3D),S=m.useProgram("terrain"),E=e.getTerrainMesh();c.bindFramebuffer.set(null),c.viewport.set([0,0,m.width,m.height]);for(const T of o){const z=m.renderToTexture.getTexture(T),P=e.getTerrainData(T.tileID);c.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,z.texture);const B=m.transform.calculatePosMatrix(T.tileID.toUnwrapped()),q=e.getMeshFrameDelta(m.transform.zoom),G=m.transform.calculateFogMatrix(T.tileID.toUnwrapped()),Y=Tc(B,q,G,m.style.sky,m.transform.pitch);S.draw(c,d.TRIANGLES,w,dn.disabled,g,en.backCCW,Y,P,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class $c{constructor(e,o,c){this.vertexBuffer=e,this.indexBuffer=o,this.segments=c}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ds{constructor(e,o){this.context=new Cf(e),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=yt.maxUnderzooming+yt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pi}resize(e,o,c){if(this.width=Math.floor(e*c),this.height=Math.floor(o*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const e=this.context,o=new u.aW;o.emplaceBack(0,0),o.emplaceBack(u.X,0),o.emplaceBack(0,u.X),o.emplaceBack(u.X,u.X),this.tileExtentBuffer=e.createVertexBuffer(o,es.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const c=new u.aW;c.emplaceBack(0,0),c.emplaceBack(u.X,0),c.emplaceBack(0,u.X),c.emplaceBack(u.X,u.X),this.debugBuffer=e.createVertexBuffer(c,es.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const d=new u.$;d.emplaceBack(0,0,0,0),d.emplaceBack(u.X,0,u.X,0),d.emplaceBack(0,u.X,0,u.X),d.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=e.createVertexBuffer(d,Lr.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const g=new u.aW;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(g,es.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const w=new u.aY;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(w);const S=new u.aX;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(S);const E=this.context.gl;this.stencilClearMode=new dn({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const e=this.context,o=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=u.H();u.aP(c,0,this.width,this.height,0,0,1),u.K(c,c,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,o.TRIANGLES,Lt.disabled,this.stencilClearMode,vn.disabled,en.disabled,is(c),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,o){if(this.currentStencilSource===e.source||!e.isTileClipped()||!o||!o.length)return;this.currentStencilSource=e.source;const c=this.context,d=c.gl;this.nextStencilID+o.length>256&&this.clearStencil(),c.setColorMode(vn.disabled),c.setDepthMode(Lt.disabled);const g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of o){const S=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);g.draw(c,d.TRIANGLES,Lt.disabled,new dn({func:d.ALWAYS,mask:0},S,255,d.KEEP,d.KEEP,d.REPLACE),vn.disabled,en.disabled,is(w.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,o=this.context.gl;return new dn({func:o.NOTEQUAL,mask:255},e,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(e){const o=this.context.gl;return new dn({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(e){const o=this.context.gl,c=e.sort((w,S)=>S.overscaledZ-w.overscaledZ),d=c[c.length-1].overscaledZ,g=c[0].overscaledZ-d+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();const w={};for(let S=0;S<g;S++)w[S+d]=new dn({func:o.GEQUAL,mask:255},S+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=g,[w,c]}return[{[d]:dn.disabled},c]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new vn([e.CONSTANT_COLOR,e.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vn.unblended:vn.alphaBlended}depthModeForSublayer(e,o,c){if(!this.opaquePassEnabledForLayer())return Lt.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Lt(c||this.context.gl.LEQUAL,o,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,o){this.style=e,this.options=o,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(j.now()),this.imageManager.beginFrame();const c=this.style._order,d=this.style.sourceCaches,g={},w={},S={};for(const E in d){const T=d[E];T.used&&T.prepare(this.context),g[E]=T.getVisibleCoordinates(),w[E]=g[E].slice().reverse(),S[E]=T.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<c.length;E++)if(this.style._layers[c[E]].is3D()){this.opaquePassCutoff=E;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const E of c){const T=this.style._layers[E];if(!T.hasOffscreenPass()||T.isHidden(this.transform.zoom))continue;const z=w[T.source];(T.type==="custom"||z.length)&&this.renderLayer(this,d[T.source],T,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(E,T){const z=E.context,P=z.gl,B=((te,oe,K)=>({u_sky_color:te.properties.get("sky-color"),u_horizon_color:te.properties.get("horizon-color"),u_horizon:(oe.height/2+oe.getHorizon())*K,u_sky_horizon_blend:te.properties.get("sky-horizon-blend")*oe.height/2*K}))(T,E.style.map.transform,E.pixelRatio),q=new Lt(P.LEQUAL,Lt.ReadWrite,[0,1]),G=dn.disabled,Y=E.colorModeForRenderPass(),Z=E.useProgram("sky");if(!T.mesh){const te=new u.aW;te.emplaceBack(-1,-1),te.emplaceBack(1,-1),te.emplaceBack(1,1),te.emplaceBack(-1,1);const oe=new u.aX;oe.emplaceBack(0,1,2),oe.emplaceBack(0,2,3),T.mesh=new $c(z.createVertexBuffer(te,es.members),z.createIndexBuffer(oe),u.a0.simpleSegment(0,0,te.length,oe.length))}Z.draw(z,P.TRIANGLES,q,G,Y,en.disabled,B,void 0,"sky",T.mesh.vertexBuffer,T.mesh.indexBuffer,T.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[c[this.currentLayer]],T=d[E.source],z=g[E.source];this._renderTileClippingMasks(E,z),this.renderLayer(this,T,E,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const E=this.style._layers[c[this.currentLayer]],T=d[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const z=(E.type==="symbol"?S:w)[E.source];this._renderTileClippingMasks(E,g[E.source]),this.renderLayer(this,T,E,z)}if(this.options.showTileBoundaries){const E=function(T,z){let P=null;const B=Object.values(T._layers).flatMap(Z=>Z.source&&!Z.isHidden(z)?[T.sourceCaches[Z.source]]:[]),q=B.filter(Z=>Z.getSource().type==="vector"),G=B.filter(Z=>Z.getSource().type!=="vector"),Y=Z=>{(!P||P.getSource().maxzoom<Z.getSource().maxzoom)&&(P=Z)};return q.forEach(Z=>Y(Z)),P||G.forEach(Z=>Y(Z)),P}(this.style,this.transform.zoom);E&&function(T,z,P){for(let B=0;B<P.length;B++)vl(T,z,P[B])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const T=E.transform.padding;Uc(E,E.transform.height-(T.top||0),3,us),Uc(E,T.bottom||0,3,yl),_l(E,T.left||0,3,Qd),_l(E,E.transform.width-(T.right||0),3,fo);const z=E.transform.centerPoint;(function(P,B,q,G){jt(P,B-1,q-10,2,20,G),jt(P,B-10,q-1,20,2,G)})(E,z.x,E.transform.height-z.y,mo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,c=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=e?!u.aZ(o,c):!u.a_(o,c)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(u.a$(o,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,w){const S=g.context,E=S.gl,T=vn.unblended,z=new Lt(E.LEQUAL,Lt.ReadWrite,[0,1]),P=w.getTerrainMesh(),B=w.sourceCache.getRenderableTiles(),q=g.useProgram("terrainDepth");S.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),S.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),S.clear({color:u.aM.transparent,depth:1});for(const G of B){const Y=w.getTerrainData(G.tileID),Z={u_matrix:g.transform.calculatePosMatrix(G.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(g.transform.zoom)};q.draw(S,E.TRIANGLES,z,dn.disabled,T,en.backCCW,Z,Y,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}S.bindFramebuffer.set(null),S.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,w){const S=g.context,E=S.gl,T=vn.unblended,z=new Lt(E.LEQUAL,Lt.ReadWrite,[0,1]),P=w.getTerrainMesh(),B=w.getCoordsTexture(),q=w.sourceCache.getRenderableTiles(),G=g.useProgram("terrainCoords");S.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),S.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),S.clear({color:u.aM.transparent,depth:1}),w.coordsIndex=[];for(const Y of q){const Z=w.getTerrainData(Y.tileID);S.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,B.texture);const te={u_matrix:g.transform.calculatePosMatrix(Y.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(g.transform.zoom)};G.draw(S,E.TRIANGLES,z,dn.disabled,T,en.backCCW,te,Z,"terrain",P.vertexBuffer,P.indexBuffer,P.segments),w.coordsIndex.push(Y.tileID.key)}S.bindFramebuffer.set(null),S.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(e,o,c,d){if(!c.isHidden(this.transform.zoom)&&(c.type==="background"||c.type==="custom"||(d||[]).length))switch(this.id=c.id,c.type){case"symbol":(function(g,w,S,E,T){if(g.renderPass!=="translucent")return;const z=dn.disabled,P=g.colorModeForRenderPass();(S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(B,q,G,Y,Z,te,oe,K,he){const ge=q.transform,_e=Yr(),Pe=Z==="map",Be=te==="map";for(const Je of B){const Ye=Y.getTile(Je),Oe=Ye.getBucket(G);if(!Oe||!Oe.text||!Oe.text.segments.get().length)continue;const je=u.ag(Oe.textSizeData,ge.zoom),lt=De(Ye,1,q.transform.zoom),At=Bi(Je.posMatrix,Be,Pe,q.transform,lt),Ge=G.layout.get("icon-text-fit")!=="none"&&Oe.hasIconData();if(je){const Ze=Math.pow(2,ge.zoom-Ye.tileID.overscaledZ),wt=q.style.map.terrain?(zt,Rt)=>q.style.map.terrain.getElevation(Je,zt,Rt):null,tn=_e.translatePosition(ge,Ye,oe,K);Nc(Oe,Pe,Be,he,ge,At,Je.posMatrix,Ze,je,Ge,_e,tn,Je.toUnwrapped(),wt)}}}(E,g,S,w,S.layout.get("text-rotation-alignment"),S.layout.get("text-pitch-alignment"),S.paint.get("text-translate"),S.paint.get("text-translate-anchor"),T),S.paint.get("icon-opacity").constantOr(1)!==0&&Na(g,w,S,E,!1,S.paint.get("icon-translate"),S.paint.get("icon-translate-anchor"),S.layout.get("icon-rotation-alignment"),S.layout.get("icon-pitch-alignment"),S.layout.get("icon-keep-upright"),z,P),S.paint.get("text-opacity").constantOr(1)!==0&&Na(g,w,S,E,!0,S.paint.get("text-translate"),S.paint.get("text-translate-anchor"),S.layout.get("text-rotation-alignment"),S.layout.get("text-pitch-alignment"),S.layout.get("text-keep-upright"),z,P),w.map.showCollisionBoxes&&(Oc(g,w,S,E,!0),Oc(g,w,S,E,!1))})(e,o,c,d,this.style.placement.variableOffsets);break;case"circle":(function(g,w,S,E){if(g.renderPass!=="translucent")return;const T=S.paint.get("circle-opacity"),z=S.paint.get("circle-stroke-width"),P=S.paint.get("circle-stroke-opacity"),B=!S.layout.get("circle-sort-key").isConstant();if(T.constantOr(1)===0&&(z.constantOr(1)===0||P.constantOr(1)===0))return;const q=g.context,G=q.gl,Y=g.depthModeForSublayer(0,Lt.ReadOnly),Z=dn.disabled,te=g.colorModeForRenderPass(),oe=[];for(let K=0;K<E.length;K++){const he=E[K],ge=w.getTile(he),_e=ge.getBucket(S);if(!_e)continue;const Pe=_e.programConfigurations.get(S.id),Be=g.useProgram("circle",Pe),Je=_e.layoutVertexBuffer,Ye=_e.indexBuffer,Oe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(he),je={programConfiguration:Pe,program:Be,layoutVertexBuffer:Je,indexBuffer:Ye,uniformValues:Rd(g,he,ge,S),terrainData:Oe};if(B){const lt=_e.segments.get();for(const At of lt)oe.push({segments:new u.a0([At]),sortKey:At.sortKey,state:je})}else oe.push({segments:_e.segments,sortKey:0,state:je})}B&&oe.sort((K,he)=>K.sortKey-he.sortKey);for(const K of oe){const{programConfiguration:he,program:ge,layoutVertexBuffer:_e,indexBuffer:Pe,uniformValues:Be,terrainData:Je}=K.state;ge.draw(q,G.TRIANGLES,Y,Z,te,en.disabled,Be,Je,S.id,_e,Pe,K.segments,S.paint,g.transform.zoom,he)}})(e,o,c,d);break;case"heatmap":(function(g,w,S,E){if(S.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const T=g.context,z=T.gl,P=dn.disabled,B=new vn([z.ONE,z.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(q,G,Y){const Z=q.gl;q.activeTexture.set(Z.TEXTURE1),q.viewport.set([0,0,G.width/4,G.height/4]);let te=Y.heatmapFbo;if(te)Z.bindTexture(Z.TEXTURE_2D,te.colorAttachment.get()),q.bindFramebuffer.set(te.framebuffer);else{const oe=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,oe),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),te=Y.heatmapFbo=q.createFramebuffer(G.width/4,G.height/4,!1,!1),function(K,he,ge,_e){var Pe,Be;const Je=K.gl,Ye=(Pe=K.HALF_FLOAT)!==null&&Pe!==void 0?Pe:Je.UNSIGNED_BYTE,Oe=(Be=K.RGBA16F)!==null&&Be!==void 0?Be:Je.RGBA;Je.texImage2D(Je.TEXTURE_2D,0,Oe,he.width/4,he.height/4,0,Je.RGBA,Ye,null),_e.colorAttachment.set(ge)}(q,G,oe,te)}})(T,g,S),T.clear({color:u.aM.transparent});for(let q=0;q<E.length;q++){const G=E[q];if(w.hasRenderableParent(G))continue;const Y=w.getTile(G),Z=Y.getBucket(S);if(!Z)continue;const te=Z.programConfigurations.get(S.id),oe=g.useProgram("heatmap",te),{zoom:K}=g.transform;oe.draw(T,z.TRIANGLES,Lt.disabled,P,B,en.disabled,Ni(G.posMatrix,Y,K,S.paint.get("heatmap-intensity")),null,S.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,S.paint,g.transform.zoom,te)}T.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(T,z){const P=T.context,B=P.gl,q=z.heatmapFbo;if(!q)return;P.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,q.colorAttachment.get()),P.activeTexture.set(B.TEXTURE1);let G=z.colorRampTexture;G||(G=z.colorRampTexture=new ot(P,z.colorRamp,B.RGBA)),G.bind(B.LINEAR,B.CLAMP_TO_EDGE),T.useProgram("heatmapTexture").draw(P,B.TRIANGLES,Lt.disabled,dn.disabled,T.colorModeForRenderPass(),en.disabled,((Y,Z,te,oe)=>{const K=u.H();u.aP(K,0,Y.width,Y.height,0,0,1);const he=Y.context.gl;return{u_matrix:K,u_world:[he.drawingBufferWidth,he.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(T,z),null,z.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,z.paint,T.transform.zoom)}(g,S))})(e,o,c,d);break;case"line":(function(g,w,S,E){if(g.renderPass!=="translucent")return;const T=S.paint.get("line-opacity"),z=S.paint.get("line-width");if(T.constantOr(1)===0||z.constantOr(1)===0)return;const P=g.depthModeForSublayer(0,Lt.ReadOnly),B=g.colorModeForRenderPass(),q=S.paint.get("line-dasharray"),G=S.paint.get("line-pattern"),Y=G.constantOr(1),Z=S.paint.get("line-gradient"),te=S.getCrossfadeParameters(),oe=Y?"linePattern":q?"lineSDF":Z?"lineGradient":"line",K=g.context,he=K.gl;let ge=!0;for(const _e of E){const Pe=w.getTile(_e);if(Y&&!Pe.patternsLoaded())continue;const Be=Pe.getBucket(S);if(!Be)continue;const Je=Be.programConfigurations.get(S.id),Ye=g.context.program.get(),Oe=g.useProgram(oe,Je),je=ge||Oe.program!==Ye,lt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(_e),At=G.constantOr(null);if(At&&Pe.imageAtlas){const wt=Pe.imageAtlas,tn=wt.patternPositions[At.to.toString()],zt=wt.patternPositions[At.from.toString()];tn&&zt&&Je.setConstantPatternPositions(tn,zt)}const Ge=lt?_e:null,Ze=Y?Ld(g,Pe,S,te,Ge):q?Fd(g,Pe,S,q,te,Ge):Z?ol(g,Pe,S,Be.lineClipsArray.length,Ge):rs(g,Pe,S,Ge);if(Y)K.activeTexture.set(he.TEXTURE0),Pe.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Je.updatePaintBuffers(te);else if(q&&(je||g.lineAtlas.dirty))K.activeTexture.set(he.TEXTURE0),g.lineAtlas.bind(K);else if(Z){const wt=Be.gradients[S.id];let tn=wt.texture;if(S.gradientVersion!==wt.version){let zt=256;if(S.stepInterpolant){const Rt=w.getSource().maxzoom,on=_e.canonical.z===Rt?Math.ceil(1<<g.transform.maxZoom-_e.canonical.z):1;zt=u.ac(u.aU(Be.maxLineLength/u.X*1024*on),256,K.maxTextureSize)}wt.gradient=u.aV({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:zt,image:wt.gradient||void 0,clips:Be.lineClipsArray}),wt.texture?wt.texture.update(wt.gradient):wt.texture=new ot(K,wt.gradient,he.RGBA),wt.version=S.gradientVersion,tn=wt.texture}K.activeTexture.set(he.TEXTURE0),tn.bind(S.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}Oe.draw(K,he.TRIANGLES,P,g.stencilModeForClipping(_e),B,en.disabled,Ze,lt,S.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,S.paint,g.transform.zoom,Je,Be.layoutVertexBuffer2),ge=!1}})(e,o,c,d);break;case"fill":(function(g,w,S,E){const T=S.paint.get("fill-color"),z=S.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const P=g.colorModeForRenderPass(),B=S.paint.get("fill-pattern"),q=g.opaquePassEnabledForLayer()&&!B.constantOr(1)&&T.constantOr(u.aM.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===q){const G=g.depthModeForSublayer(1,g.renderPass==="opaque"?Lt.ReadWrite:Lt.ReadOnly);Vc(g,w,S,E,G,P,!1)}if(g.renderPass==="translucent"&&S.paint.get("fill-antialias")){const G=g.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,Lt.ReadOnly);Vc(g,w,S,E,G,P,!0)}})(e,o,c,d);break;case"fill-extrusion":(function(g,w,S,E){const T=S.paint.get("fill-extrusion-opacity");if(T!==0&&g.renderPass==="translucent"){const z=new Lt(g.context.gl.LEQUAL,Lt.ReadWrite,g.depthRangeFor3D);if(T!==1||S.paint.get("fill-extrusion-pattern").constantOr(1))cs(g,w,S,E,z,dn.disabled,vn.disabled),cs(g,w,S,E,z,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const P=g.colorModeForRenderPass();cs(g,w,S,E,z,dn.disabled,P)}}})(e,o,c,d);break;case"hillshade":(function(g,w,S,E){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const T=g.context,z=g.depthModeForSublayer(0,Lt.ReadOnly),P=g.colorModeForRenderPass(),[B,q]=g.renderPass==="translucent"?g.stencilConfigForOverlap(E):[{},E];for(const G of q){const Y=w.getTile(G);Y.needsHillshadePrepare!==void 0&&Y.needsHillshadePrepare&&g.renderPass==="offscreen"?ml(g,Y,S,z,dn.disabled,P):g.renderPass==="translucent"&&ja(g,G,Y,S,z,B[G.overscaledZ],P)}T.viewport.set([0,0,g.width,g.height])})(e,o,c,d);break;case"raster":(function(g,w,S,E){if(g.renderPass!=="translucent"||S.paint.get("raster-opacity")===0||!E.length)return;const T=g.context,z=T.gl,P=w.getSource(),B=g.useProgram("raster"),q=g.colorModeForRenderPass(),[G,Y]=P instanceof ur?[{},E]:g.stencilConfigForOverlap(E),Z=Y[Y.length-1].overscaledZ,te=!g.options.moving;for(const oe of Y){const K=g.depthModeForSublayer(oe.overscaledZ-Z,S.paint.get("raster-opacity")===1?Lt.ReadWrite:Lt.ReadOnly,z.LESS),he=w.getTile(oe);he.registerFadeDuration(S.paint.get("raster-fade-duration"));const ge=w.findLoadedParent(oe,0),_e=w.findLoadedSibling(oe),Pe=gl(he,ge||_e||null,w,S,g.transform,g.style.map.terrain);let Be,Je;const Ye=S.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;T.activeTexture.set(z.TEXTURE0),he.texture.bind(Ye,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),T.activeTexture.set(z.TEXTURE1),ge?(ge.texture.bind(Ye,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),Be=Math.pow(2,ge.tileID.overscaledZ-he.tileID.overscaledZ),Je=[he.tileID.canonical.x*Be%1,he.tileID.canonical.y*Be%1]):he.texture.bind(Ye,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),he.texture.useMipmap&&T.extTextureFilterAnisotropic&&g.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);const Oe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(oe),je=Oe?oe:null,lt=je?je.posMatrix:g.transform.calculatePosMatrix(oe.toUnwrapped(),te),At=hf(lt,Je||[0,0],Be||1,Pe,S);P instanceof ur?B.draw(T,z.TRIANGLES,K,dn.disabled,q,en.disabled,At,Oe,S.id,P.boundsBuffer,g.quadTriangleIndexBuffer,P.boundsSegments):B.draw(T,z.TRIANGLES,K,G[oe.overscaledZ],q,en.disabled,At,Oe,S.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}})(e,o,c,d);break;case"background":(function(g,w,S,E){const T=S.paint.get("background-color"),z=S.paint.get("background-opacity");if(z===0)return;const P=g.context,B=P.gl,q=g.transform,G=q.tileSize,Y=S.paint.get("background-pattern");if(g.isPatternMissing(Y))return;const Z=!Y&&T.a===1&&z===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==Z)return;const te=dn.disabled,oe=g.depthModeForSublayer(0,Z==="opaque"?Lt.ReadWrite:Lt.ReadOnly),K=g.colorModeForRenderPass(),he=g.useProgram(Y?"backgroundPattern":"background"),ge=E||q.coveringTiles({tileSize:G,terrain:g.style.map.terrain});Y&&(P.activeTexture.set(B.TEXTURE0),g.imageManager.bind(g.context));const _e=S.getCrossfadeParameters();for(const Pe of ge){const Be=E?Pe.posMatrix:g.transform.calculatePosMatrix(Pe.toUnwrapped()),Je=Y?Mc(Be,z,g,Y,{tileID:Pe,tileSize:G},_e):sl(Be,z,T),Ye=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Pe);he.draw(P,B.TRIANGLES,oe,te,K,en.disabled,Je,Ye,S.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}})(e,0,c,d);break;case"custom":(function(g,w,S){const E=g.context,T=S.implementation;if(g.renderPass==="offscreen"){const z=T.prerender;z&&(g.setCustomLayerDefaults(),E.setColorMode(g.colorModeForRenderPass()),z.call(T,E.gl,g.transform.customLayerMatrix()),E.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),E.setColorMode(g.colorModeForRenderPass()),E.setStencilMode(dn.disabled);const z=T.renderingMode==="3d"?new Lt(g.context.gl.LEQUAL,Lt.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,Lt.ReadOnly);E.setDepthMode(z),T.render(E.gl,g.transform.customLayerMatrix(),{farZ:g.transform.farZ,nearZ:g.transform.nearZ,fov:g.transform._fov,modelViewProjectionMatrix:g.transform.modelViewProjectionMatrix,projectionMatrix:g.transform.projectionMatrix}),E.setDirty(),g.setBaseState(),E.bindFramebuffer.set(null)}})(e,0,c)}}translatePosMatrix(e,o,c,d,g){if(!c[0]&&!c[1])return e;const w=g?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){const T=Math.sin(w),z=Math.cos(w);c=[c[0]*z-c[1]*T,c[0]*T+c[1]*z]}const S=[g?c[0]:De(o,c[0],this.transform.zoom),g?c[1]:De(o,c[1],this.transform.zoom),0],E=new Float32Array(16);return u.J(E,e,S),E}saveTileTexture(e){const o=this._tileTextures[e.size[0]];o?o.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const o=this._tileTextures[e];return o&&o.length>0?o.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const o=this.imageManager.getPattern(e.from.toString()),c=this.imageManager.getPattern(e.to.toString());return!o||!c}useProgram(e,o){this.cache=this.cache||{};const c=e+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[c]||(this.cache[c]=new nl(this.context,ya[e],o,ll[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ot(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:o}=this.context.gl;return this.width!==e||this.height!==o}}class qc{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,c){const d=Math.pow(2,c),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const E=1/(S=u.af([],S,e))[3]/o*d;return u.b0(S,S,[E,E,1/S[3],E])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const E=function(B,q){var G=q[0],Y=q[1],Z=q[2],te=G*G+Y*Y+Z*Z;return te>0&&(te=1/Math.sqrt(te)),B[0]=q[0]*te,B[1]=q[1]*te,B[2]=q[2]*te,B}([],function(B,q,G){var Y=q[0],Z=q[1],te=q[2],oe=G[0],K=G[1],he=G[2];return B[0]=Z*he-te*K,B[1]=te*oe-Y*he,B[2]=Y*K-Z*oe,B}([],Qe([],g[S[0]],g[S[1]]),Qe([],g[S[2]],g[S[1]]))),T=-((z=E)[0]*(P=g[S[1]])[0]+z[1]*P[1]+z[2]*P[2]);var z,P;return E.concat(T)});return new qc(g,w)}}class xl{constructor(e,o){this.min=e,this.max=o,this.center=function(c,d,g){return c[0]=.5*d[0],c[1]=.5*d[1],c[2]=.5*d[2],c}([],function(c,d,g){return c[0]=d[0]+g[0],c[1]=d[1]+g[1],c[2]=d[2]+g[2],c}([],this.min,this.max))}quadrant(e){const o=[e%2==0,e<2],c=Re(this.min),d=Re(this.max);for(let g=0;g<o.length;g++)c[g]=o[g]?this.min[g]:this.center[g],d[g]=o[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new xl(c,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let c=!0;for(let d=0;d<e.planes.length;d++){const g=e.planes[d];let w=0;for(let S=0;S<o.length;S++)u.b1(g,o[S])>=0&&w++;if(w===0)return 0;w!==o.length&&(c=!1)}if(c)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let S=0;S<e.points.length;S++){const E=e.points[S][d]-this.min[d];g=Math.min(g,E),w=Math.max(w,E)}if(w<0||g>this.max[d]-this.min[d])return 0}return 1}}class hs{constructor(e=0,o=0,c=0,d=0){if(isNaN(e)||e<0||isNaN(o)||o<0||isNaN(c)||c<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=o,this.left=c,this.right=d}interpolate(e,o,c){return o.top!=null&&e.top!=null&&(this.top=u.y.number(e.top,o.top,c)),o.bottom!=null&&e.bottom!=null&&(this.bottom=u.y.number(e.bottom,o.bottom,c)),o.left!=null&&e.left!=null&&(this.left=u.y.number(e.left,o.left,c)),o.right!=null&&e.right!=null&&(this.right=u.y.number(e.right,o.right,c)),this}getCenter(e,o){const c=u.ac((this.left+e-this.right)/2,0,e),d=u.ac((this.top+o-this.bottom)/2,0,o);return new u.P(c,d)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new hs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const th=85.051129;class ps{constructor(e,o,c,d,g){this.tileSize=512,this._renderWorldCopies=g===void 0||!!g,this._minZoom=e||0,this._maxZoom=o||22,this._minPitch=c??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new ps(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const o=-u.b2(e,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=function(){var c=new u.A(4);return u.A!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c}(),function(c,d,g){var w=d[0],S=d[1],E=d[2],T=d[3],z=Math.sin(g),P=Math.cos(g);c[0]=w*P+E*z,c[1]=S*P+T*z,c[2]=w*-z+E*P,c[3]=S*-z+T*P}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const o=u.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const o=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,o,c){this._unmodified=!1,this._edgeInsets.interpolate(e,o,c),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const o=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(e){const o=[new u.b3(0,e)];if(this._renderWorldCopies){const c=this.pointCoordinate(new u.P(0,0)),d=this.pointCoordinate(new u.P(this.width,0)),g=this.pointCoordinate(new u.P(this.width,this.height)),w=this.pointCoordinate(new u.P(0,this.height)),S=Math.floor(Math.min(c.x,d.x,g.x,w.x)),E=Math.floor(Math.max(c.x,d.x,g.x,w.x)),T=1;for(let z=S-T;z<=E+T;z++)z!==0&&o.push(new u.b3(z,e))}return o}coveringTiles(e){var o,c;let d=this.coveringZoomLevel(e);const g=d;if(e.minzoom!==void 0&&d<e.minzoom)return[];e.maxzoom!==void 0&&d>e.maxzoom&&(d=e.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),S=u.Z.fromLngLat(this.center),E=Math.pow(2,d),T=[E*w.x,E*w.y,0],z=[E*S.x,E*S.y,0],P=qc.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d);let B=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(B=d);const q=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,G=K=>({aabb:new xl([K*E,0,0],[(K+1)*E,E,0]),zoom:0,x:0,y:0,wrap:K,fullyVisible:!1}),Y=[],Z=[],te=d,oe=e.reparseOverscaled?g:d;if(this._renderWorldCopies)for(let K=1;K<=3;K++)Y.push(G(-K)),Y.push(G(K));for(Y.push(G(0));Y.length>0;){const K=Y.pop(),he=K.x,ge=K.y;let _e=K.fullyVisible;if(!_e){const Oe=K.aabb.intersects(P);if(Oe===0)continue;_e=Oe===2}const Pe=e.terrain?T:z,Be=K.aabb.distanceX(Pe),Je=K.aabb.distanceY(Pe),Ye=Math.max(Math.abs(Be),Math.abs(Je));if(K.zoom===te||Ye>q+(1<<te-K.zoom)-2&&K.zoom>=B){const Oe=te-K.zoom,je=T[0]-.5-(he<<Oe),lt=T[1]-.5-(ge<<Oe);Z.push({tileID:new u.S(K.zoom===te?oe:K.zoom,K.wrap,K.zoom,he,ge),distanceSq:pe([z[0]-.5-he,z[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(je*je+lt*lt)})}else for(let Oe=0;Oe<4;Oe++){const je=(he<<1)+Oe%2,lt=(ge<<1)+(Oe>>1),At=K.zoom+1;let Ge=K.aabb.quadrant(Oe);if(e.terrain){const Ze=new u.S(At,K.wrap,At,je,lt),wt=e.terrain.getMinMaxElevation(Ze),tn=(o=wt.minElevation)!==null&&o!==void 0?o:this.elevation,zt=(c=wt.maxElevation)!==null&&c!==void 0?c:this.elevation;Ge=new xl([Ge.min[0],Ge.min[1],tn],[Ge.max[0],Ge.max[1],zt])}Y.push({aabb:Ge,zoom:At,x:je,y:lt,wrap:K.wrap,fullyVisible:_e})}}return Z.sort((K,he)=>K.distanceSq-he.distanceSq).map(K=>K.tileID)}resize(e,o){this.width=e,this.height=o,this.pixelsToGLUnits=[2/e,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const o=u.ac(e.lat,-85.051129,th);return new u.P(u.O(e.lng)*this.worldSize,u.Q(o)*this.worldSize)}unproject(e){return new u.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const o=this.elevation,c=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,e),g=e.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-g))return;const w=c+o-g,S=Math.cos(this._pitch)*this.cameraToCenterDistance/w/u.b4(1,d.lat),E=this.scaleZoom(S/this.tileSize);this._elevation=g,this._center=d,this.zoom=E}setLocationAtPoint(e,o){const c=this.pointCoordinate(o),d=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(e),w=new u.Z(g.x-(c.x-d.x),g.y-(c.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,o){return o?this.coordinatePoint(this.locationCoordinate(e),o.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,o){return this.coordinateLocation(this.pointCoordinate(e,o))}locationCoordinate(e){return u.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,o){if(o){const B=o.pointCoordinate(e);if(B!=null)return B}const c=[e.x,e.y,0,1],d=[e.x,e.y,1,1];u.af(c,c,this.pixelMatrixInverse),u.af(d,d,this.pixelMatrixInverse);const g=c[3],w=d[3],S=c[1]/g,E=d[1]/w,T=c[2]/g,z=d[2]/w,P=T===z?0:(0-T)/(z-T);return new u.Z(u.y.number(c[0]/g,d[0]/w,P)/this.worldSize,u.y.number(S,E,P)/this.worldSize)}coordinatePoint(e,o=0,c=this.pixelMatrix){const d=[e.x*this.worldSize,e.y*this.worldSize,o,1];return u.af(d,d,c),new u.P(d[0]/d[3],d[1]/d[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new be().extend(this.pointLocation(new u.P(0,e))).extend(this.pointLocation(new u.P(this.width,e))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new be([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,th])}calculateTileMatrix(e){const o=e.canonical,c=this.worldSize/this.zoomScale(o.z),d=o.x+Math.pow(2,o.z)*e.wrap,g=u.an(new Float64Array(16));return u.J(g,g,[d*c,o.y*c,0]),u.K(g,g,[c/u.X,c/u.X,1]),g}calculatePosMatrix(e,o=!1){const c=e.key,d=o?this._alignedPosMatrixCache:this._posMatrixCache;if(d[c])return d[c];const g=this.calculateTileMatrix(e);return u.L(g,o?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,g),d[c]=new Float32Array(g),d[c]}calculateFogMatrix(e){const o=e.key,c=this._fogMatrixCache;if(c[o])return c[o];const d=this.calculateTileMatrix(e);return u.L(d,this.fogMatrix,d),c[o]=new Float32Array(d),c[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,o){o=u.ac(+o,this.minZoom,this.maxZoom);const c={center:new u.N(e.lng,e.lat),zoom:o};let d=this.lngRange;if(!this._renderWorldCopies&&d===null){const K=179.9999999999;d=[-K,K]}const g=this.tileSize*this.zoomScale(c.zoom);let w=0,S=g,E=0,T=g,z=0,P=0;const{x:B,y:q}=this.size;if(this.latRange){const K=this.latRange;w=u.Q(K[1])*g,S=u.Q(K[0])*g,S-w<q&&(z=q/(S-w))}d&&(E=u.b2(u.O(d[0])*g,0,g),T=u.b2(u.O(d[1])*g,0,g),T<E&&(T+=g),T-E<B&&(P=B/(T-E)));const{x:G,y:Y}=this.project.call({worldSize:g},e);let Z,te;const oe=Math.max(P||0,z||0);if(oe){const K=new u.P(P?(T+E)/2:G,z?(S+w)/2:Y);return c.center=this.unproject.call({worldSize:g},K).wrap(),c.zoom+=this.scaleZoom(oe),c}if(this.latRange){const K=q/2;Y-K<w&&(te=w+K),Y+K>S&&(te=S-K)}if(d){const K=(E+T)/2;let he=G;this._renderWorldCopies&&(he=u.b2(G,K-g/2,K+g/2));const ge=B/2;he-ge<E&&(Z=E+ge),he+ge>T&&(Z=T-ge)}if(Z!==void 0||te!==void 0){const K=new u.P(Z??G,te??Y);c.center=this.unproject.call({worldSize:g},K).wrap()}return c}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:o,zoom:c}=this.getConstrained(this.center,this.zoom);this.center=o,this.zoom=c,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,o=this.point.x,c=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b4(1,this.center.lat)*this.worldSize;let d=u.an(new Float64Array(16));u.K(d,d,[this.width/2,-this.height/2,1]),u.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=u.an(new Float64Array(16)),u.K(d,d,[1,-1,1]),u.J(d,d,[-1,-1,0]),u.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;const g=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),S=g-w*this._pixelPerMeter/Math.cos(this._pitch),E=w<0?S:g,T=Math.PI/2+this._pitch,z=this._fov*(.5+e.y/this.height),P=Math.sin(z)*E/Math.sin(u.ac(Math.PI-T-z,.01,Math.PI-.01)),B=this.getHorizon(),q=2*Math.atan(B/this.cameraToCenterDistance)*(.5+e.y/(2*B)),G=Math.sin(q)*E/Math.sin(u.ac(Math.PI-T-q,.01,Math.PI-.01)),Y=Math.min(P,G);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Y+E),this.nearZ=this.height/50,d=new Float64Array(16),u.b5(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-e.x/this.width,d[9]=2*e.y/this.height,this.projectionMatrix=u.ae(d),u.K(d,d,[1,-1,1]),u.J(d,d,[0,0,-this.cameraToCenterDistance]),u.b6(d,d,this._pitch),u.ad(d,d,this.angle),u.J(d,d,[-o,-c,0]),this.mercatorMatrix=u.K([],d,[this.worldSize,this.worldSize,this.worldSize]),u.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,d),u.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=u.as([],d),this.fogMatrix=new Float64Array(16),u.b5(this.fogMatrix,this._fov,this.width/this.height,g,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b6(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-o,-c,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,d);const Z=this.width%2/2,te=this.height%2/2,oe=Math.cos(this.angle),K=Math.sin(this.angle),he=o-Math.round(o)+oe*Z+K*te,ge=c-Math.round(c)+oe*te+K*Z,_e=new Float64Array(d);if(u.J(_e,_e,[he>.5?he-1:he,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=_e,d=u.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new u.P(0,0)),o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return u.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,e))}getCameraQueryGeometry(e){const o=this.getCameraPoint();if(e.length===1)return[e[0],o];{let c=o.x,d=o.y,g=o.x,w=o.y;for(const S of e)c=Math.min(c,S.x),d=Math.min(d,S.y),g=Math.max(g,S.x),w=Math.max(w,S.y);return[new u.P(c,d),new u.P(g,d),new u.P(g,w),new u.P(c,w),new u.P(c,d)]}}lngLatToCameraDepth(e,o){const c=this.locationCoordinate(e),d=[c.x*this.worldSize,c.y*this.worldSize,o,1];return u.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function fs(m,e){let o,c=!1,d=null,g=null;const w=()=>{d=null,c&&(m.apply(g,o),d=setTimeout(w,e),c=!1)};return(...S)=>(c=!0,g=this,o=S,d||w(),d)}class ms{constructor(e){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(c=d)}),(c&&c[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:c,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const c=o.join("/");let d=c;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${c}`);let g=window.location.hash.replace(d,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let w=window.location.href.replace(/(#.+)?$/,g);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=fs(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const o=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,d),w=Math.round(o.lng*g)/g,S=Math.round(o.lat*g)/g,E=this._map.getBearing(),T=this._map.getPitch();let z="";if(z+=e?`/${w}/${S}/${c}`:`${c}/${S}/${w}`,(E||T)&&(z+="/"+Math.round(10*E)/10),T&&(z+=`/${Math.round(T)}`),this._hashName){const P=this._hashName;let B=!1;const q=window.location.hash.slice(1).split("&").map(G=>{const Y=G.split("=")[0];return Y===P?(B=!0,`${Y}=${z}`):G}).filter(G=>G);return B||q.push(`${P}=${z}`),`#${q.join("&")}`}return`#${z}`}}const go={linearity:.3,easing:u.b7(0,0,.3,1)},Gc=u.e({deceleration:2500,maxSpeed:1400},go),nh=u.e({deceleration:20,maxSpeed:1400},go),bl=u.e({deceleration:1e3,maxSpeed:360},go),wl=u.e({deceleration:1e3,maxSpeed:90},go);class Hc{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,o=j.now();for(;e.length>0&&o-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:g}of this._inertiaBuffer)o.zoom+=g.zoomDelta||0,o.bearing+=g.bearingDelta||0,o.pitch+=g.pitchDelta||0,g.panDelta&&o.pan._add(g.panDelta),g.around&&(o.around=g.around),g.pinchAround&&(o.pinchAround=g.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(o.pan.mag()){const g=yo(o.pan.mag(),c,u.e({},Gc,e||{}));d.offset=o.pan.mult(g.amount/o.pan.mag()),d.center=this._map.transform.center,Cl(d,g)}if(o.zoom){const g=yo(o.zoom,c,nh);d.zoom=this._map.transform.zoom+g.amount,Cl(d,g)}if(o.bearing){const g=yo(o.bearing,c,bl);d.bearing=this._map.transform.bearing+u.ac(g.amount,-179,179),Cl(d,g)}if(o.pitch){const g=yo(o.pitch,c,wl);d.pitch=this._map.transform.pitch+g.amount,Cl(d,g)}if(d.zoom||d.bearing){const g=o.pinchAround===void 0?o.around:o.pinchAround;d.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),u.e(d,{noMoveStart:!0})}}function Cl(m,e){(!m.duration||m.duration<e.duration)&&(m.duration=e.duration,m.easing=e.easing)}function yo(m,e,o){const{maxSpeed:c,linearity:d,deceleration:g}=o,w=u.ac(m*d/(e/1e3),-c,c),S=Math.abs(w)/(g*d);return{easing:o.easing,duration:1e3*S,amount:w*(S/2)}}class Ui extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,c,d={}){const g=N.mousePos(o.getCanvas(),c),w=o.unproject(g);super(e,u.e({point:g,lngLat:w,originalEvent:c},d)),this._defaultPrevented=!1,this.target=o}}class _o extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,c){const d=e==="touchend"?c.changedTouches:c.touches,g=N.touchPos(o.getCanvasContainer(),d),w=g.map(E=>o.unproject(E)),S=g.reduce((E,T,z,P)=>E.add(T.div(P.length)),new u.P(0,0));super(e,{points:g,point:S,lngLats:w,lngLat:o.unproject(S),originalEvent:c}),this._defaultPrevented=!1}}class gs extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,c){super(e,{originalEvent:c}),this._defaultPrevented=!1}}class Zc{constructor(e,o){this._map=e,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new gs(e.type,this._map,e))}mousedown(e,o){return this._mousedownPos=o,this._firePreventable(new Ui(e.type,this._map,e))}mouseup(e){this._map.fire(new Ui(e.type,this._map,e))}click(e,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Ui(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Ui(e.type,this._map,e))}mouseover(e){this._map.fire(new Ui(e.type,this._map,e))}mouseout(e){this._map.fire(new Ui(e.type,this._map,e))}touchstart(e){return this._firePreventable(new _o(e.type,this._map,e))}touchmove(e){this._map.fire(new _o(e.type,this._map,e))}touchend(e){this._map.fire(new _o(e.type,this._map,e))}touchcancel(e){this._map.fire(new _o(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ih{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Ui(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Ui(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vo{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(u.P.convert(e),this._map.terrain)}}class ys{constructor(e,o){this._map=e,this._tr=new vo(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,o){this.isEnabled()&&e.shiftKey&&e.button===0&&(N.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(e,o){if(!this._active)return;const c=o;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=c,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const g=Math.min(d.x,c.x),w=Math.max(d.x,c.x),S=Math.min(d.y,c.y),E=Math.max(d.y,c.y);N.setTransform(this._box,`translate(${g}px,${S}px)`),this._box.style.width=w-g+"px",this._box.style.height=E-S+"px"}mouseupWindow(e,o){if(!this._active||e.button!==0)return;const c=this._startPos,d=o;if(this.reset(),N.suppressClick(),c.x!==d.x||c.y!==d.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:e})),{cameraAnimation:g=>g.fitScreenCoordinates(c,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,o){return this._map.fire(new u.k(e,{originalEvent:o}))}}function _s(m,e){if(m.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${e.length}`);const o={};for(let c=0;c<m.length;c++)o[m[c].identifier]=e[c];return o}class Sf{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,o,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),c.length===this.numTouches&&(this.centroid=function(d){const g=new u.P(0,0);for(const w of d)g._add(w);return g.div(d.length)}(o),this.touches=_s(c,o)))}touchmove(e,o,c){if(this.aborted||!this.centroid)return;const d=_s(c,o);for(const g in this.touches){const w=d[g];(!w||w.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(e,o,c){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Sl{constructor(e){this.singleTap=new Sf(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,o,c){this.singleTap.touchstart(e,o,c)}touchmove(e,o,c){this.singleTap.touchmove(e,o,c)}touchend(e,o,c){const d=this.singleTap.touchend(e,o,c);if(d){const g=e.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(g&&w||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class Sn{constructor(e){this._tr=new vo(e),this._zoomIn=new Sl({numTouches:1,numTaps:2}),this._zoomOut=new Sl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,o,c){this._zoomIn.touchstart(e,o,c),this._zoomOut.touchstart(e,o,c)}touchmove(e,o,c){this._zoomIn.touchmove(e,o,c),this._zoomOut.touchmove(e,o,c)}touchend(e,o,c){const d=this._zoomIn.touchend(e,o,c),g=this._zoomOut.touchend(e,o,c),w=this._tr;return d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:e})}):g?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(g)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fr{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const o=this._moveFunction(...e);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(e,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,o){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const d=o.length?o[0]:o;return!this._moved&&d.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(c,d))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&N.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const er={0:1,2:2};class vs{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const o=N.mouseButton(e);this._eventButton=o}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(o,c){const d=er[c];return o.buttons===void 0||(o.buttons&d)!==d}(e,this._eventButton)}isValidEndEvent(e){return N.mouseButton(e)===this._eventButton}}class El{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Al=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=e=>{e.preventDefault()}},Va=({enable:m,clickTolerance:e,bearingDegreesPerPixelMoved:o=.8})=>{const c=new vs({checkCorrectEvent:d=>N.mouseButton(d)===0&&d.ctrlKey||N.mouseButton(d)===2});return new fr({clickTolerance:e,move:(d,g)=>({bearingDelta:(g.x-d.x)*o}),moveStateManager:c,enable:m,assignEvents:Al})},xo=({enable:m,clickTolerance:e,pitchDegreesPerPixelMoved:o=-.5})=>{const c=new vs({checkCorrectEvent:d=>N.mouseButton(d)===0&&d.ctrlKey||N.mouseButton(d)===2});return new fr({clickTolerance:e,move:(d,g)=>({pitchDelta:(g.y-d.y)*o}),moveStateManager:c,enable:m,assignEvents:Al})};class Wc{constructor(e,o){this._clickTolerance=e.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,o,c){return this._calculateTransform(e,o,c)}touchmove(e,o,c){if(this._active){if(!this._shouldBePrevented(c.length))return e.preventDefault(),this._calculateTransform(e,o,c);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,o,c){this._calculateTransform(e,o,c),this._active&&this._shouldBePrevented(c.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,o,c){c.length>0&&(this._active=!0);const d=_s(c,o),g=new u.P(0,0),w=new u.P(0,0);let S=0;for(const T in d){const z=d[T],P=this._touches[T];P&&(g._add(z),w._add(z.sub(P)),S++,d[T]=z)}if(this._touches=d,this._shouldBePrevented(S)||!w.mag())return;const E=w.div(S);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(S),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,o,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([o[0],o[1]]))}touchmove(e,o,c){if(!this._firstTwoTouches)return;e.preventDefault();const[d,g]=this._firstTwoTouches,w=xs(c,o,d),S=xs(c,o,g);if(!w||!S)return;const E=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],E,e)}touchend(e,o,c){if(!this._firstTwoTouches)return;const[d,g]=this._firstTwoTouches,w=xs(c,o,d),S=xs(c,o,g);w&&S||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function xs(m,e,o){for(let c=0;c<m.length;c++)if(m[c].identifier===o)return e[c]}function Xc(m,e){return Math.log(m/e)/Math.LN2}class Kc extends Tl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,o){const c=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Xc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xc(this._distance,c),pinchAround:o}}}function Jc(m,e){return 180*m.angleWith(e)/Math.PI}class va extends Tl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,o,c){const d=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jc(this._vector,d),pinchAround:o}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const o=25/(Math.PI*this._minDiameter)*360,c=Jc(e,this._startVector);return Math.abs(c)<o}}function Ml(m){return Math.abs(m.y)>Math.abs(m.x)}class Yc extends Tl{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,o,c){super.touchstart(e,o,c),this._currentTouchCount=c.length}_start(e){this._lastPoints=e,Ml(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,o,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=e[0].sub(this._lastPoints[0]),g=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,g,c.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(d.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(e,o,c){if(this._valid!==void 0)return this._valid;const d=e.mag()>=2,g=o.mag()>=2;if(!d&&!g)return;if(!d||!g)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const w=e.y>0==o.y>0;return Ml(e)&&Ml(o)&&w}}const rh={panStep:100,bearingStep:15,pitchStep:10};class Qc{constructor(e){this._tr=new vo(e);const o=rh;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let o=0,c=0,d=0,g=0,w=0;switch(e.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:e.shiftKey?c=-1:(e.preventDefault(),g=-1);break;case 39:e.shiftKey?c=1:(e.preventDefault(),g=1);break;case 38:e.shiftKey?d=1:(e.preventDefault(),w=-1);break;case 40:e.shiftKey?d=-1:(e.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(c=0,d=0),{cameraAnimation:S=>{const E=this._tr;S.easeTo({duration:300,easeId:"keyboardHandler",easing:ah,zoom:o?Math.round(E.zoom)+o*(e.shiftKey?2:1):E.zoom,bearing:E.bearing+c*this._bearingStep,pitch:E.pitch+d*this._pitchStep,offset:[-g*this._panStep,-w*this._panStep],center:E.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ah(m){return m*(2-m)}const eu=4.000244140625;class tu{constructor(e,o){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=e,this._tr=new vo(e),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let o=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const c=j.now(),d=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,o!==0&&o%eu==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(d*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),e.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=e,this._delta-=o,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=N.mousePos(this._map.getCanvas(),e),c=this._tr;this._around=o.y>c.transform.height/2-c.transform.getHorizon()?u.N.convert(this._aroundCenter?c.center:c.unproject(o)):u.N.convert(c.center),this._aroundPoint=c.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>eu?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&T!==0&&(T=1/T);const z=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(z*T))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,c=this._startZoom,d=this._easing;let g,w=!1;const S=j.now()-this._lastWheelEventTime;if(this._type==="wheel"&&c&&d&&S){const E=Math.min(S/200,1),T=d(E);g=u.y.number(c,o,T),E<1?this._frameId||(this._frameId=!0):w=!0}else g=o,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:g-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let o=u.b8;if(this._prevEase){const c=this._prevEase,d=(j.now()-c.start)/c.duration,g=c.easing(d+.01)-c.easing(d),w=.27/Math.sqrt(g*g+1e-4)*.01,S=Math.sqrt(.0729-w*w);o=u.b7(w,S,.25,1)}return this._prevEase={start:j.now(),duration:e,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bo{constructor(e,o){this._clickZoom=e,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class oh{constructor(e){this._tr=new vo(e),this.reset()}reset(){this._active=!1}dblclick(e,o){return e.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mr{constructor(){this._tap=new Sl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,o,c){if(!this._swipePoint)if(this._tapTime){const d=o[0],g=e.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;g&&w?c.length>0&&(this._swipePoint=d,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(e,o,c)}touchmove(e,o,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const d=o[0],g=d.y-this._swipePoint.y;return this._swipePoint=d,e.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(e,o,c)}touchend(e,o,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const d=this._tap.touchend(e,o,c);d&&(this._tapTime=e.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gr{constructor(e,o,c){this._el=e,this._mousePan=o,this._touchPan=c}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nu{constructor(e,o,c){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=o,this._mousePitch=c}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class yr{constructor(e,o,c,d){this._el=e,this._touchZoom=o,this._touchRotate=c,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ua{constructor(e,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=N.create("div","maplibregl-cooperative-gesture-screen",e);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=o,this._container.appendChild(d);const g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=c,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(N.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,o){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:e,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Il=m=>m.zoom||m.drag||m.pitch||m.rotate;class Ef extends u.k{}function iu(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Af{constructor(e,o){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,g)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=d.type==="renderFrame"?void 0:d,S={needsRenderFrame:!1},E={},T={},z=d.touches,P=z?this._getMapTouches(z):void 0,B=P?N.touchPos(this._map.getCanvas(),P):N.mousePos(this._map.getCanvas(),d);for(const{handlerName:Y,handler:Z,allowed:te}of this._handlers){if(!Z.isEnabled())continue;let oe;this._blockedByActive(T,te,Y)?Z.reset():Z[g||d.type]&&(oe=Z[g||d.type](d,B,P),this.mergeHandlerResult(S,E,oe,Y,w),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||Z.isActive())&&(T[Y]=Z)}const q={};for(const Y in this._previousActiveHandlers)T[Y]||(q[Y]=w);this._previousActiveHandlers=T,(Object.keys(q).length||iu(S))&&(this._changes.push([S,E,q]),this._triggerRenderFrame()),(Object.keys(T).length||iu(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=S;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Hc(e),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,g,w]of this._listeners)N.addEventListener(d,g,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[e,o,c]of this._listeners)N.removeEventListener(e,o,e===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(e){const o=this._map,c=o.getCanvasContainer();this._add("mapEvent",new Zc(o,e));const d=o.boxZoom=new ys(o,e);this._add("boxZoom",d),e.interactive&&e.boxZoom&&d.enable();const g=o.cooperativeGestures=new Ua(o,e.cooperativeGestures);this._add("cooperativeGestures",g),e.cooperativeGestures&&g.enable();const w=new Sn(o),S=new oh(o);o.doubleClickZoom=new bo(S,w),this._add("tapZoom",w),this._add("clickZoom",S),e.interactive&&e.doubleClickZoom&&o.doubleClickZoom.enable();const E=new mr;this._add("tapDragZoom",E);const T=o.touchPitch=new Yc(o);this._add("touchPitch",T),e.interactive&&e.touchPitch&&o.touchPitch.enable(e.touchPitch);const z=Va(e),P=xo(e);o.dragRotate=new nu(e,z,P),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",P,["mouseRotate"]),e.interactive&&e.dragRotate&&o.dragRotate.enable();const B=(({enable:oe,clickTolerance:K})=>{const he=new vs({checkCorrectEvent:ge=>N.mouseButton(ge)===0&&!ge.ctrlKey});return new fr({clickTolerance:K,move:(ge,_e)=>({around:_e,panDelta:_e.sub(ge)}),activateOnStart:!0,moveStateManager:he,enable:oe,assignEvents:Al})})(e),q=new Wc(e,o);o.dragPan=new gr(c,B,q),this._add("mousePan",B),this._add("touchPan",q,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&o.dragPan.enable(e.dragPan);const G=new va,Y=new Kc;o.touchZoomRotate=new yr(c,Y,G,E),this._add("touchRotate",G,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&o.touchZoomRotate.enable(e.touchZoomRotate);const Z=o.scrollZoom=new tu(o,()=>this._triggerRenderFrame());this._add("scrollZoom",Z,["mousePan"]),e.interactive&&e.scrollZoom&&o.scrollZoom.enable(e.scrollZoom);const te=o.keyboard=new Qc(o);this._add("keyboard",te),e.interactive&&e.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new ih(o))}_add(e,o,c){this._handlers.push({handlerName:e,handler:o,allowed:c}),this._handlersById[e]=o}stop(e){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Il(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,o,c){for(const d in e)if(d!==c&&(!o||o.indexOf(d)<0))return!0;return!1}_getMapTouches(e){const o=[];for(const c of e)this._el.contains(c.target)&&o.push(c);return o}mergeHandlerResult(e,o,c,d,g){if(!c)return;u.e(e,c);const w={handlerName:d,originalEvent:c.originalEvent||g};c.zoomDelta!==void 0&&(o.zoom=w),c.panDelta!==void 0&&(o.drag=w),c.pitchDelta!==void 0&&(o.pitch=w),c.bearingDelta!==void 0&&(o.rotate=w)}_applyChanges(){const e={},o={},c={};for(const[d,g,w]of this._changes)d.panDelta&&(e.panDelta=(e.panDelta||new u.P(0,0))._add(d.panDelta)),d.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(e.around=d.around),d.pinchAround!==void 0&&(e.pinchAround=d.pinchAround),d.noInertia&&(e.noInertia=d.noInertia),u.e(o,g),u.e(c,w);this._updateMapTransform(e,o,c),this._changes=[]}_updateMapTransform(e,o,c){const d=this._map,g=d._getTransformForUpdate(),w=d.terrain;if(!(iu(e)||w&&this._terrainMovement))return this._fireEvents(o,c,!0);let{panDelta:S,zoomDelta:E,bearingDelta:T,pitchDelta:z,around:P,pinchAround:B}=e;B!==void 0&&(P=B),d._stop(!0),P=P||d.transform.centerPoint;const q=g.pointLocation(S?P.sub(S):P);T&&(g.bearing+=T),z&&(g.pitch+=z),E&&(g.zoom+=E),w?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?g.center=g.pointLocation(g.centerPoint.sub(S)):g.setLocationAtPoint(q,P):(this._terrainMovement=!0,this._map._elevationFreeze=!0,g.setLocationAtPoint(q,P)):g.setLocationAtPoint(q,P),d._applyUpdatedTransform(g),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(o,c,!0)}_fireEvents(e,o,c){const d=Il(this._eventsInProgress),g=Il(e),w={};for(const P in e){const{originalEvent:B}=e[P];this._eventsInProgress[P]||(w[`${P}start`]=B),this._eventsInProgress[P]=e[P]}!d&&g&&this._fireEvent("movestart",g.originalEvent);for(const P in w)this._fireEvent(P,w[P]);g&&this._fireEvent("move",g.originalEvent);for(const P in e){const{originalEvent:B}=e[P];this._fireEvent(P,B)}const S={};let E;for(const P in this._eventsInProgress){const{handlerName:B,originalEvent:q}=this._eventsInProgress[P];this._handlersById[B].isActive()||(delete this._eventsInProgress[P],E=o[B]||q,S[`${P}end`]=E)}for(const P in S)this._fireEvent(P,S[P]);const T=Il(this._eventsInProgress),z=(d||g)&&!T;if(z&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const P=this._map._getTransformForUpdate();P.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(P)}if(c&&z){this._updatingCamera=!0;const P=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;!P||!P.essential&&j.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:E})),B(this._map.getBearing())&&this._map.resetNorth()):(B(P.bearing||this._map.getBearing())&&(P.bearing=0),P.freezeElevation=!0,this._map.easeTo(P,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(e,o){this._map.fire(new u.k(e,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Ef("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sh extends u.E{constructor(e,o){super(),this._renderFrameCallback=()=>{const c=Math.min((j.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=o.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,o){return this.jumpTo({center:e},o)}panBy(e,o,c){return e=u.P.convert(e).mult(-1),this.panTo(this.transform.center,u.e({offset:e},o),c)}panTo(e,o,c){return this.easeTo(u.e({center:e},o),c)}getZoom(){return this.transform.zoom}setZoom(e,o){return this.jumpTo({zoom:e},o),this}zoomTo(e,o,c){return this.easeTo(u.e({zoom:e},o),c)}zoomIn(e,o){return this.zoomTo(this.getZoom()+1,e,o),this}zoomOut(e,o){return this.zoomTo(this.getZoom()-1,e,o),this}getBearing(){return this.transform.bearing}setBearing(e,o){return this.jumpTo({bearing:e},o),this}getPadding(){return this.transform.padding}setPadding(e,o){return this.jumpTo({padding:e},o),this}rotateTo(e,o,c){return this.easeTo(u.e({bearing:e},o),c)}resetNorth(e,o){return this.rotateTo(0,u.e({duration:1e3},e),o),this}resetNorthPitch(e,o){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},e),o),this}snapToNorth(e,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,o):this}getPitch(){return this.transform.pitch}setPitch(e,o){return this.jumpTo({pitch:e},o),this}cameraForBounds(e,o){e=be.convert(e);const c=o&&o.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),c,o)}_cameraForBoxAndBearing(e,o,c,d){const g={top:0,bottom:0,right:0,left:0};if(typeof(d=u.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const Oe=d.padding;d.padding={top:Oe,bottom:Oe,right:Oe,left:Oe}}d.padding=u.e(g,d.padding);const w=this.transform,S=w.padding,E=new be(e,o),T=w.project(E.getNorthWest()),z=w.project(E.getNorthEast()),P=w.project(E.getSouthEast()),B=w.project(E.getSouthWest()),q=u.b9(-c),G=T.rotate(q),Y=z.rotate(q),Z=P.rotate(q),te=B.rotate(q),oe=new u.P(Math.max(G.x,Y.x,te.x,Z.x),Math.max(G.y,Y.y,te.y,Z.y)),K=new u.P(Math.min(G.x,Y.x,te.x,Z.x),Math.min(G.y,Y.y,te.y,Z.y)),he=oe.sub(K),ge=(w.width-(S.left+S.right+d.padding.left+d.padding.right))/he.x,_e=(w.height-(S.top+S.bottom+d.padding.top+d.padding.bottom))/he.y;if(_e<0||ge<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Pe=Math.min(w.scaleZoom(w.scale*Math.min(ge,_e)),d.maxZoom),Be=u.P.convert(d.offset),Je=new u.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(u.b9(c)),Ye=Be.add(Je).mult(w.scale/w.zoomScale(Pe));return{center:w.unproject(T.add(P).div(2).sub(Ye)),zoom:Pe,bearing:c}}fitBounds(e,o,c){return this._fitInternal(this.cameraForBounds(e,o),o,c)}fitScreenCoordinates(e,o,c,d,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(e)),this.transform.pointLocation(u.P.convert(o)),c,d),d,g)}_fitInternal(e,o,c){return e?(delete(o=u.e(e,o)).padding,o.linear?this.easeTo(o,c):this.flyTo(o,c)):this}jumpTo(e,o){this.stop();const c=this._getTransformForUpdate();let d=!1,g=!1,w=!1;return"zoom"in e&&c.zoom!==+e.zoom&&(d=!0,c.zoom=+e.zoom),e.center!==void 0&&(c.center=u.N.convert(e.center)),"bearing"in e&&c.bearing!==+e.bearing&&(g=!0,c.bearing=+e.bearing),"pitch"in e&&c.pitch!==+e.pitch&&(w=!0,c.pitch=+e.pitch),e.padding==null||c.isPaddingEqual(e.padding)||(c.padding=e.padding),this._applyUpdatedTransform(c),this.fire(new u.k("movestart",o)).fire(new u.k("move",o)),d&&this.fire(new u.k("zoomstart",o)).fire(new u.k("zoom",o)).fire(new u.k("zoomend",o)),g&&this.fire(new u.k("rotatestart",o)).fire(new u.k("rotate",o)).fire(new u.k("rotateend",o)),w&&this.fire(new u.k("pitchstart",o)).fire(new u.k("pitch",o)).fire(new u.k("pitchend",o)),this.fire(new u.k("moveend",o))}calculateCameraOptionsFromTo(e,o,c,d=0){const g=u.Z.fromLngLat(e,o),w=u.Z.fromLngLat(c,d),S=w.x-g.x,E=w.y-g.y,T=w.z-g.z,z=Math.hypot(S,E,T);if(z===0)throw new Error("Can't calculate camera options with same From and To");const P=Math.hypot(S,E),B=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),q=180*Math.atan2(S,-E)/Math.PI;let G=180*Math.acos(P/z)/Math.PI;return G=T<0?90-G:90+G,{center:w.toLngLat(),zoom:B,pitch:G,bearing:q}}easeTo(e,o){var c;this._stop(!1,e.easeId),((e=u.e({offset:[0,0],duration:500,easing:u.b8},e)).animate===!1||!e.essential&&j.prefersReducedMotion)&&(e.duration=0);const d=this._getTransformForUpdate(),g=d.zoom,w=d.bearing,S=d.pitch,E=d.padding,T="bearing"in e?this._normalizeBearing(e.bearing,w):w,z="pitch"in e?+e.pitch:S,P="padding"in e?e.padding:d.padding,B=u.P.convert(e.offset);let q=d.centerPoint.add(B);const G=d.pointLocation(q),{center:Y,zoom:Z}=d.getConstrained(u.N.convert(e.center||G),(c=e.zoom)!==null&&c!==void 0?c:g);this._normalizeCenter(Y,d);const te=d.project(G),oe=d.project(Y).sub(te),K=d.zoomScale(Z-g);let he,ge;e.around&&(he=u.N.convert(e.around),ge=d.locationPoint(he));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Z!==g,this._rotating=this._rotating||w!==T,this._pitching=this._pitching||z!==S,this._padding=!d.isPaddingEqual(P),this._easeId=e.easeId,this._prepareEase(o,e.noMoveStart,_e),this.terrain&&this._prepareElevation(Y),this._ease(Pe=>{if(this._zooming&&(d.zoom=u.y.number(g,Z,Pe)),this._rotating&&(d.bearing=u.y.number(w,T,Pe)),this._pitching&&(d.pitch=u.y.number(S,z,Pe)),this._padding&&(d.interpolatePadding(E,P,Pe),q=d.centerPoint.add(B)),this.terrain&&!e.freezeElevation&&this._updateElevation(Pe),he)d.setLocationAtPoint(he,ge);else{const Be=d.zoomScale(d.zoom-g),Je=Z>g?Math.min(2,K):Math.max(.5,K),Ye=Math.pow(Je,1-Pe),Oe=d.unproject(te.add(oe.mult(Pe*Ye)).mult(Be));d.setLocationAtPoint(d.renderWorldCopies?Oe.wrap():Oe,q)}this._applyUpdatedTransform(d),this._fireMoveEvents(o)},Pe=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o,Pe)},e),this}_prepareEase(e,o,c={}){this._moving=!0,o||c.moving||this.fire(new u.k("movestart",e)),this._zooming&&!c.zooming&&this.fire(new u.k("zoomstart",e)),this._rotating&&!c.rotating&&this.fire(new u.k("rotatestart",e)),this._pitching&&!c.pitching&&this.fire(new u.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&o!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(c-(o-(c*e+this._elevationStart))/(1-e)),this._elevationTarget=o}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const o=e.getCameraPosition(),c=this.terrain.getElevationForLngLatZoom(o.lngLat,e.zoom);if(o.altitude<c){const d=this.calculateCameraOptionsFromTo(o.lngLat,c,e.center,e.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(e){const o=[];if(this.terrain&&o.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&o.push(d=>this.transformCameraUpdate(d)),!o.length)return;const c=e.clone();for(const d of o){const g=c.clone(),{center:w,zoom:S,pitch:E,bearing:T,elevation:z}=d(g);w&&(g.center=w),S!==void 0&&(g.zoom=S),E!==void 0&&(g.pitch=E),T!==void 0&&(g.bearing=T),z!==void 0&&(g.elevation=z),c.apply(g)}this.transform.apply(c)}_fireMoveEvents(e){this.fire(new u.k("move",e)),this._zooming&&this.fire(new u.k("zoom",e)),this._rotating&&this.fire(new u.k("rotate",e)),this._pitching&&this.fire(new u.k("pitch",e))}_afterEase(e,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const c=this._zooming,d=this._rotating,g=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,c&&this.fire(new u.k("zoomend",e)),d&&this.fire(new u.k("rotateend",e)),g&&this.fire(new u.k("pitchend",e)),this.fire(new u.k("moveend",e))}flyTo(e,o){var c;if(!e.essential&&j.prefersReducedMotion){const Ze=u.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ze,o)}this.stop(),e=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b8},e);const d=this._getTransformForUpdate(),g=d.zoom,w=d.bearing,S=d.pitch,E=d.padding,T="bearing"in e?this._normalizeBearing(e.bearing,w):w,z="pitch"in e?+e.pitch:S,P="padding"in e?e.padding:d.padding,B=u.P.convert(e.offset);let q=d.centerPoint.add(B);const G=d.pointLocation(q),{center:Y,zoom:Z}=d.getConstrained(u.N.convert(e.center||G),(c=e.zoom)!==null&&c!==void 0?c:g);this._normalizeCenter(Y,d);const te=d.zoomScale(Z-g),oe=d.project(G),K=d.project(Y).sub(oe);let he=e.curve;const ge=Math.max(d.width,d.height),_e=ge/te,Pe=K.mag();if("minZoom"in e){const Ze=u.ac(Math.min(e.minZoom,g,Z),d.minZoom,d.maxZoom),wt=ge/d.zoomScale(Ze-g);he=Math.sqrt(wt/Pe*2)}const Be=he*he;function Je(Ze){const wt=(_e*_e-ge*ge+(Ze?-1:1)*Be*Be*Pe*Pe)/(2*(Ze?_e:ge)*Be*Pe);return Math.log(Math.sqrt(wt*wt+1)-wt)}function Ye(Ze){return(Math.exp(Ze)-Math.exp(-Ze))/2}function Oe(Ze){return(Math.exp(Ze)+Math.exp(-Ze))/2}const je=Je(!1);let lt=function(Ze){return Oe(je)/Oe(je+he*Ze)},At=function(Ze){return ge*((Oe(je)*(Ye(wt=je+he*Ze)/Oe(wt))-Ye(je))/Be)/Pe;var wt},Ge=(Je(!0)-je)/he;if(Math.abs(Pe)<1e-6||!isFinite(Ge)){if(Math.abs(ge-_e)<1e-6)return this.easeTo(e,o);const Ze=_e<ge?-1:1;Ge=Math.abs(Math.log(_e/ge))/he,At=()=>0,lt=wt=>Math.exp(Ze*he*wt)}return e.duration="duration"in e?+e.duration:1e3*Ge/("screenSpeed"in e?+e.screenSpeed/he:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=w!==T,this._pitching=z!==S,this._padding=!d.isPaddingEqual(P),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(Y),this._ease(Ze=>{const wt=Ze*Ge,tn=1/lt(wt);d.zoom=Ze===1?Z:g+d.scaleZoom(tn),this._rotating&&(d.bearing=u.y.number(w,T,Ze)),this._pitching&&(d.pitch=u.y.number(S,z,Ze)),this._padding&&(d.interpolatePadding(E,P,Ze),q=d.centerPoint.add(B)),this.terrain&&!e.freezeElevation&&this._updateElevation(Ze);const zt=Ze===1?Y:d.unproject(oe.add(K.mult(At(wt))).mult(tn));d.setLocationAtPoint(d.renderWorldCopies?zt.wrap():zt,q),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,o){var c;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,o)}return e||(c=this.handlers)===null||c===void 0||c.stop(!1),this}_ease(e,o,c){c.animate===!1||c.duration===0?(e(1),o()):(this._easeStart=j.now(),this._easeOptions=c,this._onEaseFrame=e,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,o){e=u.b2(e,-180,180);const c=Math.abs(e-o);return Math.abs(e-360-o)<c&&(e-=360),Math.abs(e+360-o)<c&&(e+=360),e}_normalizeCenter(e,o){if(!o.renderWorldCopies||o.lngRange)return;const c=e.lng-o.center.lng;e.lng+=c>180?-360:c<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const wo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Or{constructor(e=wo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,o){const c=this._map._getUIString(`AttributionControl.${o}`);e.title=c,e.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const o=this._map.style.sourceCaches;for(const d in o){const g=o[d];if(g.used||g.usedForTerrain){const w=g.getSource();w.attribution&&e.indexOf(w.attribution)<0&&e.push(w.attribution)}}e=e.filter(d=>String(d).trim()),e.sort((d,g)=>d.length-g.length),e=e.filter((d,g)=>{for(let w=g+1;w<e.length;w++)if(e[w].indexOf(d)>=0)return!1;return!0});const c=e.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,e.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class et{constructor(e={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const o=N.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class lh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const o=++this._id;return this._queue.push({callback:e,id:o,cancelled:!1}),o}remove(e){const o=this._currentlyRunning,c=o?this._queue.concat(o):this._queue;for(const d of c)if(d.id===e)return void(d.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const c of o)if(!c.cancelled&&(c.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ru=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class ch extends u.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,o){this.sourceCache.update(e,o),this._renderableTilesKeys=[];const c={};for(const d of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))c[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),u.aP(d.posMatrix,0,u.X,0,u.X,0,1),this._tiles[d.key]=new pr(d,this.tileSize));for(const d in this._tiles)c[d]||delete this._tiles[d]}freeRtt(e){for(const o in this._tiles){const c=this._tiles[o];(!e||c.tileID.equals(e)||c.tileID.isChildOf(e)||e.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const o={};for(const c of this._renderableTilesKeys){const d=this._tiles[c].tileID;if(d.canonical.equals(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16),u.aP(g.posMatrix,0,u.X,0,u.X,0,1),o[c]=g}else if(d.canonical.isChildOf(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const w=d.canonical.z-e.canonical.z,S=d.canonical.x-(d.canonical.x>>w<<w),E=d.canonical.y-(d.canonical.y>>w<<w),T=u.X>>w;u.aP(g.posMatrix,0,T,0,T,0,1),u.J(g.posMatrix,g.posMatrix,[-S*T,-E*T,0]),o[c]=g}else if(e.canonical.isChildOf(d.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const w=e.canonical.z-d.canonical.z,S=e.canonical.x-(e.canonical.x>>w<<w),E=e.canonical.y-(e.canonical.y>>w<<w),T=u.X>>w;u.aP(g.posMatrix,0,u.X,0,u.X,0,1),u.J(g.posMatrix,g.posMatrix,[S*T,E*T,0]),u.K(g.posMatrix,g.posMatrix,[1/2**w,1/2**w,0]),o[c]=g}}return o}getSourceTile(e,o){const c=this.sourceCache._source;let d=e.overscaledZ-this.deltaZoom;if(d>c.maxzoom&&(d=c.maxzoom),d<c.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(d).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!g||!g.dem)&&o)for(;d>=c.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(e.scaledTo(d--).key);return g}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(o=>o.timeAdded>=e)}}class bs{constructor(e,o,c){this.painter=e,this.sourceCache=new ch(o),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,o,c,d=u.X){var g;if(!(o>=0&&o<d&&c>=0&&c<d))return 0;const w=this.getTerrainData(e),S=(g=w.tile)===null||g===void 0?void 0:g.dem;if(!S)return 0;const E=function(G,Y,Z){var te=Y[0],oe=Y[1];return G[0]=Z[0]*te+Z[4]*oe+Z[12],G[1]=Z[1]*te+Z[5]*oe+Z[13],G}([],[o/d*u.X,c/d*u.X],w.u_terrain_matrix),T=[E[0]*S.dim,E[1]*S.dim],z=Math.floor(T[0]),P=Math.floor(T[1]),B=T[0]-z,q=T[1]-P;return S.get(z,P)*(1-B)*(1-q)+S.get(z+1,P)*B*(1-q)+S.get(z,P+1)*(1-B)*q+S.get(z+1,P+1)*B*q}getElevationForLngLatZoom(e,o){if(!u.ba(o,e.wrap()))return 0;const{tileID:c,mercatorX:d,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(e,o);return this.getElevation(c,d%u.X,g%u.X,u.X)}getElevation(e,o,c,d=u.X){return this.getDEMElevation(e,o,c,d)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const d=this.painter.context,g=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ot(d,g,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ot(d,new u.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const o=this.sourceCache.getSourceTile(e,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const d=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new ot(d,o.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),o.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const c=o&&o+o.tileID.key+e.key;if(c&&!this._demMatrixCache[c]){const d=this.sourceCache.sourceCache._source.maxzoom;let g=e.canonical.z-o.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=d?g=e.canonical.z-d:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=e.canonical.x-(e.canonical.x>>g<<g),S=e.canonical.y-(e.canonical.y>>g<<g),E=u.bb(new Float64Array(16),[1/(u.X<<g),1/(u.X<<g),0]);u.J(E,E,[w*u.X,S*u.X,0]),this._demMatrixCache[e.key]={matrix:E,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(e){const o=this.painter,c=o.width/devicePixelRatio,d=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ot(o.context,{width:c,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ot(o.context,{width:c,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(c,d,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,c,d))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,w=0;g<this._coordsTextureSize;g++)for(let S=0;S<this._coordsTextureSize;S++,w+=4)o[w+0]=255&S,o[w+1]=255&g,o[w+2]=S>>8<<4|g>>8,o[w+3]=0;const c=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),d=new ot(e,c,e.gl.RGBA,{premultiply:!1});return d.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),c=this.painter.context,d=c.gl,g=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),S=Math.round(this.painter.height/devicePixelRatio);c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(g,S-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),c.bindFramebuffer.set(null);const E=o[0]+(o[2]>>4<<8),T=o[1]+((15&o[2])<<8),z=this.coordsIndex[255-o[3]],P=z&&this.sourceCache.getTileByID(z);if(!P)return null;const B=this._coordsTextureSize,q=(1<<P.tileID.canonical.z)*B;return new u.Z((P.tileID.canonical.x*B+E)/q+P.tileID.wrap,(P.tileID.canonical.y*B+T)/q,this.getElevation(P.tileID,E,T,B))}depthAtPoint(e){const o=new Uint8Array(4),c=this.painter.context,d=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),c.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,o=new u.bc,c=new u.aX,d=this.meshSize,g=u.X/d,w=d*d;for(let P=0;P<=d;P++)for(let B=0;B<=d;B++)o.emplaceBack(B*g,P*g,0);for(let P=0;P<w;P+=d+1)for(let B=0;B<d;B++)c.emplaceBack(B+P,d+B+P+1,d+B+P+2),c.emplaceBack(B+P,d+B+P+2,B+P+1);const S=o.length,E=S+2*(d+1);for(const P of[0,1])for(let B=0;B<=d;B++)for(const q of[0,1])o.emplaceBack(B*g,P*u.X,q);for(let P=0;P<2*d;P+=2)c.emplaceBack(E+P,E+P+1,E+P+3),c.emplaceBack(E+P,E+P+3,E+P+2),c.emplaceBack(S+P,S+P+3,S+P+1),c.emplaceBack(S+P,S+P+2,S+P+3);const T=o.length,z=T+2*(d+1);for(const P of[0,1])for(let B=0;B<=d;B++)for(const q of[0,1])o.emplaceBack(P*u.X,B*g,q);for(let P=0;P<2*d;P+=2)c.emplaceBack(T+P,T+P+1,T+P+3),c.emplaceBack(T+P,T+P+3,T+P+2),c.emplaceBack(z+P,z+P+3,z+P+1),c.emplaceBack(z+P,z+P+2,z+P+3);return this._mesh=new $c(e.createVertexBuffer(o,ru.members),e.createIndexBuffer(c),u.a0.simpleSegment(0,0,o.length,c.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*u.bd/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,o){var c;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(e,o);return(c=this.getMinMaxElevation(d).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(e){const o=this.getTerrainData(e).tile,c={minElevation:null,maxElevation:null};return o&&o.dem&&(c.minElevation=o.dem.min*this.exaggeration,c.maxElevation=o.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(e,o){const c=u.Z.fromLngLat(e.wrap()),d=(1<<o)*u.X,g=c.x*d,w=c.y*d,S=Math.floor(g/u.X),E=Math.floor(w/u.X);return{tileID:new u.S(o,0,o,S,E),mercatorX:g,mercatorY:w}}}class ws{constructor(e,o,c){this._context=e,this._size=o,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new ot(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(c.texture),{id:e,fbo:o,texture:c,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>e.id!==o),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const $a={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bt{constructor(e,o){this.painter=e,this.terrain=o,this.pool=new ws(e.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(c=>!e._layers[c].isHidden(o)),this._coordsDescendingInv={};for(const c in e.sourceCaches){this._coordsDescendingInv[c]={};const d=e.sourceCaches[c].getVisibleCoordinates();for(const g of d){const w=this.terrain.sourceCache.getTerrainCoords(g);for(const S in w)this._coordsDescendingInv[c][S]||(this._coordsDescendingInv[c][S]=[]),this._coordsDescendingInv[c][S].push(w[S])}}this._coordsDescendingInvStr={};for(const c of e._order){const d=e._layers[c],g=d.source;if($a[d.type]&&!this._coordsDescendingInvStr[g]){this._coordsDescendingInvStr[g]={};for(const w in this._coordsDescendingInv[g])this._coordsDescendingInvStr[g][w]=this._coordsDescendingInv[g][w].map(S=>S.key).sort().join()}}for(const c of this._renderableTiles)for(const d in this._coordsDescendingInvStr){const g=this._coordsDescendingInvStr[d][c.tileID.key];g&&g!==c.rttCoords[d]&&(c.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const o=e.type,c=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if($a[o]&&(this._prevType&&$a[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(e.id),!d))return!0;if($a[this._prevType]||$a[o]&&d){this._prevType=o;const g=this._stacks.length-1,w=this._stacks[g]||[];for(const S of this._renderableTiles){if(this.pool.isFull()&&(eh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(S),S.rtt[g]){const T=this.pool.getObjectForId(S.rtt[g].id);if(T.stamp===S.rtt[g].stamp){this.pool.useObject(T);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),S.rtt[g]={id:E.id,stamp:E.stamp},c.context.bindFramebuffer.set(E.fbo.framebuffer),c.context.clear({color:u.aM.transparent,stencil:0}),c.currentStencilSource=void 0;for(let T=0;T<w.length;T++){const z=c.style._layers[w[T]],P=z.source?this._coordsDescendingInv[z.source][S.tileID.key]:[S.tileID];c.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),c._renderTileClippingMasks(z,P),c.renderLayer(c,c.style.sourceCaches[z.source],z,P),z.source&&(S.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][S.tileID.key])}}return eh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),$a[o]}return!1}}const au={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tf=D,ou={hash:!1,interactive:!0,bearingSnap:7,attributionControl:wo,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},uh=m=>{m.touchstart=m.dragStart,m.touchmoveWindow=m.dragMove,m.touchend=m.dragEnd},Mf={showCompass:!0,showZoom:!0,visualizePitch:!1};class dh{constructor(e,o,c=!1){this.mousedown=w=>{this.startMouse(u.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),N.mousePos(this.element,w)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,N.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const d=e.dragRotate._mouseRotate.getClickTolerance(),g=e.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=Va({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:S,bearingDegreesPerPixelMoved:E=.8})=>{const T=new El;return new fr({clickTolerance:S,move:(z,P)=>({bearingDelta:(P.x-z.x)*E}),moveStateManager:T,enable:w,assignEvents:uh})})({clickTolerance:d,enable:!0}),this.map=e,c&&(this.mousePitch=xo({clickTolerance:g,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:S,pitchDegreesPerPixelMoved:E=-.5})=>{const T=new El;return new fr({clickTolerance:S,move:(z,P)=>({pitchDelta:(P.y-z.y)*E}),moveStateManager:T,enable:w,assignEvents:uh})})({clickTolerance:g,enable:!0})),N.addEventListener(o,"mousedown",this.mousedown),N.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(o,"touchcancel",this.reset)}startMouse(e,o){this.mouseRotate.dragStart(e,o),this.mousePitch&&this.mousePitch.dragStart(e,o),N.disableDrag()}startTouch(e,o){this.touchRotate.dragStart(e,o),this.touchPitch&&this.touchPitch.dragStart(e,o),N.disableDrag()}moveMouse(e,o){const c=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(e,o)||{};if(d&&c.setBearing(c.getBearing()+d),this.mousePitch){const{pitchDelta:g}=this.mousePitch.dragMove(e,o)||{};g&&c.setPitch(c.getPitch()+g)}}moveTouch(e,o){const c=this.map,{bearingDelta:d}=this.touchRotate.dragMove(e,o)||{};if(d&&c.setBearing(c.getBearing()+d),this.touchPitch){const{pitchDelta:g}=this.touchPitch.dragMove(e,o)||{};g&&c.setPitch(c.getPitch()+g)}}off(){const e=this.element;N.removeEventListener(e,"mousedown",this.mousedown),N.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let ea;function su(m,e,o){const c=new u.N(m.lng,m.lat);if(m=new u.N(m.lng,m.lat),e){const d=new u.N(m.lng-360,m.lat),g=new u.N(m.lng+360,m.lat),w=o.locationPoint(m).distSqr(e);o.locationPoint(d).distSqr(e)<w?m=d:o.locationPoint(g).distSqr(e)<w&&(m=g)}for(;Math.abs(m.lng-o.center.lng)>180;){const d=o.locationPoint(m);if(d.x>=0&&d.y>=0&&d.x<=o.width&&d.y<=o.height)break;m.lng>o.center.lng?m.lng-=360:m.lng+=360}return m.lng!==c.lng&&o.locationPoint(m).y>o.height/2-o.getHorizon()?m:c}const lu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cu(m,e,o){const c=m.classList;for(const d in lu)c.remove(`maplibregl-${o}-anchor-${d}`);c.add(`maplibregl-${o}-anchor-${e}`)}class uu extends u.E{constructor(e){if(super(),this._onKeyPress=o=>{const c=o.code,d=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=o=>{const c=o.originalEvent.target,d=this._element;this._popup&&(c===d||d.contains(c))&&this.togglePopup()},this._update=o=>{var c;if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?su(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${lu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${g}`),j.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=u.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div");const o=N.createNS("http://www.w3.org/2000/svg","svg"),c=41,d=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${c}px`),o.setAttributeNS(null,"width",`${d}px`),o.setAttributeNS(null,"viewBox",`0 0 ${d} ${c}`);const g=N.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");const w=N.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const S=N.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const te of E){const oe=N.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",te.rx),oe.setAttributeNS(null,"ry",te.ry),S.appendChild(oe)}const T=N.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill",this._color);const z=N.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),T.appendChild(z);const P=N.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"opacity","0.25"),P.setAttributeNS(null,"fill","#000000");const B=N.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),P.appendChild(B);const q=N.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),q.setAttributeNS(null,"fill","#FFFFFF");const G=N.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Y=N.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#000000"),Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962");const Z=N.createNS("http://www.w3.org/2000/svg","circle");Z.setAttributeNS(null,"fill","#FFFFFF"),Z.setAttributeNS(null,"cx","5.5"),Z.setAttributeNS(null,"cy","5.5"),Z.setAttributeNS(null,"r","5.4999962"),G.appendChild(Y),G.appendChild(Z),w.appendChild(S),w.appendChild(T),w.appendChild(P),w.appendChild(q),w.appendChild(G),o.appendChild(w),o.setAttributeNS(null,"height",c*this._scale+"px"),o.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(o),this._offset=u.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),cu(this._element,this._anchor,"marker"),e&&e.className)for(const o of e.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=u.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const d=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var o,c;if(!(!((o=this._map)===null||o===void 0)&&o.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const d=this._map,g=d.terrain.depthAtPoint(this._pos),w=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,w)-g<.006)return void(this._element.style.opacity=this._opacity);const S=-this._offset.y/d.transform._pixelPerMeter,E=Math.sin(d.getPitch()*Math.PI/180)*S,T=d.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),z=d.transform.lngLatToCameraDepth(this._lngLat,w+E)-T>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&z&&this._popup.remove(),this._element.style.opacity=z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=u.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,o){return e===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const If={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Nr=0,Kt=!1;const Pl={maxWidth:100,unit:"metric"};function zl(m,e,o){const c=o&&o.maxWidth||100,d=m._container.clientHeight/2,g=m.unproject([0,d]),w=m.unproject([c,d]),S=g.distanceTo(w);if(o&&o.unit==="imperial"){const E=3.2808*S;E>5280?Co(e,c,E/5280,m._getUIString("ScaleControl.Miles")):Co(e,c,E,m._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Co(e,c,S/1852,m._getUIString("ScaleControl.NauticalMiles")):S>=1e3?Co(e,c,S/1e3,m._getUIString("ScaleControl.Kilometers")):Co(e,c,S,m._getUIString("ScaleControl.Meters"))}function Co(m,e,o,c){const d=function(g){const w=Math.pow(10,`${Math.floor(g)}`.length-1);let S=g/w;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(E){const T=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*T)/T}(S),w*S}(o);m.style.width=e*(d/o)+"px",m.innerHTML=`${d}&nbsp;${c}`}const hh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},ph=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fh(m){if(m){if(typeof m=="number"){const e=Math.round(Math.abs(m)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,m),"top-left":new u.P(e,e),"top-right":new u.P(-e,e),bottom:new u.P(0,-m),"bottom-left":new u.P(e,-e),"bottom-right":new u.P(-e,-e),left:new u.P(m,0),right:new u.P(-m,0)}}if(m instanceof u.P||Array.isArray(m)){const e=u.P.convert(m);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:u.P.convert(m.center||[0,0]),top:u.P.convert(m.top||[0,0]),"top-left":u.P.convert(m["top-left"]||[0,0]),"top-right":u.P.convert(m["top-right"]||[0,0]),bottom:u.P.convert(m.bottom||[0,0]),"bottom-left":u.P.convert(m["bottom-left"]||[0,0]),"bottom-right":u.P.convert(m["bottom-right"]||[0,0]),left:u.P.convert(m.left||[0,0]),right:u.P.convert(m.right||[0,0])}}return fh(new u.P(0,0))}const jr=D;v.AJAXError=u.bg,v.Evented=u.E,v.LngLat=u.N,v.MercatorCoordinate=u.Z,v.Point=u.P,v.addProtocol=u.bh,v.config=u.a,v.removeProtocol=u.bi,v.AttributionControl=Or,v.BoxZoomHandler=ys,v.CanvasSource=bi,v.CooperativeGesturesHandler=Ua,v.DoubleClickZoomHandler=bo,v.DragPanHandler=gr,v.DragRotateHandler=nu,v.EdgeInsets=hs,v.FullscreenControl=class extends u.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var e;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=o==null?void 0:o.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const m=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},v.GeoJSONSource=pa,v.GeolocateControl=class extends u.E{constructor(m){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const o=new u.N(e.coords.longitude,e.coords.latitude),c=e.coords.accuracy,d=this._map.getBearing(),g=u.e({bearing:d},this.options.fitBoundsOptions),w=be.fromLngLat(o,c);this._map.fitBounds(w,g,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const o=new u.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Kt)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new uu({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},If,m)}onAdd(m){return this._map=m,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(e=!1){if(ea!==void 0&&!e)return ea;if(window.navigator.permissions===void 0)return ea=!!window.navigator.geolocation,ea;try{ea=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ea=!!window.navigator.geolocation}return ea})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nr=0,Kt=!1}_isOutOfMapMaxBounds(m){const e=this._map.getMaxBounds(),o=m.coords;return e&&(o.longitude<e.getWest()||o.longitude>e.getEast()||o.latitude<e.getSouth()||o.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const m=this._map.getBounds(),e=m.getSouthEast(),o=m.getNorthEast(),c=e.distanceTo(o),d=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nr--,Kt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nr++,Nr>1?(m={maximumAge:6e5,timeout:0},Kt=!0):(m=this.options.positionOptions,Kt=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},v.Hash=ms,v.ImageSource=ur,v.KeyboardHandler=Qc,v.LngLatBounds=be,v.LogoControl=et,v.Map=class extends sh{constructor(m){u.be.mark(u.bf.create);const e=Object.assign(Object.assign({},ou),m);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ps(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new lh,this._controls=[],this._mapId=u.a4(),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},au),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ce.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ae(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const c=fs(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{o?c(d):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Af(this,e),this._hash=e.hash&&new ms(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,u.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Or(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new et,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new u.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new u.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new u.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(m,e){if(e===void 0&&(e=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=m.onAdd(this);this._controls.push(m);const c=this._controlPositions[e];return e.indexOf("bottom")!==-1?c.insertBefore(o,c.firstChild):c.appendChild(o),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(m);return e>-1&&this._controls.splice(e,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,e,o,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,e,o,c)}resize(m){var e;const o=this._containerDimensions(),c=o[0],d=o[1],g=this._getClampedPixelRatio(c,d);if(this._resizeCanvas(c,d,g),this.painter.resize(c,d,g),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const E=this._getClampedPixelRatio(c,d);this._resizeCanvas(c,d,E),this.painter.resize(c,d,E)}this.transform.resize(c,d),(e=this._requestedCameraState)===null||e===void 0||e.resize(c,d);const w=!this._moving;return w&&(this.stop(),this.fire(new u.k("movestart",m)).fire(new u.k("move",m))),this.fire(new u.k("resize",m)),w&&this.fire(new u.k("moveend",m)),this}_getClampedPixelRatio(m,e){const{0:o,1:c}=this._maxCanvasSize,d=this.getPixelRatio(),g=m*d,w=e*d;return Math.min(g>o?o/g:1,w>c?c/w:1)*d}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(be.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(u.N.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.pointLocation(u.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,e,o){if(m==="mouseenter"||m==="mouseover"){let c=!1;return{layer:e,listener:o,delegates:{mousemove:g=>{const w=this.getLayer(e)?this.queryRenderedFeatures(g.point,{layers:[e]}):[];w.length?c||(c=!0,o.call(this,new Ui(m,this,g.originalEvent,{features:w}))):c=!1},mouseout:()=>{c=!1}}}}if(m==="mouseleave"||m==="mouseout"){let c=!1;return{layer:e,listener:o,delegates:{mousemove:w=>{(this.getLayer(e)?this.queryRenderedFeatures(w.point,{layers:[e]}):[]).length?c=!0:c&&(c=!1,o.call(this,new Ui(m,this,w.originalEvent)))},mouseout:w=>{c&&(c=!1,o.call(this,new Ui(m,this,w.originalEvent)))}}}}{const c=d=>{const g=this.getLayer(e)?this.queryRenderedFeatures(d.point,{layers:[e]}):[];g.length&&(d.features=g,o.call(this,d),delete d.features)};return{layer:e,listener:o,delegates:{[m]:c}}}}on(m,e,o){if(o===void 0)return super.on(m,e);const c=this._createDelegatedListener(m,e,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(c);for(const d in c.delegates)this.on(d,c.delegates[d]);return this}once(m,e,o){if(o===void 0)return super.once(m,e);const c=this._createDelegatedListener(m,e,o);for(const d in c.delegates)this.once(d,c.delegates[d]);return this}off(m,e,o){return o===void 0?super.off(m,e):(this._delegatedListeners&&this._delegatedListeners[m]&&(c=>{const d=this._delegatedListeners[m];for(let g=0;g<d.length;g++){const w=d[g];if(w.layer===e&&w.listener===o){for(const S in w.delegates)this.off(S,w.delegates[S]);return d.splice(g,1),this}}})(),this)}queryRenderedFeatures(m,e){if(!this.style)return[];let o;const c=m instanceof u.P||Array.isArray(m),d=c?m:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(c?{}:m)||{},d instanceof u.P||typeof d[0]=="number")o=[u.P.convert(d)];else{const g=u.P.convert(d[0]),w=u.P.convert(d[1]);o=[g,new u.P(w.x,g.y),w,new u.P(g.x,w.y),g]}return this.style.queryRenderedFeatures(o,e,this.transform)}querySourceFeatures(m,e){return this.style.querySourceFeatures(m,e)}setStyle(m,e){return(e=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(m,e))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const e=this._locale[m];if(e==null)throw new Error(`Missing UI string '${m}'`);return e}_updateStyle(m,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,e));const o=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new Ac(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,e,o):this.style.loadJSON(m,e,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ac(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,e){if(typeof m=="string"){const o=this._requestManager.transformRequest(m,"Style");u.h(o,new AbortController).then(c=>{this._updateDiff(c.data,e)}).catch(c=>{c&&this.fire(new u.j(c))})}else typeof m=="object"&&this._updateDiff(m,e)}_updateDiff(m,e){try{this.style.setState(m,e)&&this._update(!0)}catch(o){u.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(m,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(m,e){return this._lazyInitEmptyStyle(),this.style.addSource(m,e),this._update(!0)}isSourceLoaded(m){const e=this.style&&this.style.sourceCaches[m];if(e!==void 0)return e.loaded();this.fire(new u.j(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){const e=this.style.sourceCaches[m.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&e.reload();for(const o in this.style._layers){const c=this.style._layers[o];c.type==="hillshade"&&c.source===m.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bs(this.painter,e,m),this.painter.renderToTexture=new Bt(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==m.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:m})),this}getTerrain(){var m,e;return(e=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const e in m){const o=m[e]._tiles;for(const c in o){const d=o[c];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,e,o={}){const{pixelRatio:c=1,sdf:d=!1,stretchX:g,stretchY:w,content:S,textFitWidth:E,textFitHeight:T}=o;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||u.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:P,data:B}=e,q=e;return this.style.addImage(m,{data:new u.R({width:z,height:P},new Uint8Array(B)),pixelRatio:c,stretchX:g,stretchY:w,content:S,textFitWidth:E,textFitHeight:T,sdf:d,version:0,userImage:q}),q.onAdd&&q.onAdd(this,m),this}}{const{width:z,height:P,data:B}=j.getImageData(e);this.style.addImage(m,{data:new u.R({width:z,height:P},B),pixelRatio:c,stretchX:g,stretchY:w,content:S,textFitWidth:E,textFitHeight:T,sdf:d,version:0})}}updateImage(m,e){const o=this.style.getImage(m);if(!o)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=e instanceof HTMLImageElement||u.b(e)?j.getImageData(e):e,{width:d,height:g,data:w}=c;if(d===void 0||g===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==o.data.width||g!==o.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(e instanceof HTMLImageElement||u.b(e));return o.data.replace(w,S),this.style.updateImage(m,o),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ce.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,e){return this._lazyInitEmptyStyle(),this.style.addLayer(m,e),this._update(!0)}moveLayer(m,e){return this.style.moveLayer(m,e),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,e,o){return this.style.setLayerZoomRange(m,e,o),this._update(!0)}setFilter(m,e,o={}){return this.style.setFilter(m,e,o),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,e,o,c={}){return this.style.setPaintProperty(m,e,o,c),this._update(!0)}getPaintProperty(m,e){return this.style.getPaintProperty(m,e)}setLayoutProperty(m,e,o,c={}){return this.style.setLayoutProperty(m,e,o,c),this._update(!0)}getLayoutProperty(m,e){return this.style.getLayoutProperty(m,e)}setGlyphs(m,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,e,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,e,o,c=>{c||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,e,o=>{o||this._update(!0)}),this}setLight(m,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(m){return this._lazyInitEmptyStyle(),this.style.setSky(m),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,e){return this.style.setFeatureState(m,e),this._update()}removeFeatureState(m,e){return this.style.removeFeatureState(m,e),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,e=0;return this._container&&(m=this._container.clientWidth||400,e=this._container.clientHeight||300),[m,e]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map");const e=this._canvasContainer=N.create("div","maplibregl-canvas-container",m);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),c=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],c);const d=this._controlContainer=N.create("div","maplibregl-control-container",m),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{g[w]=N.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,e,o){this._canvas.width=Math.floor(o*m),this._canvas.height=Math.floor(o*e),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const m={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",c=>{e={requestedAttributes:m},c&&(e.statusMessage=c.statusMessage,e.type=c.type)},{once:!0});const o=this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m);if(!o){const c="Failed to initialize WebGL";throw e?(e.message=c,new Error(JSON.stringify(e))):new Error(c)}this.painter=new ds(o,this.transform),Te.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const d=this.transform.zoom,g=j.now();this.style.zoomHistory.update(d,g);const w=new u.z(d,{now:g,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),S=w.crossFadingFactor();S===1&&S===this._crossFadingFactor||(o=!0,this._crossFadingFactor=S),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.be.mark(u.bf.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const c=this._sourcesDirty||this._styleDirty||this._placementDirty;return c||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,u.be.mark(u.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ce.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.be.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,j.frameAsync(this._frameRequest).then(m=>{u.be.frame(m),this._frameRequest=null,this._render(m)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return Tf}getCameraTargetElevation(){return this.transform.elevation}},v.MapMouseEvent=Ui,v.MapTouchEvent=_o,v.MapWheelEvent=gs,v.Marker=uu,v.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{const e=this._map.getZoom(),o=e===this._map.getMaxZoom(),c=e===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,o)=>{const c=this._map._getUIString(`NavigationControl.${o}`);e.title=c,e.setAttribute("aria-label",c)},this.options=u.e({},Mf,m),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,e){const o=N.create("button",m,this._container);return o.type="button",o.addEventListener("click",e),o}},v.Popup=class extends u.E{constructor(m){super(),this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?su(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!e)return;const c=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor;const g=fh(this.options.offset);if(!d){const S=this._container.offsetWidth,E=this._container.offsetHeight;let T;T=c.y+g.bottom.y<E?["top"]:c.y>this._map.transform.height-E?["bottom"]:[],c.x<S/2?T.push("left"):c.x>this._map.transform.width-S/2&&T.push("right"),d=T.length===0?"bottom":T.join("-")}let w=c.add(g[d]);this.options.subpixelPositioning||(w=w.round()),N.setTransform(this._container,`${lu[d]} translate(${w.x}px,${w.y}px)`),cu(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(hh),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=u.N.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const e=document.createDocumentFragment(),o=document.createElement("body");let c;for(o.innerHTML=m;c=o.firstChild,c;)e.appendChild(c);return this.setDOMContent(e)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(ph);m&&m.focus()}},v.RasterDEMTileSource=un,v.RasterTileSource=$t,v.ScaleControl=class{constructor(m){this._onMove=()=>{zl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,zl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Pl),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},v.ScrollZoomHandler=tu,v.Style=Ac,v.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},v.TwoFingersTouchPitchHandler=Yc,v.TwoFingersTouchRotateHandler=va,v.TwoFingersTouchZoomHandler=Kc,v.TwoFingersTouchZoomRotateHandler=yr,v.VectorTileSource=Fi,v.VideoSource=fa,v.addSourceType=(m,e)=>u._(void 0,void 0,void 0,function*(){if(hr(m))throw new Error(`A source type called "${m}" already exists.`);((o,c)=>{dr[o]=c})(m,e)}),v.clearPrewarmedResources=function(){const m=an;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(yn),an=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},v.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},v.getRTLTextPluginStatus=function(){return Bn().getRTLTextPluginStatus()},v.getVersion=function(){return jr},v.getWorkerCount=function(){return Fn.workerCount},v.getWorkerUrl=function(){return u.a.WORKER_URL},v.importScriptInWorkers=function(m){return ka().broadcast("IS",m)},v.prewarm=function(){Xr().acquire(yn)},v.setMaxParallelImageRequests=function(m){u.a.MAX_PARALLEL_IMAGE_REQUESTS=m},v.setRTLTextPlugin=function(m,e){return Bn().setRTLTextPlugin(m,e)},v.setWorkerCount=function(m){Fn.workerCount=m},v.setWorkerUrl=function(m){u.a.WORKER_URL=m}});var b=l;return b})})(ew);var nw=ew.exports;const iw=Wg(nw),YA=Zg({__proto__:null,default:iw},[nw]),QA="_mapa_5ggp1_1",e4="_marker_5ggp1_10",t4="_infoBox_5ggp1_28",n4={mapa:QA,marker:e4,infoBox:t4},i4=[{"Espacio (nombre)":"LOS PODEROSITOS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com.ar/maps/place/34%C2%B038'55.7%22S+58%C2%B026'42.9%22W/@-34.6488009,-58.4458967,19z/data=!3m1!4b1!4m4!3m3!8m2!3d-34.648802!4d-58.445253?entry=ttu&g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"",Barrio:"BAJO FLORES","Direccin exacta":"MZA 14 CASA 18",Responsable:"Segundina Martinez Isla","Contacto del/la responsable":1125297192,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Luneas, Miercoles y viernes","Horarios de funcionamiento":"14hs a 18hs","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":16,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":60,Observaciones:""},{"Espacio (nombre)":"RAICES DEL SOL","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com.ar/maps/place/Plaza+Chapat%C3%ADn/@-34.6504591,-58.4413654,20z/data=!4m6!3m5!1s0x95bccb7579e158eb:0x75ce1a5e52996492!8m2!3d-34.6503598!4d-58.4414235!16s%2Fg%2F11rvb91cnl?entry=ttu&g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65032391755396, -58.44141501204569",Barrio:"BAJO FLORES","Direccin exacta":"MZA 9 CASA 315",Responsable:"Paola  Alarcon","Contacto del/la responsable":1151602866,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, martes , miercoles y jueves","Horarios de funcionamiento":"14hs a 21hs","Cuantas raciones diarias entrega?":450,"Cantidad de trabajadorxs":21,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2021,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"PADRE CARLOS BUSTOS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com/maps/dir/-34.6593516,-58.4538235/-34.6593538,-58.4538557/@-34.659372,-58.4538892,20z/data=!4m2!4m1!3e3?entry=ttu&g_ep=EgoyMDI0MDkwMy4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.659349429702644, -58.45382084237133",Barrio:"FATIMA","Direccin exacta":"MZA 5 CASA 163",Responsable:"Nilsa Ojeda","Contacto del/la responsable":1140926275,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"15 a 17 hs","Cuantas raciones diarias entrega?":40,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":0,Observaciones:"Segun la mercadera y disponibilidad hay dos maanas en las que se elabora."},{"Espacio (nombre)":"OLLA POPULAR","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com/maps/dir/-34.6593516,-58.4538235/-34.6593538,-58.4538557/@-34.659372,-58.4538892,20z/data=!4m2!4m1!3e3?entry=ttu&g_ep=EgoyMDI0MDkwMy4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.659349429702644, -58.45382084237133",Barrio:"FATIMA","Direccin exacta":"MZA 5 CASA 163",Responsable:"Maria Palazzolo","Contacto del/la responsable":1153232654,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, mircoles y sabado","Horarios de funcionamiento":"7 a 13.30hs","Cuantas raciones diarias entrega?":450,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":130,Observaciones:""},{"Espacio (nombre)":"MANOS PODEROSAS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com.ar/maps/place/Capilla+Nuestra+Se%C3%B1ora+de+los+Milagros+de+Caacup%C3%A9/@-34.6189262,-58.3531397,3a,75y,259.27h,90.19t/data=!3m7!1e1!3m5!1s7hHMO1puj5iCPLHBawM4Jw!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fcb_client%3Dmaps_sv.tactile%26w%3D900%26h%3D600%26pitch%3D-0.18999999999999773%26panoid%3D7hHMO1puj5iCPLHBawM4Jw%26yaw%3D259.27!7i13312!8i6656!4m7!3m6!1s0x95a3356a13beac4f:0x31bcc879dbb51aeb!8m2!3d-34.6187131!4d-58.3530611!10e5!16s%2Fg%2F11h79mcg7d?coh=205410&entry=ttu&g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.618025608708635, -58.353010952753905",Barrio:"RODRIGO BUENO","Direccin exacta":"MZ3 CASA",Responsable:"LISSETH PEREZ","Contacto del/la responsable":1161697516,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Sabado","Horarios de funcionamiento":"16 a 21 hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":13,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":30,Observaciones:"Se habia cerrado 2 dias por motivos de seco pero se abrio de nuevo con normalidad otra vez."},{"Espacio (nombre)":"LOS PATITOS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ABHEC1DUUAZ839MX7",Coordenadas:"-34.674745, -58.465883",Barrio:"VILLA 20","Direccin exacta":"MZA 26 CASA 14",Responsable:"Gladys Nuez","Contacto del/la responsable":1131899752,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"6 a 14hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":1989,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"EL ENANO","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/b8jedkZGwDhaSLTs6",Coordenadas:"-34.67758304459345, -58.46666948247058",Barrio:"VILLA 20","Direccin exacta":"Pasaje Kiki Lezcano y Fonrouge",Responsable:"Angelica Urquiza","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, Martes, Miercoles, Jueves y Viernes","Horarios de funcionamiento":"14 a 20hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SABINA","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/qY4iCwxG4yEDQoFZ8",Coordenadas:"-34.675118, -58.466496",Barrio:"VILLA 20","Direccin exacta":"MZA 21 CASA 69",Responsable:"Carolina Roque","Contacto del/la responsable":1151171749,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Mircoles","Horarios de funcionamiento":"14 a 18","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2021,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"OLLA CC","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/qY4iCwxG4yEDQoFZ8",Coordenadas:"-34.675118, -58.466496",Barrio:"VILLA 20","Direccin exacta":"MZA 21 CASA 69",Responsable:"Coca","Contacto del/la responsable":1153251026,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Martes y jueves","Horarios de funcionamiento":"13 a 18","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2019,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"OLLA MARCO","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ABHEC1DUUAZ839MX7",Coordenadas:"-34.674745, -58.465883",Barrio:"VILLA 20","Direccin exacta":"MZA 26 CASA 14",Responsable:"Gladys Nuez","Contacto del/la responsable":1131899752,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Mircoles y viernes","Horarios de funcionamiento":"17 a 21","Cuantas raciones diarias entrega?":180,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"CELIA GONZALEZ","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/NvS62tYRoTKBswCQ8",Coordenadas:"-34.651165621917634, -58.397755",Barrio:"VILLA 21","Direccin exacta":"Avenida Iriarte 3506",Responsable:"Carla Albrecht","Contacto del/la responsable":1131471874,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Martes, Mircoles Jueves y Viernes","Horarios de funcionamiento":"15 a 17 hs","Cuantas raciones diarias entrega?":85,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"TACITAS PODEROSAS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/bEkhphPbjEsdxi2LA",Coordenadas:"-34.658323236017004, -58.39981485767237",Barrio:"VILLA 21","Direccin exacta":"Pasaje La Amistad, Casa 18 bis",Responsable:"Otilia Concha Ledesma","Contacto del/la responsable":1179014580,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes,Martes, Mircoles Jueves, Viernes y Sbado","Horarios de funcionamiento":"15.30 a 18hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:"Los das sbados se sirve la merienda de 14 a 15"},{"Espacio (nombre)":"CELIA GONZALEZ","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/NvS62tYRoTKBswCQ8",Coordenadas:"-34.651147970213785, -58.39771208465528",Barrio:"VILLA 21","Direccin exacta":"Avenida Iriarte 3506",Responsable:"Carla Albrecht","Contacto del/la responsable":1131471874,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Martes, Mircoles Jueves y Viernes","Horarios de funcionamiento":"15 a 20  hs","Cuantas raciones diarias entrega?":360,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":35,Observaciones:""},{"Espacio (nombre)":"TACITAS PODEROSAS","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/bEkhphPbjEsdxi2LA",Coordenadas:"-34.658323236017004, -58.39981485767237",Barrio:"VILLA 21","Direccin exacta":"Pasaje La Amistad, Casa 18 bis",Responsable:"Otilia Concha Ledesma","Contacto del/la responsable":1179014580,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Viernes y Sbado","Horarios de funcionamiento":"8 a 13 hs","Cuantas raciones diarias entrega?":230,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"GUSTAVO CORTIAS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/pGEBfQFfTE4vu7cB8",Coordenadas:"-34.582570610185044, -58.38173180420266",Barrio:"VILLA 31","Direccin exacta":"VICUA 964",Responsable:"ALICIA CASIMIRO","Contacto del/la responsable":1134606767,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12h a 18hs","Cuantas raciones diarias entrega?":425,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"GUSTAVO CORTIAS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/pGEBfQFfTE4vu7cB8",Coordenadas:"-34.582570610185044, -58.38173180420266",Barrio:"VILLA 31","Direccin exacta":"VICUA 964",Responsable:"NATALIA ANALIA VALENZUELA ORTIZ","Contacto del/la responsable":1151493134,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, miercoles y viernes","Horarios de funcionamiento":"14h a 18hs","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"OLLA SAN MARTIN","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/6WJJZbxkDYs38sv6A",Coordenadas:"-34.58810225686198, -58.373908175366154",Barrio:"VILLA 31","Direccin exacta":"SARA BEATRIZ FERNANDEZ 84",Responsable:"VICTORIA RODRIGUEZ","Contacto del/la responsable":1123620141,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, martes y jueves","Horarios de funcionamiento":"13h a 17hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"LAS GARGANTITAS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/QgFcJUQrRmcv2VaG8",Coordenadas:"-34.650768069384604, -58.40292422883618",Barrio:"ZAVALETA","Direccin exacta":"Iriarte 3800, Tira 6 casa 86 bis",Responsable:"MIRTA ORTEGA","Contacto del/la responsable":1150296469,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":25,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Ao de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"EVITA ZAVALETA","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ghTUJR3fVu6T6CTBA",Coordenadas:"-34.65068634685871, -58.403528699999995",Barrio:"ZAVALETA","Direccin exacta":"Av. Gral. Toms de Iriarte 3880",Responsable:"NELI VARGAS","Contacto del/la responsable":1160548268,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":1e3,"Cantidad de trabajadorxs":28,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Ao de inicio":1990,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"EVITA ZAVALETA","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ghTUJR3fVu6T6CTBA",Coordenadas:"-34.65068634685871, -58.403528699999995",Barrio:"ZAVALETA","Direccin exacta":"Av. Gral. Toms de Iriarte 3880",Responsable:"NELI VARGAS","Contacto del/la responsable":1160548268,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":450,"Cantidad de trabajadorxs":12,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":1990,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"LOS ANGELITOS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/PwiSzfeijJ9YeiAq8",Coordenadas:"-34.650752868165064, -58.400262317065874",Barrio:"ZAVALETA","Direccin exacta":"Av. Gral. Toms de Iriarte 3700",Responsable:"Mabel Fernndez","Contacto del/la responsable":1161811043,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"9 a 19hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":12,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"OLLA LOS PEKES","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"",Coordenadas:"",Barrio:"ZAVALETA","Direccin exacta":"Tira 4 casa 61",Responsable:"Amelia Noemi Corbalan","Contacto del/la responsable":1122542900,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Sbados y domingos","Horarios de funcionamiento":"9 a 16hs","Cuantas raciones diarias entrega?":180,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2019,"Cantidad de gente en lista de espera":"",Observaciones:"Hay veces que funciona cada 15 das por falta de mercadera"},{"Espacio (nombre)":"LO DE CAROLA","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/m53mRBWkcPtgmutc8",Coordenadas:"-34.66318527015009, -58.45199738650853",Barrio:"CALASITA","Direccin exacta":"Lacarra 3154 m2 c2",Responsable:"Maura sanchez","Contacto del/la responsable":1163536837,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, martes y mircoles","Horarios de funcionamiento":"16 a 17.30hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2010,"Cantidad de gente en lista de espera":"",Observaciones:"aveces solo damos los sbados por falta de merienda"},{"Espacio (nombre)":"COMEDOR CORAZON ABIERTO","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://maps.app.goo.gl/K4A829ovW9pYFQEA9",Coordenadas:"-34.652902955494035, -58.4035063595285",Barrio:"BARRACAS","Direccin exacta":"IGUAZU1400 BLOMA ALEGRE",Responsable:"LILIAN","Contacto del/la responsable":1130926771,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"11:00 a 12:00","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2009,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"COMEDOR TRINI","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://maps.app.goo.gl/LYynB1E5khbhQCtT8",Coordenadas:"-34.64957259277721, -58.39548325040347",Barrio:"BARRACAS","Direccin exacta":"LUNA1350 VILLA 21-24",Responsable:"SARA","Contacto del/la responsable":1124904213,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"18:00 a 19:00","Cuantas raciones diarias entrega?":255,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2e3,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"MERENDERO EMI","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"BARRACAS","Direccin exacta":"IGUAZU1400 (MZA 8  CASA 11 BIS)",Responsable:"LILIAN","Contacto del/la responsable":1130926771,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES, MIERCOLES Y VIERNES","Horarios de funcionamiento":"13:00 A 14:00","Cuantas raciones diarias entrega?":60,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"MERENDERO LAS MANITOS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"BARRACAS","Direccin exacta":"PASAJE SAN RAFAEL",Responsable:"LILIAN","Contacto del/la responsable":1130926771,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"SABADOS","Horarios de funcionamiento":"16:00 A 17:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2019,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"MERENDERO 100PRE DE PIE","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com.ar/maps/@-34.584537,-58.4554198,39m/data=!3m1!1e3?entry=ttu",Coordenadas:"-34.583786212768615, -58.456809990711065",Barrio:"CHACARITA","Direccin exacta":"FRAGA 900",Responsable:"KATY","Contacto del/la responsable":1127007191,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"14:00 A 18:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"MERENDERO CONSTRUYENDO SUEOS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Parque+Avellaneda,+Mozart+1986,+C1407IVN+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6569464,-58.4725996,20z/data=!4m6!3m5!1s0x95bcc965bc778b41:0xbdbfb5febbd53f21!8m2!3d-34.6568631!4d-58.4725787!16s%2Fg%2F11mnngpc5x?entry=ttu",Coordenadas:"-34.65684104868476, -58.47257948342572",Barrio:"PARQUE AVELLANEDA","Direccin exacta":"MOZAT1986 Y ZUVIRIA",Responsable:"ALEJANDRA","Contacto del/la responsable":1170026184,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES MARTES Y VIERNES","Horarios de funcionamiento":"13:00 A 18:00","Cuantas raciones diarias entrega?":90,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":25,Observaciones:""},{"Espacio (nombre)":'MERENDERO "MANOS EN ACCIN',"Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.66078699119175, -58.471148559466755",Barrio:"PARQUE AVELLANEDA","Direccin exacta":"DELLEPIANE 4430 MZA D5 CASA 2 PUERTA 140",Responsable:"VALERIA","Contacto del/la responsable":1144100746,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MARTES VIERNES Y SABADOS","Horarios de funcionamiento":"16:30 a 17:30","Cuantas raciones diarias entrega?":40,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"MERENDERO MANOS SOLIDARIAS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"RODRIGO BUENO","Direccin exacta":"AV, ESPAA 180 0MZA 2 CASA 66",Responsable:"ENMA","Contacto del/la responsable":1137579326,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MARTES","Horarios de funcionamiento":"16:00 A 18:00","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"MERENDERO LOS PITUFOS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"FATIMA","Direccin exacta":"MARIANO ACOSTA RIESTRA MZA 7  CASA 23",Responsable:"ROSANA","Contacto del/la responsable":1124985025,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"14:00 A 17:00","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"LOS PITUFOS","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"FATIMA","Direccin exacta":"MARIANO ACOSTA RIESTRA MZA 7  CASA 23",Responsable:"ROSANA","Contacto del/la responsable":1124985025,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"SABADOS","Horarios de funcionamiento":"7:00 A 13:00","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"JUVENTUD","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.5841595,-58.3757582",Barrio:"RETIRO","Direccin exacta":"CARLOS H PERETTE Y MACHU PICHU",Responsable:"ANALI","Contacto del/la responsable":1130802891,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"VIERNES","Horarios de funcionamiento":"16:00 A 19:00","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"COMEDOR LA BOCA DE PIE","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Comedor+Comunitario+la+Boca+de+Pie/@-34.63845,-58.3616692,17z/data=!4m6!3m5!1s0x95a334b0ecd786e9:0xac76150a500af09d!8m2!3d-34.6382916!4d-58.3617513!16s%2Fg%2F11f0kxpp_y?entry=ttu",Coordenadas:"-34.6384432,-58.3616476",Barrio:"LA BOCA","Direccin exacta":"LAMADRID 667 3B",Responsable:"PAOLA","Contacto del/la responsable":1161136163,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"12:30 a 13:30","Cuantas raciones diarias entrega?":304,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2006,"Cantidad de gente en lista de espera":40,Observaciones:""},{"Espacio (nombre)":"MERENDERO CAMINITO","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Comedor+Comunitario+la+Boca+de+Pie/@-34.63845,-58.3616692,17z/data=!4m6!3m5!1s0x95a334b0ecd786e9:0xac76150a500af09d!8m2!3d-34.6382916!4d-58.3617513!16s%2Fg%2F11f0kxpp_y?entry=ttu",Coordenadas:"-34.6384432,-58.3616476",Barrio:"LA BOCA","Direccin exacta":"LAMADRID 662",Responsable:"JESSICA","Contacto del/la responsable":1169485621,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"JUEVES","Horarios de funcionamiento":"15:00 A 17:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"COMEDOR LOS CASTORCITOS","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.674263, -58.463650",Barrio:"VILLA LUGANO","Direccin exacta":"CORVALAN MZA 22  CASA 87 VILLA 20",Responsable:"MARIANA","Contacto del/la responsable":1137723924,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"17:00 A 18:00","Cuantas raciones diarias entrega?":117,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"MERENDERO OOND VEPA","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/@-34.6736398,-58.4634834,2a,75y,290.5h,80.73t/data=!3m9!1e1!3m7!1sByHr5G2yvwDa60aDOivUpg!2e0!7i13312!8i6656!9m2!1b1!2i49?coh=205409&entry=ttu",Coordenadas:"-34.6736398,-58.4634834",Barrio:"VILLA LUGANO","Direccin exacta":"CHILAVERT MZA 21 CASA 67 VILLA 20",Responsable:"MARIANA","Contacto del/la responsable":1137723924,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MIERCOLES Y VIERNES","Horarios de funcionamiento":"15:00 A 17:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"MERENDERO LOS CASTORCITOS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.674263, -58.463650",Barrio:"VILLA LUGANO","Direccin exacta":"CHILAVERT Y CORVALAN 4000 MZA 22  CASA 87VILLA 20",Responsable:"MARIANA","Contacto del/la responsable":1137723924,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"VIERNES","Horarios de funcionamiento":"17:00 A 18:00","Cuantas raciones diarias entrega?":70,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"COMEDOR TANGUITO 2X4","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.6682049443487, -58.48983316226018",Barrio:"VILLA 15","Direccin exacta":"HUBAC 6378  MZA 6 CASA 34 OCULTA",Responsable:"MIRIAM HUANTO","Contacto del/la responsable":1141921332,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"18:00 A 19:00","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":40,Observaciones:""},{"Espacio (nombre)":"MERENDERO  CARITA FELIZ","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"VILLA 15","Direccin exacta":"MZA 31 BIS  CASA 70 VILLA OCULTA CRISOSTOMO ALVAREZ 6920",Responsable:"LINA","Contacto del/la responsable":1150517363,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MARTES","Horarios de funcionamiento":"14:00 A 18:00","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":1,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"MERENDERO  OMBU","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"VILLA 15","Direccin exacta":"MZA 31 BIS  CASA 131 VILLA OCULTA CRISOSTOMO ALVAREZ 6900",Responsable:"JULIANA","Contacto del/la responsable":1165490277,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"SABADO","Horarios de funcionamiento":"10:30 a 12.00","Cuantas raciones diarias entrega?":160,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Desayuno",Modalidad:"Vianda","Ao de inicio":2013,"Cantidad de gente en lista de espera":5,Observaciones:""},{"Espacio (nombre)":"MERENDERO SANTANDER","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.67283904100512, -58.48687055512544",Barrio:"VILLA 15","Direccin exacta":"SANTANDER 6007 (CASA 50)VILLA OCULTA",Responsable:"SONIA","Contacto del/la responsable":1144718962,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"JUEVES","Horarios de funcionamiento":"17:30 A 18:30","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":1,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"MERENDERO CARITA DE ANGEL","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.67414767519864, -58.487502175750386",Barrio:"VILLA 15","Direccin exacta":"VILLA 15 MZA 30 CASA 21 SANTANDER 6117",Responsable:"NIMIA","Contacto del/la responsable":1154819216,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MIERCOLES","Horarios de funcionamiento":"16:30 A 18:00","Cuantas raciones diarias entrega?":36,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":7,Observaciones:""},{"Espacio (nombre)":"MERENDERO CASITA DEL SOL","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.673304, -58.490703",Barrio:"PIEDRABUENA","Direccin exacta":"PIEDRABUENA3800 (MZA 32, CASA 88 BIS)PIEDRABUENA",Responsable:"ANA","Contacto del/la responsable":1162220016,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MIERCOLES Y VIERNES","Horarios de funcionamiento":"16:30 A 17:00","Cuantas raciones diarias entrega?":75,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"MERENDERO TEODORA ULLOA","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Yaguaret%C3%A9+1096,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5791467,-58.3854826,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaa87499d305:0x21ab09af4c385b57!8m2!3d-34.5791511!4d-58.3829077?entry=ttu",Coordenadas:"-34.5791467,-58.3854826",Barrio:"RETIRO","Direccin exacta":"YAGUARETE 1096",Responsable:"ABIGAIL","Contacto del/la responsable":1135722166,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"SABADOS","Horarios de funcionamiento":"16:00 A 18:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":4,Observaciones:""},{"Espacio (nombre)":"MERENDERO ABRIENDO CAMINO","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Alpaca+1397,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5816203,-58.3848745,21z/data=!4m14!1m7!3m6!1s0x95bccaa640a5ee8d:0x4e017f9fafe56f69!2sAlpaca+1409,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.5815728!4d-58.3847996!3m5!1s0x95bccaa64633dab1:0x4519cb926a2beb82!8m2!3d-34.5815827!4d-58.3847097!16s%2Fg%2F11c12r4_1m?entry=ttu",Coordenadas:"-34.5816203,-58.3848745",Barrio:"RETIRO","Direccin exacta":"ALPACA 1409 MZA 7",Responsable:"FELICIDAD","Contacto del/la responsable":1130981072,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MIERCOLES Y SABADOS","Horarios de funcionamiento":17,"Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2019,"Cantidad de gente en lista de espera":7,Observaciones:""},{"Espacio (nombre)":"MERENDERO MIS SOLECITOS","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.579535, -58.383945",Barrio:"RETIRO","Direccin exacta":"PUMA Y PJE MOCOVI 1189  RETIRO BARIIO YPF(ENTRE PUMA Y MOSCONI)",Responsable:"MIGUELINA","Contacto del/la responsable":1130758059,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES VIERNES Y SABADO","Horarios de funcionamiento":"17:30 A 18:30","Cuantas raciones diarias entrega?":37,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2021,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"COMEDOR DE PIE","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"RETIRO","Direccin exacta":"MZA 32- CASA 20 SAN MARTIN 5000",Responsable:"MIRIAM SUAREZ","Contacto del/la responsable":1136987128,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES, MIERCOLES Y VIERNES","Horarios de funcionamiento":"18:00 A 19:00","Cuantas raciones diarias entrega?":57,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2017,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"MERENDERO ANGELES DE PIE","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/@-34.5835731,-58.3817062,2a,75y,43.73h,90t/data=!3m6!1e1!3m4!1sDbFa6QjzY7KAMgBQvUQx4A!2e0!7i13312!8i6656?coh=205409&entry=ttu",Coordenadas:"-34.5835731,-58.3817062",Barrio:"RETIRO","Direccin exacta":"DIAGUITAS 842",Responsable:"SIMON","Contacto del/la responsable":1169356774,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES","Horarios de funcionamiento":"16:00 a 17:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2019,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":'MERENDERO "CASITA DEL SABER',"Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Aymar%C3%A1+767,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5845365,-58.381271,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaaf69aa242d:0x3e66beeef48a7643!8m2!3d-34.5845365!4d-58.381271?entry=ttu",Coordenadas:"-34.5845365,-58.381271",Barrio:"RETIRO","Direccin exacta":"AYMARA 767 MZA 103 CASA 62 FERROVIARIO SAN MARTIN",Responsable:"YENNI","Contacto del/la responsable":1161243963,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MARTES Y VIERNES","Horarios de funcionamiento":"15 A 17:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2019,"Cantidad de gente en lista de espera":4,Observaciones:""},{"Espacio (nombre)":"SAN TELMO","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Estados+Unidos+557,+C1101AAK+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/data=!4m2!3m1!1s0x95bccb2b11c640af:0x16712cce08fb2b76?sa=X&ved=1t:242&ictx=111",Coordenadas:"-34.6184444,-58.3737562",Barrio:"SAN TELMO","Direccin exacta":"ESTADOS UNIDOS 557",Responsable:"MARTIN","Contacto del/la responsable":1134392506,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"DOMINGOS","Horarios de funcionamiento":"13: A 14 HS","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Ao de inicio":2020,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"HAMBRE NO COMUNA 12","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Parroquia+Coraz%C3%B3n+de+Jes%C3%BAs/@-34.5801534,-58.5076997,15.75z/data=!4m6!3m5!1s0x95bcb7c3308e29b5:0x9797a4f6092cc54c!8m2!3d-34.5757474!4d-58.5114295!16s%2Fg%2F1tgjmgrq?entry=ttu",Coordenadas:"-34.5756815,-58.5116107",Barrio:"VILLA PUEYRREDON","Direccin exacta":"CORAZON DE JESUS PARROQUIA NAZCA Y EZEIZA ( BARRIO PERON)",Responsable:"MONICA","Contacto del/la responsable":1169218311,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"MIERCOLES","Horarios de funcionamiento":"12:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2022,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"HAMBRE NO COMUNA 14","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Jun%C3%ADn+425,+C1026ABI+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6041345,-58.3967435,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccaeaf8569caf:0xc191e03ca1c0d76e!8m2!3d-34.6041345!4d-58.3967435!16s%2Fg%2F11c5klkddl?entry=ttu",Coordenadas:"-34.6041345,-58.3967435",Barrio:"PALERMO","Direccin exacta":"JUNIN 4 25 PB C  17 hS  (COCINAN) RECORRIDA BULNES Y SANTA FE HASTA ESCALIBRINI ORTIS Y HASTA LA PLAZA GUEMES",Responsable:"SOL","Contacto del/la responsable":1136651352,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES","Horarios de funcionamiento":"19:00","Cuantas raciones diarias entrega?":40,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2021,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"COMEDOR TIERRA AMARILLA","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com.ar/maps/@-34.6610253,-58.4555153,20z?hl=es&entry=ttu",Coordenadas:"-34.660885, -58.455859",Barrio:"VILLA SOLDATI","Direccin exacta":"MZA 10CASA 20B LOS PILETONES LACARRA 2300",Responsable:"GLADYS","Contacto del/la responsable":1134491203,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"5:30 A 18:30","Cuantas raciones diarias entrega?":90,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2016,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":'MERENDERO "NUEVO AMANECER',"Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com.ar/maps/@-34.6610253,-58.4555153,20z?hl=es&entry=ttu",Coordenadas:"-34.660885, -58.455859",Barrio:"VILLA SOLDATI","Direccin exacta":"MZA 10CASA 20B LOS PILETONES LACARRA 2300",Responsable:"ANA","Contacto del/la responsable":1157618782,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"JUEVES Y SABADO","Horarios de funcionamiento":"16:Y 11:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Desayuno y merienda",Modalidad:"Ambas","Ao de inicio":2017,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"LUCHANDO JUNTOS","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Sara+Beatriz+Fern%C3%A1ndez+1606,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5811945,-58.3867811,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaa71b7be4a3:0x6d9c9a24ae7308dd!8m2!3d-34.5811945!4d-58.3867811?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.580978084012585, -58.38681328650949",Barrio:"","Direccin exacta":"SARA BEATRIZ FERNNDEZ 1606",Responsable:"CLAUDIA NOEMI, PALOMINO","Contacto del/la responsable":1121611784,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":500,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LUZ DE ESPERANZA","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"CAA 2569",Responsable:"JIMENEZ, MARIEL","Contacto del/la responsable":1130217061,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":400,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"VRGEN DE SATA NUDO","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":`34 34' 46.6367" S 58 23' 10.3333" W`,Coordenadas:"-34.579422546883016, -58.386214428836496",Barrio:"","Direccin exacta":"EVITA 1948",Responsable:"MYRIAM BEATRIZ, CORNEJO","Contacto del/la responsable":1130217072,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":319,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"RINCON DE LUZ","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"Cochabamba 2630",Coordenadas:"-34.625021057740724, -58.40236378225194",Barrio:"","Direccin exacta":"AV. COCHABAMBA 2630",Responsable:"MIRTHA YANINE, DE PAZ RIVERA","Contacto del/la responsable":1150038656,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":765,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"PRIMERO LOS CHICOS Y LOS ABUELOS","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":`34 39' 5.5271" S 58 28' 41.0246" W`,Coordenadas:"Correa 4010",Barrio:"","Direccin exacta":"CORREA 4010",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NI UN PIBE MENOS","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Av.+Manuel+Ricardo+Trelles+2673,+C1416BSE+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5981098,-58.4659155,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb6011fc6fba7:0x89a6d9c682f69971!8m2!3d-34.5981098!4d-58.4659155!16s%2Fg%2F11fpdbttm7?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.59792875413545, -58.465915499999994",Barrio:"","Direccin exacta":"TRELLES 2673",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"PLAYON URQUIZA-FRAGA","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"FRAGA Y PALPA",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LA NUEVA ESPERANZA MATADEROS","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Padre+Montes+Carballo+1674,+C1407+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6536993,-58.4772921,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcc971cabbcd99:0xb6649e7d34f53655!8m2!3d-34.6536993!4d-58.4772921!16s%2Fg%2F11f9zzr77p?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65350072418475, -58.477302828836514",Barrio:"","Direccin exacta":"PADRE MONTE CARBALLO 1674",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"MI NUEVO AMANECER","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Av.+Escalada+4537,+C1439+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6751391,-58.494009,13z/data=!4m6!3m5!1s0x95bccc0789faaf33:0x8c28790de6620aaa!8m2!3d-34.6779474!4d-58.4534371!16s%2Fg%2F11c2c0qvqs?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.674927340582244, -58.45366857475961",Barrio:"","Direccin exacta":"AV ESCALADA 4537",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LOS ANGELITOS DE LA PATERNAL","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Av.+Manuel+Ricardo+Trelles+2750+SECTOR+2+CASA+25,+C1416+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5977528,-58.467585,17z/data=!3m1!4b1!4m5!3m4!1s0x95bcb600d862d4cd:0xee3cb7b43de76f2b!8m2!3d-34.5977528!4d-58.467585?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.59754525869358, -58.46759572883651",Barrio:"","Direccin exacta":"MANUEL RICARDO TRELLES 2750 SECTOR 2 CASA 25",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Casita de los Pinos","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"Av. Portela Mza 1 csa 5",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Casita de los nios","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Coronel+Martiniano+Chilavert+2835,+C1437+Villa+Soldati,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6570414,-58.4424496,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbeafc95a9f3:0xd0917541f9609f2e!8m2!3d-34.6570414!4d-58.4424496!16s%2Fg%2F11s9b13b7s?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65685165743773, -58.44246032883649",Barrio:"","Direccin exacta":"Martiniano chilavert 2835",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Viento de Luz","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"Mza 3 Csa 53 Los Piletones",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Rayito de la 20","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"Fonrouge y Barros pazos mza 3 casa 43",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Casita de la 20","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"Mza 30 csa226 - villa 20",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Merendero Mara conty","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"Manzana 1 casa 75 bis 9 loma alegre",Responsable:"BLANCA GARCIA","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor La Lecherita","Tipo de espacio":"","Organizacin a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Direccin exacta":"manzana 23 casa 77 Villa 21.24",Responsable:"BLANCA GARCIA","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Casa Popular  fpds Consti utep","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"FPDS","Enlace punto gps":"https://www.google.com/maps/place/Santiago+del+Estero+866,+C1075+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.618343,-58.3867769,847m/data=!3m2!1e3!4b1!4m6!3m5!1s0x95bccb27f4333241:0xfe49ec2150a16097!8m2!3d-34.6183474!4d-58.384202!16s%2Fg%2F11fjzx94kc?hl=es&entry=ttu",Coordenadas:"-34.618370477629306, -58.384240021260936",Barrio:"CONSTITUCION","Direccin exacta":"Santiago del Estero 866",Responsable:"Vani","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"9h a 14hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Ao de inicio":2010,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LA BOCA Olavarria  fpds utep","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"FPDS","Enlace punto gps":"https://www.google.com/maps/place/Frente+Popular+Dario+Santillan/@-34.6356436,-58.3595483,847m/data=!3m1!1e3!4m15!1m8!3m7!1s0x95a334bbd10e9d07:0xf435f641063423f5!2sOlavarr%C3%ADa+300,+C1162ABF+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.635648!4d-58.3569734!16s%2Fg%2F11dfh3m35x!3m5!1s0x95a334ba2f221d47:0x4a9c9218e26d033c!8m2!3d-34.6358897!4d-58.357987!16s%2Fg%2F11f0437r3c?hl=es&entry=ttu",Coordenadas:"-34.635881370482494, -58.35798625441978",Barrio:"LA BOCA","Direccin exacta":"Olavarria  371",Responsable:"Margarita","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"9h a 14hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Ao de inicio":2010,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SOLDATI fpds utep","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"FPDS","Enlace punto gps":"https://maps.app.goo.gl/MHQkpbTHYKdyiH879",Coordenadas:"-34.6605251054488, -58.454588526292",Barrio:"SOLDATI","Direccin exacta":"Manzana 6 casa 22. Barrio Ftima Soldati",Responsable:"Yaneth","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"9h a 14hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Ao de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"1 11 14 Padre Richardelli fpds utep","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"FPDS","Enlace punto gps":"https://maps.app.goo.gl/ihyHFgz3PFk2Aafq7",Coordenadas:"-34.650180, -58.440274",Barrio:"BAJO FLORES","Direccin exacta":"Av perito moreno Puerta 4 Barrio Padre Richardelli 1 11 14",Responsable:"Paola Ramos","Contacto del/la responsable":1134318454,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"8hs a 13hs","Cuantas raciones diarias entrega?":38,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Se come en el lugar","Ao de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"31 Mujica fpds utep","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"FPDS","Enlace punto gps":"https://maps.app.goo.gl/ihyHFgz3PFk2Aafq7",Coordenadas:"-34.582659, -58.380255",Barrio:"RETIRO","Direccin exacta":"Evita 756",Responsable:"Laura chauque","Contacto del/la responsable":1165510057,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"10 a 18hs","Cuantas raciones diarias entrega?":20,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo, merienda, desayuno y cena",Modalidad:"Se come en el lugar","Ao de inicio":2023,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Merendero Nueva Esperanza","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Sara+Beatriz+Fern%C3%A1ndez+1429,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5818339,-58.3879753,16z/data=!4m5!3m4!1s0x95bccaa66baa89b1:0x90d08f816cf810bd!8m2!3d-34.5820297!4d-58.384939?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.58168373501976, -58.38499268345298",Barrio:"Ferroviario","Direccin exacta":"Sara Beatriz Fernndez 1429",Responsable:"Leni Gutirrez","Contacto del/la responsable":1166272625,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"martes y viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":80,"Cantidad de trabajadorxs":15,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Hilda Guerrero","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Constitucin","Direccin exacta":"",Responsable:"Jos Luis","Contacto del/la responsable":1165164393,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"12  a 18 hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":12,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Vianda","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Divino Nio","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Pje.+Ypacara%C3%AD+898,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5806944,-58.3808532,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaa8e5b022a9:0x45f2c3f36951b970!8m2!3d-34.5806944!4d-58.3808532?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.580486816080196, -58.3808639288365",Barrio:"villa 31","Direccin exacta":"Ypacara 898",Responsable:"Maribel","Contacto del/la responsable":1151062751,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 19 hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Merendero Saldas","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Saldas","Direccin exacta":"Padre Mujica 21571",Responsable:"Elvia Suarex","Contacto del/la responsable":1130751206,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"jueves y sbado","Horarios de funcionamiento":"16 a 18_ 19 a 21","Cuantas raciones diarias entrega?":90,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Centro Cultural Recreativo y Biblioteca Evita","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Zavaleta","Direccin exacta":"Av. Iriarte 3800 tira 1",Responsable:"Lorena Claudia Corral","Contacto del/la responsable":1132586493,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 19 hs","Cuantas raciones diarias entrega?":800,"Cantidad de trabajadorxs":20,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Ao de inicio":1983,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"Comedor Comunitario Santino","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Loma Alegre","Direccin exacta":"Manz. 5_ Casa 26 bis",Responsable:"Blanca Ester Alfonzo de Bentez","Contacto del/la responsable":1138526718,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":55,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":5,Observaciones:""},{"Espacio (nombre)":"Grupo Comunitario Tu Sonrisa es la luz","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Zavaleta","Direccin exacta":"Zavaleta",Responsable:"Mara Elizabeth Ferreyra","Contacto del/la responsable":1131458219,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"Comedor Santa Rosa","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Agust%C3%ADn+Magaldi+1273,+C1286AFD+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6476258,-58.3926957,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb425c088a0f:0x684a30f1a114aefd!8m2!3d-34.6476258!4d-58.3926957!16s%2Fg%2F11gmz4hydn?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.64743603588417, -58.39270642883648",Barrio:"Barracas","Direccin exacta":"Agustn Magaldi 1273",Responsable:"Mara Isabel Ballesteros","Contacto del/la responsable":1131512554,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":80,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"Merendero Meren-dar","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Dr.+Prof.+Pedro+Chutro+3246,+C1437IYN+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6426655,-58.4081518,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb0d0637f021:0xeb19d421f76e670a!8m2!3d-34.6426655!4d-58.4081518!16s%2Fg%2F11dzmtbx5z?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.64247572453146, -58.4081625288365",Barrio:"Pque. Patricios","Direccin exacta":"Dr. Pedro Chutro 3246",Responsable:"Sheila de Jess Villalba","Contacto del/la responsable":1153423248,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"mircoles y sbado","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":15,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero Evita de la Boca","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Irala+50,+C1163ABB+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6288799,-58.3713526,17z/data=!3m1!4b1!4m6!3m5!1s0x95a334cb81e94075:0x30c8fee800d3ca67!8m2!3d-34.6288843!4d-58.3687777!16s%2Fg%2F11jdczq3rn?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62868566475438, -58.36878842883649",Barrio:"La Boca","Direccin exacta":"Irala 50",Responsable:"Lidia Elena Cortiana","Contacto del/la responsable":1166384898,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero Gleyzer","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Juan+de+Garay+2900,+C1256AAX+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6294284,-58.4053499,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb1b571b1d45:0x2774900eec47fc5b!8m2!3d-34.6294284!4d-58.4053499!16s%2Fg%2F11ngjr0mkx?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62924742242681, -58.40536062883649",Barrio:"Parque Patricios","Direccin exacta":"Juan de Garay 2900",Responsable:"Estela Flores Linares","Contacto del/la responsable":1143991728,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 y de 19 a 21 hs","Cuantas raciones diarias entrega?":38,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Casa Pueblo La Boca","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Almte.+Brown+1127,+C1159ABD+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6347913,-58.3594412,17z/data=!3m1!4b1!4m5!3m4!1s0x95a334b9c27c73b7:0xbcdb7b964754510a!8m2!3d-34.6347913!4d-58.3594412?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.63460150651253, -58.35944119999998",Barrio:"La Boca","Direccin exacta":"Av. Almirante Brown 1127",Responsable:"Elsa Susana Reynoso","Contacto del/la responsable":1150463695,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, mircoles, viernes","Horarios de funcionamiento":"12 a 14 hs - 16 a 18 hs","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Se come en el lugar","Ao de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero/ Comedor Santa Librada","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"Agustn Magaldi 1240",Coordenadas:"-34.64713054211727, -58.392555464704124",Barrio:"Barracas","Direccin exacta":"Mza. 8 _ Casa 40",Responsable:"Reineira Orquiola","Contacto del/la responsable":1138763882,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, mircoles, viernes","Horarios de funcionamiento":"16 a 18 hs - 19 a 21 hs","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"Merendero El Abuelo","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"San Blas","Direccin exacta":"8 de Diciembre casa 127",Responsable:"","Contacto del/la responsable":1139586831,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, mircoles, viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Rincn de Luz","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Gral.+Tom%C3%A1s+de+Iriarte+3516,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6512478,-58.3981389,17z/data=!4m6!3m5!1s0x95bccb6891f3ae73:0xf228c9c2aad68915!8m2!3d-34.6511438!4d-58.3981524!16s%2Fg%2F11h8b4d9ht?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65094330788373, -58.3981710865095",Barrio:"Villa 21","Direccin exacta":"Av. Iriarte 3516 mz. 18 casa 177",Responsable:"Cristina Noelia Mercado","Contacto del/la responsable":1133873425,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, mircoles, viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":15,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"El Pasillo","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa 21","Direccin exacta":"Mz. 25- Casa 76 La Loma",Responsable:"Felicia Rotela","Contacto del/la responsable":1136587140,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes mircoles viernes","Horarios de funcionamiento":"12 a 14 hs y de 16 a 18 hs","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"Comedor Micaela","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Benito+Quinquela+Mart%C3%ADn+2252,+C1296ADT+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6453043,-58.3827051,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb4e4b6d98bb:0xdbf4f189bc07da4e!8m2!3d-34.6453087!4d-58.3801302!16s%2Fg%2F11gv08mvsf?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.645136583568366, -58.380130199999996",Barrio:"Barracas","Direccin exacta":"Benito Quinquela Martn 2252",Responsable:"Martin Ronca","Contacto del/la responsable":1157401367,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"10 a 12 hs - de 12 a 14 hs","Cuantas raciones diarias entrega?":161,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":34,Observaciones:""},{"Espacio (nombre)":"Centro Cultural Charra","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Charra","Direccin exacta":"Pasillo 4 casa 100",Responsable:"Norma Pearrieta","Contacto del/la responsable":1159132403,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"mircoles","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Ao de inicio":2015,"Cantidad de gente en lista de espera":12,Observaciones:""},{"Espacio (nombre)":"Comedor Man del Cielo","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa 21","Direccin exacta":"Zavaleta y Osvaldo Cruz Mz. 25- casa 43 bis",Responsable:"Isabel Prez Guerrero","Contacto del/la responsable":1159199308,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12 a 14 hs- 16 a 18 hs","Cuantas raciones diarias entrega?":480,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"Trama","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Comuna+4,+Av.+La+Plata+2604,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6449748,-58.4209155,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccba117d5f5dd:0x7dc6b08c1e0f776f!8m2!3d-34.6449748!4d-58.4209155!16s%2Fg%2F11fkc2swfc?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.644785029816596, -58.42092622883649",Barrio:"Pompeya","Direccin exacta":"Av. La Plata 2604",Responsable:"Julia Parodi","Contacto del/la responsable":1161101143,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, martes, jueves, viernes","Horarios de funcionamiento":"16 a 18 hs y 19 a 21 hs","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Recreacin","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"B Rivadavia","Direccin exacta":"Placita Rivadavia 1",Responsable:"Judith Cespedes Flores","Contacto del/la responsable":1121726272,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"sbado","Horarios de funcionamiento":"10 a 12 hs","Cuantas raciones diarias entrega?":45,"Cantidad de trabajadorxs":16,"Prestacion alimentaria":"Merienda",Modalidad:"Se come en el lugar","Ao de inicio":"","Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"Anfibio","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Eva+Per%C3%B3n+2558,+C1406+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6409425,-58.4588816,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbd3716dcd9f:0x8ab6cc4dca26159c!8m2!3d-34.6409469!4d-58.4563067!16s%2Fg%2F11frnjkk4b?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.64071298579157, -58.4563174288365",Barrio:"Flores","Direccin exacta":"Av. Eva Pern 2558",Responsable:"Emiliano Armango","Contacto del/la responsable":1155807963,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a sbado","Horarios de funcionamiento":"16 a 18. 19 a 21 hs","Cuantas raciones diarias entrega?":165,"Cantidad de trabajadorxs":14,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Club Miraflores","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Somellera+1770,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6442693,-58.4364642,17z/data=!4m15!1m8!3m7!1s0x95bccbb9c7a6edb3:0xa73e1d20b51e7f6f!2sSomellera+1770,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.6442693!4d-58.4364642!16s%2Fg%2F11fctc7w7f!3m5!1s0x95bccbb9c7a6edb3:0xa73e1d20b51e7f6f!8m2!3d-34.6442693!4d-58.4364642!16s%2Fg%2F11fctc7w7f?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.644097181410764, -58.4364642",Barrio:"Pque. Chacabuco","Direccin exacta":"Somellera 1770",Responsable:"Tamara Violi","Contacto del/la responsable":1155807963,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs - 19 a 21 hs","Cuantas raciones diarias entrega?":250,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"Nuevo Amanecer","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ricciardelli","Direccin exacta":"Av. Bonorino y Oceana  Mz. 31- Casa 47",Responsable:"Jhovana Cruz Martnez","Contacto del/la responsable":1164976898,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, martes, jueves","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":260,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Frente de Mujeres","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ricciardelli","Direccin exacta":"Perito Moreno Mz. 2- casa 45",Responsable:"Gloria Elizabeth Otazu Pereira","Contacto del/la responsable":1126645388,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"viernes y sbado","Horarios de funcionamiento":"16- 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":5,Observaciones:""},{"Espacio (nombre)":"Flores Sur","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"Santander 2551",Coordenadas:"-34.64232234478304, -58.452728771423885",Barrio:"Flores","Direccin exacta":"Santander 2551",Responsable:"Marcelo Alejandro Vergottini","Contacto del/la responsable":1138051988,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"10 a 12 hs","Cuantas raciones diarias entrega?":280,"Cantidad de trabajadorxs":30,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"La leona","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ricciardelli","Direccin exacta":"Perito Moreno Pasillo 6 Mz 1 - casa 485",Responsable:"Zaira Nadir Mamani Fernndez","Contacto del/la responsable":1123299006,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"12 a 14 hs y de 19 a 21 hs","Cuantas raciones diarias entrega?":700,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Olympia","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/C.+Pres.+Torres+y+Tenorio+2081,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6445347,-58.4431962,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbc7fc46cf83:0x87c9b80d9b499ab8!8m2!3d-34.6445391!4d-58.4406213!16s%2Fg%2F11c5k09sx7?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.644344888462314, -58.44063203342515",Barrio:"Bajo Flores","Direccin exacta":"Camilo Torres 2081 loc. 15 y 16",Responsable:"Celia Vanesa Fredes","Contacto del/la responsable":1125584601,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a sbado","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":60,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":17,Observaciones:""},{"Espacio (nombre)":"Casa Tesai","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Juan+Bautista+Alberdi+2652,+C1406GSP+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6291302,-58.4745049,15z/data=!4m6!3m5!1s0x95bcc987c77616f3:0xb4748ea141b90cc5!8m2!3d-34.6325647!4d-58.4650815!16s%2Fg%2F11c18j9mht?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.63190220735978, -58.46514935457191",Barrio:"Flores","Direccin exacta":"Av. Alberdi 2652",Responsable:"Federico Vallero","Contacto del/la responsable":1132069034,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, martes, mircoles, jueves","Horarios de funcionamiento":"10 a 12 hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Furgn","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Parque+Chacabuco,+Somellera+1825,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6441539,-58.4377674,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbb831e6b0fd:0xf5ff3f39d16180e8!8m2!3d-34.6441539!4d-58.4377674!16s%2Fg%2F11gj4nqv13?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.643972954555004, -58.43778885767298",Barrio:"Pque. Chacabuco","Direccin exacta":"Somellera 1825",Responsable:"Martha Alicia Choque Yanarico","Contacto del/la responsable":1139364719,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"8 a 12 hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":25,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Ayudar es Vivir","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://maps.app.goo.gl/HasrSYUheiJwN9ZKA",Coordenadas:"-34.64806749069679, -58.43480988302473",Barrio:"Barrio Illia","Direccin exacta":"Giacchino 538",Responsable:"Clara Haydee Rodrguez","Contacto del/la responsable":1137578597,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"martes, mircoles, jueves","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Comedor Vecino Solidario","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa Esperanza","Direccin exacta":"entre La Carra y Riestra Mz. 2 - casa 28",Responsable:"Maribel Gayoso","Contacto del/la responsable":1168652683,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"Sonrisita","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Soldati","Direccin exacta":"Av. Fernndez de la Cruz y La Carra",Responsable:"Johanna Roco","Contacto del/la responsable":1155818664,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, martes, mircoles","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"Merendero Mis Tres Sonrisas","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Eva+Per%C3%B3n+6600,+1439+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6687565,-58.4940412,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcc9163158bf09:0x7d1c607aeacef559!8m2!3d-34.6687565!4d-58.4940412!16s%2Fg%2F11py731c83?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.66854031226439, -58.49405192883649",Barrio:"Villa 15","Direccin exacta":"Tira 9 - Casa 137",Responsable:"Ftima Lorena Aguila","Contacto del/la responsable":1166552356,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":112,"Cantidad de trabajadorxs":15,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"Arcoiris","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ramn Carrillo ( V. Soldati )","Direccin exacta":"Lateral La Carra y Castaares casa 107",Responsable:"Marisol Humacata","Contacto del/la responsable":1130917424,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":60,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero Carusito","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Dr.+Jos%C3%A9+Ignacio+de+la+Rosa+6355,+C1439+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6673161,-58.4935375,17.25z/data=!4m6!3m5!1s0x95bcc915d9b79bf3:0x1df92f4089c4ecba!8m2!3d-34.6671235!4d-58.4912357!16s%2Fg%2F11h7b5cjxv?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.6669410735787, -58.491241528988986",Barrio:"Lugano","Direccin exacta":"Jos Ignacio de la Rosa 6355",Responsable:"Fany del Valle Beltrn","Contacto del/la responsable":1164560682,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes mircoles viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"La Milagrosa","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa 15","Direccin exacta":"Piedra Buena 3200 Mz. 27 bis - Casa 8",Responsable:"Sonia Larrea","Contacto del/la responsable":1166125818,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes mircoles viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"Movimiento Popular","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa Lugano","Direccin exacta":"entre Barros Pazos y Miralla Mz.26- Casa 98",Responsable:"Guillermina Pally Calizaya","Contacto del/la responsable":1121616239,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, mircoles, jueves, viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":215,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"La Esperanza","Tipo de espacio":"Merendero","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Piletones","Direccin exacta":"Mz. 10- Casa 2",Responsable:"Mara Arellano Choque","Contacto del/la responsable":1160446585,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"martes y jueves","Horarios de funcionamiento":"12 a 14 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"Los Salteos","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ftima","Direccin exacta":"Pasaje la Esperanza Mz. 4 - Casa 20",Responsable:"Gabriela Anah Rodrguez","Contacto del/la responsable":1150558018,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes, mircoles, viernes","Horarios de funcionamiento":"16 a 18 hs - 19 a 21 hs","Cuantas raciones diarias entrega?":65,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"La Curva Popular","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Leiva+4554,+C1427+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5948392,-58.4526326,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb5f9cf542d43:0x1e4f7578a7f8c6d2!8m2!3d-34.5948392!4d-58.4526326!16s%2Fg%2F11hzxqhh1q?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.59463022592408, -58.45264776913285",Barrio:"Chacarita","Direccin exacta":"Leiva 4554",Responsable:"Walter Nuez","Contacto del/la responsable":1137759156,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"martes","Horarios de funcionamiento":"19 a 21 hs","Cuantas raciones diarias entrega?":80,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Centro Barrial Luna Ortiz","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Federico+Lacroze+4169,+C1427EDG+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5865582,-58.4549322,17z/data=!4m16!1m9!3m8!1s0x95bcb5e4f9e7f8c1:0x1a21b309bd2eb883!2sFederico+Lacroze+4169,+C1427EDG+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.586425!4d-58.455107!10e5!16s%2Fg%2F11c23537lg!3m5!1s0x95bcb5e4f9e7f8c1:0x1a21b309bd2eb883!8m2!3d-34.586425!4d-58.455107!16s%2Fg%2F11c23537lg?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.58620044997163, -58.45512529533697",Barrio:"Chacarita","Direccin exacta":"Federico Lacroze 4169",Responsable:"Sonia del Valle Sacayan","Contacto del/la responsable":1158037630,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"10 a 12 hs y 12 a 14 hs y 16 a 18 hs y 19 a 21 hs","Cuantas raciones diarias entrega?":280,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Almuerzo, merienda, desayuno y cena",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Naty","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/UzyF9brt7BrDfurZ6",Coordenadas:"-34.61272637069967, -58.39881632883648",Barrio:"Balvanera","Direccin exacta":"Pichincha 282",Responsable:"Edalia del Rocio Cama Sanchez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Martes y viernes","Horarios de funcionamiento":"12hs a 14hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":20,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2021,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Olla Alsina / Vientos del Pueblo","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Adolfo+Alsina+2163,+C1090AAG+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6117515,-58.3968911,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccae87894b801:0x184ade726f4bbf93!8m2!3d-34.6117515!4d-58.3968911!16s%2Fg%2F11cs8ygyzl?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.61157931393906, -58.396880371163505",Barrio:"Balvanera","Direccin exacta":"Adolfo Alsina 2163",Responsable:"Ada Luz Campos","Contacto del/la responsable":1164861470,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12hs a 14hs - 17hs a 19hs","Cuantas raciones diarias entrega?":600,"Cantidad de trabajadorxs":40,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Ao de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:"lunes y mier olla para personas en situac de calle. mier y vier merienda. el resto de los dias los trabajadores preparan su almuerzo ahi."},{"Espacio (nombre)":"Villa 31 / Las Mirabal","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Alpaca+1146,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5827958,-58.3836509,19z/data=!3m1!4b1!4m6!3m5!1s0x95bccaa8aaf3244b:0x684b0aa35a274c66!8m2!3d-34.5827969!4d-58.3830072!16s%2Fg%2F11lcbz4tsr?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.58274500538147, -58.38300988220911",Barrio:"Barrio Padre Mugica/Retiro","Direccin exacta":"Alpaca 1152 (Mza.4 Casa. 7 bis)",Responsable:"Luz Burgos","Contacto del/la responsable":1132701282,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, mircoles, viernes y sbados","Horarios de funcionamiento":"13hs a 18hs","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Ao de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:"Sabados se sirve la merienda en el espacio"},{"Espacio (nombre)":"Bartolina Sisa","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/nyAAFxayH784xxzM9",Coordenadas:"-34.6506988154815, -58.44100711349051",Barrio:"Barrio Padre Ricciardelli","Direccin exacta":"Av. Perito Moreno, Mza. 9 B casa 303",Responsable:"Vernica Mollericona Capajeo","Contacto del/la responsable":1161359299,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"8hs a 12hs","Cuantas raciones diarias entrega?":380,"Cantidad de trabajadorxs":36,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2013,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Atuel-Comedor Y Cac","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Atuel+310,+C1437EPD+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.641686,-58.4074259,17z/data=!4m6!3m5!1s0x95bccb0da2cbff3d:0x77829edc3a490973!8m2!3d-34.641686!4d-58.4074259!16s%2Fg%2F11c1y45cz5?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.6414962222898, -58.407447357672986",Barrio:"Parque Patricios","Direccin exacta":"ATUEL 310",Responsable:"Lazarte Graciela Liliana","Contacto del/la responsable":1138014633,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12:15hs a 13:15hs","Cuantas raciones diarias entrega?":250,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":'Comedor "Somos',"Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/dutTyBZdYcyx98DJ9",Coordenadas:"-34.580644404069844, -58.38822718220912",Barrio:"Barrio Padre Mugica/Retiro","Direccin exacta":"Aguara Guaz 2051, Barrio Padre Mjica",Responsable:"Paola Crispino","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a sbado","Horarios de funcionamiento":"11 a 18hs","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Desayuno, almuerzo y merienda",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Sol y Luna","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/pV5eSD7XKh9V8T9UA",Coordenadas:"-34.667674606292394, -58.493429328836505",Barrio:"Ciudad Oculta (Villa 15)","Direccin exacta":"Simn guerrero 3300 mz27 casa 29",Responsable:"Cynthia Ortiz","Contacto del/la responsable":1131645078,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a jueves","Horarios de funcionamiento":"12hs a 17:30hs","Cuantas raciones diarias entrega?":190,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Ao de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Olla Congreso","Tipo de espacio":"Olla popular","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/GRZcrJwoZvnfcyrZ7",Coordenadas:"-34.61029932074438, -58.3911537288365",Barrio:"Balvanera","Direccin exacta":"Plaza Congreso",Responsable:"Malena Rios","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes, mircoles y jueves","Horarios de funcionamiento":"16hs a 18hs","Cuantas raciones diarias entrega?":500,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Ao de inicio":2021,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Los 6 nietos","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/XD98eHQrxvmX8DrX7",Coordenadas:"-34.67370747260604, -58.46373572883618",Barrio:"Villa 20","Direccin exacta":"Mz 2 Casa 72",Responsable:"Maria Gonzalez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Sbados","Horarios de funcionamiento":"11hs a 15hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":'Comedor "La Patria Grande',"Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/4q31oDBGo9dNSizVA",Coordenadas:"-34.59946160082347, -58.4734023288365",Barrio:"La Paternal","Direccin exacta":"Espinosa 2899 sector 3 casa 111, La Carbonilla",Responsable:"Mara Flores","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Jueves y sbados","Horarios de funcionamiento":"15hs a 17hs (jue) - 11hs a 15hs (sb)","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Cooperativa Anuillan","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Osorio+4941,+C1427+DUC,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5953385,-58.470535,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb606e1c93291:0x675349c198b3d74a!8m2!3d-34.595343!4d-58.4659216!16s%2Fg%2F11f3vn_1ps?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.595153116295094, -58.46595378650949",Barrio:"La Paternal","Direccin exacta":"Osorio 4941",Responsable:"Ana Amador","Contacto del/la responsable":1169273099,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"8hs a 17hs","Cuantas raciones diarias entrega?":440,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno, almuerzo y merienda",Modalidad:"Ambas","Ao de inicio":2014,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Cooperativa Amanecer de los Cartoneros","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Jos%C3%A9+A.+Cortejarena+3151,+C1437ISK+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6433032,-58.4092732,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb0d42b190f9:0xa6347407c42449e5!8m2!3d-34.6433076!4d-58.4066983!16s%2Fg%2F11gr6h9pgb?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.6431001725836, -58.406730486509495",Barrio:"Parque Patricios","Direccin exacta":"Cortajarena 3151",Responsable:"Dominguez Arcangeli Marlene","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"8hs a 12hs - 16hs a 20hs","Cuantas raciones diarias entrega?":1e3,"Cantidad de trabajadorxs":25,"Prestacion alimentaria":"Almuerzo y cena",Modalidad:"Ambas","Ao de inicio":2014,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"CAC Once -BARRIAL ONCE","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Bartolom%C3%A9+Mitre+3366,+C1201AAL+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6094033,-58.4165869,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccaf4565b5f67:0x6cd06ef5178ae00a!8m2!3d-34.6094077!4d-58.414012!16s%2Fg%2F11csfvhcbc?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.60921784845045, -58.4140227288365",Barrio:"Once","Direccin exacta":"Bartolome Mitre 3366",Responsable:"Gonzalez Braian","Contacto del/la responsable":1130758854,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"10hs a 16hs","Cuantas raciones diarias entrega?":1200,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Ao de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:"Desayuno (lun, mier y vier) - Almuerzo (mar y jue)"},{"Espacio (nombre)":"Brasil","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Av.+Brasil+1517,+C1154ABA+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6286025,-58.3898224,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb24c99784bf:0x9ba4efb091302238!8m2!3d-34.6286069!4d-58.3872475!16s%2Fg%2F11j00msj3p?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62841265116379, -58.387258233426216",Barrio:"Constitucin","Direccin exacta":"Brasil 1517",Responsable:"Roxana Ridella","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Martes y viernes","Horarios de funcionamiento":"17-21hrs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Ambas","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Olla CTEP Comedor Constitucin","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com.ar/maps/place/Pedro+Echag%C3%BCe+1265,+C1130+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6296172,-58.3880474,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb3a9c838cd1:0xfa925f73d313e4b1!8m2!3d-34.6296217!4d-58.383434!16s%2Fg%2F11c4lh2g54?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62945387821929, -58.38343402481305",Barrio:"Constitucin","Direccin exacta":"Pedro Echage 1265",Responsable:"Sergio","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Ao de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"El Bajo Sin Limites","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Nuestramerica","Enlace punto gps":"https://goo.gl/maps/G1KGH5pqfN2kYzBC8",Coordenadas:"",Barrio:"Rivadavia 1 casa 660 A","Direccin exacta":"Esteban Bonorino 1957 (Bario Rivadavia 1 Casa 660 A)",Responsable:"Araceli Claros","Contacto del/la responsable":1140349822,"Redes institucionales (IG, FB, web)":'FB. "El Bajo Sin Limites',"Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes,miercoles y viernes","Horarios de funcionamiento":"15:00  a  20:30 Hrs.","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2022,"Cantidad de gente en lista de espera":"",Observaciones:"Detalles de ubicacion mural alegorico al lugar."},{"Espacio (nombre)":"Comedor nios del oeste","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Nuestramerica","Enlace punto gps":"https://maps.app.goo.gl/Z2WhPvU6893ERA9X8",Coordenadas:"",Barrio:"Lugano1 Y 2","Direccin exacta":"Martin Guerrico 5697 entre Av.Rica y Soldado de la Frontera",Responsable:"Karina Leticia Estrada","Contacto del/la responsable":1134636613,"Redes institucionales (IG, FB, web)":'FB. "Comedor Nios Del Oeste ',"Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"14:00 a 20:00 Hrs.","Cuantas raciones diarias entrega?":153,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Todo Por Los Nios","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Nuestramerica","Enlace punto gps":"https://maps.app.goo.gl/3919txLAvkCEL1cS9",Coordenadas:"",Barrio:"Padre Mujica","Direccin exacta":"Av.Castaares 6670",Responsable:"Lidia Beatriz Mino","Contacto del/la responsable":1144244749,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes,Miercoles,Viernes,Sabado y Domingo","Horarios de funcionamiento":"8:00 a 18:00 Hrs.","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Ao de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Refugio","Tipo de espacio":"Comedor","Organizacin a la que pertenece":"Nuestramerica","Enlace punto gps":"https://maps.app.goo.gl/653f2rd9Pq6FYYAR8",Coordenadas:"",Barrio:"Fatima","Direccin exacta":"Manzana 2 Casa 106",Responsable:"Rosa Ortega","Contacto del/la responsable":1144127841,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Das de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"9:00 a 14:00 Hrs.","Cuantas raciones diarias entrega?":280,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Ao de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""}];function Cv(n){return ha({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M39.906 27.188c-9.118 13.907-11.366 30.99-7.843 50.718 4.2 23.526 16.91 50.038 35.28 75 36.742 49.925 96.05 93.082 148.813 99.625l3.688.47 2.375 2.844L416.374 490.22c19.352 4.624 31.847 1.745 38.344-4.69 6.547-6.484 9.566-19.005 4.717-38.874L39.908 27.187zM414.97 29.5L306.47 138c-12 11.998-12.104 25.2-5.908 39.625l2.563 5.97-4.688 4.5L262 222.844l29.594 29.593 34.594-36.532 4.5-4.75 5.968 2.594c15.165 6.535 29.546 6.267 40.688-4.875l108.5-108.5L471.75 86.28l-70.563 70.532L388 143.595l70.53-70.53L443.5 58.03l-70.53 70.532-13.22-13.218 70.53-70.53-15.31-15.314zM210.936 271.563L25.53 448.469c-4.575 18.95-1.644 30.787 4.532 36.905 6.178 6.118 18.128 8.927 36.844 4.406l173.22-182.967-29.19-35.25z"},child:[]}]})(n)}function r4(n){return ha({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,112H32a8,8,0,0,0-8,8,104.35,104.35,0,0,0,56,92.28V216a16,16,0,0,0,16,16h64a16,16,0,0,0,16-16v-3.72A104.35,104.35,0,0,0,232,120,8,8,0,0,0,224,112Zm-59.34,88a8,8,0,0,0-4.66,7.27V216H96v-8.71A8,8,0,0,0,91.34,200a88.29,88.29,0,0,1-51-72H215.63A88.29,88.29,0,0,1,164.66,200ZM81.77,55c5.35-6.66,6.67-11.16,6.12-13.14-.42-1.49-2.41-2.26-2.43-2.26A8,8,0,0,1,88,24a8.11,8.11,0,0,1,2.38.36c1,.31,9.91,3.33,12.79,12.76,2.46,8.07-.55,17.45-8.94,27.89-5.35,6.66-6.67,11.16-6.12,13.14.42,1.49,2.37,2.24,2.39,2.25A8,8,0,0,1,88,96a8.11,8.11,0,0,1-2.38-.36c-1-.31-9.91-3.33-12.79-12.76C70.37,74.81,73.38,65.43,81.77,55Zm40,0c5.35-6.66,6.67-11.16,6.12-13.14-.42-1.49-2.41-2.26-2.43-2.26A8,8,0,0,1,128,24a8.11,8.11,0,0,1,2.38.36c1,.31,9.91,3.33,12.79,12.76,2.46,8.07-.55,17.45-8.94,27.89-5.35,6.66-6.67,11.16-6.12,13.14.42,1.49,2.37,2.24,2.39,2.25A8,8,0,0,1,128,96a8.11,8.11,0,0,1-2.38-.36c-1-.31-9.91-3.33-12.79-12.76C110.37,74.81,113.38,65.43,121.77,55Zm40,0c5.35-6.66,6.67-11.16,6.12-13.14-.42-1.49-2.41-2.26-2.43-2.26A8,8,0,0,1,168,24a8.11,8.11,0,0,1,2.38.36c1,.31,9.91,3.33,12.79,12.76,2.46,8.07-.55,17.45-8.94,27.89-5.35,6.66-6.67,11.16-6.12,13.14.42,1.49,2.37,2.24,2.39,2.25A8,8,0,0,1,168,96a8.11,8.11,0,0,1-2.38-.36c-1-.31-9.91-3.33-12.79-12.76C150.37,74.81,153.38,65.43,161.77,55Z"},child:[]}]})(n)}function a4(n){return ha({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M88,48V16a8,8,0,0,1,16,0V48a8,8,0,0,1-16,0Zm40,8a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V48A8,8,0,0,0,128,56Zm32,0a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V48A8,8,0,0,0,160,56Zm92.8,46.4L224,124v60a32,32,0,0,1-32,32H64a32,32,0,0,1-32-32V124L3.2,102.4a8,8,0,0,1,9.6-12.8L32,104V80a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8v24l19.2-14.4a8,8,0,0,1,9.6,12.8ZM208,88H48v96a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16Z"},child:[]}]})(n)}function o4(n){return ha({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 4V2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1s-1-.45-1-1zm7.36 3.05 1.41-1.42a.996.996 0 1 0-1.41-1.41l-1.41 1.42a.996.996 0 1 0 1.41 1.41zM22 11h-2c-.55 0-1 .45-1 1s.45 1 1 1h2c.55 0 1-.45 1-1s-.45-1-1-1zm-10 8c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1zM5.64 7.05 4.22 5.64c-.39-.39-.39-1.03 0-1.41s1.03-.39 1.41 0l1.41 1.41c.39.39.39 1.03 0 1.41s-1.02.39-1.4 0zm11.31 9.9a.996.996 0 0 0 0 1.41l1.41 1.41c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.41-1.41a.996.996 0 0 0-1.41 0zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm3.64 6.78 1.41-1.41c.39-.39.39-1.03 0-1.41s-1.03-.39-1.41 0l-1.41 1.41a.996.996 0 0 0 0 1.41c.38.39 1.02.39 1.41 0zM12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z"},child:[]}]})(n)}function s4(n){return ha({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 12.22V9l-5-2.5V5h2V3h-2V1h-2v2H9v2h2v1.5L6 9v3.22L2 14v8h9v-4c0-.55.45-1 1-1s1 .45 1 1v4h9v-8l-4-1.78zM20 20h-5v-2.04c0-1.69-1.35-3.06-3-3.06s-3 1.37-3 3.06V20H4v-4.79l4-1.81v-3.35L12 8l4 2.04v3.35l4 1.81V20z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"1.5"},child:[]}]})(n)}const l4=({prestacionAlimentaria:n})=>{let r=null,l="";switch(n){case"Comedor":r=it.jsx(Cv,{style:{color:"#69a7f5",fontSize:"15px"}}),l="#3469eb";break;case"Merendero":r=it.jsx(r4,{style:{color:"#9366eb",fontSize:"15px"}}),l="#ff8ce9";break;case"Olla popular":r=it.jsx(a4,{style:{color:"#39b00c",fontSize:"15px"}}),l="#afeb00";break;case"Parroquia":r=it.jsx(s4,{style:{color:"#f77b63",fontSize:"15px"}}),l="#eeff00";break;default:r=it.jsx(Cv,{style:{color:"#f77b63",fontSize:"15px"}}),l="#eeff00"}return it.jsx("div",{style:{background:l,borderRadius:"50%",padding:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"black",fontSize:"20px",maxWidth:"5vw",border:"solid 1px black"},children:r})};function c4({comedores:n,onSelect:r}){return it.jsx(it.Fragment,{children:n.map((l,p)=>{const[_,b]=l.Coordenadas.split(",").map(Number);return isNaN(_)||isNaN(b)||_===0||b===0?null:it.jsx(KA,{longitude:b,latitude:_,onClick:()=>r(l),children:it.jsx(l4,{prestacionAlimentaria:l["Tipo de espacio"]})},p)})})}const u4="_screen_b5bq8_1",d4="_dataSection_b5bq8_18",h4="_timeSection_b5bq8_18",p4="_titleBox_b5bq8_55",f4="_contactBox_b5bq8_83",m4="_socialIcons_b5bq8_91",g4="_prestacion_b5bq8_118",qu={screen:u4,dataSection:d4,timeSection:h4,titleBox:p4,contactBox:f4,socialIcons:m4,prestacion:g4};function Wl(n){return ha({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9.173 14.83a4 4 0 1 1 5.657 -5.657"},child:[]},{tag:"path",attr:{d:"M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914"},child:[]},{tag:"path",attr:{d:"M3 12h1"},child:[]},{tag:"path",attr:{d:"M12 3v1"},child:[]},{tag:"path",attr:{d:"M5.6 5.6l.7 .7"},child:[]},{tag:"path",attr:{d:"M3 21l18 -18"},child:[]}]})(n)}function y4(n){return ha({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 13h1"},child:[]},{tag:"path",attr:{d:"M20 13h1"},child:[]},{tag:"path",attr:{d:"M5.6 6.6l.7 .7"},child:[]},{tag:"path",attr:{d:"M18.4 6.6l-.7 .7"},child:[]},{tag:"path",attr:{d:"M8 13a4 4 0 1 1 8 0"},child:[]},{tag:"path",attr:{d:"M3 17h18"},child:[]},{tag:"path",attr:{d:"M7 20h5"},child:[]},{tag:"path",attr:{d:"M16 20h1"},child:[]},{tag:"path",attr:{d:"M12 5v-1"},child:[]}]})(n)}function _4(n){return ha({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M454.65 169.4A31.82 31.82 0 0 0 432 160h-64v-16a112 112 0 0 0-224 0v16H80a32 32 0 0 0-32 32v216c0 39 33 72 72 72h272a72.22 72.22 0 0 0 50.48-20.55 69.48 69.48 0 0 0 21.52-50.2V192a31.75 31.75 0 0 0-9.35-22.6zM176 144a80 80 0 0 1 160 0v16H176zm192 96a112 112 0 0 1-224 0v-16a16 16 0 0 1 32 0v16a80 80 0 0 0 160 0v-16a16 16 0 0 1 32 0z"},child:[]}]})(n)}function v4(n){return ha({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M340 480H106c-29.5 0-54.92-7.83-73.53-22.64C11.23 440.44 0 415.35 0 384.8c0-26.66 10.08-49.8 29.14-66.91 15.24-13.68 36.17-23.21 59-26.84.06 0 .08 0 .09-.05 6.44-39 23.83-72.09 50.31-95.68A140.24 140.24 0 0 1 232 160c30.23 0 58.48 9.39 81.71 27.17a142.24 142.24 0 0 1 42.19 53.21 16 16 0 0 0 11.19 9c26 5.61 48.4 17.29 65.17 34C453 304.11 464 331.71 464 363.2c0 32.85-13.13 62.87-37 84.52-22.89 20.82-53.8 32.28-87 32.28zm19-232.18zm28.89-26.14a168.8 168.8 0 0 1 34.76 14.71 4 4 0 0 0 5.82-2.44 97 97 0 0 0 3.53-26.68c-.39-52.43-43.48-95.22-95.91-95.27A95.46 95.46 0 0 0 281 129.33h-.06a3.38 3.38 0 0 0 1 6 162.45 162.45 0 0 1 51.28 26.4 173.92 173.92 0 0 1 45.32 52.51 16 16 0 0 0 9.35 7.44zM496 224h-32a16 16 0 0 1 0-32h32a16 16 0 0 1 0 32zM336 96a16 16 0 0 1-16-16V48a16 16 0 0 1 32 0v32a16 16 0 0 1-16 16zm-90.51 37.49a15.92 15.92 0 0 1-11.31-4.69l-22.63-22.62a16 16 0 0 1 22.63-22.63l22.62 22.63a16 16 0 0 1-11.31 27.31zm181.02 0a16 16 0 0 1-11.31-27.31l22.62-22.63a16 16 0 0 1 22.63 22.63l-22.63 22.62a15.92 15.92 0 0 1-11.31 4.69z"},child:[]}]})(n)}function x4(n){return ha({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"},child:[]},{tag:"path",attr:{d:"M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"},child:[]}]})(n)}const b4=({prestacionAlimentaria:n})=>{let r=null;switch(n){case"Almuerzo":r=it.jsx(o4,{style:{color:"yellow",fontSize:"14vh",filter:"drop-shadow(0 0 10px yellow)"}});break;case"Desayuno":r=it.jsx(y4,{style:{color:"orange",fontSize:"14vh",filter:"drop-shadow(0 0 10px orange)"}});break;case"Merienda":r=it.jsx(v4,{style:{color:"pink",fontSize:"14vh",filter:"drop-shadow(0 0 10px pink)"}});break;case"Cena":r=it.jsx(x4,{style:{color:"violet",fontSize:"14vh",filter:"drop-shadow(0 0 10px violet)"}});break;case"Viandas":r=it.jsx(_4,{style:{color:"#4dd5d9",fontSize:"14vh",filter:"drop-shadow(0 0 10px #4dd5d9)"}});break;case"Almuerzo y Merienda":r=it.jsx(Wl,{style:{color:"green",fontSize:"14vh",filter:"drop-shadow(0 0 10px yellow)"}});break;case"Desayuno y Almuerzo":r=it.jsx(Wl,{style:{color:"pink",fontSize:"14vh",filter:"drop-shadow(0 0 10px pink)"}});break;case"Desayuno y Cena":r=it.jsx(Wl,{style:{color:"blue",fontSize:"14vh",filter:"drop-shadow(0 0 10px blue)"}});break;case"Cena y Merienda":r=it.jsx(Wl,{style:{color:"violet",fontSize:"14vh",filter:"drop-shadow(0 0 10px violet)"}});break;case"Almuerzo, Merienda, Desayuno y Cena":r=it.jsx(Wl,{style:{color:"orange",fontSize:"14vh",filter:"drop-shadow(0 0 10px orange)"}});break;default:r=it.jsx(Wl,{style:{color:"yellow",fontSize:"14vh",filter:"drop-shadow(0 0 10px yellow)"}})}return it.jsx("div",{style:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"left",color:"black",marginTop:"-8vh",opacity:.8,padding:"10px"},children:r})};function w4({comedor:n}){if(!n)return null;const r=_=>{switch(_){case"Comedor":return"#69a7f5";case"Merendero":return"#9366eb";case"Olla popular":return"#39b00c";case"Parroquia":return"#f77b63";default:return"#f27025"}},l=_=>{switch(_){case"Comedor":return"#3469eb";case"Merendero":return"#ff8ce9";case"Olla popular":return"#afeb00";case"Parroquia":return"#eeff00";default:return"#eeff00"}},p=n["Tipo de espacio"];return it.jsxs("div",{className:qu.screen,children:[it.jsxs("div",{className:qu.timeSection,style:{backgroundColor:r(p)},children:[it.jsx(b4,{prestacionAlimentaria:n["Prestacion alimentaria"]}),n["Prestacion alimentaria"]&&it.jsx("h2",{children:n["Prestacion alimentaria"]}),n["Frecuencia de funcionamiento"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Frecuencia:"})," ",n["Frecuencia de funcionamiento"]]}),n["Das de funcionamiento"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Das:"})," ",n["Das de funcionamiento"]]}),n["Horarios de funcionamiento"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Horarios:"})," ",n["Horarios de funcionamiento"]]})]}),it.jsxs("div",{className:qu.dataSection,children:[it.jsxs("div",{className:qu.titleBox,style:{background:l(p)},children:[it.jsx("h3",{style:{color:r(p)},children:n["Espacio (nombre)"]||""}),n["Organizacin a la que pertenece"]&&it.jsxs("p",{children:["Organizacin: ",it.jsx("strong",{children:n["Organizacin a la que pertenece"]})]}),n["Direccin exacta"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Direccin:"})," ",n["Direccin exacta"],", ",n.Barrio&&it.jsx("strong",{children:n.Barrio})]})]}),it.jsxs("div",{className:qu.contactBox,children:[n.Responsable&&it.jsxs("p",{children:[it.jsx("strong",{children:"Responsable:"})," ",n.Responsable]}),n["Contacto del/la responsable"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Contacto:"})," ",n["Contacto del/la responsable"]]})]})]})]})}function C4(){const n={initialViewState:{longitude:58.3816,latitude:-34.6037,zoom:1.5,minZoom:1,maxZoom:25,maxBounds:[[-58.58,-34.8],[-58.3,-34.56]]},style:{width:"100vw",height:"100vh"}},[r,l]=Me.useState(null),p=_=>{l(_)};return it.jsx("div",{className:n4.mapa,children:it.jsxs(XA,{...n,style:{width:"100vw",height:"100vh"},mapStyle:"https://tiles.stadiamaps.com/styles/alidade_smooth.json",mapLib:iw,mapOptions:{},children:[it.jsx(JA,{position:"top-left"}),it.jsx(c4,{comedores:i4,onSelect:p}),r&&it.jsx(w4,{comedor:r})]})})}function S4(){return it.jsx(it.Fragment,{children:it.jsx("h3",{children:"V 0.1"})})}function E4(){return it.jsxs(it.Fragment,{children:[it.jsx(xA,{}),it.jsx(C4,{}),it.jsx(S4,{})]})}const A4="_container_1ts3g_1",T4="_image_1ts3g_6",M4="_title_1ts3g_13",I4="_subtitle_1ts3g_18",P4="_description_1ts3g_24",Gu={container:A4,image:T4,title:M4,subtitle:I4,description:P4},z4="/MapaDeLosComedores/assets/comedores-DjyFd6P9.jpg";function D4(){return it.jsxs("div",{className:Gu.container,children:[it.jsx("img",{src:z4,alt:"Imagen de comedores",className:Gu.image}),it.jsx("h1",{className:Gu.title,children:"MAPA DE LOS COMEDORES"}),it.jsx("h2",{className:Gu.subtitle,children:"La ciudad solidaria"}),it.jsx("p",{className:Gu.description,children:"Somos un conjunto de organizaciones de la sociedad civil de la Ciudad de Buenos Aires que todos los das sostenemos comedores y merenderos comunitarios. Esperamos que este Mapa de los Comedores sea un aporte a la visibilizacin y valoracin de cada persona que dedica su tiempo y su trabajo para tenderle una mano a miles de otras en estos momentos difciles. Buenos Aires es una Ciudad solidaria.."})]})}const k4=ZE([{path:"/",element:it.jsx(lA,{}),children:[{path:"/",element:it.jsx(E4,{})},{path:"/us",element:it.jsx(D4,{})}]}]);Ym.createRoot(document.getElementById("root")).render(it.jsx(to.StrictMode,{children:it.jsx(nA,{router:k4})}));
